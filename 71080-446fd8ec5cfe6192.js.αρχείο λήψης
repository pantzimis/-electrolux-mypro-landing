(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71080],{39134:()=>{},64240:(e,t,i)=>{"use strict";i.d(t,{e:()=>l});var a=i(2635),r=i(15585),n=i(99515);let s=["#FF454B","#FF8F50","#FAC819","#47C279","#14B8A6","#3B82F6","#8B5CF6","#EC4899"];function l(e){let{className:t,size:i=24,onClick:l,avatar:o,name:c}=e,d=c.charAt(0),u=(0,n.useMemo)(()=>{let e=c.charCodeAt(0)%s.length;return s[e]},[c]);return o?(0,a.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center font-bold flex-shrink-0",l&&"cursor-pointer",t),onClick:l,style:{width:i,height:i},children:(0,a.jsx)("img",{src:o,className:(0,r.cn)("w-full h-full object-cover overflow-hidden ")})}):(0,a.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center font-bold flex-shrink-0",l&&"cursor-pointer",t),style:{width:i,height:i,fontSize:Math.floor(.5*i),color:"rgba(255, 255, 255, 0.90)",backgroundColor:u},onClick:l,children:d.toUpperCase()})}},41047:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});var a=i(2635),r=i(15585),n=i(21284),s=i(23757),l=i(18431),o=i(64240);function c(e){let{size:t=24,className:i,onClick:c}=e,d=(0,n.GV)(s.R.selectors.isTeamAccount),u=(0,n.GV)(l.u.selectors.currentTeamInfo);if(!d||!u)return null;let{name:p,avatar:m}=u;return(0,a.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center rounded-[8px] font-bold flex-shrink-0 overflow-hidden border border-[var(--border-dark)]",c&&"cursor-pointer",i),onClick:c,children:(0,a.jsx)(o.e,{name:p,avatar:m,size:t})})}},35497:(e,t,i)=>{"use strict";i.d(t,{H8:()=>f});var a=i(2635),r=i(15585),n=i(93165),s=i(81762),l=i(61086),o=i(23757),c=i(86154),d=i(84974),u=i(53708),p=i(95040),m=i(88672),x=i(64240);function f(e){let{className:t,size:i=24,onClick:n,badgeSize:s="default"}=e,l=(0,m.d4)(o.R.selectors.userName)||"",c=(0,m.d4)(o.R.selectors.userAvatar),d=(0,m.d4)(o.R.selectors.isTeamAccount);return(0,a.jsxs)("div",{className:(0,r.cn)("relative flex items-center justify-center font-bold cursor-pointer flex-shrink-0",t),onClick:n,children:[(0,a.jsx)(x.e,{name:l,avatar:c,size:i,className:"rounded-full overflow-hidden"}),d?(0,a.jsx)(v,{size:s}):(0,a.jsx)(h,{size:s})]})}function h(e){let{size:t}=e,i=(0,m.d4)(o.R.selectors.membershipVersion),u=null;return(i===c.b.Lite?u=n.A:i===c.b.Casual?u=l.A:i===c.b.Pro&&(u=s.A),u)?(0,a.jsx)("img",{src:d.f.getImgSrc(u),className:(0,r.cn)("absolute bottom-[-2px] right-[-2px] w-[18px] h-[18px]",{"w-[12px] h-[12px]":"small"===t,"w-[18px] h-[18px]":"default"===t,"w-[20px] h-[20px]":"large"===t}),alt:"vip"}):null}function v(e){let{size:t}=e,i=(0,u.W)(()=>"small"===t?7.5:"default"===t?10:14);return(0,a.jsx)("div",{className:(0,r.cn)("absolute p-[3px] bottom-[-2px] right-[-2px] flex justify-center items-center"," rounded-full border-[1px] border-[var(--background-menu-white)] bg-[#1A1A19]","small"===t&&"p-[2.25px]"),children:(0,a.jsx)(p.O,{size:i,color:"var(--icon-white)"})})}},87001:(e,t,i)=>{"use strict";i.d(t,{eu:()=>a.e});var a=i(64240);i(41047),i(35497)},76743:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var a=i(2635),r=i(15585),n=i(48734),s=i(7487);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap font-medium transition-colors hover:opacity-90 active:opacity-80",{variants:{color:{brand:"bg-[var(--Button-primary-brand)] text-[var(--text-white)]",black:"bg-[var(--Button-primary-black)] text-[var(--text-onblack)]",danger:"bg-[var(--function-error)] text-[var(--text-white)]",gray:"bg-[var(--Button-secondary-gray)] text-[var(--text-primary)]",blue:"bg-[var(--fill-blue)] text-[var(--text-blue)]",white:"bg-[var(--Button-primary-white)] text-[var(--text-primary)] shadow-[0px_0.5px_3px_0px_var(--shadow-S)] hover:opacity-70 active:hover-60"},size:{extraSmall:"h-[28px] px-[8px] rounded-[8px] gap-[4px] text-[13px] leading-[18px]",small:"h-[32px] px-[8px] rounded-[8px] gap-[4px] text-[13px] leading-[18px]",medium:"h-[36px] px-[12px] rounded-[10px] gap-[6px] text-sm",large:"h-[40px] px-[16px] rounded-[10px] gap-[6px] text-sm",extraLarge:"h-[48px] px-[24px] rounded-[48px] gap-[6px] text-base font-[500]"},variant:{default:"min-w-16",outline:"min-w-16 outline outline-1 -outline-offset-1 hover:bg-[var(--fill-tsp-white-light)]",text:"hover:opacity-80 bg-inherit p-0 h-max",link:"hover:opacity-80 bg-inherit p-0 h-max underline leading-[22px]",icon:"p-0"},shape:{default:"",round:"rounded-full"},disabled:{true:"opacity-50 cursor-not-allowed hover:opacity-50 active:opacity-50"},loading:{true:"opacity-50 cursor-not-allowed hover:opacity-50 active:opacity-50"}},defaultVariants:{variant:"default",size:"medium",color:"gray",shape:"default",disabled:!1},compoundVariants:[{variant:"outline",color:"gray",className:"text-[var(--text-primary)] outline-[var(--border-btn-main)] bg-transparent"},{variant:"outline",color:"gray",disabled:!1,loading:!1,className:"hover:bg-[var(--fill-tsp-white-light)]"},{variant:"outline",color:"danger",className:"text-[var(--function-error)] outline-[var(--Button-secondary-error-border)] bg-transparent"},{variant:"outline",color:"danger",disabled:!1,loading:!1,className:"hover:bg-[var(--fill-tsp-white-light)]"},{variant:"icon",size:"small",className:"w-[32px] h-[32px]"},{variant:"icon",size:"medium",className:"w-[36px] h-[36px]"},{variant:"icon",size:"large",className:"w-[40px] h-[40px]"},{variant:"link",color:"brand",className:"text-[var(--text-blue)]"},{variant:"text",color:"brand",className:"text-[var(--text-blue)]"},{shape:"round",size:"small",variant:"default",className:"px-3"}]}),o=e=>{let{color:t="gray",variant:i="default",size:n="medium",shape:o="default",children:c,icon:d,iconPosition:u="left",onClick:p,disabled:m,className:x,loading:f,loadingColor:h,...v}=e;return(0,a.jsxs)("button",{className:(0,r.cn)(l({variant:i,size:n,color:t,disabled:m,shape:o,loading:f}),x),onClick:p,disabled:m||f,...v,children:[d&&!f&&"left"===u&&d,f&&(0,a.jsx)(s.R,{color:h||("gray"===t?"var(--icon-tertiary)":"brand"===t?"var(--icon-white)":"black"===t?"var(--text-onblack)":"danger"===t?"outline"===i?"var(--function-error)":"var(--icon-white)":"white"===t?"var(--icon-primary)":"var(--icon-white)")}),c,d&&!f&&"right"===u&&d]})}},90293:(e,t,i)=>{"use strict";i.d(t,{p:()=>x});var a=i(2635),r=i(15585),n=i(15038),s=i(53708),l=i(75958),o=i(9205),c=i(57271),d=i(99515),u=i(76743),p=i(33890),m=i(41661);function x(e){let{title:t,description:i,onConfirm:x,onCancel:f,variant:h="default",type:v="default",cancelText:g=c.I.t("Cancel"),confirmText:y="default"===h?c.I.t("Confirm"):c.I.t("Delete"),isDisabledLinkedToInput:w=!1,inputInitialValue:b="",enterKeyConfirm:C,inputProps:j,prefixContent:S,content:I,className:N="",autoFocusButton:k}=e,T=()=>{if(null==f||f(),e.onDisposed(),"alert"===h&&!e.onCancel){var t;null===(t=e.onConfirm)||void 0===t||t.call(e)}},[_,M]=(0,d.useState)(!1),[L,P]=(0,d.useState)(b),E=(0,d.useRef)(null);(0,d.useEffect)(()=>{"input"===v&&setTimeout(()=>{var e;null===(e=E.current)||void 0===e||e.select()},100)},[v]);let A=(0,l.w)(async()=>{if(x){M(!0);try{await x("input"===v?L:void 0)&&T()}catch(e){(0,o.oR)({title:n.P.formatErrorToString(e),variant:"warning"})}finally{M(!1)}}});(0,d.useEffect)(()=>{if(!C)return;let e=e=>{"Enter"===e.key&&A()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[C,A]);let R=(0,s.W)(()=>!!_||"input"===v&&!!w&&0===L.trim().length);return(0,a.jsxs)(p.l,{title:t,description:i,onDisposed:T,className:(0,r.cn)("w-[400px]",N),headerClassName:(0,r.cn)("px-5",e.headerClassName),children:[null!=S?S:null,"input"===v&&(0,a.jsx)("div",{className:"px-5 pb-3",children:(0,a.jsx)(m.p,{onInputRef:E,value:L,onKeyDown:e=>{"Enter"===e.key&&A()},onChange:e=>{P(e.target.value)},onClear:()=>{P("")},...j})}),I&&(0,a.jsx)("div",{className:(0,r.cn)("px-5 py-3","text-[var(--text-tertiary)] text-sm"),children:I}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 p-5",children:["alert"!==h&&(0,a.jsx)(u.A,{variant:"outline",color:"gray",size:"medium",onClick:()=>{null==f||f(),T()},disabled:_,children:g}),(0,a.jsx)(u.A,{variant:"default",color:"danger"===h?"danger":"black",size:"medium",onClick:A,disabled:R,loading:_,autoFocus:"confirm"===k,children:y})]})]})}},55185:(e,t,i)=>{"use strict";i.d(t,{z:()=>u});var a=i(2635),r=i(53708),n=i(31867),s=i(73677),l=i(10065),o=i(23579),c=i(99515);function d(e){let{name:t,size:i,className:r}=e,n=i>=24?12:Math.max(8,Math.floor(.35*i)),s=Math.ceil(.8333*i),l=t.charAt(0).toUpperCase();return(0,a.jsx)("div",{style:{width:i,height:i},className:"flex items-center justify-center font-medium text-[var(--text-secondary)] ".concat(r||""),children:(0,a.jsx)("span",{style:{width:s,height:s,fontSize:"".concat(n,"px"),lineHeight:"".concat(s,"px")},className:"flex items-center justify-center rounded bg-[var(--fill-tsp-white-main)]",children:l})})}function u(e){let{uid:t,size:i,className:u,defaultIconUrl:p}=e,{isDark:m}=(0,n.D)(),[x,f]=(0,c.useState)(!1),h=(0,s.GV)(e=>l.h.selectors.connectorByUid(e,t)),v=(0,r.W)(()=>p||h&&(m&&h.iconUrlDark||h.iconUrl)||null);return((0,c.useEffect)(()=>{f(!1)},[v]),x&&(null==h?void 0:h.name))?(0,a.jsx)(d,{name:h.name,size:i,className:u}):x?(0,a.jsx)(o.A,{size:i,color:"var(--icon-primary)"}):v?(0,a.jsx)("img",{src:v,onError:()=>f(!0),alt:(null==h?void 0:h.name)||"Connector",className:u,style:{width:i,height:i}}):(null==h?void 0:h.name)?(0,a.jsx)(d,{name:h.name,size:i,className:u}):(0,a.jsx)(o.A,{size:i,color:"var(--icon-primary)"})}},33890:(e,t,i)=>{"use strict";i.d(t,{l:()=>h,M:()=>f});var a=i(2635),r=i(15585),n=i(75772),s=i(75958);function l(e){return(0,a.jsx)("svg",{className:(0,r.cn)("icon-manus-arrow-left",e.className),width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.6368 5.36517C15.9883 5.71664 15.9883 6.28649 15.6368 6.63796L10.2732 12.0016L15.6368 17.3652C15.9883 17.7166 15.9883 18.2865 15.6368 18.638C15.2853 18.9894 14.7155 18.9894 14.364 18.638L8.36399 12.638C8.01252 12.2865 8.01252 11.7166 8.36399 11.3652L14.364 5.36517C14.7155 5.01369 15.2853 5.01369 15.6368 5.36517Z",fill:e.color||"currentColor"})})}var o=i(33605),c=i(57271),d=i(8398),u=i(99515),p=i(17260),m=i(37114);let x=e=>{var t,i;let{container:a,children:r}=e,[n,s]=u.useState(!1);(0,u.useLayoutEffect)(()=>s(!0),[]);let l=a||n&&(null===(i=globalThis)||void 0===i?void 0:null===(t=i.document)||void 0===t?void 0:t.body);return l?m.createPortal(r,l):null},f=(0,u.createContext)(null);function h(e){var t,i,m;let{closeIconVisible:f=!0,style:h,closeOnMaskClick:v=!0,overlayChildren:g}=e,[y,w]=(0,u.useState)(!0),b=(0,s.w)(()=>{w(!1),e.onDisposed()});return y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{container:n.b.getDialogRoot(),children:(0,a.jsx)(o.zR,{lockScroll:!0,className:(0,r.cn)("w-full h-full bg-black/60 backdrop-blur-[4px] fixed inset-0","data-[state=open]:animate-dialog-bg-fade-in","data-[state=closed]:animate-dialog-bg-fade-out",e.overlayClassName||(null===(t=e.classNames)||void 0===t?void 0:t.overlay)),onClick:()=>{v&&e.onDisposed()},children:g})}),(0,a.jsx)(x,{container:n.b.getDialogRoot(),children:(0,a.jsxs)("div",{role:"dialog",className:(0,r.cn)("bg-[var(--background-menu-white)] rounded-[20px] border border-white/5","fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","max-w-[95%] max-h-[95%] overflow-auto ","data-[state=open]:animate-dialog-slide-in-from-bottom","data-[state=closed]:animate-dialog-slide-out-to-bottom",e.className||(null===(i=e.classNames)||void 0===i?void 0:i.content)),style:{width:e.width,...h},children:[(0,a.jsxs)("div",{className:(0,r.cn)("pt-5 px-[24px] pb-[10px]",e.hasBack&&"ps-3",f&&"pe-8",e.headerClassName||(null===(m=e.classNames)||void 0===m?void 0:m.header)),children:[(0,a.jsxs)("h3",{className:(0,r.cn)("text-[var(--text-primary)] text-[18px] leading-[24px] font-semibold","flex items-center",e.headerTitleClassName),children:[e.hasBack&&(0,a.jsx)(p.K,{icon:l,title:c.I.t("Back"),iconClassName:"w-6 h-6 text-[var(--icon-primary)]",className:(0,r.cn)("me-[4px]"),onClick:()=>{var t;null===(t=e.onBack)||void 0===t||t.call(e)}}),e.title]}),!!e.description&&(0,a.jsx)("p",{className:(0,r.cn)("mt-[5px] text-[var(--text-tertiary)] text-[13px] font-normal leading-[18px]",e.hasBack&&"ps-3"),children:e.description}),f&&(0,a.jsx)(p.K,{className:(0,r.cn)("absolute top-[18px] ltr:right-[20px] rtl:left-[20px]",e.closeIconClass),title:c.I.t("Close"),icon:d.A,iconClassName:e.closeIconBtnClass,onClick:()=>{b()}})]}),e.children]})})]})}h.displayName="Dialog"},38933:(e,t,i)=>{"use strict";i.d(t,{r:()=>c});var a=i(2635),r=i(15585),n=i(48046),s=i(99515),l=i(78308),o=i(1972);function c(e){let{className:t,items:i=[],width:c,children:d,childrenClassName:u,headerSlot:p}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("bg-[var(--background-menu-white)] shadow-[0_4px_11px_0px_var(--shadow-S)]","rounded-xl border border-[var(--border-dark)] dark:border-[var(--border-light)]","min-w-[110px]",t),style:{width:c},children:[p,(0,a.jsxs)("div",{className:(0,r.cn)("p-1",u),children:[i.map((e,t)=>{if(e.hidden)return null;let i="error"===e.variant,c=(0,a.jsxs)(o._,{className:(0,r.cn)("text-[".concat(i?"var(--function-error)":"var(--text-secondary)","]"),e.className),icon:e.icon,iconColor:e.iconColor||(i?"var(--function-error)":"var(--icon-secondary)"),iconSize:16,onClick:e.onClick,children:[e.label,(0,a.jsx)(n.A,{className:(0,r.cn)("ml-auto",!e.checked&&"invisible"),size:16,color:"var(--icon-primary)"})]});return e.tooltipTitle?(0,a.jsx)(l.m,{placement:"right",title:e.tooltipTitle,children:(0,a.jsx)("div",{children:c})},"".concat(t,"-tooltip")):(0,a.jsx)(s.Fragment,{children:c},"".concat(t,"-menu"))}),d]})]})}},1972:(e,t,i)=>{"use strict";i.d(t,{_:()=>l});var a=i(2635),r=i(15585),n=i(48046),s=i(7487);function l(e){let{children:t,icon:i,iconColor:l,iconSize:o=16,className:c,activeClassName:d,onClick:u,active:p,asChild:m,childrenWrapperClassName:x,loading:f,...h}=e;return(0,a.jsxs)("div",{onClick:u,className:(0,r.cn)("flex items-center gap-2 w-full p-2 rounded-[8px] hover:bg-[var(--fill-tsp-white-main)] cursor-pointer","text-sm text-[var(--text-secondary)]",p&&"bg-[var(--fill-tsp-white-main)] text-[var(--text-primary)",p&&d,c),...m?h:null,children:[(0,a.jsxs)("div",{className:(0,r.cn)("flex-1 flex items-center gap-2",x),children:[f&&(0,a.jsx)(s.R,{size:o,color:l}),i&&!f&&(0,a.jsx)(i,{color:l,size:o}),t]}),p&&(0,a.jsx)(n.A,{size:o,color:"currentColor"})]})}},683:(e,t,i)=>{"use strict";i.d(t,{y:()=>c});var a=i(2635),r=i(15585);let n=e=>{let{size:t=24}=e;return(0,a.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.29331 2.29289C2.68383 1.90237 3.317 1.90237 3.70752 2.29289L7.34625 5.93162C7.40455 5.97793 7.45837 6.03139 7.50637 6.09174L17.8974 16.4828C17.9652 16.5347 18.0272 16.5962 18.0813 16.6667L21.7075 20.2929C22.098 20.6834 22.098 21.3166 21.7075 21.7071C21.317 22.0976 20.6838 22.0976 20.2933 21.7071L17.1396 18.5534C15.6947 19.3988 13.972 20 12.0004 20C9.13874 20 6.80576 18.7353 5.07716 17.2926C3.35091 15.8518 2.16738 14.1857 1.57463 13.2472C1.5668 13.2348 1.55876 13.2221 1.55055 13.2092C1.43291 13.024 1.28018 12.7836 1.20298 12.4467C1.14065 12.1748 1.14067 11.825 1.20303 11.553C1.28028 11.2161 1.43344 10.9751 1.55139 10.7895C1.55967 10.7765 1.56777 10.7637 1.57567 10.7512C2.17804 9.79766 3.40132 8.07525 5.19576 6.60955L2.29331 3.70711C1.90278 3.31658 1.90278 2.68342 2.29331 2.29289ZM6.61828 8.03208C4.97911 9.32619 3.83406 10.921 3.26654 11.8194C3.23105 11.8755 3.20617 11.915 3.18537 11.9492C3.17149 11.9721 3.16235 11.9878 3.15625 11.9988C3.15625 11.9992 3.15625 11.9996 3.15625 12C3.15625 12.0004 3.15625 12.0008 3.15625 12.0012C3.16227 12.012 3.17127 12.0276 3.1849 12.05C3.20556 12.084 3.23029 12.1232 3.26563 12.1792C3.7983 13.0226 4.8524 14.4999 6.35869 15.7571C7.86263 17.0123 9.75708 18 12.0004 18C13.3533 18 14.5778 17.6414 15.6674 17.0812L14.0322 15.446C13.4368 15.7977 12.7418 16 12.0004 16C9.79128 16 8.00042 14.2091 8.00042 12C8.00042 11.2586 8.20271 10.5636 8.55438 9.96818L6.61828 8.03208ZM10.068 11.4818C10.0239 11.647 10.0004 11.8207 10.0004 12C10.0004 13.1046 10.8958 14 12.0004 14C12.1798 14 12.3534 13.9765 12.5186 13.9324L10.068 11.4818ZM12.0004 6C11.6186 6 11.2482 6.02849 10.8892 6.08156C10.3429 6.16234 9.83448 5.78492 9.7537 5.23858C9.67292 4.69223 10.0503 4.18385 10.5967 4.10307C11.0505 4.03597 11.5187 4 12.0004 4C14.8621 4 17.1951 5.26472 18.9237 6.70743C20.6499 8.14818 21.8335 9.81429 22.4262 10.7528C22.434 10.7652 22.4421 10.7779 22.4503 10.7908C22.5679 10.976 22.7207 11.2164 22.7979 11.5533C22.8602 11.8253 22.8602 12.1751 22.7978 12.4471C22.7205 12.7841 22.5671 13.0254 22.449 13.2113C22.4407 13.2243 22.4325 13.2371 22.4246 13.2497C22.1063 13.7536 21.6232 14.4581 20.9832 15.2224C20.6287 15.6459 19.998 15.7017 19.5745 15.3472C19.1511 14.9926 19.0952 14.3619 19.4498 13.9385C20.0211 13.2561 20.4524 12.6267 20.7338 12.1814C20.7694 12.1251 20.7943 12.0855 20.8152 12.0512C20.8292 12.0281 20.8384 12.0122 20.8446 12.0012C20.8446 12.0008 20.8446 12.0004 20.8446 12C20.8446 11.9996 20.8446 11.9992 20.8446 11.9988C20.8386 11.988 20.8296 11.9725 20.8159 11.95C20.7953 11.916 20.7705 11.8768 20.7352 11.8208C20.2025 10.9774 19.1484 9.50007 17.6421 8.24291C16.1382 6.9877 14.2437 6 12.0004 6Z",fill:"currentColor"})})},s=e=>{let{size:t=24}=e;return(0,a.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.35868 8.24291C4.85239 9.50007 3.79828 10.9774 3.26562 11.8208C3.23028 11.8768 3.20556 11.916 3.1849 11.95C3.17127 11.9724 3.16227 11.988 3.15625 11.9988C3.15625 11.9992 3.15625 11.9996 3.15625 12C3.15625 12.0004 3.15625 12.0008 3.15625 12.0012C3.16227 12.012 3.17127 12.0276 3.1849 12.05C3.20556 12.084 3.23028 12.1232 3.26562 12.1792C3.79828 13.0226 4.85239 14.4999 6.35868 15.7571C7.86262 17.0123 9.75707 18 12.0004 18C14.2437 18 16.1382 17.0123 17.6421 15.7571C19.1484 14.4999 20.2025 13.0226 20.7352 12.1792C20.7705 12.1232 20.7952 12.084 20.8159 12.05C20.8295 12.0276 20.8385 12.012 20.8446 12.0012C20.8446 12.0008 20.8446 12.0004 20.8446 12C20.8446 11.9996 20.8446 11.9992 20.8446 11.9988C20.8385 11.988 20.8295 11.9724 20.8159 11.95C20.7952 11.916 20.7705 11.8768 20.7352 11.8208C20.2025 10.9774 19.1484 9.50007 17.6421 8.24291C16.1382 6.9877 14.2437 6 12.0004 6C9.75707 6 7.86262 6.9877 6.35868 8.24291ZM5.07715 6.70743C6.80575 5.26472 9.13873 4 12.0004 4C14.8621 4 17.1951 5.26472 18.9237 6.70743C20.6499 8.14818 21.8334 9.81429 22.4262 10.7528C22.434 10.7653 22.4421 10.7779 22.4503 10.7908C22.5679 10.976 22.7206 11.2164 22.7978 11.5532C22.8601 11.8251 22.8601 12.1749 22.7978 12.4468C22.7206 12.7836 22.5679 13.024 22.4503 13.2092C22.4421 13.2221 22.434 13.2347 22.4262 13.2472C21.8334 14.1857 20.6499 15.8518 18.9237 17.2926C17.1951 18.7353 14.8621 20 12.0004 20C9.13873 20 6.80575 18.7353 5.07715 17.2926C3.3509 15.8518 2.16737 14.1857 1.57462 13.2472C1.56679 13.2348 1.55875 13.2221 1.55054 13.2092C1.43292 13.024 1.2802 12.7836 1.203 12.4468C1.14067 12.1749 1.14067 11.8251 1.203 11.5532C1.2802 11.2164 1.43292 10.976 1.55054 10.7908C1.55875 10.7779 1.56679 10.7652 1.57462 10.7528C2.16737 9.81429 3.3509 8.14818 5.07715 6.70743ZM12.0004 10C10.8958 10 10.0004 10.8954 10.0004 12C10.0004 13.1046 10.8958 14 12.0004 14C13.105 14 14.0004 13.1046 14.0004 12C14.0004 10.8954 13.105 10 12.0004 10ZM8.0004 12C8.0004 9.79086 9.79126 8 12.0004 8C14.2095 8 16.0004 9.79086 16.0004 12C16.0004 14.2091 14.2095 16 12.0004 16C9.79126 16 8.0004 14.2091 8.0004 12Z",fill:"currentColor"})})};var l=i(99515),o=i(41661);function c(e){let{className:t,error:i,type:n,onEnter:s,iconSize:c,...u}=e,[p,m]=(0,l.useState)(!1),x="password"===n;return(0,a.jsxs)("div",{className:(0,r.cn)("relative w-full"),children:[(0,a.jsx)(o.p,{error:!!i,paddingSize:"thin",bgColor:"white",className:(0,r.cn)("pr-[40px]",t),type:x?p?"text":"password":n,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||null==s||s()},...u}),x&&(0,a.jsx)(d,{size:"large"===c?20:16,className:"large"===c?"right-[10px]":"",visible:p,onClick:()=>{m(!p)}})]})}function d(e){let{className:t,visible:i,onClick:l,size:o=16}=e;return(0,a.jsx)("div",{className:(0,r.cn)("text-[var(--icon-tertiary)] absolute z-30 right-[6px] top-[50%] p-[6px] rounded-md transform -translate-y-1/2 cursor-pointer hover:text-[--icon-primary] active:opacity-90 transition-all",t),onClick:e=>{e.stopPropagation(),e.preventDefault(),l()},children:i?(0,a.jsx)(s,{size:o}):(0,a.jsx)(n,{size:o})})}},17260:(e,t,i)=>{"use strict";i.d(t,{K:()=>s});var a=i(2635),r=i(78308),n=i(15585);function s(e){let{icon:t,title:i,iconClassName:s,className:l,tooltipSide:o,disabled:c,variant:d,size:u,bg:p="gray",children:m,...x}=e,f=(0,a.jsxs)("div",{className:(0,n.cn)("flex h-7 w-7 items-center justify-center cursor-pointer rounded-md","gray"===p?"hover:bg-[var(--fill-tsp-gray-main)]":"","white"===p?"bg-[var(--Button-primary-white)] shadow-[0px_0.5px_3px_0px_var(--shadow-S)] hover:opacity-80 active:opacity-70 transition-opacity":"","outline"===d?"outline outline-1 -outline-offset-1 outline-[var(--border-main)]":"","small"===u?"size-8":"","medium"===u?"size-9 rounded-[10px]":"",c?"opacity-50 cursor-not-allowed hover:opacity-50":"",l),...x,children:[(0,a.jsx)(t,{className:(0,n.cn)("size-5 text-[var(--icon-tertiary)]",s)}),m]});return i?(0,a.jsx)(r.m,{title:i,placement:o,dismissProps:x.onClick?{referencePress:!0}:void 0,children:f}):f}},766:(e,t,i)=>{"use strict";i.d(t,{_:()=>d});var a=i(2635),r=i(15585),n=i(75958),s=i(22292),l=i(99515),o=i(88118),c=i(93607);let d=(0,l.forwardRef)(function(e,t){let{className:i,errorComponent:d,loadingType:u="default",alt:p="",...m}=e,[x,f]=(0,l.useState)(!0),[h,v]=(0,l.useState)(!1),g=(0,n.w)(e=>{f(!1)}),y=(0,n.w)(e=>{f(!1),v(!0)}),w=m.src?(0,a.jsx)("img",{ref:t,className:(0,r.cn)((x||h)&&"invisible","max-h-full max-w-full",i),alt:p,...m,onLoad:e=>{if(g(e),!x){var t;null===(t=m.onLoad)||void 0===t||t.call(m,e)}},onError:e=>{var t;y(e),null===(t=m.onError)||void 0===t||t.call(m,e)}}):(0,a.jsx)(a.Fragment,{});return x?(0,a.jsxs)("div",{className:(0,r.cn)("relative",i,"cursor-default"),children:[(0,a.jsx)(c.j,{condition:"generating"===u,children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(o.C,{className:"size-[70px]"})})}),(0,a.jsx)(c.j,{condition:"default"===u,children:(0,a.jsx)("div",{className:(0,r.cn)("absolute inset-0 bg-gradient-to-r from-black/10 via-black/[0.04] to-black/10 animate-shimmer bg-[length:250%_100%]")})}),w]}):h?null!=d?d:(0,a.jsx)("div",{className:(0,r.cn)("bg-[var(--fill-tsp-gray-dark)] flex items-center justify-center",i),children:(0,a.jsx)(s.A,{size:48})}):m.src?w:null})},88118:(e,t,i)=>{"use strict";i.d(t,{C:()=>r});var a=i(2635);function r(e){let{className:t}=e;return(0,a.jsxs)("svg",{className:t,viewBox:"0 0 70 70",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"35",cy:"35",r:"29",stroke:"var(--icon-tertiary)",strokeWidth:"3",opacity:"0.2",fill:"none"}),(0,a.jsx)("circle",{cx:"35",cy:"35",r:"29",stroke:"var(--icon-tertiary)",strokeWidth:"3",fill:"none",pathLength:"1",strokeDasharray:"1",strokeLinecap:"round",strokeDashoffset:"0.84",className:"origin-center animate-spin ease [animation-duration:1.5s]"}),(0,a.jsx)("path",{opacity:"0.6",fillRule:"evenodd",clipRule:"evenodd",d:"M22 26C22 24.9391 22.4214 23.9217 23.1716 23.1716C23.9217 22.4214 24.9391 22 26 22H44.6667C45.7275 22 46.7449 22.4214 47.4951 23.1716C48.2452 23.9217 48.6667 24.9391 48.6667 26V34.6667C48.6666 34.7791 48.6522 34.8911 48.624 35C48.6522 35.1089 48.6666 35.2209 48.6667 35.3333V44.6667C48.6667 45.7275 48.2452 46.7449 47.4951 47.4951C46.7449 48.2452 45.7275 48.6667 44.6667 48.6667H26C24.9391 48.6667 23.9217 48.2452 23.1716 47.4951C22.4214 46.7449 22 45.7275 22 44.6667V40.6667C22.0001 40.5542 22.0144 40.4422 22.0427 40.3333C22.0144 40.2245 22.0001 40.1125 22 40V26ZM25.992 39.1067C25.528 39.1156 25.0862 39.136 24.6667 39.168V26C24.6667 25.6464 24.8071 25.3072 25.0572 25.0572C25.3072 24.8071 25.6464 24.6667 26 24.6667H44.6667C45.0203 24.6667 45.3594 24.8071 45.6095 25.0572C45.8595 25.3072 46 25.6464 46 26V34.0213C40.2707 34.2067 36.1333 35.5867 33.2267 37.5187C34.328 37.9093 35.56 38.4653 36.768 39.1933C38.6333 40.3133 40.5293 41.8867 41.8053 43.9707C41.8967 44.12 41.9578 44.2859 41.9851 44.4589C42.0124 44.6319 42.0053 44.8085 41.9644 44.9787C41.9234 45.149 41.8493 45.3095 41.7463 45.4511C41.6432 45.5927 41.5134 45.7126 41.364 45.804C41.2146 45.8954 41.0487 45.9565 40.8758 45.9838C40.7028 46.0111 40.5262 46.004 40.3559 45.963C40.1857 45.922 40.0252 45.8479 39.8836 45.7449C39.742 45.6419 39.6221 45.512 39.5307 45.3627C38.5493 43.7587 37.0267 42.4587 35.3947 41.4787C33.7653 40.5 32.108 39.8893 30.9587 39.6227C29.3395 39.2534 27.6818 39.0806 26.0213 39.108H25.992V39.1067ZM28.6373 27.984C29.2315 27.565 29.9397 27.3379 30.6667 27.3333C31.2133 27.3333 32.004 27.4867 32.696 27.984C33.456 28.5307 34 29.432 34 30.6667C34 31.9013 33.456 32.8013 32.696 33.348C32.102 33.7675 31.3938 33.995 30.6667 34C30.12 34 29.3293 33.8467 28.6373 33.348C27.8773 32.8013 27.3333 31.9027 27.3333 30.6667C27.3333 29.432 27.8773 28.532 28.6373 27.984Z",fill:"var(--icon-disable)"})]})}},41661:(e,t,i)=>{"use strict";i.d(t,{p:()=>m});var a=i(2635),r=i(15585),n=i(84974),s=i(44616),l=i(75958),o=i(56163),c=i(48734),d=i(99515),u=i(93607);let p=(0,c.F)("rounded-[10px] overflow-hidden text-sm leading-[22px] text-[var(--text-primary)] placeholder:text-[var(--text-disable)]",{variants:{inputSize:{small:"h-8",medium:"h-10"},root:{div:"w-full flex items-center gap-[10px]",input:"w-full disabled:cursor-not-allowed placeholder:text-[var(--text-disable)]"},disabled:{true:"border border-[var(--border-main)] bg-[var(--fill-tsp-white-dark)] text-[var(--text-tertiary)] cursor-not-allowed"},error:{true:"ring-[1.5px] ring-[var(--Button-secondary-error-border)]",false:""},bgColor:{gray:"bg-[var(--fill-tsp-white-main)]",white:"bg-[var(--fill-input-chat)]"},paddingSize:{thin:"pt-1 pr-1.5 pb-1 pl-3",medium:"pt-2 pr-3 pb-2 pl-4"},outline:{true:"",false:""}},compoundVariants:[{root:"div",error:!1,outline:!0,class:"focus-within:ring-[1.5px] focus-within:ring-[var(--border-dark)]"},{root:"input",error:!1,outline:!0,class:"focus:ring-[1.5px] focus:ring-[var(--border-dark)]"}],defaultVariants:{inputSize:"medium",root:"div",disabled:!1,error:!1,bgColor:"gray",paddingSize:"medium",outline:!0}});function m(e){let{onClear:t,className:i,inputSize:c,paddingSize:m,bgColor:x,outline:f,error:h,onInputRef:v,prefixIcon:g,suffixIcon:y,sensitive:w,value:b,onKeyDown:C,onCompositionStart:j,onCompositionEnd:S,onFocus:I,onBlur:N,...k}=e,T=(0,d.useRef)(null),[_,M]=(0,d.useState)(!1),{encoded:L,encrypted:P}=n.f.decrypt(b||""),E=w?P?_?"":"******":L:b,{onCompositionStart:A,onCompositionEnd:R,onKeyDown:F}=(0,s.o)({onKeyDown:C,onCompositionStart:j,onCompositionEnd:S}),U=!!t||!!g||!!y,D=(0,l.w)(e=>{M(!0),null==I||I(e)}),V=(0,l.w)(e=>{M(!1),null==N||N(e)}),O={...k,onKeyDown:F,onCompositionStart:A,onCompositionEnd:R,onFocus:D,onBlur:V,value:E};return U?(0,a.jsxs)("div",{className:(0,r.cn)("group",p({root:"div",disabled:k.disabled,error:h,bgColor:x,inputSize:c,paddingSize:m,outline:f}),i),onClick:()=>{var e;null===(e=T.current)||void 0===e||e.focus()},children:[g,(0,a.jsx)("input",{...O,className:(0,r.cn)("h-full min-w-1 flex-1 bg-transparent disabled:cursor-not-allowed placeholder:text-[var(--text-disable)]"),ref:e=>{T.current=e,v&&("function"==typeof v?v(e):v.current=e)}}),y,(0,a.jsx)(u.j,{condition:!!t&&!k.disabled,children:(0,a.jsx)(o.$,{className:(0,r.cn)(E?"":"hidden","cursor-pointer opacity-0 hover:opacity-90 group-hover:opacity-100 group-focus-within:opacity-100"),onClick:e=>{null==t||t(e)},size:16})})]}):(0,a.jsx)("input",{className:(0,r.cn)(p({root:"input",disabled:k.disabled,error:h,bgColor:x,inputSize:c,paddingSize:m,outline:f}),i),ref:v,...O})}},7487:(e,t,i)=>{"use strict";i.d(t,{R:()=>u});var a=i(2635),r=i(15585),n=i(99515);let s=new Map,l=e=>{let t=s.get(e);if(!t)return;let i=()=>{let a=(performance.now()-t.startTime)/1e3*360,r=[];t.elements.forEach(e=>{e.isConnected?e.style.transform="rotate(".concat(a,"deg)"):r.push(e)}),r.forEach(e=>{t.elements.delete(e)}),t.elements.size>0?t.animationId=requestAnimationFrame(i):o(e)};null===t.animationId&&(t.animationId=requestAnimationFrame(i))},o=e=>{let t=s.get(e);t&&(null!==t.animationId&&cancelAnimationFrame(t.animationId),s.delete(e))},c=(e,t)=>{if(!e||!t){console.warn("[useSyncedLoadingController] Invalid key or element provided");return}s.has(e)||s.set(e,{startTime:performance.now(),elements:new Set,animationId:null});let i=s.get(e);i&&(i.elements.add(t),l(e))},d=(e,t)=>{if(!e||!t)return;let i=s.get(e);i&&(i.elements.delete(t),0===i.elements.size&&o(e))};function u(e){let{text:t="",size:i=16,fullScreen:s=!1,mask:l=!1,maskColor:o="bg-[linear-gradient(180deg,#F3F3F3_0%,#EDEDED_100%)]",className:u,color:p="var(--icon-primary)",syncedAnimationKey:m}=e,{elementRef:x,shouldUseCSSAnimation:f}=function(e){let{syncedAnimationKey:t}=e,i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=i.current;if(t&&e)return c(t,e),()=>{d(t,e)}},[t]),{elementRef:t?i:void 0,shouldUseCSSAnimation:!t}}({syncedAnimationKey:m}),h=Math.max(2,Math.floor(i/8));return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center gap-4 ",s?"min-h-full":"",l?"absolute min-h-full min-w-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-70 z-10":"",l&&o,u),children:[(0,a.jsx)("div",{ref:x,style:{width:i,height:i,borderWidth:h,borderColor:p.startsWith("var(")?"color-mix(in srgb, ".concat(p," 20%, transparent)"):p,borderTopColor:p},className:(0,r.cn)("border rounded-full",f&&"animate-spin")}),t&&(0,a.jsx)("div",{className:(0,r.cn)("text-[var(--text-tertiary)]",i<=24?"text-sm":i<=32?"text-base":i<=48?"text-lg":i<=64?"text-xl":"text-2xl"),children:t})]})}},12138:(e,t,i)=>{"use strict";i.d(t,{I:()=>u,m:()=>p});var a=i(2635),r=i(19562),n=i(15585),s=i(21284),l=i(23757),o=i(66555),c=i(34143),d=i(57271);let u=e=>{var t;let{className:i,style:u}=e,p=(0,s.GV)(l.R.selectors.planKey),m=(0,s.GV)(o.M.selectors.planList),x=e.planKey||p,f=null===(t=m.find(e=>e.plan===(0,c.wZ)(x)))||void 0===t?void 0:t.planName;return f?(0,a.jsx)("span",{className:(0,n.cn)("font-georgia text-base w-max max-w-full font-bold leading-[22px]",i),style:u,children:d.I.t("{product} {planName}",{product:r.KR,planName:f})}):null},p=e=>{var t;let{className:i,style:r}=e,d=(0,s.GV)(l.R.selectors.planKey),u=(0,s.GV)(o.M.selectors.planList),p=e.planKey||d,m=null===(t=u.find(e=>e.plan===(0,c.wZ)(p)))||void 0===t?void 0:t.planName;return m?(m=m.toUpperCase(),(0,a.jsx)("span",{className:(0,n.cn)("flex items-center justify-center px-1.5 py-0 rounded-full font-georgia","text-[var(--text-primary)] font-bold border border-[var(--border-dark)] text-[10px] leading-4",i),style:r,children:m})):null}},32595:(e,t,i)=>{"use strict";i.d(t,{b:()=>h});var a=i(2635),r=i(15585),n=i(84974),s=i(75958),l=i(70654),o=i(57271),c=i(32971),d=i(8398),u=i(84317),p=i(1566),m=i(99515),x=i(76743),f=i(78308);function h(e){var t,i,o,u,p;let{onDisposed:x,mediaList:f=[],src:h,videoAutoPlay:g,imageClassName:y}=e,[w,b]=(0,m.useState)(()=>{var e;return null!==(e=f.findIndex(e=>e.url===h))&&void 0!==e?e:0}),C=(0,s.w)(e=>{"Escape"===e.key?x():"ArrowLeft"===e.key?w>0&&b(w-1):"ArrowRight"===e.key&&w<f.length-1&&b(w+1)});(0,m.useEffect)(()=>(window.addEventListener("keydown",C),()=>{window.removeEventListener("keydown",C)}),[C]);let j=(0,s.w)(e=>n.f.isVideoFile(e)?"video":n.f.isAudioFile(e)?"audio":"image"),S=f[w];return(0,a.jsx)("div",{className:"fixed inset-0 bg-[var(--background-preview-mask)] backdrop-blur-[4px] flex items-center justify-center",onClick:()=>{e.onDisposed()},children:(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)(l.A,{isMultipleImages:f.length>1,videoAutoPlay:!!g&&((0,c.A)(g)?g:g()),data:{originalFilename:null!==(i=null!==(t=null==S?void 0:S.filename)&&void 0!==t?t:e.filename)&&void 0!==i?i:"",type:j(null!==(u=null!==(o=null==S?void 0:S.filetype)&&void 0!==o?o:e.filetype)&&void 0!==u?u:""),url:null!==(p=null==S?void 0:S.url)&&void 0!==p?p:e.src},mediaClassName:y}),(0,a.jsx)("button",{className:"absolute top-8 right-8 text-[var(--text-white)] bg-[#B9B9B7] rounded-full p-2 hover:opacity-85 cursor-pointer",onClick:()=>{e.onDisposed()},children:(0,a.jsx)(d.A,{size:24,color:"#535350"})}),f.length>1&&(0,a.jsx)(v,{className:(0,r.cn)("absolute left-1/2 -translate-x-1/2 w-full"),selectedIndex:w,images:f,onSelectImage:e=>{b(e)}})]})})}function v(e){let{images:t,onSelectImage:i,selectedIndex:n,className:l}=e,c=(0,m.useRef)([]);(0,m.useEffect)(()=>{c.current=Array(t.length).fill(null).map((e,t)=>c.current[t]||null)},[t.length]);let d=(0,s.w)(()=>{n>0&&i(n-1)}),h=(0,s.w)(()=>{n<t.length-1&&i(n+1)});return(0,a.jsxs)("div",{className:(0,r.cn)("relative",l),onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)("div",{className:"absolute left-8 top-1/2 -translate-y-1/2",children:(0,a.jsx)(f.m,{title:o.I.t({message:"Prev",comment:"Previous one"}),placement:"right",children:(0,a.jsx)(x.A,{className:(0,r.cn)("flex items-center justify-center w-10 h-10 p-0 rounded-full clickable","bg-[#535350] shadow-[0px_0px_1.25px_0px_rgba(0, 0, 0, 0.15),_0px_5px_16px_0px_rgba(0, 0, 0, 0.15)] backdrop-blur-2xl"),disabled:0===n,onClick:d,icon:(0,a.jsx)(u.A,{size:24,color:"white"}),variant:"icon"})})}),(0,a.jsx)("div",{className:"absolute right-8 top-1/2 -translate-y-1/2",children:(0,a.jsx)(f.m,{title:o.I.t({message:"Next",comment:"Next one"}),placement:"left",children:(0,a.jsx)(x.A,{className:(0,r.cn)("flex items-center justify-center w-10 h-10 p-0 rounded-full clickable","bg-[#535350] shadow-[0px_0px_1.25px_0px_rgba(0, 0, 0, 0.15),_0px_5px_16px_0px_rgba(0, 0, 0, 0.15)] backdrop-blur-2xl"),disabled:n===t.length-1,onClick:h,icon:(0,a.jsx)(p.A,{size:24,color:"white"}),variant:"icon"})})})]})}},74159:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var a=i(2635),r=i(15585),n=i(75958),s=i(90264),l=i(67813),o=i(84317),c=i(1566),d=i(99515);let u=e=>{let{children:t,className:i,leftArrowBg:u,rightArrowBg:p,contentClass:m,refreshFlag:x,scrollRatio:f=.8,onNextClick:h,operationClassName:v}=e,[g,y]=(0,d.useState)(!1),[w,b]=(0,d.useState)(!1),C=(0,d.useRef)(null),j=(0,n.w)(()=>{let e=C.current;if(!e)return;let t=e.scrollWidth>e.clientWidth,i=e.scrollWidth-e.clientWidth;b(t&&Math.abs(e.scrollLeft)-i<-1),y(t&&Math.abs(e.scrollLeft)>0)}),S=(0,l.A)(()=>{j()},100);(0,d.useEffect)(()=>{let e=C.current;if(!e)return;j();let t=new ResizeObserver(t=>{var i;(null===(i=Array.from(t)[0])||void 0===i?void 0:i.target)===e&&j()});return t.observe(e),e.addEventListener("scroll",S),()=>{t.disconnect(),e.removeEventListener("scroll",S)}},[j,S]),(0,d.useEffect)(()=>{let e=C.current;if(e)return s.T.on("scrollAttachmentsToRight",()=>{setTimeout(()=>{e.scrollTo({left:99999,behavior:"smooth"})})}),()=>{s.T.off("scrollAttachmentsToRight")}},[]),(0,d.useEffect)(()=>{if(x){var e;null===(e=C.current)||void 0===e||e.scrollTo({left:0})}else setTimeout(j,300)},[x,j]);let I=e=>f*e,N=()=>{let e=C.current;if(!e)return;let t=I(e.clientWidth);e.scrollTo({left:Math.min(e.scrollLeft+t,e.scrollWidth-e.clientWidth),behavior:"smooth"})};return(0,a.jsxs)("div",{className:(0,r.cn)("w-full overflow-visible relative",i),children:[(0,a.jsx)("div",{className:(0,r.cn)("absolute top-0 bottom-0 left-0 z-10 flex h-full items-center gap-2.5 px-3 cursor-pointer",v,{"opacity-0 hidden":!g,"opacity-100":g}),style:{backgroundImage:u||"linear-gradient(270deg, var(--gradual-white-0) 0%, var(--fill-input-chat) 100%)"},onClick:()=>{let e=C.current;if(!e)return;let t=I(e.clientWidth);e.scrollTo({left:Math.max(e.scrollLeft-t,0),behavior:"smooth"})},children:(0,a.jsx)("div",{className:(0,r.cn)("flex h-7 w-7 items-center justify-center rounded-full border border-[var(--border-white)] bg-[var(--background-menu-white)] overflow-hidden","cursor-pointer hover:bg-[var(--fill-tsp-primary)] shadow-[0_0_1.25px_0_var(--shadow-M),0_5px_16px_0_var(--shadow-M)] backdrop-blur-[40px]"),children:(0,a.jsx)("div",{className:(0,r.cn)("flex w-full h-full items-center justify-center bg-[var(--background-menu-white)] cursor-pointer hover:bg-[var(--fill-tsp-white-main)] shadow-[0_0_1.25px_0_var(--shadow-M),0_5px_16px_0_var(--shadow-M)]"),children:(0,a.jsx)(o.A,{size:14,color:"currentColor"})})})}),(0,a.jsx)("div",{ref:C,className:(0,r.cn)("w-full overflow-y-hidden overflow-x-auto scrollbar-hide pb-[10px] -mb-[10px]",m),children:t}),(0,a.jsx)("div",{className:(0,r.cn)("absolute top-0 bottom-0 right-0 z-10 flex h-full items-center gap-2.5 px-3 cursor-pointer",v,{"opacity-0 hidden":!w,"opacity-100":w}),style:{backgroundImage:p||"linear-gradient(90deg, var(--gradual-white-0) 0%, var(--fill-input-chat) 100%)"},onClick:()=>{N(),null==h||h()},children:(0,a.jsx)("div",{className:(0,r.cn)("flex h-7 w-7 items-center justify-center rounded-full border border-[var(--border-white)] bg-[var(--background-menu-white)] overflow-hidden","cursor-pointer hover:bg-[var(--fill-tsp-primary)] shadow-[0_0_1.25px_0_var(--shadow-M),0_5px_16px_0_var(--shadow-M)] backdrop-blur-[40px]"),children:(0,a.jsx)("div",{className:(0,r.cn)("flex w-full h-full items-center justify-center bg-[var(--background-menu-white)] cursor-pointer hover:bg-[var(--fill-tsp-white-main)] shadow-[0_0_1.25px_0_var(--shadow-M),0_5px_16px_0_var(--shadow-M)]"),children:(0,a.jsx)(c.A,{size:14,color:"currentColor"})})})})]})}},61640:(e,t,i)=>{"use strict";i.d(t,{u:()=>o});var a=i(2635),r=i(15585),n=i(75958),s=i(99515);let l=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];function o(e){let{className:t,classNames:i,value:o=0,disabled:c,onValueChange:d,min:u=0,max:p=100,step:m=1,onKeyDown:x,onPointerDown:f,onPointerMove:h,onPointerUp:v,children:g}=e,y=(0,s.useRef)(null),w=(0,s.useRef)(),b=(0,s.useRef)(null),C=void 0===o?0:(o-u)/(p-u)*100,j=(0,n.w)(e=>{var t,i;if(!y.current)return 0;let a=w.current||y.current.getBoundingClientRect();w.current=a;let r=(t=[0,a.width],i=[u,p],e=>{if(t[0]===t[1]||i[0]===i[1])return i[0];let a=(i[1]-i[0])/(t[1]-t[0]);return i[0]+a*(e-t[0])})(e-a.left),n=u+Math.round((r-u)/m)*m;return Math.min(p,Math.max(u,n))});return(0,a.jsxs)("span",{ref:y,className:(0,r.cn)("group relative hover:z-10 flex h-1 flex-1 min-w-0 cursor-pointer select-none items-center",t),onKeyDown:e=>{if(null==x||x(e),!e.defaultPrevented&&l.includes(e.key)&&!c){e.preventDefault();let t=Math.min(p,Math.max(u,o+("ArrowUp"===e.key||"ArrowRight"===e.key?m:-m)));null==d||d(t)}},onPointerDown:e=>{if(null==f||f(e),!e.defaultPrevented&&(e.target.setPointerCapture(e.pointerId),e.preventDefault(),b.current&&b.current.focus(),!c)){let t=j(e.clientX);null==d||d(t)}},onPointerMove:e=>{if(null==h||h(e),!e.defaultPrevented&&e.target.hasPointerCapture(e.pointerId)){let t=j(e.clientX);null==d||d(t)}},onPointerUp:e=>{if(null==v||v(e),e.defaultPrevented)return;let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),w.current=void 0)},children:[g,(0,a.jsx)("span",{"data-disabled":c?"":void 0,className:(0,r.cn)("relative h-full w-full rounded-full bg-[var(--fill-tsp-gray-dark)]",null==i?void 0:i.track),children:(0,a.jsx)("span",{"data-disabled":c?"":void 0,className:(0,r.cn)("absolute h-full rounded-full bg-[var(--text-blue)]",null==i?void 0:i.range),style:{left:"0%",right:100-(o-u)/(p-u)*100+"%"}})}),(0,a.jsx)("span",{className:(0,r.cn)("absolute -translate-x-1/2 p-[3px]",null==i?void 0:i.thumbWrapper),style:{left:"".concat(C,"%")},children:(0,a.jsx)("span",{role:"slider",ref:b,tabIndex:c?void 0:0,"data-disabled":c?"":void 0,className:(0,r.cn)("relative block h-[14px] w-[14px] rounded-full bg-[var(--text-blue)] transition-all focus:outline-none border-2 border-[var(--fill-input-chat)] drop-shadow-[0px_1px_4px_rgba(0,0,0,0.06)]",null==i?void 0:i.thumb),style:void 0===o?{display:"none"}:e.style})})]})}},67260:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var a=i(2635),r=i(15585),n=i(44616);function s(e){let{className:t,onKeyDown:i,onCompositionStart:s,onCompositionEnd:l,...o}=e,{onCompositionStart:c,onCompositionEnd:d,onKeyDown:u}=(0,n.o)({onKeyDown:i,onCompositionStart:s,onCompositionEnd:l});return(0,a.jsx)("textarea",{className:(0,r.cn)("resize-none px-4 py-3","rounded-[10px] bg-[var(--fill-tsp-white-main)]","text-sm leading-[22px]","text-[var(--text-primary)]","disabled:text-[var(--text-tertiary)]","disabled:cursor-not-allowed","placeholder:text-[var(--text-disable)]","focus:ring-[1.5px] focus:ring-[var(--border-dark)]",t),onKeyDown:u,onCompositionStart:c,onCompositionEnd:d,...o})}},88387:(e,t,i)=>{"use strict";i.d(t,{d:()=>o});var a=i(2635),r=i(15585),n=i(48734);let s=(0,n.F)("rounded-[16px] transition-colors",{variants:{size:{small:"w-[22px] h-[14px] p-[1px]",medium:"w-[26px] h-[16px] p-[1px]",large:"w-[36px] h-[20px] p-[2px]"},disabled:{true:"opacity-50 cursor-not-allowed"},checked:{true:"bg-[var(--icon-blue)]",false:"bg-[var(--icon-disable)]"}},defaultVariants:{size:"medium"}}),l=(0,n.F)("block pointer-events-none rounded-full bg-[var(--icon-white)] transition-transform",{variants:{size:{small:"size-3",medium:"size-3.5",large:"size-4"},checked:{true:"",false:""}},compoundVariants:[{size:"small",checked:!0,className:"translate-x-2 rtl:-translate-x-2"},{size:"medium",checked:!0,className:"translate-x-2.5 rtl:-translate-x-2.5"},{size:"large",checked:!0,className:"translate-x-4 rtl:-translate-x-4"}],defaultVariants:{size:"medium"}});function o(e){let{size:t="medium",label:i,className:n,checked:o,onCheckedChange:c,onClick:d,disabled:u,...p}=e;return(0,a.jsxs)("button",{type:"button",role:"switch","data-checked":o?"":void 0,"data-disabled":u?"":void 0,className:(0,r.cn)("group flex items-center gap-2 cursor-pointer",n),onClick:e=>{null==d||d(e),u||e.defaultPrevented||null==c||c(!o)},...p,children:[(0,a.jsx)("div",{className:s({size:t,disabled:u,checked:o}),children:(0,a.jsx)("span",{className:l({size:t,checked:o})})}),i&&(0,a.jsx)("span",{className:"text-[var(--text-secondary)] group-data-[checked]:text-[var(--text-primary)] text-[13px] leading-[18px] select-none ",children:i})]})}},24683:(e,t,i)=>{"use strict";i.d(t,{t:()=>c});var a=i(2635),r=i(15585),n=i(75958),s=i(65623),l=i(99515),o=i(93607);function c(e){let{disabled:t,options:i,value:c,onChange:d,className:u,classNames:p}=e,m=(0,l.useId)(),x="tab-item-bg-".concat(m),f=(0,n.w)(e=>{t||null==d||d(e)});return(0,a.jsx)("div",{className:(0,r.cn)("rounded-[8px] border-[1px] border-[var(--border-main)] bg-[var(--fill-tsp-gray-main)]","h-8 p-[2px] flex items-center",t?"cursor-not-allowed opacity-50":"",null==p?void 0:p.root),children:i.map(e=>(0,a.jsxs)("li",{className:(0,r.cn)("relative list-none flex items-center h-full",null==p?void 0:p.li),children:[(0,a.jsx)("button",{onClick:()=>f(e.value),"data-active":c===e.value?"":void 0,className:(0,r.cn)("min-w-12 px-4","text-[13px] leading-[18px] font-[400] text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]","data-[active]:text-[var(--text-primary)] data-[active]:font-[500] transition-colors duration-200","clickable relative z-10",t?"cursor-not-allowed":"",u||(null==p?void 0:p.item)),children:"function"==typeof e.label?e.label(c===e.value,e):e.label}),(0,a.jsx)(o.j,{condition:c===e.value,children:(0,a.jsx)(s.P.div,{className:(0,r.cn)("absolute inset-0 bg-[var(--fill-white)] rounded-[6px] shadow-[0px_0.5px_3px_0px_var(--shadow-S)]",null==p?void 0:p.activeBg),layout:"position",layoutId:x,layoutDependency:c,transition:{type:"spring",stiffness:300,damping:30}},String(e.value))})]},String(e.value)))})}},19737:(e,t,i)=>{"use strict";i.d(t,{T:()=>o});var a=i(2635),r=i(15585),n=i(84974),s=i(44616),l=i(99515);let o=l.forwardRef((e,t)=>{let{className:i,autoResize:o,value:c,autoFocus:d,sensitive:u,onKeyDown:p,onCompositionStart:m,onCompositionEnd:x,onFocus:f,onBlur:h,...v}=e,g=l.useRef(null),[y,w]=l.useState(!1),{encoded:b,encrypted:C}=n.f.decrypt(c||""),j=u?C?y?"":"******":b:c;l.useImperativeHandle(t,()=>g.current);let{onCompositionStart:S,onCompositionEnd:I,onKeyDown:N}=(0,s.o)({onKeyDown:p,onCompositionStart:m,onCompositionEnd:x}),k=l.useCallback(()=>{let e=g.current;if(!e||!o)return;let t=e.scrollTop,i=window.getComputedStyle(e),a=parseInt(i.borderTopWidth,10),r=parseInt(i.borderBottomWidth,10),n=e.cloneNode(),s=window.getComputedStyle(e);n.style.position="absolute",n.style.visibility="hidden",n.style.height="auto",n.style.width=s.width,n.style.minHeight=s.minHeight,n.style.maxHeight=s.maxHeight,n.style.padding=s.padding,n.style.border=s.border,n.style.boxSizing=s.boxSizing,n.value=e.value,document.body.appendChild(n);let l=n.scrollHeight+a+r;document.body.removeChild(n),e.style.height="".concat(l,"px"),e.scrollTop=t},[o]);return l.useEffect(()=>{o&&k()},[c,k,o]),l.useEffect(()=>{if(o)return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[k,o]),l.useEffect(()=>{if(d){let e=g.current;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))}},[d,t]),(0,a.jsx)("textarea",{className:(0,r.cn)("flex w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",o&&"overflow-hidden",i),ref:g,value:j,autoFocus:d,onKeyDown:N,onCompositionStart:S,onCompositionEnd:I,onFocus:e=>{w(!0),null==f||f(e)},onBlur:e=>{w(!1),null==h||h(e)},...v})});o.displayName="Textarea"},93607:(e,t,i)=>{"use strict";function a(e){let{condition:t,children:i}=e;return t?i:null}i.d(t,{j:()=>a})},41574:(e,t,i)=>{"use strict";i.d(t,{J:()=>b});var a=i(19562),r=i(23591),n=i(49873),s=i(61613),l=i(84974),o=i(80926),c=i(75958),d=i(93347),u=i(81140),p=i(21284),m=i(23757),x=i(86154),f=i(15307),h=i(24907),v=i(59413),g=i(88672),y=i(13348),w=i(57258);function b(){let e=(0,h.rd)(),{initHelpCenterAuth:t}=(0,r.G)(),{consumeActivityEntryFlag:i}=(0,y.b)(),{acceptInvitation:b}=(0,w.B)(),C=(0,g.wA)(),j=(0,c.w)(async()=>{var e;C(m.R.actions.setAuthLoading(!0));let t=await d.F.UserService.userInfo({}).finally(()=>{C(m.R.actions.setAuthLoading(!1))});n.K.customUserPropertyOne(n.d.Plan,n.K.formatMemberShipToNumber(t.membershipVersion||x.b.Free));let i=(null===(e=t.teamInfo)||void 0===e?void 0:e.originalUserId)||t.userId;n.K.setUserId(i);let[a,r]=await Promise.all([n.K.initExperiment().catch(()=>null),d.F.UserService.getUserExperimentVars({}).catch(()=>null)]);return a&&C(f.s.actions.setVariants(a)),(null==r?void 0:r.vars)&&C(f.s.actions.setBackendVariants(r.vars)),C(m.R.actions.setUserInfo(t)),t}),S={setValue:(0,c.w)(e=>{let{eduId:t,code:i,teamCode:r,from:n}=e;t&&localStorage.setItem(a.d5.eduId,t),i&&localStorage.setItem(a.d5.inviteCode,i),r&&localStorage.setItem(a.d5.teamCode,r),n&&localStorage.setItem(a.d5.loginFrom,n)}),getValue:(0,c.w)(e=>"eduId"===e?localStorage.getItem(a.d5.eduId):"code"===e?localStorage.getItem(a.d5.inviteCode):"teamCode"===e?localStorage.getItem(a.d5.teamCode):"from"===e?localStorage.getItem(a.d5.loginFrom):void 0),consumeValue:(0,c.w)(e=>{if("eduId"===e){localStorage.removeItem(a.d5.eduId);return}if("code"===e){localStorage.removeItem(a.d5.inviteCode);return}"teamCode"===e&&localStorage.removeItem(a.d5.teamCode)})},I=(0,c.w)(e=>{let t=new URL(location.href).searchParams,i=t.get("redirectUrl");if(e)return{redirectUrl:l.f.getSafeRedirectUrl(i),eduId:S.getValue("eduId"),code:S.getValue("code"),teamCode:S.getValue("teamCode"),from:S.getValue("from")};let a=t.get("eduId")||S.getValue("eduId"),r=t.get("code")||S.getValue("code"),n=t.get("teamCode")||S.getValue("teamCode"),s=t.get("from")||S.getValue("from");return{redirectUrl:l.f.getSafeRedirectUrl(i),eduId:a,code:r,teamCode:n,from:s,authType:"1"===t.get("fromGoogle")?"google":"1"===t.get("fromApple")?"apple":"email",newUser:"1"===t.get("newUser")?"1":null}}),N={shouldBlock:e=>{let{authStatus:t}=e,i=!t.isLogin;return console.info("[AuthChecker] login shouldBlock: ".concat(i)),i},gotoPage:e=>{let{pageParams:t}=e;window.location.href=u.bw.login.withParams(t)}},k={login:N,smsVerify:{shouldBlock:e=>{let{authStatus:t}=e,i=t.needSmsVerified;return console.info("[AuthChecker] smsVerify shouldBlock: ".concat(i)),i},gotoPage:e=>{let{pageParams:t}=e;window.location.href=u.bw.verifyPhone.withParams(t)}},eduVerify:{shouldBlock:()=>{let e=!!S.getValue("eduId");return console.info("[AuthChecker] eduVerify shouldBlock: ".concat(e)),e},gotoPage:e=>{let{pageParams:t}=e;S.consumeValue("eduId"),window.location.href=u.bw.edu.verify.withParams(t)}},invitationVerify:{shouldBlock:e=>{let{authStatus:t}=e,i=!t.isActive;return console.info("[AuthChecker] invitationVerify shouldBlock: ".concat(i)),i},gotoPage:e=>{let{pageParams:t}=e;S.consumeValue("code"),window.location.href=u.bw.invitations.withParams(t)}},webapp:{shouldBlock:()=>!1,gotoPage:t=>{let{pageParams:i={}}=t;S.consumeValue("code"),S.consumeValue("eduId");let{redirectUrl:a}=i;return e.replace(a||u.bw.app.root()),!0}},waitlist:{gotoPage:()=>{S.consumeValue("code"),e.replace(u.bw.invitations.waitlist.root+"?limit=1")}}},T=(0,c.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"webapp",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a="preCheck"===i,r=p.M_.getState().auth.userInfo,n=(0,m.P)(r),s={authStatus:n,pageParams:{...I(a),...t}};if("invitationVerify"===e)return N.shouldBlock(s)?(k.login.gotoPage(s),!1):k.smsVerify.shouldBlock(s)?(k.smsVerify.gotoPage(s),!1):!a||!n.isActive||!!s.pageParams.code||(k.webapp.gotoPage(s),!1);if("eduVerify"===e){if(k.login.shouldBlock(s))return k.login.gotoPage(s),!1;if(k.smsVerify.shouldBlock(s))return k.smsVerify.gotoPage(s),!1;if(a){if(!s.pageParams.eduId)return k.webapp.gotoPage(s),!1;if(null==r?void 0:r.eduInfo)return((0,o.C)({eventName:"edu_user_register"}),s.pageParams.code)?k.invitationVerify.gotoPage(s):k.webapp.gotoPage(s),!1}return!0}if("smsVerify"===e){if(k.login.shouldBlock(s))return k.login.gotoPage(s),!1;if(a){if(n.isSmsVerified&&!n.isActive)return k.invitationVerify.gotoPage(s),!1;if(n.isSmsVerified&&n.isActive)return k.webapp.gotoPage(s),!1}return!0}return"webapp"===e?k.login.shouldBlock(s)?(k.login.gotoPage(s),!1):k.smsVerify.shouldBlock(s)?(k.smsVerify.gotoPage(s),!1):!k.invitationVerify.shouldBlock(s)||(k.invitationVerify.gotoPage(s),!1):(console.warn("[AuthChecker#checkAuthPage] not target executor: ".concat(e)),!0)}),_=(0,c.w)(async(t,i)=>{let r=(0,m.P)(p.M_.getState().auth.userInfo),n={...I(),...i,originFrom:I().from||(null==i?void 0:i.from),from:t},o={authStatus:r,pageParams:n};if("invitationVerify"===t){if(v.A.set(a.eu.loginSuccess,"1",{expires:365}),n.redirectUrl)try{if(await b(n.redirectUrl)){e.push(n.redirectUrl);return}}catch(e){}if(!(null==n?void 0:n.redirectUrl)&&l.f.isMobile()){e.push(u.bw.appInvite.root);return}k.webapp.gotoPage(o);return}if("eduVerify"===t){if(v.A.set(a.eu.loginSuccess,"1",{expires:365}),!(null==n?void 0:n.redirectUrl)&&l.f.isMobile()){e.push(u.bw.appInvite.root);return}if(o.pageParams.code&&o.pageParams.eduId){k.invitationVerify.gotoPage(o);return}k.webapp.gotoPage(o);return}if("smsVerify"===t){if(s.d.isInApp()){s.d.closeWebview({});return}if(k.eduVerify.shouldBlock(o)){k.eduVerify.gotoPage(o);return}if(o.pageParams.code){k.invitationVerify.gotoPage(o);return}if("desktop"===n.originFrom){e.push(u.bw.loginSuccess.root);return}k.webapp.gotoPage(o);return}if("desktop"===n.originFrom){e.push(u.bw.loginSuccess.root);return}k.webapp.gotoPage(o)}),M=(0,c.w)(async(e,t)=>{try{return await j(),T(e,t,"preCheck")}catch(i){let e=(0,m.P)(p.M_.getState().auth.userInfo),t=I();return k.login.gotoPage({authStatus:e,pageParams:t}),!1}});return{authPageTracer:S,checkAuthStatus:T,initAuthLanding:(0,c.w)(async()=>{try{await j();let r=(0,m.P)(p.M_.getState().auth.userInfo),n=I(),s={authStatus:r,pageParams:n};if("1"===n.newUser&&(localStorage.setItem(a.d5.newUserFirstLogin,"1"),localStorage.setItem(a.d5.chatHomeViewCollapse,"true"),v.A.set(a.eu.sessionListUnpinned,"1",{expires:365})),k.login.shouldBlock(s))return k.login.gotoPage(s),!1;let l=()=>{r.isLogin&&v.A.set(a.eu.loginSuccess,"1",{expires:365})};try{let{activityEntryFlag:e}=await i();if(e&&n.redirectUrl){l(),window.location.href=n.redirectUrl;return}}catch(e){}if(l(),k.smsVerify.shouldBlock(s))return k.smsVerify.gotoPage(s),!1;if(k.eduVerify.shouldBlock(s))return k.eduVerify.gotoPage(s),!1;if(k.invitationVerify.shouldBlock(s)||s.pageParams.code)return k.invitationVerify.gotoPage(s),!1;let o=s.pageParams.authType,c=a.d5.authLastUsed;if("google"===o||"apple"===o?localStorage.setItem(c,o):localStorage.removeItem(c),"desktop"===n.from){e.push(u.bw.loginSuccess.root);return}if(n.redirectUrl)try{await b(n.redirectUrl)}catch(e){}return t(),k.webapp.gotoPage(s),!0}catch(e){return!1}}),initAuthPage:M,nextAuthPage:_,allCheckers:k}}},68065:(e,t,i)=>{"use strict";i.d(t,{W9:()=>G,_I:()=>W,vw:()=>B});var a=i(90293),r=i(19562),n=i(41574),s=i(23591),l=i(2696),o=i(49873),c=i(61613),d=i(80926),u=i(84974),p=i(15038),m=i(71252),x=i(54263),f=i(62861),h=i(51416),v=i(75958),g=i(9205),y=i(95370),w=i(82357),b=i(93347),C=i(81140),j=i(48202),S=i(6537),I=i(24907),N=i(24131),k=i(7067),T=i(68720),_=i(57271),M=i(59413),L=i(88672),P=i(73677),E=i(86154),A=i(23757),R=i(32549),F=i(94355),U=i(15307),D=i(18158);let{compressImageSize:V,consumeFirstEntry:O,fileToDataUrl:z,getFirstEntry:H}=u.f,B=u.f.createReadySource(),W=u.f.createReadySource();function G(){let e=(0,L.wA)(),{initNotification:t}=(0,D.d7)(),{initTeam:i}=(0,l.n)(),{initAuthPage:u}=(0,n.J)(),{initHelpCenterAuth:G,handleUserLogoutHelpCenter:Z}=(0,s.G)(),K=(0,I.rd)(),{clearDraft:Y}=(0,j.z)(),{open:$}=(0,h.s)(S.h),q=(0,h.s)(a.p),J=(0,v.w)(async function(e){let{redirectUrl:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,y.$)(),a=await b.F.UserAuthPublicService.oauth2Authorize({redirectUrl:t,type:"apple"===e?k.oS.APPLE:"microsoft"===e?k.oS.MICROSOFT:k.oS.GOOGLE,authCommand:{locale:_.I.translationManager.locale,utmSource:i.utmSource,utmCampaign:i.utmCampaign,firstFromPlatform:i.firstFromPlatform,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,tzOffset:String(new Date().getTimezoneOffset()),firstEntry:H()}});return O(),K.push(a.redirectUrl),null}),X=(0,v.w)(async t=>{let{noPageRedirect:i=!1,noApi:a=!1}=t||{};e(A.R.actions.updateUserInfo(null)),(0,m.qc)(),M.A.remove(r.eu.loginSuccess),localStorage.removeItem(r.d5.UserInfo);try{(null==t?void 0:t.keepDraft)!==!0&&Y(),Z(),a||await b.F.UserAuthService.logout({})}catch(e){console.error(e)}(0,w.e)(),i||(location.href=C.bw.root)}),Q=(0,v.w)(async()=>{var e;q.open({title:_.I.t("Are you sure to log out?"),content:_.I.t("Log out of {product} as {email}?",{product:r.KR,email:null===(e=P.M_.getState().auth.userInfo)||void 0===e?void 0:e.email}),autoFocusButton:"confirm",confirmText:_.I.t("Log out"),cancelText:_.I.t("Stay logged in"),onConfirm:async()=>(await X(),!0)})}),ee=(0,v.w)(async t=>{let{verifyCode:i}=t;e(A.R.actions.updateUserInfo(null)),(0,m.qc)(),M.A.remove(r.eu.loginSuccess),localStorage.removeItem(r.d5.UserInfo),Z(),await b.F.UserAuthService.deleteUser({verifyCode:i}),(0,w.e)(),location.href=C.bw.root}),et=(0,v.w)(async e=>{let{action:t}=e;try{await b.F.UserAuthService.sendEmailVerifyCodeWithAuth({action:"register"===t?N.vG.REGISTER:"reset_password"===t?N.vG.RESET_PASSWORD:N.vG.LOGOFF})}catch(e){(0,g.oR)({variant:"error",title:p.P.formatErrorToString(e)})}}),ei=(0,v.w)(async()=>{var t;e(A.R.actions.setAuthLoading(!0));let i=await b.F.UserService.userInfo({}).finally(()=>{e(A.R.actions.setAuthLoading(!1))});o.K.customUserPropertyOne(o.d.Plan,o.K.formatMemberShipToNumber(i.membershipVersion||E.b.Free));let a=(null===(t=i.teamInfo)||void 0===t?void 0:t.originalUserId)||i.userId;o.K.setUserId(a);let[n,s]=await Promise.all([o.K.initExperiment().catch(()=>null),b.F.UserService.getUserExperimentVars({}).catch(()=>null)]);n&&e(U.s.actions.setVariants(n)),(null==s?void 0:s.vars)&&e(U.s.actions.setBackendVariants(s.vars));let l=localStorage.getItem(r.d5.UserInfo);try{if(l){let t=JSON.parse(l),a=(null==t?void 0:t.membershipVersion)&&(null==t?void 0:t.membershipVersion)!==E.b.Free,r=(null==i?void 0:i.membershipVersion)&&(null==i?void 0:i.membershipVersion)!==E.b.Free;t.userId===i.userId&&a&&!r&&e(R.V.actions.setAgentModeIntroduceScene("membershipHasExpired"))}}catch(e){}return e(A.R.actions.setUserInfo(i)),i}),ea=(0,v.w)(async t=>{e(A.R.actions.setAuthLoading(!0));let i=await b.F.TeamService.joinTeam({invitationCode:t}).finally(()=>{e(A.R.actions.setAuthLoading(!1))}),a=A.R.selectors.userInfo(P.M_.getState());return localStorage.setItem(r.d5.UserInfo,JSON.stringify(a)),i}),er=(0,v.w)(async()=>{if(c.d.isInApp())return null;let t=P.M_.getState().auth.clientConfig,i=null;if((null==t?void 0:t.cookieOptIn)!==void 0)i=t.cookieOptIn;else{let e=localStorage.getItem(r.d5.cookieOptIn);e&&(i=Number.parseInt(e))}if(e(A.R.actions.setCookieOptIn(i)),!i||i===T.R2.NOT_SET){await W.waitReady();let e=P.M_.getState().auth.userRegion;(null==e?void 0:e.needCookieOptIn)&&$({customized:!1,hideCloseButton:!0})}}),en=(0,v.w)(async t=>{e(A.R.actions.setCookieOptIn(t)),localStorage.setItem(r.d5.cookieOptIn,t.toString()),P.M_.getState().auth.userInfo&&await b.F.UserService.setUserClientConfig({cookieOptIn:t})}),es=(0,v.w)(async()=>{let t=null;try{t=await b.F.UserService.getUserClientConfig({configKeys:[T.U4.RECV_MARKETING_EMAIL,T.U4.HAS_INTEREST,T.U4.AGENT_DEPLOY_SPACE,T.U4.SESSION_WAIT_DONE_EMAIL,T.U4.HAS_SHOWN_EDU_TEAM_JOIN_POPUP,T.U4.ENABLE_MANUS_BROWSER,T.U4.LAST_UPDATE_LOG_TIME,T.U4.AGENT_MODE,T.U4.COOKIE_OPT_IN]}),e(A.R.actions.setClientConfig(t))}catch(e){console.error("fetch user client config error",e)}er()}),el=(0,v.w)(async()=>{let t=await b.F.UserService.getAvailableCredits({});e(A.R.actions.updateUsageInfo(t))}),eo=(0,v.w)(async t=>{let a=localStorage.getItem(r.d5.UserInfo),n=localStorage.getItem(r.d5.usageInfo),s=localStorage.getItem(r.d5.userClientConfig);e(A.R.actions.setCreditAnimateInfo(n?JSON.parse(n):null)),e(A.R.actions.setUserInfo(a?JSON.parse(a):null)),e(A.R.actions.updateUsageInfo(n?JSON.parse(n):null)),e(A.R.actions.setClientConfig(s?JSON.parse(s):null));try{t&&(await Promise.all([ei(),el(),es()]),eh(),ep(),await i())}finally{B.markReady(),G()}}),ec=(0,v.w)(async(t,a)=>{try{let i=await b.F.UserAuthPublicService.switchUser({userId:t});await X({noPageRedirect:!0,noApi:!0}),B.clear();let n=new Set(r.__);Object.values(r.d5).forEach(e=>{n.has(e)||localStorage.removeItem(e)});let s=window.location.pathname;/^\/app\/[^/]+$/.test(s)&&window.history.replaceState(null,"","/app"),P.M_.dispatch({type:"RESET"}),(0,w.W)(i.token),!a&&await u("webapp")&&(await eo(!0),e(A.R.actions.setRefreshKey((0,x.v)())))}catch(e){(0,g.oR)({variant:"error",title:p.P.formatErrorToString(e)});try{"1001"===e.details[0].debug.code&&await i()}catch(e){}throw e}}),ed=(0,v.w)(async function(t){e(A.R.actions.setModifying(!0));try{e(A.R.actions.updateUserInfo({nickname:t.name})),await b.F.UserService.updateUserProfile({newNickname:t.name})}finally{e(A.R.actions.setModifying(!1))}}),eu=(0,v.w)(async function(t){e(A.R.actions.setAvatarUploading(!0));try{var i;let a=await V(t.file,128),r=await z(a),n=(null===(i=r.split(";")[1])||void 0===i?void 0:i.replace(/^base64,/,""))||"";await b.F.UserService.updateUserProfile({newAvatar:{fileName:t.file.name,mimeType:t.file.type,data:n}}),e(A.R.actions.updateUserInfo({avatar:r}))}catch(e){(0,g.oR)({variant:"error",title:p.P.formatErrorToString(e)})}finally{e(A.R.actions.setAvatarUploading(!1))}}),ep=(0,v.w)(async()=>{let t=await b.F.UserPublicService.getGlobalSettings({});e(A.R.actions.setGlobalSettings(t))}),em=(0,v.w)(async function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];t&&e(A.R.actions.setInvitationCodeListLoading(!0));try{let t=await b.F.UserService.getPersonalInvitationCodes({}),i=f._.getItem("invitationCodeMaxUsed")||0,a=t.invitationCodes.reduce((e,t)=>e+t.maxUses,0);(0,d.C)({eventName:"invitation_code_list",extData:{count:a}});let r=P.M_.getState().auth.invitationCodeRedDotVisible;a>i&&(null===r?e(A.R.actions.setInvitationRedDotVisible(!0)):f._.setItem("invitationCodeMaxUsed",a)),e(A.R.actions.setInvitationCodeList(t.invitationCodes)),e(F.e.actions.setInvitationCodeLength(t.invitationCodes.length))}catch(e){console.error("init invitation code list error",e),(0,d.C)({eventName:"invitation_code_list",extData:{count:-1}})}e(A.R.actions.setInvitationCodeListLoading(!1))}),ex=(0,v.w)(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{silent:!0},a={...P.M_.getState().auth.clientConfig};Object.entries(t).forEach(e=>{let[t,i]=e;a[t]=i}),i.silent&&e(A.R.actions.setClientConfig(a)),await b.F.UserService.setUserClientConfig(t),i.silent||e(A.R.actions.setClientConfig(a))}),ef=(0,v.w)(async t=>{let{email:i,code:a}=t;try{let t=await b.F.UserService.sendInvitationEmail({email:i,code:a});if(void 0!==t.pending){let i=P.M_.getState().auth.invitationCodeList.map(e=>e.inviteCode===a?{...e,pending:!!t.pending}:e);e(A.R.actions.setInvitationCodeList(i))}return(0,g.oR)({variant:"success",title:_.I.t("Email sent successfully")}),!0}catch(e){if(e.details&&e.details[0]&&"400401"===e.details[0].debug.code)return"400401";return console.error("init invitation code list error",e),(0,g.oR)({variant:"error",title:p.P.formatErrorToString(e)}),!1}}),eh=(0,v.w)(()=>{let e=A.R.selectors.clientConfig(P.M_.getState()),t=_.I.translationManager.locale;t&&t!==(null==e?void 0:e.locale)&&ex({locale:t})});return{handleLogout:X,handleLogoutWithConfirm:Q,handleLogoff:ee,fetchEmailVerifyCodeWithAuth:et,fetchUserInfo:ei,joinTeam:ea,initAuth:eo,handleLogin:J,modifyUserInfo:ed,modifyUserAvatar:eu,fetchCredits:el,fetchInvitationCodeList:em,setUserConfig:ex,fetchGlobalConfig:ep,initNotification:t,setCookieOptIn:en,sendInvitationEmail:ef,switchAccount:ec}}},4700:(e,t,i)=>{"use strict";i.d(t,{r:()=>y});var a=i(19562),r=i(51807),n=i(39301),s=i(75958),l=i(21284),o=i(67889),c=i(33744),d=i(21374),u=i(51727),p=i(67024),m=i(43537),x=i(88672);let f={},h="auto-preview-type",v={default:"default",disable:"disable",onlyFile:"onlyFile",onlyWorkspace:"onlyWorkspace",both:"both"};function g(){try{let e=new URLSearchParams(window.location.search).get(h),t=Object.values(v);e&&t.includes(e)&&localStorage.setItem(h,e);let i=localStorage.getItem(h);if(i&&t.includes(i))return i}catch(e){console.error(e)}return v.default}function y(){let e=(0,x.wA)(),{openSidebar:t}=(0,r.o)(),i=(0,s.w)(e=>{if(f[e.id]||u.W.selectors.previewFile(l.M_.getState()))return{handled:!1,open:!1};if("toolUsed"===e.type){var i;let a=(0,m.DJ)(e);if("text_editor"===e.tool&&(null==a?void 0:null===(i=a.textEditor)||void 0===i?void 0:i.documentType)==="slides"&&(a.textEditor.content||a.textEditor.url))return t({type:"filePreviewer",previewFile:d.C.convertSlideCardToPreviewFile(a.textEditor)}),f[e.id]=!0,{handled:!0,open:!0}}else if("chat"===e.type&&"assistant"===e.sender){if(e.linkMetaMap){let i=Object.keys(e.linkMetaMap);for(let a=0;a<i.length;a++){let r=i[a],n=e.linkMetaMap[r];if("deploy"===c.$.getLinkType(n.url)){let i=n.url,a=n.title,r="".concat(a,".space");return t({type:"filePreviewer",previewFile:{filetype:"space",previewUrl:i+"#filename=".concat(encodeURIComponent(r)),url:i,filename:r,displayFilename:a,downloadFilename:r,sandboxPath:"",id:""}}),f[e.id]=!0,{handled:!0,open:!0}}}if(i.length>0)return{handled:!0,open:!1}}let i=e.attachments;for(let a=0;a<i.length;a++){let r=i[a];if(!r)continue;let s=null;if("slides"===r.type&&(s="slides"),s||(s=n.e.detectFileTypeByFilename(r.filename)),s||(r.contentType?s=n.e.detectFileTypeByContentType(r.contentType):"file"===r.type&&(s=n.e.detectFileTypeByExtension(r.filename))),"slides"===s||"pdf"===s||"table"===s||"code"===s||"html"===s||"markdown"===s||"audio"===s)return t({type:"filePreviewer",previewFile:d.C.convertEventAttachmentToPreviewFile(r)}),f[e.id]=!0,{handled:!0,open:!0}}}return{handled:!1,open:!1}}),h=(0,s.w)(e=>!o.V.selectors.prevAutoOpenedSidebarType(l.M_.getState())&&!!("toolUsed"===e.type&&p.M.selectors.selectFollowAgentStatus(l.M_.getState()))&&(t({type:"workspace",source:"auto"}),!0)),y=(0,s.w)(()=>{var e;let t=null===(e=document.getElementById(a.eL.homePageSessionContent))||void 0===e?void 0:e.clientWidth;return!!t&&!(t<930)}),w=(0,s.w)(t=>{if(!y())return!1;let a=g();if(a===v.disable)return!1;if(a===v.default||a===v.both||a===v.onlyFile){let{handled:a,open:r}=i(t);if(a)return r&&e(o.V.actions.setPrevAutoOpenedSidebarType("filePreviewer")),!0}return!!((a===v.default||a===v.both||a===v.onlyWorkspace)&&h(t))&&(e(o.V.actions.setPrevAutoOpenedSidebarType("workspace")),!0)});return{checkShouldAutoPreviewFile:(0,s.w)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{skipCheckDomValid:a=!1}=t;if(f={},e(o.V.actions.setPrevAutoOpenedSidebarType(null)),!a&&!y())return;let r=g();if(r===v.disable||r===v.onlyWorkspace)return;let n=p.M.selectors.selectAllEvents(l.M_.getState());for(let t=n.length-1;t>=0;t--){let a=n[t];if("chat"===a.type&&"user"===a.sender&&r!==v.default)break;let{handled:s,open:l}=i(a);s&&l&&e(o.V.actions.setPrevAutoOpenedSidebarType("filePreviewer"))}}),autoPreviewByEvent:w}}},90921:(e,t,i)=>{"use strict";i.d(t,{K:()=>U});var a=i(19562),r=i(51807),n=i(92803),s=i(3251),l=i(44865),o=i(93402),c=i(80926),d=i(86239),u=i(14960),p=i(54263),m=i(47829),x=i(75958),f=i(9205),h=i(93347),v=i(21284),g=i(67889),y=i(23757),w=i(84939),b=i(32549),C=i(94355),j=i(51727),S=i(7201),I=i(64741),N=i(69079),k=i(67024),T=i(90264),_=i(67139),M=i(48202),L=i(5591),P=i(76656),E=i(35710),A=i(57271),R=i(57258);let F={};function U(){let e=(0,v.jL)(),{syncStatusToWindow:t}=(0,R.B)(),{saveDraft:i}=(0,M.z)(),{checkCredits:U,checkConcurrentTask:D}=(0,s.O)(),{messageSentToSocket:V,restartReconnection:O}=(0,l.h)(),{uploadFile:z}=(0,m.l)(),{getSelectedConnectorTools:H}=(0,n.o)(),{handleUploadFiles:B}=(0,_.y)(),{closeSidebar:W}=(0,r.o)(),G=(0,x.w)(function(){let e=D();if(!e.isEnough)return d.J.setMotivation({page:"session",event:"send_message",reason:"concurrency_limit"}),e.handleConcurrentTaskNotEnough(),!1;let t=N.uT.selectors.currentSession(v.M_.getState()),i=S.Z.selectCurrentSessionPermission(v.M_.getState()),a=!t||i.isOwner;if("discuss"===b.V.selectors.chatMode(v.M_.getState()))return!0;let r=U();return!a||!!r.isEnough||(d.J.setMotivation({page:"session",event:"send_message",reason:"no_credits"}),r.handleCreditsNotEnough(),!1)}),Z=(0,x.w)(function(e){let{question:t,files:i=[],extData:a}=e,r=!0;return(null==a?void 0:a.from)==="make-your-version"?r=!1:t.length?r=!1:Object.keys(i).length&&(r=!1),!r&&!!G()}),K=(0,x.w)(async function(i,r){var n,s,l;if("1"===localStorage.getItem(a.d5.newUserFirstLogin)&&(e(C.e.actions.setSessionListPinned(!0)),localStorage.removeItem(a.d5.newUserFirstLogin)),!Z(i))return;let o=y.R.selectors.agentMode(v.M_.getState()),{question:d,files:m=[],extData:x,messageType:f="text"}=i,h=b.V.selectors.chatMode(v.M_.getState()),S=null==r?void 0:r.scheduleTask,_=H(S),M={...x,capabilities:{..._},mode:a.do[o]},L=v.M_.getState().sessions.currentSessionId,A=v.M_.getState().chat.sendQuestionBehavior,R=(null==r?void 0:r.sessionId)||L,U=Q();if(!R){R=(0,p.v)();let a={$typeName:"session.v1.AgentSession",isShared:!1,icon:"",lastDisplayMessage:i.question,status:E.Ph.UNSPECIFIED,title:"",uid:R,unreadMessageCount:0,userId:"",isFavorite:!1,createdAt:{$typeName:"google.protobuf.Timestamp",...u.F.dateToProtoTimestamp(new Date)},agentTaskMode:"high_effort"===h?P.Ku.HIGH_EFFORT:P.Ku.STANDARD,collaborators:[],feedbackSubmitted:!1,costedCredits:0,publishedToCommunity:!1,auditStatus:P.EO.PENDING,isBlocked:!1,feedbackEventIds:[]},r=y.R.selectors.userInfo(v.M_.getState());r&&(a.collaborators[0]={$typeName:"session.v1.Collaborator",userId:r.userId,avatar:r.avatar,email:r.email,isOwner:!0,name:r.nickname,permission:I.O.CollaboratorPermission.READ_WRITE,status:0,isTeamMember:y.R.selectors.isTeamAccount(v.M_.getState()),sessionUid:R}),e(N.uT.actions.upsertSession(a)),e(N.uT.actions.setCurrentSessionId(R)),t(!1),c.y.chatBox.sendMsg("new_session",{files:m}),(null==A?void 0:A.from)==="updateDialog"&&((0,c.C)({eventName:"update_dialog_triggered_send_click",source:A.source}),e(b.V.actions.setSendQuestionBehavior(null)),e(b.V.actions.setInputPlaybookId(null)))}e(b.V.actions.setInputValue(""));let D=()=>m.map(e=>{var t,i,a;if((null===(t=e.fileMetaData)||void 0===t?void 0:t.tag)==="pasted_content"){let t=w.$.getUserPastedContent(e.fileMetaData.fileId);if(t)return{filename:e.fileObject.name,id:t.lastId,type:e.type,url:t.url,extra:e.extra,fileMetaData:t.url?void 0:{tag:"pasted_content_file",content:t.lastContent,fileId:null===(a=e.fileMetaData)||void 0===a?void 0:a.fileId}}}return{filename:e.fileObject.name,id:e.id,type:e.type,url:e.url||"",extra:e.extra,contentType:null===(i=e.fileObject)||void 0===i?void 0:i.type}}),O={id:(0,p.v)(),messageStatus:"pending",type:"user_message",timestamp:Date.now(),sessionId:R,content:d,taskMode:null!=U?U:h,attachments:D(),extData:M,scheduleTask:S,countryIsoCode:null===(n=y.R.selectors.userRegion(v.M_.getState()))||void 0===n?void 0:n.iso};T.T.emit("scrollToBottom",{clearLock:!0,allowSources:["chat"]}),e(N.uT.actions.handleSessionNewMessageEvent({$typeName:"session.v1.SessionNewMessageEvent",newMessageCount:1,unreadMessageCount:0,sessionUid:R,status:E.Ph.RUNNING,lastDisplayMessage:d,lastMessageTime:{$typeName:"google.protobuf.Timestamp",...u.F.dateToProtoTimestamp(new Date)},agentTaskMode:"high_effort"===h?P.Ku.HIGH_EFFORT:P.Ku.STANDARD,collaborators:[]})),e(b.V.actions.afterSendQuestion()),e(g.V.actions.setPrevAutoOpenedSidebarType(null)),e(k.M.actions.setTaskFinished(!1)),L&&L!==O.sessionId||e(k.M.actions.received({type:"event",id:O.id,sessionId:R,timestamp:Date.now(),messageStatus:"pending",event:{senderId:null===(l=v.M_.getState().auth.userInfo)||void 0===l?void 0:l.uid,id:O.id,messageType:f,timestamp:Date.now(),type:"chat",sender:"user",content:d,attachments:O.attachments||[],taskMode:O.taskMode,extData:O.extData}}));let z=k.M.selectors.selectLastAssistantMessage(v.M_.getState());(null==z?void 0:z.messageStatus)==="pending"&&e(k.M.actions.received({...z,event:{...z.event,userCanceled:!0}}));let B=new AbortController,G=new AbortController,K=()=>{let t=v.M_.getState().websocket.entities[O.id];t&&"confirmed"!==t.messageStatus&&(F[O.id]=i,B.abort(),G.abort(),(0,c.C)({eventName:"send_message_timeout",extData:{sessionId:R}}),e(k.M.actions.messageSentTimeout({messageId:O.id})))},Y=null;setTimeout(()=>{"connected"!==v.M_.getState().websocket.status&&(K(),Y&&clearTimeout(Y))},1e4),Y=setTimeout(()=>{K()},5e4),R||await V("new_session",{sessionId:R},{signal:B.signal}),c.y.chatBox.sendMsg("user_message",{files:m,extData:M});let $=m.filter(e=>{var t,i;return(null===(t=e.fileMetaData)||void 0===t?void 0:t.tag)==="pasted_content"&&!w.$.attachmentIsReady(null===(i=e.fileMetaData)||void 0===i?void 0:i.fileId)}),q=j.W.selectors.previewFile(v.M_.getState());if((null==q?void 0:null===(s=q.fileMetaData)||void 0===s?void 0:s.tag)==="pasted_content"&&(null==q?void 0:q.filetype)==="txt"&&W(),$.length){let e=$.map(e=>{var t;return(null===(t=e.fileMetaData)||void 0===t?void 0:t.fileId)||""});await w.$.waitReady(e),O.attachments=D(),w.$.clearReadySource(e)}await V("user_message",O,{signal:G.signal}).then(e=>{J(e)}),e(b.V.actions.setCreateMode(null)),e(b.V.actions.setChatExtData(null))}),Y=(0,x.w)(t=>{let i=F[t];i&&Z(i)&&(e(k.M.actions.deleteMessageById({messageId:t})),O(),K(i),delete F[t])}),$=(0,x.w)(async function(i){let{file:a,extData:r,extraFeature:n}=i,s=b.V.selectors.chatMode(v.M_.getState()),l=v.M_.getState().sessions.currentSessionId,o=Q();l||(l=(0,p.v)(),e(N.uT.actions.setCurrentSessionId(l))),e(b.V.actions.setInputValue(""));let d={id:(0,p.v)(),messageStatus:"pending",type:"user_message",timestamp:Date.now(),sessionId:l,content:"",taskMode:null!=o?o:s,attachments:[{filename:a.name,id:"",type:"voice",url:""},...v.M_.getState().chat.files.map(e=>({filename:e.fileObject.name,id:e.id,type:e.type,url:e.url||"",extra:e.extra}))],extData:r};e(k.M.actions.received({type:"event",id:d.id,sessionId:l,timestamp:Date.now(),messageStatus:"pending",event:{id:d.id,messageType:"voice",timestamp:Date.now(),type:"chat",sender:"user",content:"",attachments:d.attachments||[]}})),await z(a,{type:"voice"}),l===v.M_.getState().sessions.currentSessionId&&(e(k.M.actions.deleteMessageById({messageId:d.id})),t(!1),c.y.chatBox.sendMsg("new_session",{files:v.M_.getState().chat.files})),await K({question:"",files:v.M_.getState().chat.files,extData:r,extraFeature:n,messageType:"voice"},{sessionId:l}),e(b.V.actions.setCreateMode(null)),e(b.V.actions.setChatExtData(null))}),q=(0,x.w)(t=>{e(b.V.actions.setInputMode(t))}),J=(0,x.w)(t=>{if("chat"===t.type&&"user"===t.sender){let i=j.W.selectors.previewFile(v.M_.getState()),a=t.attachments.find(e=>e.url===(null==i?void 0:i.url));i&&a&&a.path&&e(j.W.actions.setPreviewFile({...i,sandboxPath:a.path}))}}),X=(0,x.w)(e=>{switch(e){case L.By.SLIDES:return"slides";case L.By.IMAGE:return"image-style";case L.By.VIDEO:return"video";case L.By.WEBPAGE:return"webpage";case L.By.WIDE_RESEARCH:return"wide-research";case L.By.AUDIO:return"audio";case L.By.UNSPECIFIED:default:return null}}),Q=(0,x.w)(()=>{let e;let t=b.V.selectors.chatMode(v.M_.getState()),i=b.V.selectors.createMode(v.M_.getState()),a=b.V.selectors.chatQuote(v.M_.getState()),r=N.uT.selectors.sessions(v.M_.getState()).length;return"standard"===t&&0===r&&(e="agent"),i&&"discuss"!==t&&(e="agent"),a&&(e="agent"),e}),ee=(0,x.w)(async()=>{try{let t=await h.F.SessionPublicService.listSlideTemplatesPublic({});t.slideTemplates&&e(b.V.actions.setSlideTemplateList(t.slideTemplates))}catch(e){}}),et=(0,x.w)(async()=>{e(b.V.actions.setSlideTemplateListLoading(!0)),await ee(),e(b.V.actions.setSlideTemplateListLoading(!1))}),ei=(0,x.w)(async()=>{e(b.V.actions.setImageStyleListLoading(!0));try{let{sessionTemplates:t}=await h.F.SessionPublicService.listSessionTemplatesPublic({templateType:P.Hb.IMAGE,pageSize:100});e(b.V.actions.setImageStyleList(t))}catch(e){}finally{e(b.V.actions.setImageStyleListLoading(!1))}}),ea=(0,x.w)(async()=>{try{e(b.V.actions.setRecommendedPlaybooksLoading(!0));let t=await h.F.HomePagePlaybookPublicService.getRecommendedPlaybooks({});t.playbooks&&e(b.V.actions.setRecommendedPlaybooks(t.playbooks.sort(()=>Math.random()-.5).slice(0,4)))}catch(e){}e(b.V.actions.setRecommendedPlaybooksLoading(!1))}),er=(0,x.w)(t=>{let a=v.M_.getState().sessions.currentSessionId;e(b.V.actions.setInputValue(t)),i(a),e(b.V.actions.setSendQuestionBehavior(null))}),en=(0,x.w)(e=>{if(e.clipboardData.files.length>0){e.preventDefault(),B(Array.from(e.clipboardData.files).map(e=>{let t="pasted_file_".concat((0,p.v)().slice(0,6),"_");return new File([e],"".concat(t).concat(e.name),{type:e.type})}));return}let t="";for(let i of["text/plain","text/html","text"])if(e.clipboardData.types.includes(i)){let a=e.clipboardData.getData(i);if(a&&a.length>0){t=a;break}}if(t&&t.length>3e3){e.preventDefault();let i=v.M_.getState().chat.files.map(e=>e.fileObject.name);k.M.selectors.selectAllChatQuestionEvents(v.M_.getState()).forEach(e=>{e.attachments.forEach(e=>{i.push(e.filename)})});let a=0;i.forEach(e=>{if("pasted_content.txt"===e)a=Math.max(a,1);else{let t=e.match(/pasted_content(?:_(\d+))?\.txt$/);t&&t[1]&&(a=Math.max(a,parseInt(t[1],10)))}});let r=[new File([t],0===a?"pasted_content.txt":"pasted_content_".concat(a+1,".txt"),{type:"text/plain"})],n=(0,p.v)();B(r,{fileMetaData:{tag:"pasted_content",fileId:n}}),w.$.setUserPastedContent(n,{url:"",content:t,lastContent:t,lastId:""});return}}),es=(0,x.w)(t=>{let i=o.f.preprocessBracketContent(t);e(b.V.actions.setInputMode("markdown")),er(i),T.T.emit("markdownInputAutoFocus")});return{hasEnoughQuota:G,canSendQuestion:Z,sendQuestion:K,sendVoiceQuestion:$,retryQuestion:Y,switchInputMode:q,convertActionToolToCreateMode:X,fetchSlidesTemplateList:ee,initSlidesTemplateList:et,initRecommendedPlaybooks:ea,onTextInputChange:er,onPaste:en,setPlaybookValue:es,initImageStyleList:ei,checkPermission:(0,x.w)(()=>{if(N.uT.selectors.currentSession(v.M_.getState())&&S.Z.selectCurrentSessionPermission(v.M_.getState()).isCollaborator)throw(0,f.oR)({variant:"error",title:A.I.t("Only the task owner can execute this action")}),Error("Permission denied")}),getAgentWaitingText:(0,x.w)(()=>{let e=k.M.selectors.selectChatBoxRenderEvents(v.M_.getState()),t=e[e.length-1];if((null==t?void 0:t.type)==="stepGroup"){let e=t.children[t.children.length-1];if(e&&"toolUsed"===e.type){if("google_calendar"===e.tool)return A.I.t("{product} will continue working once the calendar event is confirmed.",{product:a.KR});if("gmail"===e.tool)return A.I.t("{product} will continue working once the email is confirmed.",{product:a.KR})}}return A.I.t("{product} will continue working after your reply",{product:a.KR})})}}},51807:(e,t,i)=>{"use strict";i.d(t,{o:()=>w});var a=i(32595),r=i(19562),n=i(48835),s=i(13721),l=i(84974),o=i(80926),c=i(51416),d=i(27168),u=i(75958),p=i(57271),m=i(73677),x=i(67889),f=i(96263),h=i(54762),v=i(21374),g=i(67024);let y=e=>{let t=m.M_.getState().sessions.currentSessionId;if(!t)return;let i=m.M_.getState().sessions.sessions.entities[t];i&&(0,o.C)({eventName:"computer_detail",extData:{source:e,sessionId:i.uid,model:i.agentTaskMode}})};function w(){let e=(0,m.jL)(),t=(0,c.s)(a.b),{openChatWithImageDialog:i}=(0,n.n)(),{setPreviewFile:o}=(0,s.t)(),w=()=>{h.yl.clear(),e(f.K.actions.setSpacePreviewerEditMode(!1))},b=(0,u.w)(a=>{if("filePreviewer"===a.type){let{previewFile:r}=a,{filetype:n,url:s}=r;if(l.f.isImageFile(n)&&s){i(s);return}if(l.f.isVideoFile(n)&&s){let e;t.open({src:s,filetype:"video",videoAutoPlay:(e=!1,()=>!e&&(e=!0,!0))});return}if("link"===n&&s){window.open(s,"_blank");return}e(x.V.actions.setSidebarLocation("outside")),e(x.V.actions.setSidebarType(a.type));let c=e=>{o(e)},d=f.K.selectors.sessionFileList(m.M_.getState()).find(e=>{let t=v.C.getSessionFileId(e),i=v.C.getSessionFileSandboxPath(e);return"space"!==r.filetype&&(t===r.id||i===r.sandboxPath)});if(d){let e=v.C.convertSessionFileToPreviewFile(d);c({...e,previewUrl:r.previewUrl.replace(r.url,e.url)})}else{let e=f.K.selectors.notificationSessionFileList(m.M_.getState()).find(e=>e.sandboxPath===r.sandboxPath&&"space"!==r.filetype);c(e?{...r,shareId:e.shareId,url:e.fileUrl,previewUrl:r.previewUrl.replace(r.url,e.fileUrl),lastUpdatedAt:e.lastUpdatedAt||r.lastUpdatedAt}:r)}}else o(null);"workspace"===a.type&&(e(x.V.actions.setSidebarLocation(window.innerWidth>768?"inside":"outside")),null===m.M_.getState().agentWorkspace.sidebarType&&window.innerWidth>768&&j(),y(a.source),e(x.V.actions.setSidebarType(a.type)),e(g.M.actions.timelineChanged(100))),"chatReplySources"===a.type&&(e(x.V.actions.setSidebarLocation("outside")),e(x.V.actions.setChatReplySearchMetadata(a.searchMetadata)),e(x.V.actions.setSidebarType(a.type))),w()}),C=(0,u.w)(t=>{t&&"workspace"===t.type&&window.innerWidth>768&&S();let i=(null==t?void 0:t.lock)===!0;i&&e(x.V.actions.setAnimationLock(!0)),e(x.V.actions.setSidebarType(null)),o(null),e(x.V.actions.setIsSidebarFullscreen(!1)),w(),setTimeout(()=>{i&&e(x.V.actions.setAnimationLock(!1))},100)}),j=(0,u.w)(()=>{let t=document.getElementById("computer");if("ar"===p.I.translationManager.locale||!t)return;let i=t.cloneNode(!0),a=t.getBoundingClientRect();e(x.V.actions.setInitialComputerPosition({top:a.top,left:a.left,width:a.width,height:a.height})),i.style.position="fixed",i.style.top="".concat(a.top,"px"),i.style.left="".concat(a.left,"px"),i.style.width="".concat(a.width,"px"),i.style.height="".concat(a.height,"px"),i.style.opacity="1",i.style.transition="all 0.2s ease-in-out",i.style.zIndex="1000",i.style.border="none",i.className=i.className.replace("hover:scale-[1.03]",""),i.firstElementChild&&(i.firstElementChild.className=i.firstElementChild.className.replace(/scale-x-\[\d+\.?\d*\]/g,"").replace(/scale-y-\[\d+\.?\d*\]/g,"")+" w-full h-full"),document.body.appendChild(i),i.getBoundingClientRect();let r=l.f.isMobile()||window.innerWidth<d.D?1:m.M_.getState().configs.sessionListPinned?.4:.5,n=Math.min(Math.max(Math.round(window.innerWidth*r),368),window.innerWidth)-32,s=window.innerHeight-20-200,o=window.innerWidth-n-16-16;i.style.top="130px",i.style.left="".concat(o,"px"),i.style.height="".concat(s,"px"),i.style.width="".concat(n,"px"),i.style.opacity="0.3",i.addEventListener("transitionend",e=>{e.target===i&&i.remove()})}),S=(0,u.w)(()=>{if("ar"===p.I.translationManager.locale)return;let e=document.getElementById(r.eL.computerDetail);if(!e)return;let t=e.getBoundingClientRect(),i=e.cloneNode(!0);i.style.position="fixed",i.style.top="".concat(t.top,"px"),i.style.left="".concat(t.left,"px"),i.style.width="".concat(t.width,"px"),i.style.height="".concat(t.height,"px"),i.style.opacity="1",i.style.transition="all 0.2s ease-in-out",i.style.zIndex="1000",i.style.border="none",i.style.overflow="hidden",document.body.appendChild(i),i.getBoundingClientRect();let a=m.M_.getState().agentWorkspace.initialComputerPosition;i.style.top="".concat(a.top,"px"),i.style.left="".concat(a.left,"px"),i.style.width="".concat(a.width,"px"),i.style.height="".concat(a.height,"px"),i.style.opacity="0.3",i.addEventListener("transitionend",e=>{e.target===i&&i.remove()})});return{openSidebar:b,closeSidebar:C}}},48835:(e,t,i)=>{"use strict";i.d(t,{n:()=>R});var a=i(51416),r=i(75958),n=i(21284),s=i(58611),l=i(2635),o=i(15585),c=i(78308),d=i(54762),u=i(57271),p=i(56632),m=i(66343),x=i(50806),f=i(8398),h=i(53708),v=i(67024);function g(){let e=(0,n.GV)(v.M.selectors.selectAllEvents).flatMap(e=>"chat"!==e.type?[]:"user"===e.sender?e.attachments.flatMap(e=>{var t,i;return"image"===e.type||(null===(t=e.extra)||void 0===t?void 0:t.type)==="quoted_image"?[{url:e.url,filename:e.filename,contentLength:e.contentLength,contentType:e.contentType,isFromQuotedImage:(null===(i=e.extra)||void 0===i?void 0:i.type)==="quoted_image"}]:[]}):e.attachments.flatMap(e=>"image"===e.type?[{url:e.url,filename:e.filename,contentLength:e.contentLength,contentType:e.contentType}]:[])).filter((e,t,i)=>i.findIndex(t=>t.url===e.url)===t),t=(0,n.GV)(s.k.selectors.currentImageUrl);return{currentImage:(0,h.W)(()=>e.find(e=>e.url===t)),currentImageUrl:t,imageFileList:e}}function y(e){let{onClose:t}=e,i=(0,n.jL)(),{handleImageActionDownload:a}=(0,d.rN)(),{currentImage:h}=g(),v=(0,n.GV)(s.k.selectors.scale),y=(0,r.w)(()=>{let e=Math.min(v+.25,3);i(s.k.actions.setScale(e))}),w=(0,r.w)(()=>{let e=Math.max(v-.25,.25);i(s.k.actions.setScale(e))}),b=(0,r.w)(()=>{if(h)a({type:"image",url:h.url,originalFilename:h.filename})}),C=(0,r.w)(e=>Math.round(100*e)+"%");return(0,l.jsxs)("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-center ps-3 pe-5 py-3 w-full z-20",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 backdrop-blur-2xl rounded-lg bg-[var(--background-chat-with-image-toolbar)] px-[8px] py-[4px]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(c.m,{title:u.I.t("Zoom out"),children:(0,l.jsx)("button",{type:"button",className:(0,o.cn)("clickable size-7 flex items-center justify-center cursor-pointer hover:bg-[var(--fill-tsp-white-main)] rounded transition-colors",v<=.25&&"opacity-50 cursor-not-allowed"),onClick:w,disabled:v<=.25,children:(0,l.jsx)(p.A,{size:20,color:"var(--icon-primary)"})})}),(0,l.jsx)("div",{className:"text-sm text-[var(--text-primary)] font-normal leading-5 tracking-[-0.154px] whitespace-nowrap min-w-[38px] text-center",children:C(v)}),(0,l.jsx)(c.m,{title:u.I.t("Zoom in"),children:(0,l.jsx)("button",{type:"button",className:(0,o.cn)("clickable size-7 flex items-center justify-center cursor-pointer hover:bg-[var(--fill-tsp-white-main)] rounded transition-colors",v>=3&&"opacity-50 cursor-not-allowed"),onClick:y,disabled:v>=3,children:(0,l.jsx)(m.A,{size:20,color:"var(--icon-primary)"})})})]}),(0,l.jsx)("div",{className:"h-4 w-px bg-[var(--border-dark)]"}),(0,l.jsxs)("button",{type:"button",className:"clickable flex items-center gap-1.5 h-7 ps-2 pe-1 cursor-pointer hover:bg-[var(--fill-tsp-white-main)] rounded transition-colors",onClick:b,children:[(0,l.jsx)(x.A,{size:20,color:"var(--icon-primary)"}),(0,l.jsx)("span",{className:"text-sm text-[var(--text-primary)] font-normal leading-5 tracking-[-0.154px] whitespace-nowrap",children:u.I.t("Download")})]})]}),(0,l.jsx)(c.m,{title:u.I.t("Close"),children:(0,l.jsx)("button",{type:"button",className:"absolute end-5 clickable size-7 flex items-center justify-center cursor-pointer hover:bg-[var(--fill-tsp-white-main)] rounded transition-colors",onClick:t,children:(0,l.jsx)(f.A,{size:20,color:"var(--icon-primary)"})})})]})}var w=i(76743),b=i(19737),C=i(90921),j=i(12359),S=i(32549),I=i(7201),N=i(90264),k=i(99515),T=i(61475),_=i(6501);function M(e){let{onClose:t,className:i}=e,{sendQuestion:a}=(0,C.K)(),[s,d]=(0,k.useState)(""),p=(0,n.GV)(S.V.selectors.files),[m,x]=(0,k.useState)(!1),[f,h]=(0,k.useState)(!1),v=(0,n.GV)(I.Z.selectCurrentSessionPermission),y=(0,k.useRef)(null),{currentImage:M}=g(),{onPaste:L}=(0,C.K)(),P=s.trim().length>0||p.length>0,E=p.every(e=>"success"===e.status),A=(0,r.w)(async()=>{if(!P||!E||!M)return;let e=M.filename;a({question:s,files:[{id:"",progress:100,status:"success",type:"image",url:M.url,previewUrl:M.url,fileObject:new File([],e,{type:M.contentType}),extra:{type:"quoted_image"}},...p]}),t()}),R=(0,r.w)(e=>{d(e)}),F=(0,r.w)(e=>{var t;null!==(t=e.nativeEvent)&&void 0!==t&&t.isComposing||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())}),U=(0,r.w)(()=>{var e;null===(e=y.current)||void 0===e||e.focus({preventScroll:!0})}),D=(0,r.w)(()=>{let e=N.T.on("focusChatWithImageInput",()=>{U()});return()=>{e.unregister()}});if((0,k.useEffect)(()=>{let e=D();return()=>{e()}},[D]),v.isReadyOnly||!M)return null;let V=!P||!E;return(0,l.jsxs)("div",{className:(0,o.cn)("w-full py-[12px]","border border-[var(--border-main)] bg-[var(--fill-input-chat)] shadow-[0_12px_32px_0_rgba(0,_0,_0,_0.02)]","flex flex-col gap-2 transition-colors",m?"border-black/20 dark:border-[var(--border-dark)]":"border-black/8 dark:border-[var(--border-main)]",f||p.length>0?"rounded-[22px]":"rounded-[100px]",i),onClick:U,children:[(0,l.jsx)(T.h,{}),(0,l.jsxs)("div",{className:(0,o.cn)("grid gap-2 px-[12px] transition-all duration-200 ease-in-out",f?'[grid-template-areas:"textarea_textarea_textarea""attach_._send"] grid-rows-[auto_auto] grid-cols-[auto_1fr_auto]':'[grid-template-areas:"attach_textarea_send"] grid-cols-[auto_1fr_auto] items-center'),children:[(0,l.jsx)("div",{className:"[grid-area:attach]",children:(0,l.jsx)(_.C,{})}),(0,l.jsx)(b.T,{autoResize:!0,autoFocus:!0,value:s,onChange:e=>{let t=e.target.value;R(t),setTimeout(()=>{e.target.clientHeight>20?h(!0):t||h(!1)},0)},onKeyDown:F,onFocus:()=>x(!0),onBlur:()=>x(!1),rows:1,ref:y,onPaste:L,placeholder:u.I.t("Describe what to change or adjust"),className:(0,o.cn)("[grid-area:textarea] w-full resize-none border-0 bg-transparent p-0 text-[var(--text-primary)]","placeholder:text-[var(--text-tertiary)] focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0","text-sm font-normal !shadow-none leading-[20px] rounded-none")}),(0,l.jsx)("div",{className:"[grid-area:send] flex items-center",children:(0,l.jsx)(c.m,{title:u.I.t("Send(↵)"),children:(0,l.jsx)(w.A,{color:"black",className:"p-0 w-8 h-8 min-w-0",shape:"round",onClick:()=>{A()},disabled:V,children:(0,l.jsx)(j.D,{size:15,color:V?"var(--icon-disable)":"var(--icon-onblack)"})})})})]})]})}var L=i(766);function P(e){var t;let{className:i}=e,{currentImageUrl:a,currentImage:c}=g(),d=(0,n.GV)(s.k.selectors.scale),[u,p]=(0,k.useState)({width:void 0,height:void 0}),m=(0,r.w)(e=>{p({width:e.currentTarget.width,height:e.currentTarget.height})}),[x,f]=(0,k.useState)({isDragging:!1,startX:0,startY:0,translateX:0,translateY:0}),h=(0,r.w)(e=>{e.preventDefault(),e.currentTarget.setPointerCapture(e.pointerId),f(t=>({...t,isDragging:!0,startX:e.clientX-t.translateX,startY:e.clientY-t.translateY}))}),v=(0,r.w)(e=>{if(!x.isDragging)return;e.preventDefault();let t=e.clientX-x.startX,i=e.clientY-x.startY;f(e=>({...e,translateX:t,translateY:i}))}),y=(0,r.w)(e=>{e.currentTarget.releasePointerCapture(e.pointerId),f(e=>({...e,isDragging:!1}))}),w=(0,r.w)(e=>{e.currentTarget.releasePointerCapture(e.pointerId),f(e=>({...e,isDragging:!1}))});if(!a)return null;let b="scale(".concat(d,") translate(").concat(x.translateX/d,"px, ").concat(x.translateY/d,"px)"),C=x.isDragging?"grabbing":"grab";return(0,l.jsx)("div",{className:(0,o.cn)("flex items-center justify-center px-[24px]",i),children:(0,l.jsx)(L._,{src:a,alt:null==c?void 0:c.filename,draggable:!1,className:"max-h-full max-w-full touch-none inline-flex rounded-[8px] overflow-hidden select-none object-contain",style:{transform:b,transformOrigin:"center center",cursor:C,transition:x.isDragging?"none":"transform 0.1s ease-out",willChange:"transform",width:null!==(t=u.width)&&void 0!==t?t:"100%"},onLoad:m,onPointerDown:h,onPointerMove:v,onPointerUp:y,onPointerCancel:w})})}function E(e){let t=(0,n.jL)(),i=(0,k.useRef)(null),a=(0,k.useRef)(null),{currentImage:c,imageFileList:d}=g(),u=d.filter(e=>!e.isFromQuotedImage),p=(0,r.w)(e=>{let i=e.url;i&&(t(s.k.actions.setCurrentImageUrl(i)),t(s.k.actions.setScale(1)),N.T.emit("focusChatWithImageInput"))}),m=(0,r.w)(e=>{let t;if(u.length<=1||!c)return;let i=c.url,a=u.findIndex(e=>e.url===i);if(-1===a)return;t="next"===e?(a+1)%u.length:0===a?u.length-1:a-1;let r=u[t];r&&(p(r),N.T.emit("focusChatWithImageInput"))}),x=(0,r.w)(e=>{if(u.length<=1)return;let t=document.activeElement;if(!((t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&t.value.trim()))switch(e.key){case"ArrowUp":case"ArrowLeft":e.preventDefault(),m("prev");break;case"ArrowDown":case"ArrowRight":e.preventDefault(),m("next")}});if((0,k.useEffect)(()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}),[x]),(0,k.useEffect)(()=>{if(!a.current||!i.current)return;let e=a.current,t=setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(t)},[c]),u.length<=1||!c||c.isFromQuotedImage)return null;let f=c.url;return(0,l.jsx)("div",{className:"fixed top-0 end-0 bottom-0 pt-[68px] pb-[110px] flex items-center z-10",children:(0,l.jsx)("div",{ref:i,className:"flex flex-col gap-2 items-end pe-4 w-[80px] max-h-full overflow-y-auto scrollbar-hide",children:u.map(e=>{let t=e.url,i=f===t,r=e.filename;return(0,l.jsx)("button",{type:"button",ref:i?a:null,className:(0,o.cn)("clickable relative rounded-lg border border-[var(--border-main)] overflow-hidden cursor-pointer transition-all duration-200 flex-shrink-0",i?"size-12 opacity-100":"size-10 opacity-50 hover:opacity-75"),onClick:()=>p(e),children:(0,l.jsx)(L._,{src:t,alt:r,className:"w-full h-full object-cover"})},t)})})})}function A(e){let t=(0,n.jL)(),i=(0,n.GV)(s.k.selectors.scale),a=(0,r.w)(()=>{e.onDisposed(),t(s.k.actions.setScale(1)),t(s.k.actions.setCurrentImageUrl(""))}),c=i>1;return(0,l.jsxs)("div",{className:(0,o.cn)("fixed inset-0 border-l border-[var(--border-main)] bg-[var(--background-gray-main)]",c?"":"flex flex-col pb-[20px]"),children:[(0,l.jsx)(y,{onClose:a}),(0,l.jsx)(P,{className:(0,o.cn)(c?"w-full h-full":"flex-1 min-h-0 pt-[68px] pb-[32px] max-w-[min(760px,100%-160px)] mx-auto w-full")}),(0,l.jsx)(E,{}),(0,l.jsx)(M,{className:(0,o.cn)("max-w-[min(760px,100%-32px)]",c?"fixed bottom-[20px] left-1/2 -translate-x-1/2":"mx-auto relative z-10"),onClose:a})]})}function R(){let e=(0,n.jL)(),t=(0,a.s)(A);return{openChatWithImageDialog:(0,r.w)(i=>{i&&(e(s.k.actions.setScale(1)),e(s.k.actions.setCurrentImageUrl(i)),t.open())})}}},92803:(e,t,i)=>{"use strict";i.d(t,{o:()=>I});var a=i(19562),r=i(57258),n=i(84974),s=i(14960),l=i(15038),o=i(51416),c=i(75958),d=i(9205),u=i(93347),p=i(21284),m=i(32549),x=i(10065),f=i(7201),h=i(69079),v=i(18182),g=i(90264),y=i(32289),w=i(91767),b=i(6719),C=i(69878),j=i(57271);let S=n.f.createReadySource();function I(){let e=(0,p.jL)(),t=(0,o.s)(w.T),i=(0,o.s)(b.d),n=(0,o.s)(y.$),{handleNewSession:I}=(0,r.B)(),N=(0,c.w)(async()=>{try{let t=localStorage.getItem(a.d5.connectors);t&&e(x.h.actions.setConnectors(JSON.parse(t))),await k(),await D(!0)}catch(e){console.error(e)}S.markReady()}),k=(0,c.w)(async()=>{let t=await u.F.ConnectorsService.listConnectors({offset:0,limit:150});e(x.h.actions.setConnectors(t.connectors))}),T=(0,c.w)(async t=>{try{let{uid:i}=await u.F.ConnectorsService.createConnector({connector:t}),a=await P(i);if(a){e(x.h.actions.createConnector(a)),(0,d.oR)({title:j.I.t("Successfully created connector"),variant:"success"});let t=p.M_.getState().sessions.currentSessionId;return t&&e(x.h.actions.setTemporaryEnabledOverride({sessionId:t,uid:i,isEnabled:!0})),a}return!1}catch(e){return console.error(e),(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"}),!1}}),_=(0,c.w)(async t=>{try{return await u.F.ConnectorsService.updateConnector({connector:t}),e(x.h.actions.updateConnector({...t,updatedAt:{$typeName:"google.protobuf.Timestamp",...s.F.dateToProtoTimestamp(new Date)}})),(0,d.oR)({title:j.I.t("Successfully updated connector"),variant:"success"}),await P(t.uid),!0}catch(e){return console.error(e),(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"}),!1}}),M=(0,c.w)(async t=>{try{await u.F.ConnectorsService.deleteConnector({uid:t}),e(x.h.actions.deleteConnector({uid:t})),(0,d.oR)({title:j.I.t("Successfully deleted connector"),variant:"success"})}catch(e){console.error(e),(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"})}}),L=(0,c.w)(async function(t){var i;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new URL(window.location.origin+window.location.pathname);r.searchParams.set("connectorId",t.uid),r.searchParams.set("oAuthSuccess","1");let n={$typeName:"connectors.v1.InstallOrConfigureConnectorRequest",uid:t.uid,byokConfig:t.byokConfig,mcpConfig:t.mcpConfig,builtinConfig:t.builtConfig,callbackRedirect:t.type===C.uM.BUILTIN||t.type===C.uM.MCP&&(null===(i=t.mcpConfig)||void 0===i?void 0:i.instantOauth)?r.toString():void 0};try{let i=await u.F.ConnectorsService.installOrConfigureConnector(n);if(!i.oauthUrl){await k();let e=t.isInstalled?j.I.t("Successfully updated connector"):j.I.t("Successfully installed connector");(0,d.oR)({title:e,variant:"success"})}if(a&&i.oauthUrl){let e=new URL(window.location.href);e.searchParams.set("connectorId",t.uid),e.searchParams.set("view","1"),window.history.replaceState({},"",e.toString()),window.location.href=i.oauthUrl}let r=p.M_.getState().sessions.currentSessionId;return r&&e(x.h.actions.setTemporaryEnabledOverride({sessionId:r,uid:t.uid,isEnabled:!0})),i.oauthUrl}catch(e){console.error(e),(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"})}}),P=(0,c.w)(async t=>{let{connector:i}=await u.F.ConnectorsService.getConnector({uid:t});return e(x.h.actions.updateConnector({uid:t,...i})),i}),E=(0,c.w)(async t=>{try{e(x.h.actions.updateConnector({uid:t,isInstalled:!1,isEnabled:!1,builtConfig:void 0,mcpConfig:void 0,byokConfig:void 0})),await u.F.ConnectorsService.uninstallConnector({uid:t}),await P(t),(0,d.oR)({title:j.I.t("Successfully uninstalled connector"),variant:"success"})}catch(e){console.error(e),(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"})}}),A=(0,c.w)(async(t,i)=>{var a;let r=null===(a=x.h.selectors.connectorByUid(p.M_.getState(),t))||void 0===a?void 0:a.isEnabled;try{e(x.h.actions.updateConnector({uid:t,isEnabled:i})),await u.F.ConnectorsService.enableConnector({uid:t,enable:i})}catch(i){console.error(i),(0,d.oR)({title:l.P.formatErrorToString(i),variant:"error"}),e(x.h.actions.updateConnector({uid:t,isEnabled:r}))}}),R=(0,c.w)(e=>{let t=p.M_.getState(),i=x.h.selectors.connectors(t);return{enabledConnectors:e?e.connectors.flatMap(e=>{let t=i.find(t=>t.uid===e.uid);return t&&t.isInstalled?[{name:t.name,iconUrl:t.iconUrl,uid:t.uid,type:t.type,builtConfig:t.builtConfig}]:[]}):[]}}),F=(0,c.w)(()=>{var e;let t=p.M_.getState(),i=x.h.selectors.connectors(t),a=h.uT.selectors.currentSession(t),r=null==a?void 0:null===(e=a.collaborators.find(e=>e.isOwner))||void 0===e?void 0:e.userId,n=f.Z.selectSessionPermission(t,null==a?void 0:a.uid),s=null==n?void 0:n.isOwner,{enabledConnectors:l,hasEvent:o}=v.M.selectors.selectConnectorsFromSessionEvents(t,r),c=x.h.selectors.temporaryEnabledOverridesBySessionId(t,(null==a?void 0:a.uid)||""),d=x.h.selectors.temporaryGithubRepositoriesBySessionId(t,(null==a?void 0:a.uid)||"");return!a||s?{enabledConnectors:i.filter(e=>{if(!e.isInstalled)return!1;if(!o)return e.isEnabled;let t=e.isEnabled;return t=l.length>0&&l.some(t=>t.uid===e.uid),void 0!==c[e.uid]&&(t=c[e.uid]),t}).map(e=>{var t;let i={name:e.name,iconUrl:e.iconUrl,uid:e.uid,type:e.type};return e.type===C.uM.BUILTIN&&(null===(t=e.builtConfig)||void 0===t?void 0:t.builtIn)===C.P1.BUILTIN_ID_GITHUB?{...i,builtConfig:e.builtConfig?{...e.builtConfig,githubRepo:(()=>{var t,i;if(d)return d;if(l.length>0){let t=l.find(t=>t.uid===e.uid);return(null==t?void 0:null===(i=t.builtConfig)||void 0===i?void 0:i.githubRepo)||[]}return o?[]:(null===(t=e.builtConfig)||void 0===t?void 0:t.githubRepo)||[]})()}:void 0}:{...i,builtConfig:e.builtConfig}})}:{enabledConnectors:l}}),U=(0,c.w)(e=>e?R(e):F()),D=(0,c.w)(async t=>{try{if(t&&!x.h.selectors.connectors(p.M_.getState()).some(e=>{var t;return(null===(t=e.builtConfig)||void 0===t?void 0:t.builtIn)===C.P1.BUILTIN_ID_GITHUB&&e.isEnabled}))return;e(x.h.actions.setGithubRepositoriesLoading(!0));let i=await u.F.ConnectorsService.getGithubRepoList({page:1,pageSize:100});e(x.h.actions.setGithubRepositories(i.repo))}catch(e){}e(x.h.actions.setGithubRepositoriesLoading(!1))}),V=(0,c.w)(async e=>{if(e.userId){await M(e.uid);return}await E(e.uid)}),O=(0,c.w)(async t=>{if(!t)return;let i="";t.type===C.uM.MCP||t.type===C.uM.BUILTIN?i=j.I.t("Help me test the {connectorName} connector and show me how to use its feature (e.g. show any data you fetched with it). Give me a brief about its capabilities.",{connectorName:t.name}):t.type===C.uM.BYOK&&(i=j.I.t("Help me test the {connectorName} API and show me how to use its features by creating a demo script. Give me a brief about its capabilities.",{connectorName:t.name})),t.isEnabled||await A(t.uid,!0),I(),e(m.V.actions.setChatMode("agent")),e(m.V.actions.setInputValue(i)),setTimeout(()=>{g.T.emit("focusPrimaryInput")})});return{initConnectors:N,createConnector:T,getConnector:P,updateConnector:_,deleteConnector:V,configureConnector:L,enableConnector:A,getSelectedConnectorTools:U,fetchListConnectors:k,fetchGithubRepositories:D,handleTryItOut:O,openConnectorDetailDialog:(0,c.w)(e=>{let{type:a}=e;a===C.uM.BUILTIN?t.open({uid:e.uid}):a===C.uM.MCP?e.userId?i.open({uid:e.uid}):t.open({uid:e.uid}):a===C.uM.BYOK?e.userId?n.open({uid:e.uid}):t.open({uid:e.uid}):console.error("Unknown connector type")}),createGoogleCalendarMeeting:(0,c.w)(async(e,t)=>{try{let{event:i}=await u.F.ConnectorsService.googleCreateMeet({startTime:e,endTime:t});return{id:null==i?void 0:i.id,hangoutLink:null==i?void 0:i.hangoutLink}}catch(e){(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"})}}),updateGoogleCalendarMeeting:(0,c.w)(async e=>{try{let{event:t}=await u.F.ConnectorsService.googleAddMeetToEvent({eventId:e});return{id:null==t?void 0:t.id,hangoutLink:null==t?void 0:t.hangoutLink}}catch(e){(0,d.oR)({title:l.P.formatErrorToString(e),variant:"error"})}})}}},3251:(e,t,i)=>{"use strict";i.d(t,{O:()=>W});var a=i(19562),r=i(80926),n=i(51416),s=i(75958),l=i(72522),o=i(94266),c=i(93347),d=i(15307),u=i(2635),p=i(76743),m=i(33890),x=i(17260),f=i(15585),h=i(85262),v=i(1084),g=i(57271),y=i(68209),w=i(8398);function b(e){let{open:t}=(0,n.s)(v.r);return(0,u.jsx)(m.l,{width:"400px",closeOnMaskClick:!1,onDisposed:e.onDisposed,closeIconVisible:!1,headerClassName:"none p-0",className:"flex flex-col items-center border-none rounded-[16px] bg-[var(--background-menu-white)]",children:(0,u.jsxs)("div",{className:(0,f.cn)("pt-[32px] px-[24px] pb-[24px] relative w-full"),children:[(0,u.jsx)(x.K,{className:(0,f.cn)("absolute top-[16px] ltr:right-[16px] rtl:left-[16px] z-10"),title:g.I.t("Close"),icon:w.A,iconClassName:"text-[var(--icon-secondary)]",onClick:()=>{e.onDisposed()}}),(0,u.jsx)("div",{className:(0,f.cn)("w-full flex justify-center mb-[16px]"),children:(0,u.jsx)(h.g,{size:48,color:"var(--icon-primary)"})}),(0,u.jsx)("h1",{className:(0,f.cn)("text-[var(--text-primary)] text-[24px] leading-[30px] font-semibold text-center mb-[8px]"),children:g.I.t("Your credits have been used up")}),(0,u.jsx)("p",{className:(0,f.cn)("text-[var(--text-secondary)] text-base text-center mb-[24px]"),children:(0,u.jsx)(y.p,{S:g.I.t("Buy an add-on for more credits.")})}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)(p.A,{size:"medium",variant:"outline",className:"flex-1 min-h-10 bg-[var(--fill-white)]",onClick:()=>{e.onDisposed()},children:g.I.t("Cancel")}),(0,u.jsx)(p.A,{variant:"default",size:"medium",color:"black",className:"flex-1 min-h-10",onClick:()=>{t()},children:g.I.t("Buy credits")})]})]})})}var C=i(73338),j=i(235),S=i(81656),I=i(84974),N=i(15038),k=i(86239),T=i(9205);function _(e){let{size:t=20,color:i="var(--icon-primary)"}=e;return(0,u.jsxs)("svg",{height:t,width:t,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,u.jsx)("path",{d:"M3.13351 2.85289C2.96089 3.20735 3.10623 3.63564 3.45812 3.80951C3.96356 4.05924 4.40218 4.30549 4.83646 4.79867C5.09654 5.09403 5.54509 5.1211 5.83832 4.85913C6.13155 4.59715 6.15843 4.14535 5.89834 3.84999C5.27949 3.1472 4.6425 2.80225 4.08323 2.52592C3.73133 2.35205 3.30613 2.49844 3.13351 2.85289Z",fill:i,fillRule:"evenodd"}),(0,u.jsx)("path",{d:"M6.9693 0.771513C6.58905 0.867266 6.35786 1.25538 6.45292 1.63839C6.51934 1.90598 6.58128 2.13479 6.63798 2.34424C6.7465 2.74514 6.83584 3.07514 6.90063 3.4705C6.96447 3.86003 7.32972 4.12367 7.71644 4.05937C8.10316 3.99506 8.36491 3.62716 8.30107 3.23763C8.22449 2.77035 8.10523 2.32823 7.98554 1.88446C7.93254 1.68795 7.87945 1.49112 7.82994 1.29164C7.73487 0.908629 7.34955 0.67576 6.9693 0.771513Z",fill:i,fillRule:"evenodd"}),(0,u.jsx)("path",{d:"M11.0262 1.2113C10.6911 1.0065 10.2546 1.11409 10.0513 1.45162C9.67415 2.07773 9.47589 2.69423 9.29174 3.43619C9.19668 3.8192 9.42787 4.20732 9.80812 4.30307C10.1884 4.39883 10.5737 4.16596 10.6687 3.78294C10.8394 3.09521 10.996 2.63943 11.2648 2.19327C11.4681 1.85574 11.3613 1.4161 11.0262 1.2113Z",fill:i,fillRule:"evenodd"}),(0,u.jsx)("path",{d:"M14.6444 18.8704C16.0206 17.9909 16.9721 13.2741 16.7628 11.8696C16.7628 11.8696 16.5447 11.1155 16.0124 11.1155C15.6046 11.1155 15.3792 11.447 15.2961 11.6021C15.2243 11.5755 15.1511 11.5514 15.0931 11.5327C15.0618 11.5226 15.0179 11.5087 14.9768 11.4956L14.8988 11.4707C14.8351 11.4503 14.7752 11.4306 14.7187 11.4111L14.7189 11.3911C14.7213 10.9353 14.675 10.2238 14.2028 9.48258C14.1272 9.36395 14.0559 9.2579 13.9949 9.16795L13.9567 9.1116C13.9113 9.0448 13.8757 8.99236 13.8415 8.94005C13.7574 8.81169 13.7345 8.76223 13.7256 8.73943L13.7252 8.73841C13.7217 8.72957 13.7146 8.71156 13.7127 8.65668C13.7103 8.58925 13.716 8.46162 13.7598 8.23839L13.9871 7.33009L13.9879 7.32541C14.0029 7.24204 14.0164 7.16709 14.0237 7.04507C14.0305 6.93273 14.0319 6.76948 14.0033 6.58014C13.9493 6.22148 13.7419 5.54163 13.0111 5.14752C12.8325 5.05122 12.6185 4.99356 12.4076 4.96599C12.2659 4.94745 12.0763 4.93476 11.8562 4.95176C11.4072 4.98644 10.818 5.14813 10.2934 5.62903L10.1628 5.76644C9.85791 6.13469 9.53587 6.59066 9.29156 6.99418C8.54984 6.64504 7.67672 6.2442 7.0667 6.02869C6.39716 5.79216 5.64991 5.59424 4.94768 5.61971C4.16998 5.64791 3.29558 5.97395 2.83781 6.89675C2.64976 7.27584 2.56952 7.71856 2.66609 8.17998C2.75837 8.62091 2.9866 8.95815 3.20458 9.19345C3.60929 9.63033 4.1514 9.90097 4.53346 10.065C4.82599 10.1906 5.12656 10.2951 5.39267 10.3797C5.36457 10.4306 5.33641 10.4832 5.30925 10.5367C5.2288 10.6949 5.13253 10.9066 5.06916 11.1488C5.00596 11.3903 4.95613 11.7344 5.04622 12.1225C5.13868 12.521 5.32165 12.8321 5.53964 13.0701C5.53136 13.1938 5.52828 13.3243 5.53287 13.4592C5.56352 14.3605 6.11389 14.9614 6.59798 15.3021C7.0592 15.6267 7.60238 15.826 8.04154 15.9599C8.46559 16.0893 8.9134 16.192 9.27725 16.2754L9.35511 16.2932C9.74287 16.3823 10.1261 16.4854 10.5095 16.5884C10.9443 16.7054 11.3793 16.8223 11.8214 16.919C11.9659 16.9507 12.1064 16.9809 12.2356 17.0085L12.2827 17.1312C12.8561 18.5964 13.6217 19.524 14.6444 18.8704ZM9.40519 12.8733C9.32671 12.8414 9.28166 12.8203 9.2417 12.8001C8.89441 12.6194 8.46717 12.7556 8.28652 13.1051C8.10551 13.4553 8.24099 13.8872 8.58864 14.0695C8.61712 14.0844 8.64605 14.0984 8.6751 14.1121C8.7238 14.1351 8.79164 14.1656 8.87425 14.1992C9.03715 14.2654 9.26872 14.3478 9.53127 14.4039C9.99722 14.5034 10.8585 14.5794 11.4425 13.9052C11.7228 13.5816 11.8576 13.1563 11.9088 12.7587C11.9615 12.3491 11.9352 11.8997 11.8323 11.4623C11.6295 10.6008 11.0928 9.65797 10.0907 9.21083C9.23198 8.82771 8.38339 8.73764 7.66778 8.81845C7.19 8.87241 6.73352 9.00783 6.36686 9.21423V9.19835C5.47017 8.94043 3.6857 8.42714 4.12514 7.54128C4.45827 6.86974 5.37096 6.92525 6.60889 7.36258C7.11169 7.54021 7.8104 7.85674 8.46947 8.16541C8.67377 8.26109 8.87426 8.35602 9.06392 8.44582C9.34035 8.5767 9.80252 8.79228 9.80252 8.79228C10.3282 8.15688 10.5323 7.80686 10.7124 7.49791C10.8363 7.28542 10.9489 7.09237 11.1469 6.83926C11.4273 6.481 11.8804 6.25961 12.3452 6.38924C12.6692 6.56393 12.5869 7.00519 12.5869 7.00519L12.3617 7.9049C12.1468 8.96371 12.3847 9.31409 12.7768 9.89156C12.8457 9.99299 12.9194 10.1015 12.9961 10.222C13.3089 10.7129 13.2944 11.1849 13.2826 11.5702C13.275 11.818 13.2686 12.0299 13.3509 12.1878C13.5206 12.5131 14.1555 12.7148 14.5718 12.847C14.6718 12.8788 14.7592 12.9066 14.8245 12.9311L14.8691 12.9488C14.8105 13.132 14.7572 13.3217 14.7039 13.5113C14.4671 14.3542 14.2314 15.1932 13.5285 15.4447C12.6414 15.762 11.7542 15.4617 11.7542 15.4617C11.5943 15.4147 11.4315 15.3782 11.2687 15.3418C11.0657 15.2964 10.8627 15.2509 10.6651 15.1849C10.3897 15.0819 10.004 14.9934 9.58476 14.8972C8.58661 14.6682 7.39861 14.3956 7.0584 13.7804C7.00109 13.6768 6.96784 13.5634 6.96361 13.4389C6.94437 12.8731 7.14116 12.3665 7.14116 12.3665C7.14116 12.3665 6.83596 12.3678 6.62193 12.1604C6.54215 12.0831 6.47503 11.9768 6.44111 11.8306C6.37334 11.5386 6.43153 11.1154 6.78638 10.758L6.96418 10.5793C7.05402 10.4889 7.32033 10.2963 7.82592 10.2392C8.30586 10.1851 8.89999 10.2433 9.5158 10.518C9.98815 10.7288 10.3147 11.2123 10.4511 11.7921C10.5178 12.0754 10.53 12.3504 10.5011 12.5749C10.4707 12.8113 10.4037 12.9298 10.3729 12.9653C10.3347 13.0094 10.2002 13.0853 9.82583 13.0053C9.66822 12.9716 9.51852 12.9193 9.40519 12.8733Z",fill:i,fillRule:"evenodd"})]})}var M=i(21284),L=i(23757),P=i(17808),E=i(99515),A=i(10417);function R(e){let{onDisposed:t}=e,[i,a]=(0,E.useState)(!1),{open:r}=(0,n.s)(A.v),{getPlanInfo:l,handleEndTrial:o}=(0,P.S)(),c=(0,M.GV)(L.R.selectors.planKey),d=l(c),x=(null==d?void 0:d.credits)||0,f=(0,s.w)(async()=>{if(!c)return null;k.J.setMotivation({page:"session",event:"credits_exhausted",reason:"end_trial"}),a(!0);try{await o({planKey:c})}catch(e){(0,T.oR)({variant:"error",title:N.P.formatErrorToString(e)})}a(!1)}),h=(0,s.w)(()=>{k.J.setMotivation({page:"session",event:"send_question_credits_limit",reason:"trial_view_all_plans"}),r({motivation:{page:"session"}})});return(0,u.jsxs)(m.l,{width:400,onDisposed:t,headerClassName:"p-0 pt-[48px] flex flex-col",children:[(0,u.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,u.jsx)(_,{size:72})}),(0,u.jsxs)("div",{className:"flex flex-col gap-[8px] items-center pt-[20px] pb-[16px] px-5 w-full",children:[(0,u.jsx)("div",{className:"text-[var(--text-primary)] text-[20px] leading-[26px] font-normal",children:g.I.t("Your credits have been used up")}),(0,u.jsx)("div",{className:"text-[var(--text-tertiary)] text-[14px] leading-[20px] font-normal text-center",children:(0,u.jsx)(y.p,{S:g.I.t("Purchase {plan} now and get {credits} monthly credits and {addOnCredits} add-on credits. <link>View all plans.</link>",{credits:I.f.formatCredits(x),plan:(null==d?void 0:d.planName)||"",addOnCredits:I.f.formatCredits(x)}),components:{credits:e=>(0,u.jsx)("span",{className:"text-[var(--text-secondary)]",children:e}),link:e=>(0,u.jsx)("span",{className:"underline decoration-solid cursor-pointer hover:opacity-80",onClick:()=>{t(),h()},children:e})}})})]}),(0,u.jsxs)("div",{className:"flex gap-3 items-center p-5 w-full",children:[(0,u.jsx)(p.A,{variant:"outline",color:"gray",size:"large",className:"flex-1",onClick:t,children:g.I.t("Cancel")}),(0,u.jsx)(p.A,{variant:"default",color:"black",size:"large",className:"flex-1",loading:i,onClick:f,children:g.I.t("Purchase {plan}",{plan:(null==d?void 0:d.planName)||""})})]})]})}var F=i(4890),U=i(35710),D=i(75234),V=i(73677),O=i(86154),z=i(34143),H=i(29313),B=i(18431);function W(){let e=(0,V.jL)(),{open:t}=(0,n.s)(A.v),{open:i}=(0,n.s)(v.r),{open:u}=(0,n.s)(j.A,{singleton:!0,closeWhenNextTrigger:!0}),{open:p}=(0,n.s)(S.A),{open:m}=(0,n.s)(C.b),{open:x}=(0,n.s)(F.Z),{open:f}=(0,n.s)(R),{open:h}=(0,n.s)(b),y=(0,s.w)(()=>{var e,r;let n=V.M_.getState(),s=n.auth,l=L.R.selectors.usageInfo(n),o=localStorage.getItem(a.d5.taskFinished),c=!1,u=L.R.selectors.isTeamAccount(V.M_.getState()),p=H.u.isTeamExpired(V.M_.getState()),v=B.u.selectors.isEduTeam(V.M_.getState());if(u){if(p)return{isEnough:c,handleCreditsNotEnough:()=>{v?m():x()}};c=!0}else{let e=d.s.selectors.getProRemoveCreditsVariant(V.M_.getState());if((null===(r=s.userInfo)||void 0===r?void 0:r.membershipVersion)===O.b.Pro&&((null==e?void 0:e.value)==="treatment01"||(null==e?void 0:e.value)==="treatment02")){if((null==l?void 0:l.cooldownStatus)===D.DB.STOP)return{isEnough:!1,handleCreditsNotEnough:()=>{h()}};c=!0}else c=!o||(null==l?void 0:l.total)&&l.total.remain>0}let g=(null===(e=s.userInfo)||void 0===e?void 0:e.membershipVersion)||O.b.Free;return(0,z.oD)(g)?{isEnough:c,handleCreditsNotEnough:()=>{i()}}:{isEnough:c,handleCreditsNotEnough:()=>{L.R.selectors.isTrial(V.M_.getState())?f():t()}}});return{checkCredits:y,updateCredits:(0,l.k)(async t=>{let i=t||await c.F.UserService.getAvailableCredits({});e(L.R.actions.updateUsageInfo(i))},2e3),checkConcurrentTask:(0,s.w)(()=>{var e;let t=V.M_.getState().sessions,i=V.M_.getState().auth.userInfo;return{isEnough:t.sessions.ids.reduce((e,a)=>{let r=t.sessions.entities[a],n=V.M_.getState().sessions.currentSessionId;if(r&&(r.status===U.Ph.RUNNING||r.status===U.Ph.IN_QUEUE)){var s;let t=null===(s=r.collaborators.find(e=>e.userId===(null==i?void 0:i.uid)))||void 0===s?void 0:s.isOwner;return n!==a&&t?e+1:e}return e},0)<(null!==(e=null==i?void 0:i.concurrentSessions)&&void 0!==e?e:5),handleConcurrentTaskNotEnough:()=>{(0,r.C)({eventName:"limit_dialog_show",extData:{source:"concurrency_limit"}}),u()}}}),checkMembershipWall:(0,s.w)(e=>{let{module:t,motivation:i}=e,a=L.R.selectors.isVip(V.M_.getState());return"slide_template"===t?{isEnough:a,handleNotEnough:()=>{let e="choose_theme"===i.event?"member_slides_theme":"member_slides_length";(0,r.C)({eventName:"limit_dialog_show",extData:{source:e}}),p({title:"choose_theme"===i.event?g.I.t("Upgrade to unlock more themes"):g.I.t("Upgrade to customize slides length"),icon:o.Q,description:"choose_theme"===i.event?g.I.t("You've chosen a member-only theme. "):g.I.t("You've chosen a member-only page length"),upgradeTitle:g.I.t("Upgrade now"),cancelText:g.I.t("Cancel"),motivation:i})}}:{isEnough:!0,handleNotEnough:()=>{}}})}}},13348:(e,t,i)=>{"use strict";i.d(t,{b:()=>s});var a=i(19562),r=i(75958),n=i(59413);function s(){let e=(0,r.w)(()=>{let e=i();return e&&s(),{activityEntryFlag:e}}),t=(0,r.w)((e,t)=>{let i=new Date;i.setTime(i.getTime()+6e4*(t||10)),n.A.set(a.eu.activityEntryFlag,e,{expires:i})}),i=(0,r.w)(()=>n.A.get(a.eu.activityEntryFlag)),s=(0,r.w)(()=>{n.A.remove(a.eu.activityEntryFlag)});return{consumeActivityEntryFlag:e,setActivityEntryFlag:t}}},43936:(e,t,i)=>{"use strict";i.d(t,{h:()=>x});var a=i(41574),r=i(84974),n=i(14960),s=i(15038),l=i(75958),o=i(9205),c=i(93347),d=i(21284),u=i(54971),p=i(57271);let m=r.f.createReadySource();function x(){let e=(0,d.jL)(),{checkAuthStatus:t}=(0,a.J)(),i=(0,l.w)(async()=>{try{e(u.U.actions.fileConnectorListLoading(!0)),await r()}catch(e){console.error(e)}m.markReady(),e(u.U.actions.fileConnectorListLoading(!1))}),r=(0,l.w)(async()=>{let t=await c.F.AppOAuthService.getConnectAPP({});e(u.U.actions.fileConnectorList(t.connectApp))}),x=(0,l.w)(async(e,t)=>{let i=t||window.location.href;if("google_drive"===e){let e=await c.F.AppOAuthService.getGoogleDriveAuthUrl({callbackRedirect:i});window.location.href=e.url}else if("one_drive_personal"===e){let e=await c.F.AppOAuthService.getOneDrivePersonalAuthUrl({callbackRedirect:i});window.location.href=e.url}else if("one_drive_business"===e){let e=await c.F.AppOAuthService.getOneDriveBusinessAuthUrl({callbackRedirect:i});window.location.href=e.url}else if("figma"===e){let e=await c.F.AppOAuthService.getFigmaAuthUrl({callbackRedirect:i});window.location.href=e.url}else throw Error(p.I.t("Unsupported connect app type"))}),f=(0,l.w)(async t=>{await c.F.AppOAuthService.disconnectAPP({type:t}),e(u.U.actions.disconnectFile(t)),r()}),h=(0,l.w)(async(e,a)=>{if(!t("webapp",{redirectUrl:a||window.location.href}))return!1;let l=u.U.selectors.fileConnectorListLoading(d.M_.getState());try{m.ready||l||await i(),await m.waitReady();let t=u.U.selectors.fileConnectorList(d.M_.getState()).find(t=>t.type===e);if(!t||!t.connected)return await x(e,a),!1;if(t.connected){var c;if(null===(c=t.connectInfo)||void 0===c?void 0:c.expireTime){let e=Date.now();if(new Date(n.F.protoTimestampToDate(t.connectInfo.expireTime)).getTime()-e<3e5)return await r(),!1}}return!0}catch(e){return(0,o.oR)({title:s.P.formatErrorToString(e),variant:"error"}),!1}});return{initFileConnector:i,fetchFileConnectorList:r,connectFile:x,disconnectFile:f,checkFileConnectStatus:h}}},13721:(e,t,i)=>{"use strict";i.d(t,{t:()=>w});var a=i(84974),r=i(15038),n=i(72669),s=i(75958),l=i(9205),o=i(93347),c=i(21284),d=i(84939),u=i(96263),p=i(33744),m=i(21374),x=i(51727),f=i(29313),h=i(69079);class v{async parse(e){let t=await e.text(),i={originalFilename:e.name,originalFileUrl:void 0,size:e.size,lastModified:new Date(e.lastModified)};return i.source=t,{...i,type:"code",lang:"plaintext",content:t}}}var g=i(43856),y=i(76656);function w(){let e=(0,c.jL)(),t=(0,s.w)(async()=>{var t,i,a;let r=x.W.selectors.previewFile(c.M_.getState());if((null==r?void 0:null===(t=r.fileMetaData)||void 0===t?void 0:t.tag)==="pasted_content"){let t=d.$.getUserPastedContent(r.fileMetaData.fileId);if(t){let i=await new v().parse(new File([t.lastContent],r.filename,{type:"text/plain"}));e(x.W.actions.setPreviewData(i));return}}if((null==r?void 0:null===(i=r.fileMetaData)||void 0===i?void 0:i.tag)==="pasted_content_file"){let t=await new v().parse(new File([r.fileMetaData.content],r.filename,{type:"text/plain"}));e(x.W.actions.setPreviewData(t));return}let n=new g.l,s=x.W.selectors.filePreviewerUrl(c.M_.getState());if(!s)return;e(x.W.actions.setLoading(!0));let l=await n.doParse(s,t=>{e(x.W.actions.setQuickFileName(t))});"slides"===l.type&&(l.sourceUrl=(null==r?void 0:r.url)||""),s===x.W.selectors.filePreviewerUrl(c.M_.getState())&&e(x.W.actions.setPreviewData(l)),e(x.W.actions.setLoading(!1)),"code"===l.type&&(null==r?void 0:null===(a=r.fileMetaData)||void 0===a?void 0:a.tag)==="pasted_content"&&d.$.updateUserPastedContent(r.fileMetaData.fileId,{content:l.content,lastContent:l.content})}),i=(0,s.w)(async e=>u.K.selectors.sessionFileList(c.M_.getState()).find(t=>m.C.getSessionFileSandboxPath(t)===e)),w=(0,s.w)(async t=>{let{sandboxPath:a,url:n,id:s,fileName:d}=t,u=h.uT.selectors.currentSessionid(c.M_.getState()),p=await i(a);if(!u||!p||p.isSynced)return;let m=x.W.selectors.previewFile(c.M_.getState());(null==m?void 0:m.id)===s&&e(x.W.actions.setSyncingFile(!0));let f=n;try{if(f.startsWith("blob")){let e=await fetch(n),t=await e.blob(),i=new File([t],d);f=await b({sandboxPath:a,file:i,sessionUid:u})}f.startsWith("http")&&await o.F.SessionService.syncSessionFile({file:{sandboxPath:a,fileUrl:f,fileStage:y.p2.PRODUCT,fileType:y.HJ.FILE,fileEditor:y.sB.AI,sessionUid:u,eventId:p.chatLocationEventId}})}catch(e){(0,l.oR)({title:r.P.formatErrorToString(e),variant:"error"})}e(x.W.actions.setSyncingFile(!1)),I(a,{url:f,isSynced:!0})}),b=(0,s.w)(async e=>{let{sandboxPath:t,file:i,sessionUid:a}=e,{uploadUrl:r,cdnUrl:s}=await o.F.SessionService.getSessionFileUploadUrl({sessionUid:a,sandboxPath:t});return await n.C.uploadFileToS3(r,i),s}),C=(0,s.w)(async t=>{let i=h.uT.selectors.currentSessionid(c.M_.getState()),a=x.W.selectors.previewFile(c.M_.getState()),n=null==a?void 0:a.sandboxPath;if(i&&n){e(x.W.actions.setSaveStatus("saving"));try{let r=await b({sandboxPath:a.sandboxPath,file:t,sessionUid:i});await o.F.SessionService.updateSessionFile({sandboxPath:a.sandboxPath,fileUrl:r,sessionUid:i}),e(x.W.actions.setSaveStatus("saved"));let n=f.u.filePreviewSessionFile(c.M_.getState());if(n){let e=m.C.getSessionFileSandboxPath(n);I(e,{url:r,lastUpdatedAt:Date.now()})}S(a.sandboxPath,{fileUrl:r,lastUpdatedAt:Date.now()}),"slides"===a.filetype&&e(x.W.actions.updateSlidesPreviewData({sourceUrl:r}))}catch(t){(0,l.oR)({title:r.P.formatErrorToString(t),variant:"error"}),e(x.W.actions.setSaveStatus("error"))}}}),j=(0,s.w)(i=>{if(!i){e(x.W.actions.resetState()),e(x.W.actions.setPreviewData(null)),e(x.W.actions.setPreviewFile(null));return}let a={...i},r=u.K.selectors.notificationSessionFileList(c.M_.getState()).find(e=>e.sandboxPath===(null==i?void 0:i.sandboxPath));r&&(a.url=r.fileUrl,a.previewUrl=i.previewUrl.replace(i.url,r.fileUrl),a.sandboxPath=r.sandboxPath),e(x.W.actions.resetState()),e(x.W.actions.setPreviewFile(a)),t()}),S=(0,s.w)((t,i)=>{let a=u.K.selectors.notificationSessionFileList(c.M_.getState()).find(e=>e.sandboxPath===t);a&&e(u.K.actions.addNotificationSessionFile([{...a,...i}]))}),I=(0,s.w)(async(t,i)=>{let{url:a,isSynced:r,shareId:n,lastUpdatedAt:s}=i,l=u.K.selectors.sessionFileList(c.M_.getState()).find(e=>m.C.getSessionFileSandboxPath(e)===t),o=x.W.selectors.previewFile(c.M_.getState());if(!l){let r="shareId"in i;if((null==o?void 0:o.sandboxPath)===t&&(e(x.W.actions.setPreviewFile({...o,url:null!=a?a:o.url,sandboxPath:t,previewUrl:o.previewUrl.replace(o.url,null!=a?a:o.url),shareId:r?n:o.shareId})),r)){let i=u.K.selectors.notificationSessionFileList(c.M_.getState()).find(e=>e.sandboxPath===t);!l&&i&&e(u.K.actions.addNotificationSessionFile([{...i,shareId:n}]))}return}let d={...l};if(r&&(d.isSynced=r),"shareId"in i&&(d.shareId=n),s&&(d.lastUpdatedAt=s),a){let e={...d.raw[0]};"tool_call_text_edit_file"!==e.type||e.url?"tool_call_img_view_file"===e.type?e.imageUrl=a:"tool_call_video_generate_file"===e.type?e.videoUrl=a:"tool_call_speech_generate_file"===e.type?e.audioUrl=a:e.url=a:e.url=a,d.raw=[e]}e(u.K.actions.updateSessionFile(d));let p=m.C.convertSessionFileToPreviewFile(d);(null==o?void 0:o.sandboxPath)===(null==p?void 0:p.sandboxPath)&&e(x.W.actions.setPreviewFile(p))}),N=(0,s.w)(async t=>{let i=[],a=x.W.selectors.previewFile(c.M_.getState()),r=h.uT.selectors.currentSessionid(c.M_.getState());for(let n of t.files)if(n.sessionUid===r){if(i.push(n),(null==a?void 0:a.sandboxPath)===n.sandboxPath){e(x.W.actions.setPreviewFile({...a,sandboxPath:n.sandboxPath,url:n.fileUrl,previewUrl:a.previewUrl.replace(a.url,n.fileUrl)}));let t=x.W.selectors.previewData(c.M_.getState());a.url!==n.fileUrl&&((null==t?void 0:t.type)==="markdown"&&n.fileType===y.HJ.FILE&&k(n),(null==t?void 0:t.type)==="slides"&&n.fileType===y.HJ.SLIDE&&T({file:n}))}I(n.sandboxPath,{url:n.fileUrl})}e(u.K.actions.addNotificationSessionFile(i))}),k=(0,s.w)(async t=>{e(x.W.actions.updateMarkdownPreviewData({reloading:!0}));try{let i=new g.l,a=await i.doParse(t.fileUrl,t=>{e(x.W.actions.setQuickFileName(t))});if("markdown"===a.type){e(x.W.actions.updateMarkdownPreviewData({content:a.content}));let t=x.W.selectors.previewFile(c.M_.getState());t&&e(x.W.actions.setPreviewFile({...t,lastUpdatedAt:Date.now()}))}}catch(e){(0,l.oR)({title:r.P.formatErrorToString(e),variant:"error"})}e(x.W.actions.updateMarkdownPreviewData({reloading:!1}))}),T=(0,s.w)(async t=>{let{file:i}=t;try{let t=new g.l,a=await t.doParse(i.fileUrl+"#filename=".concat(i.sandboxPath,".slides"),t=>{e(x.W.actions.setQuickFileName(t))});if("slides"===a.type){e(x.W.actions.updateSlidesPreviewData({content:{...a,files:a.files.map(e=>({...e,isStreaming:!1,lastModified:Date.now()}))}}));let t=x.W.selectors.previewFile(c.M_.getState());t&&e(x.W.actions.setPreviewFile({...t,lastUpdatedAt:Date.now()}))}}catch(e){(0,l.oR)({title:r.P.formatErrorToString(e),variant:"error"})}}),_=(0,s.w)(e=>e===y.my.HTML_TO_PDF?".pdf":e===y.my.HTML_TO_PPT?".pptx":""),M=(0,s.w)(async(e,t)=>{var i,r,n;let{taskUid:s,status:l}=await o.F.SessionPublicService.createSessionFileConvertTask(e);if(null==t?void 0:null===(i=t.signal)||void 0===i?void 0:i.aborted)return"";for((l==y.wA.PENDING||l===y.wA.CONVERTING)&&await a.f.asyncDelay(300);!(null==t?void 0:null===(r=t.signal)||void 0===r?void 0:r.aborted);){let i=await o.F.SessionPublicService.loopSessionFileConvertTask({taskUid:s});if(i.status===y.wA.SUCCESS)return(null==t?void 0:null===(n=t.signal)||void 0===n?void 0:n.aborted)||null==t||!t.autoDownload||p.$.downloadFileWithALink(i.toUrl,e.fileName),i.toUrl;if(i.status===y.wA.FAILED)throw Error(i.statusError);await a.f.asyncDelay(1e3*i.nextIntervalSeconds)}return""});return{parseCurrentPreviewerFile:t,handleSessionFileSave:C,setPreviewFile:j,updateSessionFile:I,onSessionFileChange:N,convertCurrentPreviewerFileAndDownload:(0,s.w)(async(e,t)=>{let i,{signal:a}=t,r=x.W.selectors.previewFile(c.M_.getState()),n=x.W.selectors.previewData(c.M_.getState());if(!r||"slides"!==r.filetype||(null==n?void 0:n.type)!=="slides")return"";let s=r.displayFilename,l=n.currentSlideId;return l&&!n.slideIds.includes(l)&&n.files.some(e=>e.id===l)&&(i=[l]),await M({fromUrl:r.url,convertType:e,fileName:s,pageIds:i},{autoDownload:!0,signal:a})}),getExtnameByConvertType:_,simpleConvertCurrentPreviewerFileTo:M,fetchCurrentFileHistory:(0,s.w)(async t=>{let{disabledErrorToast:i}=t,a=x.W.selectors.previewFile(c.M_.getState()),n=h.uT.selectors.currentSessionid(c.M_.getState());if(!a||!n)return;let s=a.sandboxPath;try{let t=await o.F.SessionService.listSessionFileVersions({sandboxPath:s,sessionUid:n,index:0,limit:999});e(x.W.actions.setFileHistory([t.current,...t.versions].flatMap(e=>e?[e]:[])))}catch(e){i||(0,l.oR)({title:r.P.formatErrorToString(e),variant:"error"})}}),syncFile:w,updateNotificationSessionFile:S}}},23591:(e,t,i)=>{"use strict";i.d(t,{G:()=>p});var a=i(75958),r=i(13452),n=i(93347),s=i(27016),l=i.n(s),o=i(59413),c=i(21284),d=i(23757);let u="intercom-session-".concat(r.a.intercomClientId),p=()=>{let e=(0,a.w)(async()=>!!o.A.get(u)),t=(0,a.w)(async e=>{window.Intercom||l()({app_id:r.a.intercomClientId,intercom_user_jwt:e,session_duration:31536e6}),(0,s.boot)({app_id:r.a.intercomClientId,hide_default_launcher:!0})});return{initHelpCenterAuth:(0,a.w)(async()=>{if(await e())return;let i=d.R.selectors.authStatus(c.M_.getState());if(i.isLogin&&!i.needSmsVerified)try{let e=(await n.F.UserService.getHelpCenterToken({})).token;await t(e)}catch(e){console.error(e)}}),handleUserLogoutHelpCenter:(0,a.w)(()=>{(0,s.shutdown)()})}}},18158:(e,t,i)=>{"use strict";i.d(t,{Yz:()=>p,d7:()=>m});var a=i(75958),r=i(93347),n=i(84974),s=i(15038),l=i(62861),o=i(9205),c=i(5591),d=i(21284),u=i(34787);let p=n.f.createReadySource();function m(){let e=(0,d.jL)(),t=(0,a.w)(async()=>{try{if(await i(void 0,void 0,!0),u.y.selectors.isNotificationListVisible(d.M_.getState())){let t=u.y.selectors.notificationList(d.M_.getState())[0];t&&(l._.setItem("latestNotificationId",t.uid),e(u.y.actions.setHasNew(!1)))}}catch(e){}p.markReady()}),i=(0,a.w)(async function(t,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=u.y.selectors.notificationTab(d.M_.getState()),o=null!=i?i:s;e(u.y.actions.setFetchNotificationListLoading(!0));try{var c,p;let i=await r.F.NotificationService.getNotificationListV2({latestUid:t,limit:10,notificationCategory:o}),n=i.data||[],s=n.length>=10;if(e(u.y.actions.setHasMoreNotification({category:o,hasMore:s})),a&&n.length>0){let t=null===(c=i.data[0])||void 0===c?void 0:c.uid,a=l._.getItem("latestNotificationId");t!==a&&e(u.y.actions.setHasNew(!0))}t?e(u.y.actions.setCategoryNotificationList({category:o,notifications:n,append:!0})):(e(u.y.actions.setCategoryNotificationList({category:o,notifications:n})),(null===(p=n[0])||void 0===p?void 0:p.uid)&&l._.setItem("latestNotificationId",n[0].uid))}catch(e){console.error("Failed to fetch notification list:",e)}finally{n&&n(),e(u.y.actions.setFetchNotificationListLoading(!1))}}),n=(0,a.w)(async()=>{try{let t=await r.F.NotificationService.getNotificationListV2({limit:1,notificationCategory:c.aF.CATEGORY_ALL});if(t.data&&t.data.length>0){let a=t.data[0],r=l._.getItem("latestNotificationId");if(a&&a.uid!==r){if(e(u.y.actions.setHasNew(!0)),u.y.selectors.isNotificationListVisible(d.M_.getState())){let t=u.y.selectors.notificationTab(d.M_.getState());await i(void 0,t),l._.setItem("latestNotificationId",a.uid),e(u.y.actions.setHasNew(!1))}return!0}}return!1}catch(e){return console.error("Failed to check for new notifications:",e),!1}});return{initNotification:t,fetchNotificationList:i,updateInteraction:(0,a.w)(async(t,i)=>{try{e(u.y.actions.updateNotificationItemInteraction({templateId:t,emojiKey:i})),await r.F.NotificationService.updateInteraction({templateUid:t,interactionKey:i})}catch(a){e(u.y.actions.updateNotificationItemInteraction({templateId:t,emojiKey:i})),(0,o.oR)({title:s.P.formatErrorToString(a),variant:"error"})}}),checkAndRefreshNotifications:n,fetchUpdatePageNotifications:(0,a.w)(async t=>{try{t&&e(u.y.actions.setUpdatePageLoading(!0));let i=(await r.F.NotificationPublicService.getPublicUpdateNotifications({latestUid:t,limit:10})).data||[],a=i.length>=10;e(u.y.actions.setUpdatePageHasMore(a)),t?e(u.y.actions.setUpdatePageNotificationList({notifications:i,append:!0})):e(u.y.actions.setUpdatePageNotificationList({notifications:i}))}catch(e){console.error("Failed to fetch update page notifications:",e)}finally{e(u.y.actions.setUpdatePageLoading(!1))}})}}},30078:(e,t,i)=>{"use strict";i.d(t,{$:()=>o,x:()=>c});var a=i(75958),r=i(93347),n=i(99515),s=i(21284),l=i(66555);function o(){let e=(0,s.jL)();return{initExchangeInfo:(0,a.w)(()=>{e(l.M.actions.initData())}),loadExchangeInfo:(0,a.w)(async()=>{let t=await r.F.UserPublicService.getExchangeInfo({});e(l.M.actions.updateSubscriptions(t.subscriptions)),e(l.M.actions.updateAddonList(t.addonCredits)),e(l.M.actions.updateTrials(t.trials))})}}function c(){let{initExchangeInfo:e,loadExchangeInfo:t}=o();(0,n.useEffect)(()=>{e(),t()},[])}},57258:(e,t,i)=>{"use strict";i.d(t,{B:()=>G});var a=i(90293),r=i(19562),n=i(68065),s=i(4700),l=i(51807),o=i(44865),c=i(84974),d=i(14960),u=i(15038),p=i(71252),m=i(62861),x=i(64741),f=function(e){return e[e.OWNER=20]="OWNER",e}(f||{});class h{getCollaboratorsInSession(e){return this.getCollaboratorsInStorage().flatMap(t=>{let{sessions:i,...a}=t,r=i.find(t=>t.id===e);if(r){let e=20===r.permission;return[{...a,isOwner:e,permission:20===r.permission?x.O.CollaboratorPermission.READ_WRITE:r.permission}]}return[]})}deleteCollaboratorFromSession(e,t){let i=this.getCollaboratorsInStorage(),a=i.find(e=>e.userId===t||e.email===t);a&&(a.sessions=a.sessions.filter(t=>t.id!==e),0===a.sessions.length&&i.splice(i.indexOf(a),1)),m._.setItem("collaborators",i)}addCollaboratorToSession(e,t){let i=this.getCollaboratorsInStorage(),a=i.find(e=>e.userId===t.userId||e.email===t.email);a?a.sessions.push({id:e,permission:t.permission}):i.push({...t,sessions:[{id:e,permission:t.permission}]}),m._.setItem("collaborators",i)}updateCollaboratorSessionPermission(e,t,i){let a=this.getCollaboratorsInStorage().map(a=>a.userId===t||a.email===t?{...a,sessions:a.sessions.map(t=>t.id===e?{id:e,permission:i}:t)}:a);m._.setItem("collaborators",a)}updateCollaborators(e,t){let i=this.getCollaboratorsInStorage().flatMap(t=>(t.sessions=t.sessions.filter(t=>{let{id:i}=t;return e!==i}),0===t.sessions.length)?[]:[t]);m._.setItem("collaborators",i),t.forEach(t=>{this.addCollaboratorToSession(e,t)})}sessionDeleted(e){let t=this.getCollaboratorsInStorage().flatMap(t=>(t.sessions=t.sessions.filter(t=>{let{id:i}=t;return e!==i}),0===t.sessions.length)?[]:[t]);m._.setItem("collaborators",t)}getCollaboratorsInStorage(){let e=m._.getItem("collaborators");return null!=e?e:[]}}let v=new h;var g=i(93347);async function y(e,t){let i=async()=>{let{collaborators:i}=await g.F.SessionCollaborateService.listCollaborators({sessionUid:e});return v.updateCollaborators(e,i),t(i),i},a=v.getCollaboratorsInSession(e);return(null==a?void 0:a.length)>0?(i(),a):await i()}var w=i(61522),b=i(36394),C=i(80926),j=i(51416),S=i(75958),I=i(9205),N=i(21788),k=i(81140),T=i(21284),_=i(67889),M=i(23757),L=i(32549),P=i(96263),E=i(54762),A=i(34787),R=i(7201),F=i(69079),U=i(18431),D=i(67024),V=i(90264),O=i(5591),z=i(76656),H=i(64752),B=i(57271),W=i(99515);function G(){let{messageSentToSocket:e}=(0,o.h)(),t=(0,j.s)(a.p),i=(0,T.jL)(),{closeSidebar:m}=(0,l.o)(),x=(0,W.useRef)(null),{getSpaceStatus:f,getShareSpaceStatus:h,updateSpaceEditCode:G,initSessionFiles:Z}=(0,E.rN)(),{checkShouldAutoPreviewFile:K}=(0,s.r)(),Y=(0,S.w)(async e=>{let{sessionId:t,title:a}=e;i(F.uT.actions.setSessionTitle({sessionId:t,title:a})),await g.F.SessionService.updateSession({sessionUid:t,title:a})}),$=(0,S.w)(function(e){let{sessionId:i,title:a}=e;t.open({title:B.I.t("Edit title"),type:"input",inputInitialValue:a,inputProps:{maxLength:120},description:B.I.t("Please enter a new title"),onConfirm:async e=>{try{if(C.y.chatOperation.sessionRename({sessionId:i}),!e)return!0;return await Y({sessionId:i,title:e}),!0}catch(e){return(0,I.oR)({title:u.P.formatErrorToString(e),variant:"error"}),!1}}})}),q=(0,S.w)(async function(e){let{isFavorite:t,sessionId:a}=e;i(F.uT.actions.toggleSessionFavorite({isFavorite:!t,uid:a}));let r=t?g.F.SessionService.unFavoriteSession:g.F.SessionService.favoriteSession;await r({sessionUid:a})}),J=(0,S.w)(function(e){let{sessionId:t}=e,a=F.uT.selectors.sessions(T.M_.getState()),r=a.findIndex(e=>e.uid===t),n=a[r];if(t===T.M_.getState().sessions.currentSessionId&&(Q(),window.history.replaceState({},"",k.bw.app.root())),!n)return;let s=R.Z.selectSessionPermission(T.M_.getState(),t),l=null==s?void 0:s.isOwner;i(F.uT.actions.deleteSessions({sessionId:t})),l?i(N.R.endpoints.deleteSession.initiate({sessionId:t})).then(e=>{var a;e.error||(null===(a=e.data)||void 0===a?void 0:a.ok)!=="yes"?n&&i(F.uT.actions.upsertSession(n)):(b.xA.removeId(t),v.sessionDeleted(t))}):((0,C.C)({eventName:"collaborate_leave_task_click"}),g.F.SessionCollaborateService.exitCollaboration({sessionUid:t}).then(()=>{b.xA.removeId(t),v.sessionDeleted(t)}).catch(()=>{n&&i(F.uT.actions.upsertSession(n))}))}),X=(0,S.w)(function(e){let{sessionId:t}=e;i(F.uT.actions.clearUnreadMessageCount(t)),g.F.SessionService.updateReadPosition({sessionUid:t,lastReadAt:d.F.dateToProtoTimestamp(new Date)}),i(F.uT.actions.setUnreadMessageIndex(null))}),Q=(0,S.w)(function(){let t=T.M_.getState().sessions.currentSessionId;t&&e("leave_session",{sessionId:t}),i(F.uT.actions.setCurrentSessionId(null)),i(D.M.actions.clearEvents()),i(F.uT.actions.setLoadSessionLoading(!1)),i(L.V.actions.setCreateMode(null)),i(L.V.actions.setChatExtData(null)),i(L.V.actions.setSendQuestionBehavior(null)),m({lock:!0}),i(L.V.actions.filesCleared()),i(L.V.actions.setInputValue("")),i(F.uT.actions.setIsSharePopoverVisible(!1)),i(L.V.actions.setShowSharePopover(!1)),i(_.V.actions.setIsSidebarVisibleInMobile(!1)),i(D.M.actions.setIsVNCConnected(null)),i(L.V.actions.setFileSuggestions([]))}),ee=(0,S.w)(async function(t){var a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,s=null===(a=null==n?void 0:n.autoScrollToBottom)||void 0===a||a,l=T.M_.getState().sessions.currentSessionId;if(T.M_.getState().notification.isNotificationListVisible&&(i(A.y.actions.setIsNotificationListVisible(!1)),i(A.y.actions.setNotificationTab(O.aF.CATEGORY_ALL))),l===t)return;let o=!1;try{Q(),i(F.uT.actions.setLoadSessionLoading(!0)),i(F.uT.actions.setCurrentSessionId(t)),X({sessionId:t}),f(),Z({sessionId:t}),await ea({sessionId:t,autoScrollToBottom:s});let a=!!D.M.selectors.selectLastFrontendEventId(T.M_.getState());G(),i(L.V.actions.setChatMode(D.M.selectors.selectDefaultTaskMode(T.M_.getState())));let r=null;try{r=await (0,w.w)(b.xA.getLastEventId(t))}catch(e){console.error("getLastEventId error",e)}await e("join_session",{sessionId:t,lastMessageId:r||(a?"new_session":void 0)})}catch(e){console.error("load session item error",e),o=!0,e instanceof Error&&"VersionError"===e.name&&(0,I.oR)({title:B.I.t("The IndexDB version is abnormal. Please delete the browser IndexDB cache and refresh the page to try again."),variant:"error",duration:1e4})}let c=T.M_.getState().sessions.currentSessionId;c&&t!==c||(en(r),i(F.uT.actions.setLoadSessionLoading(!1)),!o&&s&&V.T.emit("scrollToBottom",{clearLock:!0,allowSources:["chat"]}))}),et=(0,S.w)(async(e,t)=>{var a;i(F.uT.actions.setCurrentSessionId(e)),h(e);let[r,{collaborators:n}]=await Promise.all([er({sessionId:e,shared:!0,sig:t}),g.F.SessionCollaboratePublicService.listPublicCollaborators({sessionUid:e})]),s=n.map(t=>({...t,email:t.userId+"@mail.com",permission:0,$typeName:"session.v1.Collaborator",isTeamMember:!1,sessionUid:e})),l={uid:r.id,isFavorite:!1,isShared:!0,icon:(null===(a=r.iconInfo)||void 0===a?void 0:a.url)||"",agentTaskMode:r.agentTaskMode,lastDisplayMessage:"",status:0,title:r.title,unreadMessageCount:0,userId:"",$typeName:"session.v1.AgentSession",feedbackSubmitted:!1,costedCredits:0,publishedToCommunity:!1,collaborators:s,auditStatus:z.EO.PENDING,isBlocked:!1,feedbackEventIds:[]};return i(F.uT.actions.setAllCollaborators(s)),i(F.uT.actions.setSessions([l])),r}),ei=(0,S.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Q(),en(e),V.T.emit("focusPrimaryInput"),i(L.V.actions.setChatMode()),i(P.K.actions.clearSessionFileList()),T.M_.getState().notification.isNotificationListVisible&&(i(A.y.actions.setIsNotificationListVisible(!1)),i(A.y.actions.setNotificationTab(O.aF.CATEGORY_ALL)))}),ea=(0,S.w)(async function(e){let{sessionId:t,autoScrollToBottom:a}=e;try{var r;let e=c.f.createReadySource(),n=[],[s,l]=await Promise.all([(0,p.X7)(i,t),y(t,t=>{i(F.uT.actions.setAllCollaborators(t)),n=t,e.markReady()})]);if(i(F.uT.actions.setAllCollaborators(l)),t!==T.M_.getState().sessions.currentSessionId)return;if(i(L.V.actions.setSessionCreationSource(null!==(r=s.creationSource)&&void 0!==r?r:null)),(null==s?void 0:s.events)&&Array.isArray(s.events)){i(D.M.actions.initEvents({sessionId:t,events:s.events})),K();let e=es();l.length>1&&e?(i(F.uT.actions.setUnreadMessageIndex(null==e?void 0:e.index)),setTimeout(()=>{V.T.emit("scrollToEvent",{eventId:e.message.id,behavior:"auto"})},230)):s.events.findLast(e=>"toolUsed"===e.type)&&a&&setTimeout(()=>{V.T.emit("scrollToBottom",{clearLock:!0,allowSources:["chat"]})},230)}g.F.SessionService.getSession({sessionUid:t}).then(e=>{(null==e?void 0:e.session)&&i(F.uT.actions.upsertSession(e.session))}).finally(()=>{i(F.uT.actions.setLoadSessionDetailLoading(!1))}),e.waitReady().then(()=>{let e=F.uT.selectors.selectSessionById(T.M_.getState(),t);e&&i(F.uT.actions.upsertSession({...e,collaborators:n}))}),i(F.uT.actions.setIsSharePopoverVisible(!1))}catch(t){let e=()=>{i(F.uT.actions.setCurrentSessionId(null)),window.history.replaceState({},"",k.bw.app.root())};throw(null==t?void 0:t.status)===403||(null==t?void 0:t.status)===404||(null==t?void 0:t.status)===401?((403===t.status||401===t.status)&&(0,I.oR)({title:B.I.t("This link content is only visible to its creator"),variant:"warning"}),404===t.status&&(0,I.oR)({title:B.I.t("Sorry, the task no longer exists."),variant:"warning"}),e()):(null==t?void 0:t.code)===13&&((0,I.oR)({title:B.I.t("Access denied for this task. Returning to Home."),variant:"warning"}),e()),t}}),er=(0,S.w)(async e=>{let{sessionId:t,shared:a,sig:r}=e;return await i(N.R.endpoints.getSession.initiate({sessionId:t,type:a?"shared":"private",sig:r},{forceRefetch:!0})).unwrap()}),en=(0,S.w)(function(e){let t=T.M_.getState().sessions.currentSessionId,i="";if(t){let e=F.LE.getSelectors().selectById(T.M_.getState().sessions.sessions,t);e&&(i=e.title)}let a=r.KR;if(i?document.title="".concat(i," - ").concat(a):document.title=a,!e){let e=new URL(window.location.href).searchParams.toString(),i=e?"?".concat(e):"";t?window.history.pushState({},"","".concat(k.bw.app.session(t)).concat(i)):window.history.pushState({},"","".concat(k.bw.app.root()).concat(i))}}),es=(0,S.w)(()=>{let e=T.M_.getState().sessions.currentSessionId;if(!e)return null;let t=null,a=F.LE.getSelectors().selectById(T.M_.getState().sessions.sessions,e),r=D.M.selectors.selectChatBoxRenderEvents(T.M_.getState());if(!(null==a?void 0:a.lastReadAt)||0===r.length)return null;let n=el(r,a.lastReadAt.seconds);return n&&(t=n),i(F.uT.actions.handleSessionLastReadAtEvent({sessionUid:e,lastReadAt:d.F.dateToProtoTimestamp(new Date)})),t}),el=(0,S.w)((e,t)=>{if(!t||0===e.length)return null;for(let i=0;i<e.length;i++){let a=e[i];if((null==a?void 0:a.type)==="chat"&&"assistant"===a.sender&&a.timestamp&&Math.floor(a.timestamp/1e3)>t)return{message:a,index:i}}return null}),eo=(0,S.w)(async e=>{let t=await g.F.SessionCollaborateService.removeCollaborator(e);return i(F.uT.actions.removeCollaborate({sessionId:e.sessionUid,user:e.user})),v.deleteCollaboratorFromSession(e.sessionUid,e.user),t}),ec=(0,S.w)(async e=>{let t=await g.F.SessionCollaborateService.inviteCollaborator(e);return t.collaborator&&(i(F.uT.actions.addCollaborate({collaborator:t.collaborator,sessionId:e.sessionUid})),v.addCollaboratorToSession(e.sessionUid,t.collaborator)),t}),ed=(0,S.w)(async e=>{let{permission:t,sessionUid:a,user:r}=e;return i(F.uT.actions.updateCollaboratePermission({permission:t,sessionId:a,user:r})),v.updateCollaboratorSessionPermission(a,r,t),await g.F.SessionCollaborateService.updateCollaboratorPermission(e)}),eu=(0,S.w)(function(e,t){let a="public"===t;(0,C.C)({eventName:"session_share",extData:{sessionId:e,type:"public"===t?"public":"only_me"}}),i(F.uT.actions.shareSession({sessionId:e,isShared:a})),x.current&&x.current.signal.reason&&x.current.abort(),x.current=new AbortController,a?g.F.SessionService.shareSession({sessionUid:e},{signal:x.current.signal}):g.F.SessionService.unshareSession({sessionUid:e},{signal:x.current.signal})}),ep=(0,S.w)(async e=>{n.vw.waitReady().then(()=>{var t;let a=M.R.selectors.userInfo(T.M_.getState()),r=null==a?void 0:null===(t=a.teamInfo)||void 0===t?void 0:t.teamUid;r&&g.F.TeamService.listTeamMember({page:1,pageSize:200,searchKey:"",filterType:H.RJ.ALLUSER}).then(t=>{i(U.u.actions.setTeamMemberList(t.members)),i(F.uT.actions.setAllCollaborators(t.members.flatMap(t=>{var i;let a=null===(i=M.R.selectors.userInfo(T.M_.getState()))||void 0===i?void 0:i.uid;return t.userUid===a?[]:[{$typeName:"session.v1.Collaborator",userId:t.userUid,name:t.name,email:t.email,avatar:t.avatar,isOwner:!1,permission:z.W1.UNSPECIFIED,status:z.vy.UNSPECIFIED,teamId:r,isTeamMember:!0,sessionUid:e.sessionUid||""}]})))})});let{collaborators:t}=await g.F.SessionCollaborateService.listCollaborators(e);i(F.uT.actions.setAllCollaborators(t))}),em=(0,S.w)(async e=>{try{let t=new URL(e);if(t.pathname.startsWith(k.bw.share.root+"/")&&"invitation"===t.searchParams.get("from")){let e=t.pathname.split("/").pop();if(e)return await g.F.SessionCollaborateService.acceptInvite({sessionUid:e}),!0}return!1}catch(e){return!1}});return{openEditTitleDialog:$,updateSessionTitle:Y,toggleCollect:q,handleDelete:J,loadSessionItem:ee,handleNewSession:ei,clearConversation:Q,syncStatusToWindow:en,clearUnreadMessageCount:X,fetchShareSessionEvents:et,removeCollaborate:eo,inviteCollaborate:ec,updateCollaboratePermission:ed,toggleShareStatus:eu,fetchCollaborators:ep,acceptInvitation:em,getActiveCollaborators:(0,S.w)(e=>e.collaborators.filter(e=>e.status===z.vy.UNSPECIFIED)),handleOpenInNewTab:(0,S.w)(e=>{if(!e)return;let t=window.location.origin,i="".concat(t,"/app/").concat(e);window.open(i,"_blank","noopener,noreferrer")}),updateSessionListByTab:(0,S.w)(async e=>{let t=F.uT.selectors.selectGroupedSessionViewState(T.M_.getState(),e).ids.length;if(0===t)return;let{sessions:a=[]}=await g.F.SessionService.listSessions({isScheduled:"scheduled"===e||void 0,isFavorite:"favorites"===e||void 0,limit:t,offset:0});i(F.uT.actions.updateSessions({sessions:a}))})}}},2696:(e,t,i)=>{"use strict";i.d(t,{n:()=>w});var a=i(2635),r=i(90293),n=i(84974),s=i(15038),l=i(51416),o=i(75958),c=i(9205),d=i(82357),u=i(93347),p=i(81140),m=i(21284),x=i(23757),f=i(29313),h=i(18431),v=i(4890),g=i(24907),y=i(57271);function w(){let e=(0,m.jL)(),t=(0,g.rd)(),i=(0,l.s)(r.p),{open:w}=(0,l.s)(v.Z),b=(0,o.w)(async()=>{let t=null;try{e(h.u.actions.setTeamListLoading(!0));let i=await u.F.TeamService.listTeam({page:1,pageSize:999});t=i,e(h.u.actions.setListTeamResponse(i))}catch(e){console.error(e)}return e(h.u.actions.setTeamListLoading(!1)),t}),C=(0,o.w)(async()=>{if(x.R.selectors.isTeamAccount(m.M_.getState()))try{let t=await u.F.TeamService.getTeamInfo({});e(h.u.actions.setCurrentTeam(t))}catch(e){console.error(e)}}),j=(0,o.w)(e=>{let{name:t,seats:i,autoDeduction:a,singleDeductionAmount:r,monthlyDeductionLimit:n}=e;return u.F.TeamManagementService.createTeam({name:t,seats:i,autoDeduction:a,singleDeductionAmount:r,monthlyDeductionLimit:n})}),S=(0,o.w)(e=>u.F.TeamManagementService.transferTeam({email:e})),I=(0,o.w)((e,t)=>u.F.TeamManagementService.batchRemoveMember({teamUserIds:"string"==typeof e?[e]:e,emails:"string"==typeof t?[t]:t})),N=(0,o.w)((e,t)=>u.F.TeamManagementService.updateMemberRole({teamUserId:e,role:t})),k=(0,o.w)(async t=>{let i=await u.F.TeamManagementService.updateTeamDeductionSetting(t);return e(h.u.actions.updateTeamDeductionSetting(t)),i}),T=(0,o.w)(async e=>{let{page:t,searchKey:i,filterType:a,pageSize:r=20}=e,n=await u.F.TeamService.listTeamMember({page:t,pageSize:r,searchKey:i,filterType:a});return{data:n.members,totalCount:n.totalCount,page:t,pageSize:r}}),_=(0,o.w)(async t=>{await u.F.TeamManagementService.updateTeamInfo({name:t}),e(h.u.actions.updateCurrentTeam({name:t}));let i=h.u.selectors.listTeamResponse(m.M_.getState()),a=h.u.selectors.currentTeamInfo(m.M_.getState());i&&e(h.u.actions.setListTeamResponse({...i,teams:i.teams.map(e=>e.teamUid===(null==a?void 0:a.teamUid)?{...e,name:t}:e)}))}),M=(0,o.w)(async t=>{try{var i;let a=await n.f.compressImageSize(t,128),r=await n.f.fileToDataUrl(a),s=(null===(i=r.split(";")[1])||void 0===i?void 0:i.replace(/^base64,/,""))||"";await u.F.TeamManagementService.updateTeamInfo({avatar:{fileName:t.name,mimeType:t.type,data:s}}),e(h.u.actions.updateCurrentTeam({avatar:"data:image/png;base64,".concat(s)}));let l=h.u.selectors.listTeamResponse(m.M_.getState()),o=h.u.selectors.currentTeamInfo(m.M_.getState());l&&e(h.u.actions.setListTeamResponse({...l,teams:l.teams.map(e=>e.teamUid===(null==o?void 0:o.teamUid)?{...e,avatar:"data:image/png;base64,".concat(s)}:e)})),(0,c.oR)({title:y.I.t("Update success"),variant:"success"})}catch(e){(0,c.oR)({title:s.P.formatErrorToString(e),variant:"error"})}}),L=(0,o.w)(async()=>{try{e(h.u.actions.setTeamListLoading(!0)),await Promise.all([b(),C()])}catch(e){console.error(e)}finally{e(h.u.actions.setTeamListLoading(!1))}}),P=(0,o.w)(async()=>{let e=h.u.selectors.listTeamResponse(m.M_.getState());if(null==e?void 0:e.userId){let t=await u.F.UserAuthPublicService.switchUser({userId:e.userId});(0,d.W)(t.token),window.location.reload()}else(0,d.W)(""),t.replace(p.bw.login.root)}),E=(0,o.w)(e=>{let{emails:t=[],teamUserIds:r=[],onSuccess:n}=e,l=r.length>0?y.I.t("You're about to remove this member from the team. This action cannot be undone. Do you wish to proceed?"):y.I.t("You're about to make this invitation invalid. This action cannot be undone. Do you wish to proceed?");i.open({className:"w-[400px]",title:y.I.t("Remove confirmation"),variant:"danger",confirmText:y.I.t("Remove"),content:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"mt-[-10px] text-[var(--text-secondary)] text-sm leading-[22px]",children:l})}),enterKeyConfirm:!0,onConfirm:async()=>{try{return await u.F.TeamManagementService.batchRemoveMember({emails:t,teamUserIds:r}),(0,c.oR)({title:y.I.t("Successfully"),variant:"success"}),null==n||n(),!0}catch(e){return(0,c.oR)({title:s.P.formatErrorToString(e),variant:"error"}),!1}}})}),A=(0,o.w)(()=>{i.open({title:y.I.t("Team disbanded"),variant:"alert",content:y.I.t("The owner has disbanded this team. Your access and any shared resources are no longer available. You’ll be returned to your personal workspace."),enterKeyConfirm:!0,confirmText:y.I.t("Switch to personal"),onConfirm:async()=>(await P(),!0)})}),R=(0,o.w)(()=>{i.open({title:y.I.t("Removed from team"),variant:"alert",content:y.I.t("You have been removed from the team. If you have any questions, please contact the administrator."),enterKeyConfirm:!0,confirmText:y.I.t("Switch now"),onConfirm:async()=>(await P(),!0)})});return{judgeTeamExpired:(0,o.w)(async e=>{f.u.isTeamExpired(m.M_.getState())?w():null==e||e()}),openTeamHasBeenRemovedDialog:R,openTeamDisbandedDialog:A,openRemoveMemberDialog:E,fetchTeamList:b,initTeam:L,fetchTeamInfo:C,fetchMemberList:T,updateTeamName:_,updateTeamAvatar:M,createTeam:j,transferTeam:S,updateMemberRole:N,removeMember:I,updateTeamDeductionSetting:k,switchToPersonal:P}}},44865:(e,t,i)=>{"use strict";i.d(t,{h:()=>k});var a=i(19562),r=i(4700),n=i(95527),s=i(80926),l=i(51416),o=i(75958),c=i(93347),d=i(21284),u=i(32549),p=i(94355),m=i(29313),x=i(69079),f=i(18182),h=i(90264),v=i(4890),g=i(57271);let y=new Map;var w=i(13452),b=i(71252),C=i(54263),j=i(79946),S=i(86118);let I=(0,C.v)(),N=null;function k(){let e=(0,d.jL)(),{handleMessage:t}=function(){let e=(0,d.jL)(),{open:t}=(0,l.s)(v.Z),{autoPreviewByEvent:i}=(0,r.r)(),w=(0,o.w)(t=>{let i=d.M_.getState().sessions.currentSessionId;"event"===t.type&&"statusUpdate"===t.event.type&&S(t),t.sessionId===i&&(e(f.M.actions.received(t)),"session_joined"===t.type?k(t):"agent_error"===t.type?N(t):"session_left"===t.type?T(t):"event"===t.type&&b(t),h.T.emit("scrollToBottom",{clearLock:!1}))}),b=(0,o.w)(t=>{"toolUsed"===t.event.type?j(t):"statusUpdate"===t.event.type?I(t):"eventsNotifyEventsAfter"===t.event.type?(e(f.M.actions.missingEventsReceived({events:t.event.events,afterId:t.event.eventId})),e(u.V.actions.setChatMode(f.M.selectors.selectDefaultTaskMode(d.M_.getState())))):"newPlanStep"===t.event.type?C(t):"chat"===t.event.type?_(t):"explanation"===t.event.type&&M(t),i(t.event)}),C=(0,o.w)(e=>{if("newPlanStep"!==e.event.type)return}),j=(0,o.w)(e=>{if("toolUsed"===e.event.type&&"suggestion"===e.event.tool){var t,i;let a=e.event.detail;(null==a?void 0:null===(i=a.suggestion)||void 0===i?void 0:null===(t=i.commands)||void 0===t?void 0:t.length)&&a.suggestion.commands.forEach(e=>{(0,s.C)({eventName:"task_suggestion_show",extData:{type:e.commandType}})})}}),S=(0,o.w)(e=>{if("statusUpdate"!==e.event.type)return;let t=()=>{window.open(location.origin+"/app/".concat(e.sessionId))},i=u.V.selectors.isPageVisible(d.M_.getState()),a=e.sessionId===d.M_.getState().sessions.currentSessionId;"waiting"!==e.event.agentStatus||i&&a?"stopped"===e.event.agentStatus?f.M.selectors.selectIsDiscussMode(d.M_.getState())||n.i.show({title:g.I.t("Task Completed"),body:g.I.t("Finished at {date}",{date:new Date().toLocaleTimeString()}),onClick:e=>{t()}}):"error"===e.event.agentStatus&&n.i.show({title:g.I.t("Task Failed"),body:g.I.t("Error:")+e.event.brief,onClick:()=>{t()}}):n.i.show({title:g.I.t("Action Required"),body:g.I.t("Waiting for user input"),onClick:e=>{t()}})}),I=(0,o.w)(t=>{"statusUpdate"===t.event.type&&("stopped"!==t.event.agentStatus||f.M.selectors.selectIsDiscussMode(d.M_.getState())||localStorage.getItem(a.d5.showedSharePopover)||(localStorage.setItem(a.d5.showedSharePopover,"true"),e(u.V.actions.setShowSharePopover(!0))),"running"!==t.event.agentStatus&&c.F.SessionService.getSession({sessionUid:t.sessionId}).then(t=>{t.session&&e(x.uT.actions.upsertSession(t.session))}))}),N=(0,o.w)(e=>{}),k=(0,o.w)(e=>{}),T=(0,o.w)(e=>{}),_=(0,o.w)(i=>{let r=i.event;if("chat"===r.type&&("user"===r.sender&&r.taskMode&&e(u.V.actions.setChatMode(r.taskMode)),"assistant"===r.sender&&"discuss"!==r.taskMode&&void 0===d.M_.getState().configs.firstMessageTipsShowedV2&&e(p.e.actions.setFirstMessageTipsShowed(!1)),"assistant"===r.sender)){switch(r.errorType){case"team_member_removed":h.T.emit("permissionDenied",{code:a.mF.USER_REMOVED_FROM_TEAM});return;case"team_expired_for_owner":case"team_expired_for_member":case"team_owner_quota_exceeded":case"team_member_quota_exceeded":m.u.isTeamExpired(d.M_.getState())&&t()}"browser"===r.suggestUserTakeover&&(0,s.C)({eventName:"suggest_user_takeover_show",extData:{sessionId:d.M_.getState().sessions.currentSessionId}})}}),M=(0,o.w)(t=>{if("explanation"!==t.event.type)return;let i=t.event.id;if(y.get(i))return;let a=setTimeout(()=>{let t=d.M_.getState().websocket.entities[i];(null==t?void 0:t.type)==="event"&&"explanation"===t.event.type&&"streaming"===t.event.status&&e(f.M.actions.updateExplanationEventStatus({eventId:i,status:"end"})),y.delete(i)},3e3);y.set(i,a)});return{handleMessage:w}}(),i=(0,o.w)(async()=>{if(N)return;let i=w.a.chatWebsocketUrl;(N=new j.C).init(i);let a=()=>{let e=x.uT.selectors.currentSessionid(d.M_.getState());if(e){let t=S.Z.getSelectors().selectAll(d.M_.getState().websocket).findLast(t=>t.sessionId===e&&"pending"!==t.messageStatus);M("join_session",{sessionId:e,lastMessageId:null==t?void 0:t.id})}};N.on("disconnect",t=>{e(f.M.actions.disconnected({error:Error(t)}))}),N.on("reconnect",()=>{I=(0,C.v)(),e(f.M.actions.connected()),a()}),N.on("error",t=>{e(f.M.actions.errored(t.message))}),N.on("message",e=>{"event"===e.type&&b.Om.receiveNewEvent(e.sessionId,I,e.event),t(e)});let r=N;return new Promise((t,i)=>{r.on("connect",()=>{e(f.M.actions.connected()),a(),t(null)}),r.on("connect_error",t=>{e(f.M.actions.disconnected({error:t})),i(t)})})}),k=(0,o.w)(()=>{N&&(N.destroy(),N=null)}),T=(0,o.w)(e=>"refund_quota"===e?"quotaRefunded":"new_session_with_context"===e?"contextTransferStart":"start_sandbox"===e?["sandboxUpdate","sandboxLimitReached"]:"retry_upload"===e?"userRetryUploadResult":"stop_session"===e?"userStop":"user_message"===e?"chat":"change_task_mode"===e?"taskModeChanged":"insufficient_feature_quota_action"===e?"insufficientFeatureQuotaAction":"switch_deploy_version"===e?"deploySwitchVersionResult":null),_=(0,o.w)(async(e,t)=>{var i;if(!N)throw Error("Send message fail: WebSocket is not connected");if(await N.waitInitialized(),await N.waitConnected(),null==t?void 0:null===(i=t.signal)||void 0===i?void 0:i.aborted)throw Error("aborted");let a=N;return new Promise(t=>{"join_session"===e.type&&b.Om.joinNewSession(e.sessionId,I),"user_message"===e.type&&b.Om.startNewSession(e.sessionId,I,e.id);let i=T(e.type),r=i?Array.isArray(i)?i:[i]:[];if(r.length>0){let i=e=>{let n=d.M_.getState().sessions.currentSessionId;"event"===e.type&&n===e.sessionId&&r.includes(e.event.type)&&(a.off("message",i),t(e.event))};a.on("message",i),a.emit("message",{...e})}else a.emit("message",{...e}),t("ok")})}),M=(0,o.w)((e,t,i)=>_({id:(0,C.v)(),timestamp:Date.now(),...t,type:e},i));return{connected:i,disconnected:k,messageSentToSocket:M,restartReconnection:()=>{N&&N.restartReconnection()}}}},49873:(e,t,i)=>{"use strict";i.d(t,{K:()=>x,d:()=>u});var a=i(12618),r=i(84974),n=i(86154),s=i(67725),l=i(47059),o=i(32693),c=i(4882),d=i(13452),u=function(e){return e.Plan="plan",e}({});let p={[n.b.Free]:a.A.VipVersionForTrack.free,[n.b.Pro]:a.A.VipVersionForTrack.pro,[n.b.Casual]:a.A.VipVersionForTrack.starter};class m{static createPageViewTrackingEnrichment(){return{name:"page-view-tracking-enrichment",type:"enrichment",setup:async()=>void 0,execute:async e=>{if(e.event_properties)for(let t of m.PROPERTIES_TO_REMOVE)delete e.event_properties[t];return e}}}init(){!this.inited&&d.a.amplitudeKey&&((0,s.WQ)(m.createPageViewTrackingEnrichment()),(0,s.Ts)(d.a.amplitudeKey,{transport:"beacon",autocapture:{elementInteractions:!0},identityStorage:"none",deviceId:c.n.clientId}),this.inited=!0)}async initExperiment(){if(!d.a.amplitudeKey)return null;this.experiment=o.aj.initializeWithAmplitudeAnalytics(d.a.amplitudeKey);try{var e;return await (null===(e=this.experiment)||void 0===e?void 0:e.fetch({})),this.experiment.all()}catch(e){console.error("Amplitude experiment initialization failed:",e)}return null}reset(){this.inited=!1,this.storageUserId=null,this.storageUserProperties={},(0,s.cL)()}setUserId(e){e&&this.storageUserId!==e&&(this.inited||this.init(),this.storageUserId=e,(0,s.do)(e))}trackOnce(e){this.inited||this.init(),(0,s.u4)(e)}batchTrack(e){for(let t of(this.inited||this.init(),e))(0,s.u4)(t)}customUserProperties(e){let t;if(!e||0===Object.keys(e).length)return;this.inited||this.init(),t=this.storageUserProperties?this.extractChangedValues(this.storageUserProperties,e):e,this.storageUserProperties=e;let i=new l.T$;Object.entries(t).forEach(e=>{let[t,a]=e;i.set(t,"number"==typeof a?"".concat(a):a)}),(0,s.ls)(i)}customUserPropertyOne(e,t){if(!e||(this.inited||this.init(),this.storageUserProperties[e]===t))return;this.storageUserProperties[e]=t;let i=new l.T$;i.set(e,t),(0,s.ls)(i)}extractChangedValues(e,t){let i={};return Object.keys(t).forEach(a=>{a in e&&e[a]===t[a]||(i[a]=t[a])}),i}formatToAmplitude(e){let{events:t,clientInfo:i,userInfo:a}=e;return r.f.convertObjectNames("server",t.map(e=>{let{eventName:t,extData:r}=e;return{event_type:t,event_properties:{ext_data:r,client_info:i,user_info:a}}}))}formatMemberShipToNumber(e){var t;return null!==(t=p[e])&&void 0!==t?t:a.A.VipVersionForTrack.unknown}constructor(){this.inited=!1,this.storageUserId=null,this.storageUserProperties={},this.experiment=null}}m.PROPERTIES_TO_REMOVE=["page_title","[Amplitude] Page Title"];let x=new m},61613:(e,t,i)=>{"use strict";i.d(t,{d:()=>l});var a=i(62121),r=i(84974);function n(e){try{var t,i,a,n,s,l;let o=r.f.getOsType();if("Android"===o){if(!(null===(t=window.flutter_inappwebview)||void 0===t?void 0:t.callHandler))throw Error("[receiveMsgFromApp][Android] JSBridge method not exist");return window.flutter_inappwebview.callHandler("android",e)}if(!(null===(n=window.webkit)||void 0===n?void 0:null===(a=n.messageHandlers)||void 0===a?void 0:null===(i=a.nativeHandler)||void 0===i?void 0:i.postMessage))throw Error("[receiveMsgFromApp][IOS] JSBridge method not exist");return null===(s=(l=window.webkit.messageHandlers.nativeHandler).postMessage)||void 0===s?void 0:s.call(l,JSON.stringify(e))}catch(e){console.error("[receiveMsgFromApp] error: ".concat(e.toString()))}}function s(e){try{var t,i,a,n,s,l,o,c;let d=r.f.getOsType();if("Android"===d){if(!(null===(t=window.flutter_inappwebview)||void 0===t?void 0:t.callHandler))throw Error("[SendMsgToApp][Android] JSBridge method not exist");null===(a=window.flutter_inappwebview)||void 0===a||null===(i=a.callHandler)||void 0===i||i.call(a,"android",e);return}if(!(null===(l=window.webkit)||void 0===l?void 0:null===(s=l.messageHandlers)||void 0===s?void 0:null===(n=s.nativeHandler)||void 0===n?void 0:n.postMessage))throw Error("[SendMsgToApp][IOS] JSBridge method not exist");null===(o=(c=window.webkit.messageHandlers.nativeHandler).postMessage)||void 0===o||o.call(c,JSON.stringify(e));return}catch(e){console.error("[SendMsgToApp] error: ".concat(e.toString()))}}let l={isInApp:()=>{var e,t;return!a.G.isRunInServerSide&&!!(null===(t=window)||void 0===t?void 0:null===(e=t.manusAppEnv)||void 0===e?void 0:e.manusApp)},isIosApp:()=>{var e,t,i,r,n;return!a.G.isRunInServerSide&&!!((null===(t=window)||void 0===t?void 0:null===(e=t.manusAppEnv)||void 0===e?void 0:e.manusApp)&&(null===(n=window.webkit)||void 0===n?void 0:null===(r=n.messageHandlers)||void 0===r?void 0:null===(i=r.nativeHandler)||void 0===i?void 0:i.postMessage))},isAndroidApp:()=>{var e,t,i;return!a.G.isRunInServerSide&&!!((null===(t=window)||void 0===t?void 0:null===(e=t.manusAppEnv)||void 0===e?void 0:e.manusApp)&&(null===(i=window.flutter_inappwebview)||void 0===i?void 0:i.callHandler))},setSession:e=>{s({event:"setSession",data:e})},openPlaybook:e=>{s({event:"openSession",data:e})},openMakeYourVersion:e=>{s({event:"makeYourVersion",data:e})},closeWebview:e=>{s({event:"closeWebview",data:e})},closeWebPage:e=>{s({event:"closeWebPage",data:e})},getVisitorInfo:()=>n({event:"getVisitorInfo"}),terminateTakeover:e=>{s({event:"terminateTakeover",data:e})},shareLink:e=>s({event:"shareUrl",data:e}),changeTheme:()=>s({event:"changeTheme",data:{}}),getPasteBoardString:()=>n({event:"getPasteBoardString"})}},93402:(e,t,i)=>{"use strict";i.d(t,{f:()=>r});class a{preprocessBracketContent(e){return e.replace(/\[([^\]]*)\]/g,(e,t)=>'<input type="text" default-attrs="'.concat(t,'" />')).replace(/\n/g,"<br>")}parseHtml(e){let t=document.createElement("div");t.innerHTML=e;let i=e=>{let t="";for(let r of e.childNodes)if(r.nodeType===Node.TEXT_NODE){var a;t+=(null===(a=r.textContent)||void 0===a?void 0:a.trim())+" "}else if(r.nodeType===Node.ELEMENT_NODE){if("INPUT"===r.tagName){let e=r.getAttribute("value")||"",i=r.getAttribute("default-attrs")||r.getAttribute("defaultAttrs")||"",a=this.splitByEquals(i),n=this.isSelectComp(i)&&!i.includes("=");e.trim()||(e=n?this.getSelectOption(i)[0]||"":(null==a?void 0:a[1])||""),t+=e+" "}else"BR"===r.tagName?t+="\n":"P"===r.tagName?(t+=i(r),r.nextSibling&&(t+="\n")):t+=i(r)}return t};return i(t)}splitByEquals(e){if(!e)return[];let t=e.split("=");return t.length>1?t:[e]}isSelectComp(e){return!!e&&/^[^,，]+(?:[,，][^,，]+)+$/.test(e.trim())}getSelectOption(e){return e?e.split(/[,，]/).map(e=>e.trim()):[]}findInputElement(e){if(!e)return null;let t=null;return e.nodeType===Node.ELEMENT_NODE?t=e.querySelector("input"):e.parentElement&&(t=e.parentElement.querySelector("input")),t}focusInputWithCursor(e,t){e&&setTimeout(()=>{if(e){e.focus();let i=e.value;"start"===t?e.setSelectionRange(0,0):e.setSelectionRange(i.length,i.length)}},0)}handleAdjacentInputFocus(e,t,i){try{let a=e.view.domAtPos(t);if(!a.node)return!1;let r=this.findInputElement(a.node);if(!r)return!1;return this.focusInputWithCursor(r,i),!0}catch(e){return console.error("Error focusing adjacent input element:",e),!1}}}let r=new a},95527:(e,t,i)=>{"use strict";i.d(t,{i:()=>a});class a{static isSupport(){return"Notification"in window}static async checkPermission(){if(!this.isSupport())throw Error("This browser does not support notifications.");return"granted"===Notification.permission}static async requestPermission(){if(!this.isSupport())throw Error("This browser does not support notifications.");return await Notification.requestPermission()}static async send(e,t){try{if(!await this.checkPermission())return console.warn("User denied the permission request"),null;return new Notification(e,t)}catch(e){return console.error("[NotificationHelper] send",e),null}}static async show(e){var t;let{body:i,title:a,data:r}=e,n=await this.send(a,{body:i,data:r});n&&(n.onclick=null!==(t=null==e?void 0:e.onClick)&&void 0!==t?t:null,n.onshow=()=>{})}}},18419:(e,t,i)=>{"use strict";i.d(t,{I:()=>s});var a=i(21284),r=i(69079),n=i(62750);let s={sessionDelete:e=>{let{sessionId:t}=e;if(!t)return;let i=a.M_.getState().sessions.sessions.entities[t];i&&(0,n.Cu)({eventName:"session_delete",extData:{sessionId:(null==i?void 0:i.uid)||"",model:null==i?void 0:i.agentTaskMode}})},sessionRename:e=>{let{sessionId:t}=e;if(!t)return;let i=a.M_.getState().sessions.sessions.entities[t];i&&(0,n.Cu)({eventName:"session_rename",extData:{sessionId:(null==i?void 0:i.uid)||"",model:null==i?void 0:i.agentTaskMode}})},sessionFavorite:e=>{let{sessionId:t,action:i}=e;if(!t)return;let r=a.M_.getState().sessions.sessions.entities[t];r&&(0,n.Cu)({eventName:"session_favorite",extData:{sessionId:(null==r?void 0:r.uid)||"",model:null==r?void 0:r.agentTaskMode,action:i}})},sessionFileClick:e=>{let{action:t,type:i,from:r}=e,s=a.M_.getState().sessions.currentSessionId;if(!s)return;let l=a.M_.getState().sessions.sessions.entities[s];l&&(0,n.Cu)({eventName:"session_file_click",extData:{sessionId:(null==l?void 0:l.uid)||"",sessionTitle:l.displayTitle||l.title,model:null==l?void 0:l.agentTaskMode,action:t,type:i,from:r}})},sessionFileDownload:e=>{let{fileType:t,downloadMethod:i,from:s}=e;(0,n.Cu)({eventName:"session_file_download",extData:{sessionId:r.uT.selectors.currentSessionid(a.M_.getState())||"",fileType:t,downloadMethod:i,from:s}})}}},62750:(e,t,i)=>{"use strict";i.d(t,{Cu:()=>v,l4:()=>g});var a=i(61613),r=i(4882),n=i(21284),s=i(86154),l=i(57271),o=i(84974),c=i(12618),d=i(49873),u=i(13452),p=i(25511);class m{async getId(){if(null!==this.fp)return this.fp;if(this.fpPromise)return await this.fpPromise;this.fpPromise=(0,p.Hd)();let e=await this.fpPromise;return this.fp=e,this.fpPromise=null,e}async getJsonData(){return await (0,p.n5)()}initOption(){this.currentIncludeOption=[...this.defaultIncludeOption],(0,p.qN)("exclude",["fonts","locales","permissions","plugins","system.browser.name","system.browser.version"])}changeIncludeOption(e){"string"==typeof e?this.currentIncludeOption=this.currentIncludeOption.includes(e)?this.currentIncludeOption.filter(t=>t!==e):[...this.currentIncludeOption,e]:this.currentIncludeOption=[...e],(0,p.qN)("include",this.currentIncludeOption)}constructor(){this.defaultIncludeOption=["audio","canvas","fonts","hardware","locales","math","permissions","plugins","screen","system","webgl"],this.currentIncludeOption=[],this.fp=null,this.fpPromise=null,this.initOption()}}let x=new m;class f{push(e){e.extData||(e.extData={}),e.extData.url=window.location.href,this.events.push(e),this.doChecking()}sendOnBeforeUnload(){this.send()}doChecking(){this.timer&&this.clearTimer(),this.timer=setTimeout(()=>{this.send(),this.clearTimer()},this.interval)}clearTimer(){clearTimeout(this.timer),this.timer=null}async send(){var e,t;let i={...this.getClientInfo(),tmToken:await x.getId()},a={events:this.events,userInfo:this.getUserInfo(),clientInfo:i},r=d.K.formatToAmplitude(a);d.K.batchTrack(r),null===(t=navigator)||void 0===t||null===(e=t.sendBeacon)||void 0===e||e.call(t,"".concat(u.a.rpcServerUrl,"/api/user_behavior/batch_create_event_v2"),JSON.stringify(o.f.convertObjectNames("server",a))),this.events=[]}constructor(e,t,i){this.interval=e,this.getUserInfo=t,this.getClientInfo=i,this.events=[],this.timer=null}}let h=new f(200,function(){var e,t,i;let a=n.M_.getState(),r=(null===(e=a.auth.userInfo)||void 0===e?void 0:e.membershipVersion)||s.b.Free,l=c.A.VipVersionForTrack.unknown;switch(r){case s.b.Free:l=c.A.VipVersionForTrack.free;break;case s.b.Casual:l=c.A.VipVersionForTrack.starter;break;case s.b.Pro:l=c.A.VipVersionForTrack.pro;break;case s.b.Team:l=c.A.VipVersionForTrack.team}return{plan:l,knowledgeEntryCount:a.knowledge.userKnowledgeList.length,sessionCount:a.sessions.sessions.ids.length,teamUid:null===(t=a.team.currentTeam)||void 0===t?void 0:t.teamUid,teamUserId:null===(i=a.team.currentTeam)||void 0===i?void 0:i.teamUserId}},function(){let e=new Date;return{clientId:r.n.clientId,clientType:a.d.isInApp()?a.d.isIosApp()?"ios":a.d.isAndroidApp()?"android":"app":o.f.isMobile()?"h5":"web",clientVersion:"",clientLocale:l.I.translationManager.locale,productName:"Manus",timezone:(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}})(),timezoneOffset:e.getTimezoneOffset()}});function v(e){(Array.isArray(e)?e:[e]).map(e=>({...e,extData:{...e.extData},eventAt:new Date().toISOString()})).forEach(e=>{h.push(e)})}function g(e){(Array.isArray(e)?e:[e]).forEach(e=>{h.push(e)}),h.sendOnBeforeUnload()}},80926:(e,t,i)=>{"use strict";i.d(t,{C:()=>s.Cu,y:()=>l});var a=i(21284),r=i(32549),n=i(84974),s=i(62750);let l={chatBox:{sendMsg:(e,t)=>{let i=a.M_.getState().sessions.currentSessionId;if(!i)return;let l=a.M_.getState().sessions.sessions.entities[i];if(!l)return;let o=Object.values((null==t?void 0:t.files)||{}).map(e=>({filename:e.fileObject.name,id:e.id,type:n.f.getUserBehaviorFileExtName(e.fileObject.name),size:e.fileObject.size})),c={sessionId:l.uid,model:l.agentTaskMode,fileNum:o.length,fileType:o.map(e=>e.type).join(","),fileSize:o.map(e=>e.size).join(",")};if("new_session"===e){let e=r.V.selectors.inputPlaybookId(a.M_.getState());(0,s.Cu)({eventName:"new_session",extData:{...c,inputPlaybookId:e}})}else{var d;(0,s.Cu)({eventName:"send_msg",extData:{...c,onboarding:(null==t?void 0:null===(d=t.extData)||void 0===d?void 0:d.from)==="experiment"}})}}},chatOperation:i(18419).I}},86239:(e,t,i)=>{"use strict";i.d(t,{J:()=>s});var a=i(19562),r=i(98432),n=i(62750);let s={formatPlan:e=>({[r.zl.LITE_MONTHLY]:"basic_monthly",[r.zl.LITE_YEARLY]:"basic_yearly",[r.zl.CASUAL_MONTHLY]:"plus_monthly",[r.zl.CASUAL_YEARLY]:"plus_yearly",[r.zl.PRO_MONTHLY]:"pro_monthly",[r.zl.PRO_YEARLY]:"pro_yearly",[r.zl.TEAM_MONTHLY]:"team_monthly",[r.zl.TEAM_YEARLY]:"team_yearly",[r.zl.TEAM_ADDON]:"team_addon",[r.zl.CREDITS_2000]:"1900_credits",[r.zl.CREDITS_10000]:"9900_credits",[r.zl.CREDITS_19900]:"19900_credits"})[e]||e,setMotivation:e=>{localStorage.setItem(a.d5.paymentMotivation,JSON.stringify(e))},getMotivation:e=>{let t=localStorage.getItem(a.d5.paymentMotivation);if(t){if(!e)return t||void 0;try{return JSON.parse(t)}catch(e){return}}},trackPayment:async e=>{try{(0,n.Cu)({eventName:"payment",extData:e})}catch(e){console.error("[tracePayment] error",e)}},trackSwitchInterval:async e=>{(0,n.Cu)({eventName:e?"plan_yearly":"plan_monthly"})}}},12618:(e,t,i)=>{"use strict";var a;i.d(t,{A:()=>a}),function(e){var t;(t=e.VipVersionForTrack||(e.VipVersionForTrack={}))[t.free=0]="free",t[t.pro=1]="pro",t[t.starter=2]="starter",t[t.basic=3]="basic",t[t.team=4]="team",t[t.unknown=-1]="unknown"}(a||(a={}))},79946:(e,t,i)=>{"use strict";i.d(t,{C:()=>p});var a=i(19562),r=i(84974),n=i(82357),s=i(57271),l=i(59413),o=i(87124),c=i(29800);class d{start(){this.isRunning||(this.isRunning=!0,this.scheduleNext())}stop(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.isRunning=!1}reset(){this.stop(),this.currentStepIndex=0,this.currentCount=0}scheduleNext(){var e;if(!this.isRunning)return;let t=null!==(e=this.timeSteps[this.currentStepIndex])&&void 0!==e?e:0;this.timer=setTimeout(()=>{var e;this.callback(),this.currentCount++;let t=this.currentStepIndex===this.timeSteps.length-1,i=t?1/0:null!==(e=this.countLimits[this.currentStepIndex])&&void 0!==e?e:1/0;this.currentCount>=i&&!t&&(this.currentStepIndex++,this.currentCount=0),this.scheduleNext()},1e3*t)}constructor(e){this.timeSteps=[1,2,5,10,20,30,60,120,180,240,300],this.countLimits=[7,6,5,4,3,2,1,1,1,1],this.currentStepIndex=0,this.currentCount=0,this.timer=null,this.isRunning=!1,this.callback=e}}async function u(){let e=l.A.get(a.eu.devBranch)||"";return{withCredentials:!0,reconnection:!1,query:{token:await (0,n.getToken)(),locale:"".concat(s.I.translationManager.locale),tz:Intl.DateTimeFormat().resolvedOptions().timeZone,clientType:"web",branch:e},transports:["websocket"]}}class p{get initialized(){return this.ready.ready}get isConnected(){var e,t;return null!==(t=null===(e=this.socket)||void 0===e?void 0:e.connected)&&void 0!==t&&t}async init(e,t){let i=await u(),a=(0,o.A)(i,t);this.socket=(0,c.io)(e,a),this.disposer=this.initReconnectionEvents(),this.ready.markReady()}destroy(){var e,t,i;null===(e=this.socket)||void 0===e||e.close(),null===(t=this.disposer)||void 0===t||t.call(this),null===(i=this.stepTimer)||void 0===i||i.reset()}restartReconnection(){var e,t;null===(e=this.stepTimer)||void 0===e||e.reset(),this.isConnected||null===(t=this.stepTimer)||void 0===t||t.start()}async emit(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.emit(e,t)}async on(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.on(e,t)}async once(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.once(e,t)}async off(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.off(e,t)}waitInitialized(){return this.ready.waitReady()}async waitConnected(){return this.connectReadySource.waitReady()}disconnect(){var e;null===(e=this.socket)||void 0===e||e.disconnect()}initReconnectionEvents(){if(!this.socket)return()=>{};let e=()=>{this.socket.connect()},t=new d(()=>{e()});this.stepTimer=t;let i=()=>{t.reset(),t.start(),this.connectReadySource.clearWithoutPromise()},a=()=>{t.reset()},r=()=>{t.reset(),this.connectReadySource.markReady()},n=()=>{t.reset()},s=()=>{e()},l=()=>{var e;null===(e=this.socket)||void 0===e||e.disconnect()};return this.on("disconnect",i),this.on("reconnect",a),this.on("connect",r),this.on("error",n),window.addEventListener("online",s),window.addEventListener("offline",l),()=>{t.reset(),this.off("disconnect",i),this.off("reconnect",a),this.off("connect",r),this.off("error",n),window.removeEventListener("online",s),window.removeEventListener("offline",l)}}constructor(){this.socket=null,this.connectReadySource=r.f.createReadySource(),this.ready=r.f.createReadySource(),this.disposer=()=>{},this.stepTimer=null}}},39301:(e,t,i)=>{"use strict";i.d(t,{e:()=>n});var a=i(84974);class r{detectFileTypeByFilename(e){return".env"===e?"code":null}detectFileTypeByExtension(e){let t=a.f.getFileExtName(e)||"";if(!t)return null;if("pdf"===t)return"pdf";if("html"===t||"htm"===t)return"html";if("md"===t||"markdown"===t||"mdx"===t)return"markdown";if(["csv","xlsx","xls","ods"].includes(t))return"table";if("svg"===t)return"svg";if(a.f.isImageFile(t))return"image";if(a.f.isCodeFile(t)||"txt"===t)return"code";else if(a.f.isVideoFile(t))return"video";else if(a.f.isAudioFile(t))return"audio";else if("slides"===t)return"slides";else if("space"===t)return"space";return null}detectFileTypeByContentType(e){if(e.includes("application/pdf"))return"pdf";if(e.includes("text/html"))return"html";if(e.includes("text/markdown")||e.includes("text/x-markdown"))return"markdown";if(e.includes("text/csv"))return"table";if(e.includes("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")||e.includes("application/vnd.ms-excel"))return"table";if(e.includes("image/svg+xml"))return"svg";if(e.includes("image/"))return"image";else if(e.includes("text/plain")||e.includes("application/json")||e.includes("text/javascript")||e.includes("application/javascript")||e.includes("text/typescript")||e.includes("application/x-httpd-php")||e.includes("text/x-python")||e.includes("text/x-java-source")||e.includes("text/css"))return"code";else if(e.includes("video/"))return"video";else if(e.includes("audio/"))return"audio";return null}}let n=new r},61522:(e,t,i)=>{"use strict";i.d(t,{X:()=>l,w:()=>s});var a=i(36394),r=i(21788),n=i(76656);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1300;return Promise.race([e,new Promise((e,i)=>{setTimeout(()=>{i(Error("idb timeout"))},t)})])}async function l(e,t){var i;let l=async()=>{let i=await e(r.R.endpoints.getSession.initiate({sessionId:t,type:"private"},{forceRefetch:!0})).unwrap();try{await s(a.xA.updateSession(i,!0))}catch(e){console.error(e)}return i},o=async e=>{try{return await s(a.xA.get(e))}catch(e){return console.error(e),null}},c=await o(t);if(c&&(null===(i=c.events)||void 0===i?void 0:i.length)>0){let e=c.s3UrlExpireAt-Date.now();if(c.agentTaskMode===n.Ku.UNSPECIFIED)l();else{if(e<0)return await l();e<a.Al/2&&l()}return c}return await l()}},71252:(e,t,i)=>{"use strict";i.d(t,{qc:()=>r.qc,X7:()=>a.X,Om:()=>d});var a=i(61522),r=i(36394),n=i(21788);let s=[],l=null,o=null,c=null,d={receiveNewEvent:async function(e,t,i){if(l!==t&&(l=t,s=[],c=null),o!==e&&(o=e,c=null,s=[]),"eventsNotifyEventsAfter"===i.type){c=i.eventId,await r.xA.pushConfirmedEvents(e,[...s,...i.events],i.eventId),s=[];return}if("chatDelta"!==i.type){if(c){await r.xA.pushConfirmedEvents(e,[...s,i],c),s=[];return}s.push(i)}},joinNewSession:async function(e,t){o!==e&&(o=e,s=[],c=null),l!==t&&(l=t,s=[],c=null)},startNewSession:async function(e,t,i){l=t,o=e,s=[]},updateSessionInNotify:async function(e,t){let{sessionId:i,type:a,title:s,iconInfo:l,costedCredits:c}=t;switch(a){case"info":return await r.xA.updateMeta(i,{title:s,iconInfo:l,costedCredits:c});case"deleted":return await r.xA.removeId(i);case"update":{if(i===o)return;let t=await r.xA.getLastEventId(i),a=await e(n.R.endpoints.getSession.initiate({sessionId:i,startEventId:t||void 0,type:"private"},{forceRefetch:!0})).unwrap();if(t)return await r.xA.pushConfirmedEvents(i,a.events,t);return await r.xA.updateSession(a,!0)}}}}},36394:(e,t,i)=>{"use strict";i.d(t,{Al:()=>s,qc:()=>y,xA:()=>g});var a=i(76656),r=i(45571);let n=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i]},s=432e6,l=(e,t)=>{let i=new Map;for(let a of e){let e=t(a);i.set(e,a)}return Array.from(i.values())},o="sessions",c="sessionEvents",d="metadata",u="session-list",p=null,m=15,x=async()=>(p||(await (0,r.MR)("session-cache"),p=await (0,r.P2)("session-cache-v2",1,{upgrade(e){e.createObjectStore(o,{keyPath:"id"}),e.createObjectStore(c,{keyPath:"id"}).createIndex("by-session","sessionId"),e.createObjectStore(d).put({sessionIds:[]},u)}})),p);async function f(e){n("updateAccessTime",e);let t=(await x()).transaction([d],"readwrite"),i=t.objectStore(d),a=await i.get(u)||{sessionIds:[]};a.sessionIds=a.sessionIds.filter(t=>t!==e),a.sessionIds.unshift(e),await i.put(a,u),await t.done}async function h(){let e=(await x()).transaction([o,d,c],"readwrite"),t=e.objectStore(d),i=await t.get(u);if(i&&i.sessionIds.length>m){let a=i.sessionIds.slice(m),r=e.objectStore(o);n("remove",a),await Promise.all(a.map(async t=>{let i=e.objectStore(c).index("by-session"),a=await i.openCursor(t);for(;a;)await a.delete(),a=await a.continue();return r.delete(t)})),i.sessionIds=i.sessionIds.slice(0,m),await t.put(i,u)}await e.done}async function v(e){let t=await x(),i=await t.getAllFromIndex(c,"by-session",e);return n("getSessionEvents",e,i.length),i}let g={configure(e){e.maxSessions&&(m=e.maxSessions,h().catch(console.error))},async get(e){let t=await x(),i=await t.get(o,e);if(!i)return null;let a=await v(e);return await f(e),{...i,events:a,s3UrlExpireAt:i.s3UrlsExpiredAt||0}},async updateSession(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=await x(),{events:r,...n}=e,l=a.transaction([o,c],"readwrite"),d=await l.objectStore(o).get(e.id),u=[...e.events].sort((e,t)=>e.timestamp-t.timestamp);await l.objectStore(o).put({...n,lastEventId:null===(t=u[u.length-1])||void 0===t?void 0:t.id,s3UrlsExpiredAt:i?Date.now()+s:null==d?void 0:d.s3UrlsExpiredAt}),await Promise.all(u.map(t=>l.objectStore(c).put({...t,sessionId:e.id}))),await l.done,await f(e.id),await h()},async pushConfirmedEvents(e,t,i){let r=(await x()).transaction([o,c],"readwrite"),s=r.objectStore(o),d=await s.get(e),u=r.objectStore(c).index("by-session"),p=await u.getAll(e);if(d){if(!p.find(e=>e.id===i)&&"NEW_SESSION_EVENT"!==i){await r.done;return}let a=null;for(let e of t)a?e.timestamp>a.timestamp&&(a=e):a=e;n("append events",d.id,t.length),await Promise.all(t.map(async t=>await r.objectStore(c).put({...t,sessionId:e}))),a&&(d.lastEventId=a.id),await s.put(d)}else{var m;let i=l(t,e=>e.id).sort((e,t)=>e.timestamp-t.timestamp);await s.put({id:e,title:"",lastEventId:null===(m=i[i.length-1])||void 0===m?void 0:m.id,agentTaskMode:a.Ku.UNSPECIFIED}),await Promise.all(i.map(t=>r.objectStore(c).put({...t,sessionId:e})))}await r.done,await f(e),await h()},async updateMeta(e,t){let i=(await x()).transaction(o,"readwrite"),r=i.objectStore(o),n=await r.get(e);n?(void 0!==t.title&&(n.title=t.title),void 0!==t.iconInfo&&(n.iconInfo=t.iconInfo),void 0!==t.costedCredits&&(n.costedCredits=t.costedCredits),await r.put(n)):await r.put({id:e,title:t.title||"",iconInfo:t.iconInfo,costedCredits:t.costedCredits||0,agentTaskMode:a.Ku.UNSPECIFIED,isInvited:!0,isShared:!1,userStatus:0}),await i.done,await f(e),await h()},async clear(){let e=await x();await e.clear(o),await e.clear(c),await e.put(d,{sessionIds:[]},u)},async removeId(e){let t=(await x()).transaction([o,d,c],"readwrite");await t.objectStore(o).delete(e);let i=t.objectStore(c).index("by-session"),a=await i.openCursor(e);for(;a;)await a.delete(),a=await a.continue();let r=t.objectStore(d),n=await r.get(u);n&&(n.sessionIds=n.sessionIds.filter(t=>t!==e),await r.put(n,u)),await t.done},async getLastEventId(e){try{let t=await x(),i=await t.get(o,e);return(null==i?void 0:i.lastEventId)||null}catch(e){return console.error(e),null}}},y=async()=>g.clear()},95647:(e,t,i)=>{"use strict";i.d(t,{S:()=>l});var a=i(19562),r=i(62121),n=i(61584);class s{get themeConfig(){if(r.G.isRunInServerSide)return;let e=localStorage.getItem(a.d5.themeConfig);if(e)switch(e){case"light":return"light";case"dark":return"dark"}else{var t;let e=(0,n.S)(),i=null==e?void 0:null===(t=e.configs)||void 0===t?void 0:t.theme;if(i)return localStorage.setItem(a.d5.themeConfig,i),i}return"system"}setConfig(e){return localStorage.setItem(a.d5.themeConfig,e),"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}}let l=new s},72669:(e,t,i)=>{"use strict";i.d(t,{B:()=>c,C:()=>p});var a=i(84974),r=i(9205),n=i(93347),s=i(22952),l=i(57271),o=i(54263),c=function(e){return e.PENDING="pending",e.QUEUED="queued",e.UPLOADING="uploading",e.COMPLETED="completed",e.ERROR="error",e.CANCELLED="cancelled",e}({});let d=new Map;class u{async batchSign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{module:i=s.Nr.SESSION_FEEDBACK}=t;return(await n.F.FileService.batchSignUrl({urls:e.map(e=>({filename:e.name,module:i}))})).signUrlList}async upload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onProgress:i,module:r=s.Nr.SESSION_FEEDBACK}=t,l=e.signal;if(l&&l.aborted)return{...e,status:"cancelled"};let o=e.preSignUrl,c=e.cdnUrl;if(!o||!c){let t=await n.F.FileService.signUrl({filename:e.file.name,module:r});o=t.preSignUrl,c=t.cdnUrl}return await new Promise((t,r)=>{let n=new XMLHttpRequest;l&&(l.aborted&&r(new DOMException("Upload aborted","AbortError")),l.addEventListener("abort",()=>{n.abort(),r(new DOMException("Upload aborted","AbortError"))})),n.upload.addEventListener("progress",e=>{e.lengthComputable&&i&&i(Math.round(e.loaded/e.total*100))}),n.addEventListener("load",()=>{200===n.status?t():r(Error("Upload failed with status ".concat(n.status)))}),n.addEventListener("error",()=>{r(Error("Upload failed"))}),n.open("PUT",o),n.setRequestHeader("Content-Type",e.file.type);let s=a.f.createContentDisposition(e.file.name);s&&n.setRequestHeader("Content-Disposition",s),n.send(e.file)}),{...e,cdnUrl:c,process:100,status:"completed"}}transFile(e,t){let i="temp-".concat((0,o.v)()),a=URL.createObjectURL(e),r=new AbortController;return d.set(i,r),{...e,id:i,file:e,localUrl:a,module:t,signal:r.signal,status:"pending"}}async selectFiles(e){let t=[];if(0===(t=(null==e?void 0:e.files)?e.files:await new Promise(t=>{a.f.selectFile(async e=>{t(e)},{accept:null==e?void 0:e.accept,multiple:null==e?void 0:e.multiple})})).length)return[];let i=this.validateFiles(t,e);return 0===i.length?[]:i.map(this.transFile)}validateFiles(e,t){var i,a,n;let s=null!==(i=null==t?void 0:t.maxFiles)&&void 0!==i?i:10,o=null!==(a=null==t?void 0:t.maxSizeInMB)&&void 0!==a?a:10,c=null!==(n=null==t?void 0:t.accept)&&void 0!==n?n:[],d=1048576*o,u=e;return c&&c.length>0&&(u=e.filter(e=>{let t=e.type,i=c.some(e=>{if(e.endsWith("/*")){let i=e.split("/")[0];return t.startsWith("".concat(i,"/"))}return t===e});return i||(0,r.oR)({variant:"warning",title:l.I.t("File type not accepted: {name}",{name:e.name})}),i})),(u=u.filter(e=>!(e.size>d)||((0,r.oR)({variant:"warning",title:l.I.t("File {name} exceeds maximum size of {maxSizeInMB}MB",{name:e.name,maxSizeInMB:o})}),!1))).length>s&&((0,r.oR)({variant:"warning",title:l.I.t("Maximum {maxFiles} files allowed. Selected first {maxFiles} files.",{maxFiles:s})}),u=u.slice(0,s)),u}async preProcessFile(e,t){if(this.isImageFile(e.file)){let i=null!=t?t:{maxWidth:2048,maxHeight:2048,format:"image/webp",quality:.75};e.file=await a.f.compressImageSize(e.file,i.maxWidth,i.format,i.quality)}return e}async uploadFile(e,t){var i,a,r;let n="id"in e?e:this.transFile(e);if("status"in e&&("cancelled"===e.status||"error"===e.status))return e;let o=n;try{o=await this.preProcessFile(n)}catch(e){}try{if(!(o={...o,status:"uploading"}).cdnUrl){let e=await this.batchSign([o.file]);if(!e||0===e.length)throw Error(l.I.t("Failed to get upload URL"));o={...o,...e[0]}}let e=await this.upload(o,{onProgress:e=>{var i;null==t||null===(i=t.onStatusChange)||void 0===i||i.call(t,"uploading",{...o,progress:e})},module:null!==(a=o.module)&&void 0!==a?a:s.Nr.SESSION_FEEDBACK});return d.delete(o.id),null==t||null===(i=t.onStatusChange)||void 0===i||i.call(t,e.status,e),e}catch(n){let e="error",i=l.I.t("Unknown error");n instanceof DOMException&&"AbortError"===n.name?(e="cancelled",i=l.I.t("Upload cancelled")):n instanceof Error&&(i=n.message);let a={...o,status:e,error:i};return null==t||null===(r=t.onStatusChange)||void 0===r||r.call(t,e,a),d.delete(a.id),a}}async uploadFiles(e,t,i){var a;let n=null!==(a=null==i?void 0:i.maxFiles)&&void 0!==a?a:10,s=[],o=e.map(e=>"id"in e?e:this.transFile(e));o.length>n&&((0,r.oR)({variant:"warning",title:l.I.t("Maximum {maxFiles} files allowed. Processing first {maxFiles} files.",{maxFiles:n})}),o.splice(n));let c=await this.batchSign(o.map(e=>e.file));if(!c||0===c.length)throw Error(l.I.t("Failed to get upload URL"));let d=o.map((e,t)=>{var i,a;return{...e,preSignUrl:null===(i=c[t])||void 0===i?void 0:i.preSignUrl,cdnUrl:null===(a=c[t])||void 0===a?void 0:a.cdnUrl,status:"pending"}}),u=new Set,p=0,m=async()=>{if(0===d.length||u.size>=4)return;let e=d.shift();if(e){u.add(e.id);try{let i=await this.uploadFile(e,{onStatusChange(e,i){var a;null==t||null===(a=t.onStatusChange)||void 0===a||a.call(t,e,i)}});s.push(i)}catch(e){}u.delete(e.id),p++,await m()}},x=[];for(let e=0;e<Math.min(4,o.length);e++)x.push(m());return await Promise.all(x),new Promise(e=>{p===o.length&&e(s)})}cancelUpload(e){let t=d.get(e);return!!t&&(t.abort(),d.delete(e),!0)}retryUpload(e){return this.uploadFile(e.file)}cancelAllUploads(){d.forEach(e=>{e.abort()}),d.clear()}async uploadFileToS3(e,t,i){let{signal:r,onProgress:n}=null!=i?i:{};await new Promise((i,s)=>{let l=new XMLHttpRequest;r&&(r.aborted&&s(new DOMException("Upload aborted","AbortError")),r.addEventListener("abort",()=>{l.abort(),s(new DOMException("Upload aborted","AbortError"))})),l.upload.addEventListener("progress",e=>{e.lengthComputable&&n&&n(Math.round(e.loaded/e.total*100))}),l.addEventListener("load",()=>{200===l.status?i():s(Error("Upload failed with status ".concat(l.status)))}),l.addEventListener("error",()=>{s(Error("Upload failed"))}),l.open("PUT",e),l.setRequestHeader("Content-Type",t.type);let o=a.f.createContentDisposition(t.name);o&&l.setRequestHeader("Content-Disposition",o),l.send(t)})}isImageFile(e){return e.type.startsWith("image/")}}let p=new u},39610:(e,t,i)=>{"use strict";i.d(t,{pi:()=>c,tp:()=>o,xf:()=>n});var a=i(80926),r=i(57271);function n(e){return/^([a-zA-Z0-9_.-]+)@([a-zA-Z0-9.-]+)\.([a-zA-Z.]{2,12})$/.test(e)}function s(e){return/^[a-zA-Z0-9!"#$%&',()*+-./\\:;<=>?@[\]^_{}|`~]+$/.test(e)}function l(e){return!!(/[a-zA-Z]+/.test(e)&&/\d+/.test(e)&&/[!"#$%&',()*+-./\\:;<=>?@[\]^_{}|`~]+/.test(e))}function o(e){return/^[0-9]{0,14}$/.test(e)}function c(e){return[{required:!0,message:r.I.t("Please input")},{validator:s,message:r.I.t("Please use only letters (a-z and A-Z), numbers (0-9), and special characters like !@#$%^&*.()")},{validator:l,message:r.I.t("Please choose a strong password. Try a mix of letters, numbers, and symbols")},{validator:t=>((0,a.C)({eventName:"password_length_validator_failed",source:e}),t.length>=12),message:r.I.t("Your password must be at least 12 characters long")}]}},85078:(e,t,i)=>{"use strict";i.d(t,{W:()=>l});var a=i(15038),r=i(99515),n=i(75958),s=i(9205);function l(){let[e,t]=(0,r.useState)(!1),i=(0,n.w)(async function(i){if(e)return null;t(!0);try{return await i()}catch(e){(0,s.oR)({variant:"warning",title:a.P.formatErrorToString(e)})}finally{t(!1)}return null});return{isLoading:e,run:i}}},44616:(e,t,i)=>{"use strict";i.d(t,{o:()=>n});var a=i(99515),r=i(75958);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onKeyDown:t,onCompositionStart:i,onCompositionEnd:n}=e,s=(0,a.useRef)(!1),l=(0,a.useRef)(null),o=(0,a.useRef)(null),c=(0,r.w)(e=>{l.current&&(clearTimeout(l.current),l.current=null),o.current&&(clearTimeout(o.current),o.current=null),s.current=!0,null==i||i(e)});return{onCompositionStart:c,onCompositionEnd:(0,r.w)(e=>{l.current=setTimeout(()=>{o.current=setTimeout(()=>{s.current=!1})}),null==n||n(e)}),onKeyDown:(0,r.w)(e=>{if(s.current&&("Escape"===e.key||"Enter"===e.key&&!e.shiftKey)){e.stopPropagation();return}null==t||t(e)}),isComposing:(0,r.w)(()=>s.current)}}},98637:(e,t,i)=>{"use strict";i.d(t,{x:()=>s});var a=i(94794),r=i(99515),n=i(75958);function s(e,t,i){let s=(0,n.w)(e);return(0,r.useMemo)(()=>(0,a.A)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s(...t)},t,i),[])}},53708:(e,t,i)=>{"use strict";function a(e){return e()}i.d(t,{W:()=>a})},51416:(e,t,i)=>{"use strict";i.d(t,{s:()=>s});var a=i(33890),r=i(99515),n=i(75958);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.useRef)(null),s=(0,r.useContext)(a.M);if(!s)throw Error("useDialog must be used within a DialogProvider");let l=(0,n.w)(()=>{i.current&&s.close(i.current),i.current=null}),o=(0,n.w)(()=>{s.closeAll()});return{open:(0,n.w)(a=>{let{singleton:n,closeWhenNextTrigger:c,closeBeforeDialog:d,ignoreWhenOpen:u}=t;if(n&&i.current&&s.exist(i.current)&&(u||(c||d)&&(l(),i.current=null,c)))return;let p=(0,r.createElement)(e,{...a,onDisposed:l,onDisposedAll:o});i.current=s.open(p,t)}),close:l,closeAll:o,exist:(0,n.w)(()=>!!i.current&&s.exist(i.current))}}},47829:(e,t,i)=>{"use strict";i.d(t,{A:()=>P,l:()=>E});var a=i(54263),r=i(23883),n=i(93347),s=i(21284),l=i(23757),o=i(32549),c=i(90264),d=i(22952),u=i(57271),p=i(88672),m=i(35710),x=i(99515),f=i(75958);class h{}class v extends h{isSupported(e){return"text/csv"===e.type||e.name.toLowerCase().endsWith(".csv")}async process(e){try{let t;if("function"!=typeof e.text)return{contentType:e.type||"text/csv",type:"file",data:"CSV file detected but cannot be processed due to serialization issues",fileName:e.name,success:!1};t=await e.text();let a=(await i.e(54043).then(i.t.bind(i,54043,23))).parse(t,{header:!1,skipEmptyLines:!0}).data;if(!(a.length>0))return{contentType:e.type||"text/csv",type:"file",data:"No content could be extracted from this CSV file",fileName:e.name,success:!1};{let t=(a[0]||[]).join(","),i=a.slice(1,Math.min(a.length,6)).filter(e=>e&&e.length>0).map(e=>e.join(",")).map(e=>"<row>".concat(e,"</row>")).join("\n"),r="This is a csv file\n\n<Columns>\n".concat(t,"\n</Columns>\n\n<Rows>\n").concat(i,"\n</Rows>");return{contentType:"text/csv",type:"text",data:r,fileName:e.name,success:!0}}}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}}let g=new v;class y extends h{isSupported(e){return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||e.name.toLowerCase().endsWith(".docx")}async process(e){try{let t;if("function"!=typeof e.arrayBuffer)return{contentType:e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document",type:"file",data:"DOCX file detected but cannot be processed due to serialization issues",fileName:e.name,success:!1};t=await e.arrayBuffer();let a=await Promise.all([i.e(67742),i.e(58241)]).then(i.t.bind(i,58241,19)),r=(await a.extractRawText({arrayBuffer:t})).value.trim();if(!(r.length>10))return{contentType:e.type,type:"file",data:"No text content could be extracted from this DOCX file",fileName:e.name,success:!1};{let t="This is a DOCX file which has ".concat(Math.ceil(r.length/1e3)," thousand characters\n\n<preview>\n").concat(r.slice(0,1500),"\n</preview>");return{contentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",type:"text",data:t,fileName:e.name,success:!0}}}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}}let w=new y;var b=i(84974);class C extends h{isSupported(e){if(this.imageTypes.includes(e.type))return!0;let t=e.name.toLowerCase();return this.imageExtensions.some(e=>t.endsWith(e))}isSupportedImageFile(e){if(this.supportedImageTypes.includes(e.type))return!0;let t=e.name.toLowerCase();return this.supportedImageExtensions.some(e=>t.endsWith(e))}async process(e){try{let t=e,i=e;return this.isSupportedImageFile(i)||(t=i=await b.f.compressImageSize(i,800,"image/webp",80)),new Promise(a=>{let r=new Image,n=document.createElement("canvas"),s=n.getContext("2d"),l=URL.createObjectURL(t);if(!s){URL.revokeObjectURL(l),a({contentType:e.type||"image/jpeg",type:"file",data:"",fileName:e.name,success:!1});return}r.onload=()=>{try{let{width:t,height:o}=r;if(t>800||o>800){let e=t/o;t>o?o=(t=800)/e:t=(o=800)*e}n.width=t,n.height=o,s.drawImage(r,0,0,t,o);let c=i.type.startsWith("image/")?i.type:"image/webp",d=n.toDataURL(c,.8),u=d.split(",")[1]||d;n.remove(),URL.revokeObjectURL(l),a({contentType:c,type:"file",data:u,fileName:e.name,success:!0})}catch(t){URL.revokeObjectURL(l),a({contentType:e.type||"image/jpeg",type:"file",data:"",fileName:e.name,success:!1})}},r.onerror=()=>{URL.revokeObjectURL(l),a({contentType:e.type||"image/jpeg",type:"file",data:"",fileName:e.name,success:!1})},r.src=l})}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}constructor(...e){super(...e),this.imageTypes=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml","image/tiff"],this.imageExtensions=[".jpg",".jpeg",".png",".gif",".webp",".bmp",".svg",".tiff",".tif"],this.supportedImageTypes=["image/jpeg","image/png","image/webp"],this.supportedImageExtensions=[".jpg",".jpeg",".png",".webp"]}}let j=new C;var S=i(13452);class I extends h{isSupported(e){return"application/pdf"===e.type||/\.pdf$/i.test(e.name)}async process(e){try{let a;if("function"!=typeof e.arrayBuffer)return{contentType:e.type||"application/pdf",type:"file",data:"PDF file detected but cannot be processed due to serialization issues",fileName:e.name,success:!1};a=await e.arrayBuffer();let{pdfjs:r}=await Promise.all([i.e(44126),i.e(16173)]).then(i.bind(i,16173));r.GlobalWorkerOptions.workerSrc=S.a.pdfWorkUrl;let n=await r.getDocument({data:a}).promise,s="";try{var t;try{let e=await n.getOutline();if(e&&e.length>0){let t=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>{let a="  ".repeat(i),r="".concat(a,"- ").concat(e.title);return e.items&&e.items.length>0&&(r+="\n"+t(e.items,i+1)),r}).join("\n")},i=t(e);i.trim().length>0&&(s+="Table of Contents:\n".concat(i,"\n\n"))}}catch(e){console.error("Error extracting table of contents from PDF file:",e)}for(let e=1;e<=n.numPages;e++){let t=await n.getPage(e),i=(await t.getTextContent()).items.map(e=>e.str).join(" ");if((s+=i+"\n").length>=1500)break}let i=s.trim();if(i.length>10){let t="Here is a preview of the PDF which has ".concat(n.numPages," pages\n\n<preview>\n").concat(i.slice(0,1500),"\n</preview>");return n.destroy(),{contentType:"application/pdf",type:"text",data:t,fileName:e.name,success:!0}}let a=await n.getPage(1),r=a.getViewport({scale:1}),l=Math.max(r.width,r.height),o=a.getViewport({scale:l>800?800/l:1}),c=document.createElement("canvas");c.height=o.height,c.width=o.width;let d=c.getContext("2d");if(!d)return c.remove(),n.destroy(),{contentType:"image/png",type:"file",data:"",fileName:e.name,success:!1};await a.render({canvasContext:d,viewport:o}).promise,null===(t=a.cleanup)||void 0===t||t.call(a);let u="image/webp";0!==c.toDataURL("image/webp").indexOf("data:image/webp")&&(u="image/jpeg");let p=c.toDataURL(u,.8),m=p.split(",")[1]||p;return c.remove(),n.destroy(),{contentType:u,type:"file",data:m,fileName:e.name,success:!0}}catch(t){return n.destroy(),{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}}let N=new I;class k extends h{isSupported(e){if(this.textTypes.includes(e.type))return!0;let t=e.name.toLowerCase();return this.textExtensions.some(e=>t.endsWith(e))}async process(e){try{let t;if("function"!=typeof e.text)return{contentType:e.type||"text/plain",type:"file",data:"Text file detected but cannot be processed due to serialization issues",fileName:e.name,success:!1};return t=await e.text(),{contentType:e.type||"text/plain",type:"text",data:t.slice(0,1500),fileName:e.name,success:!0}}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}constructor(...e){super(...e),this.textTypes=["text/plain","text/markdown","text/html","text/css","text/javascript","application/javascript","application/json","application/xml","text/xml"],this.textExtensions=[".txt",".md",".markdown",".js",".jsx",".ts",".tsx",".html",".htm",".css",".json",".xml",".yml",".yaml",".py",".java",".c",".cpp",".h",".hpp",".cs",".php",".rb",".go",".rs",".swift",".kt",".scala",".sh",".bash",".zsh",".fish",".ps1",".sql",".r",".m",".gradle",".properties",".ini",".conf",".config",".log",".csv",".tsv",".rtf"]}}let T=new k;class _ extends h{isSupported(e){return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||e.name.toLowerCase().endsWith(".xlsx")}async process(e){try{let t;if("function"!=typeof e.arrayBuffer)return{contentType:e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",data:"XLSX file detected but cannot be processed due to serialization issues",fileName:e.name,success:!1};t=await e.arrayBuffer();let a=await Promise.all([i.e(6237),i.e(63170)]).then(i.bind(i,50402)),r=a.read(t,{type:"array"}),n=r.SheetNames[0];if(!n)return{contentType:e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",data:"No worksheets found in XLSX file",fileName:e.name,success:!1};let s=r.Sheets[n];if(!s)return{contentType:e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",data:"No valid worksheet found in XLSX file",fileName:e.name,success:!1};let l=a.utils.sheet_to_json(s,{header:1,defval:""});if(!(l.length>0)||!l[0])return{contentType:e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",data:"No content could be extracted from this XLSX file",fileName:e.name,success:!1};{let t=(l[0]||[]).join(","),i=l.slice(1,Math.min(l.length,6)).filter(e=>e&&e.length>0).map(e=>e.join(",")).map(e=>"<row>".concat(e,"</row>")).join("\n"),a="This is a xlsx file\n\n<Columns>\n".concat(t,"\n</Columns>\n\n<Rows>\n").concat(i,"\n</Rows>");return{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"text",data:a,fileName:e.name,success:!0}}}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}}let M=[N,w,new _,g,j,T];async function L(e){try{let t=M.find(t=>t.isSupported(e));if(t)return await t.process(e);return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}catch(t){return{contentType:e.type,type:"file",data:"",fileName:e.name,success:!1}}}function P(e){return e.type.startsWith("image/")}let E=()=>{let e=(0,p.wA)(),{processFilesAndGetSuggestions:t}=function(){let e=(0,s.jL)(),t=(0,x.useRef)(null);return{processFilesAndGetSuggestions:(0,f.w)(async()=>{var i,a;if(null===(i=t.current)||void 0===i||i.abort(),s.M_.getState().sessions.currentSessionId)return;if(0===s.M_.getState().chat.files.length){e(o.V.actions.setFileSuggestions([]));return}let r=new AbortController;t.current=r;try{let t=(await Promise.all(s.M_.getState().chat.files.map(async e=>await L(e.fileObject)))).filter(e=>e.success);if(0===t.length){e(o.V.actions.setFileSuggestions([]));return}let i={files:t.map(e=>({type:"file"==e.type?m.ce.FILE:m.ce.TEXT,name:e.fileName,data:e.data,contentType:e.contentType}))},l=await n.F.SessionService.generateDocumentSuggestion({files:i.files},{signal:r.signal});0!==s.M_.getState().chat.files.length&&e(o.V.actions.setFileSuggestions((null===(a=l.data)||void 0===a?void 0:a.suggestions)||[]))}catch(t){t instanceof Error&&!r.signal.aborted&&(console.error("Suggestion generation failed:",t),e(o.V.actions.setFileSuggestions([])))}})}}(),[i]=r.Ef.useLazyGetPresignedUrlQuery(),[h]=r.Ef.useUploadToS3Mutation(),[v]=r.Ef.useCompleteUploadMutation(),g=(0,f.w)(async(r,u)=>{let p="temp-".concat((0,a.v)());try{var m,x;let a;e(o.V.actions.fileAdded({id:p,fileObject:r,progress:0,status:"pending",previewUrl:P(r)?URL.createObjectURL(r):void 0,extra:null==u?void 0:u.extra,type:null==u?void 0:u.type,fileMetaData:null==u?void 0:u.fileMetaData})),c.T.emit("scrollAttachmentsToRight"),t();let f=p,g="",{isLogin:y}=l.R.selectors.authStatus(s.M_.getState());if(y){let e=await i({filename:r.name,fileType:r.type,fileSize:r.size,id:p}).unwrap();f=e.id,a=e.uploadUrl}else{let e=await n.F.FileService.signUrl({filename:r.name,module:d.Nr.ANONYMOUS});a=e.preSignUrl,g=e.cdnUrl}e(o.V.actions.fileIdGenerated({tempId:p,realId:f})),p=f,await h({url:a,file:r,onProgress:t=>{e(o.V.actions.fileProgressUpdated({id:p,progress:t}))}}).unwrap();let w=o.V.selectors.filePreviewUrlMap(s.M_.getState());if(y){let t=await v({filename:r.name,fileSize:r.size,id:p}).unwrap();e(o.V.actions.fileCompleted({id:p,url:t.fileUrl}));let i=null===(m=w[p])||void 0===m?void 0:m.previewUrl;return i&&URL.revokeObjectURL(i),{id:p,fileUrl:t.fileUrl}}{e(o.V.actions.fileCompleted({id:p,url:g}));let t=null===(x=w[p])||void 0===x?void 0:x.previewUrl;return t&&URL.revokeObjectURL(t),{id:p,fileUrl:g}}}catch(t){throw e(o.V.actions.fileFailed({id:p,error:t instanceof Error?t.message:"Upload failed"})),t}}),y=(0,f.w)(async e=>{let t="temp-".concat((0,a.v)()),r=await i({filename:e.name,fileType:e.type,fileSize:e.size,id:t}).unwrap();return await h({url:r.uploadUrl,file:e}).unwrap(),await v({filename:e.name,fileSize:e.size,id:r.id}).unwrap()}),w=(0,f.w)(async t=>{let r="temp-".concat((0,a.v)());try{let e,a=r,o="",{isLogin:c}=l.R.selectors.authStatus(s.M_.getState());if(c){let n=await i({filename:t.name,fileType:t.type,fileSize:t.size,id:r}).unwrap();a=n.id,e=n.uploadUrl}else{let i=await n.F.FileService.signUrl({filename:t.name,module:d.Nr.ANONYMOUS});e=i.preSignUrl,o=i.cdnUrl}if(r=a,await h({url:e,file:t}).unwrap(),!c)return{id:r,url:o};{let e=await v({filename:t.name,fileSize:t.size,id:r}).unwrap();return{id:r,url:e.fileUrl}}}catch(t){throw e(o.V.actions.fileFailed({id:r,error:t instanceof Error?t.message:"Upload failed"})),t}});return{uploadFile:g,removeFile:(0,f.w)(t=>{let i=o.V.selectors.filePreviewUrlMap(s.M_.getState())[t];(null==i?void 0:i.previewUrl)&&URL.revokeObjectURL(i.previewUrl),e(o.V.actions.fileRemoved(t))}),clearFiles:(0,f.w)(()=>{Object.values(o.V.selectors.filePreviewUrlMap(s.M_.getState())).forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)}),e(o.V.actions.filesCleared())}),retryFile:(0,f.w)(async t=>{let a=s.M_.getState().chat.files.find(e=>e.id===t);if(!a)throw Error(u.I.t("File not found"));let{fileObject:r}=a;try{var c,p;let u;e(o.V.actions.fileRetry({id:t}));let m=t,x="",{isLogin:f}=l.R.selectors.authStatus(s.M_.getState());if(f){let e=await i({filename:r.name,fileType:r.type,fileSize:r.size,id:t}).unwrap();m=e.id,u=e.uploadUrl}else{let e=await n.F.FileService.signUrl({filename:r.name,module:d.Nr.ANONYMOUS});u=e.preSignUrl,x=e.cdnUrl}e(o.V.actions.fileIdGenerated({tempId:a.id,realId:m})),t=m,await h({url:u,file:r,onProgress:i=>{e(o.V.actions.fileProgressUpdated({id:t,progress:i}))}}).unwrap();let g=o.V.selectors.filePreviewUrlMap(s.M_.getState());if(f){let i=await v({filename:r.name,fileSize:r.size,id:t}).unwrap(),a=null===(c=g[t])||void 0===c?void 0:c.previewUrl;return a&&URL.revokeObjectURL(a),e(o.V.actions.fileCompleted({id:t,url:i.fileUrl})),i}{let i=null===(p=g[t])||void 0===p?void 0:p.previewUrl;i&&URL.revokeObjectURL(i),e(o.V.actions.fileCompleted({id:t,url:x}))}}catch(i){throw e(o.V.actions.fileFailed({id:t,error:i instanceof Error?i.message:"Upload failed"})),i}}),uploadFileDirect:y,pureUploadFile:w}}},63364:(e,t,i)=>{"use strict";i.d(t,{m:()=>n});var a=i(99515),r=i(75958);function n(e){let[t,i]=(0,a.useState)(e.initValues||{}),[n,s]=(0,a.useState)({}),l=(0,r.w)((t,i)=>{let a={};return Object.entries(e.validator).forEach(e=>{let[r,n]=e,s=i[r];if("onBlur"!==t&&"onChange"!==t||s)for(let e=0;e<n.length;e++){let t=n[e];if(t&&("required"in t&&t.required&&!s||"validator"in t&&t.validator&&!t.validator(s))){a[r]=t.message;break}}}),s(a),!!Object.keys(a).length}),o=(0,r.w)((e,a)=>{let r={...t,[e]:a};(null==n?void 0:n[e])&&s({...n,[e]:void 0}),i(r)});return{formValues:t,formError:n,setFormError:s,handleValidate:l,handleChange:o}}},27168:(e,t,i)=>{"use strict";i.d(t,{D:()=>n,a:()=>s});var a=i(35014),r=i(43441);let n=960;function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,{isMobile:t}=(0,r.V)(),i=(0,a.U)("(max-width: ".concat(e-1,"px)")),s=t();return!0===s?s:i}},35014:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});var a=i(99515);function r(e){let[t,i]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{let t=window.matchMedia(e),a=e=>{i(e.matches)};return t.addEventListener("change",a),i(t.matches),()=>t.removeEventListener("change",a)},[e]),t}},43441:(e,t,i)=>{"use strict";i.d(t,{V:()=>s});var a=i(61613),r=i(84974),n=i(62121);function s(){function e(){return a.d.isInApp()}return{isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n.G.userAgent)},isMac:function(){return/Mac/i.test(n.G.userAgent)},isWindows:function(){return/Win/i.test(n.G.userAgent)},isInApp:e,getPlatform:function(){return e()?"app":r.f.isMobile()?"h5":"web"}}}},31867:(e,t,i)=>{"use strict";i.d(t,{D:()=>n});var a=i(41651),r=i(99515);function n(){return(0,r.useContext)(a.D)}},72522:(e,t,i)=>{"use strict";i.d(t,{k:()=>s});var a=i(67813),r=i(99515),n=i(75958);function s(e,t,i){let s=(0,n.w)(e);return(0,r.useMemo)(()=>(0,a.A)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s(...t)},t,i),[])}},95370:(e,t,i)=>{"use strict";i.d(t,{$:()=>d,s:()=>c});var a=i(19562),r=i(61613),n=i(84974),s=i(62121),l=i(74958),o=i(99515);function c(){let e=(0,l.usePathname)();(0,o.useEffect)(()=>{let e=new URL(location.href).searchParams,t=e.get("utm_source"),i=e.get("utm_campaign");t&&localStorage.setItem(a.d5.utmSource,t),i&&localStorage.setItem(a.d5.utmCampaign,i)},[e])}function d(){return{firstFromPlatform:s.G.isRunInServerSide?"":r.d.isInApp()?r.d.isIosApp()?"ios":r.d.isAndroidApp()?"android":"app":n.f.isMobile()?"h5":new URL(location.href).searchParams.get("from")||"web",utmSource:localStorage.getItem(a.d5.utmSource)||void 0,utmCampaign:localStorage.getItem(a.d5.utmCampaign)||void 0}}},12359:(e,t,i)=>{"use strict";i.d(t,{D:()=>r});var a=i(2635);function r(e){let{className:t,color:i="#5F5F5F",size:r=16}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:r,height:r,viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M7.91699 15.0642C7.53125 15.0642 7.22119 14.9397 6.98682 14.6907C6.75244 14.4465 6.63525 14.1218 6.63525 13.7166V6.39966L6.77441 3.34546L7.48486 3.89478L5.62451 6.12134L3.99121 7.76196C3.87402 7.87915 3.73975 7.97681 3.58838 8.05493C3.44189 8.13306 3.271 8.17212 3.07568 8.17212C2.73389 8.17212 2.4458 8.05981 2.21143 7.83521C1.98193 7.60571 1.86719 7.3103 1.86719 6.94897C1.86719 6.60229 1.99902 6.29712 2.2627 6.03345L6.97949 1.30933C7.0918 1.19214 7.2334 1.10181 7.4043 1.03833C7.5752 0.969971 7.74609 0.935791 7.91699 0.935791C8.08789 0.935791 8.25879 0.969971 8.42969 1.03833C8.60059 1.10181 8.74463 1.19214 8.86182 1.30933L13.5786 6.03345C13.8423 6.29712 13.9741 6.60229 13.9741 6.94897C13.9741 7.3103 13.8569 7.60571 13.6226 7.83521C13.3931 8.05981 13.1074 8.17212 12.7656 8.17212C12.5703 8.17212 12.397 8.13306 12.2456 8.05493C12.0991 7.97681 11.9673 7.87915 11.8501 7.76196L10.2095 6.12134L8.34912 3.89478L9.05957 3.34546L9.19141 6.39966V13.7166C9.19141 14.1218 9.07422 14.4465 8.83984 14.6907C8.60547 14.9397 8.29785 15.0642 7.91699 15.0642Z",fill:i})})}},38786:(e,t,i)=>{"use strict";i.d(t,{u:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t}=e,{isDark:i}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:i?"#418CD6":"#4999E9"}),(0,a.jsx)("path",{opacity:"0.8",d:"M20.6685 6.66647C20.6685 8.38469 22.0613 9.77759 23.7796 9.77759H28.4462L20.6685 1.99981V6.66647Z",fill:"#7CBDFF"}),(0,a.jsxs)("g",{opacity:"0.9",children:[(0,a.jsx)("path",{d:"M12.2146 23.0075C10.8351 21.6055 9.41533 20.2051 8.00342 18.8399C9.32659 17.5371 10.7038 16.1826 12.0868 14.8106C12.4508 15.1731 12.8166 15.5372 13.1831 15.9025C12.1737 16.9083 11.1695 17.9061 10.19 18.8828C11.2178 19.8927 12.2378 20.9105 13.2498 21.9361C12.9037 22.2922 12.5586 22.6494 12.2146 23.0075Z",fill:"white"}),(0,a.jsx)("path",{d:"M20.1101 22.9923C19.7678 22.6361 19.4246 22.2809 19.0803 21.9267C20.0955 20.9008 21.1189 19.883 22.1503 18.8735C21.173 17.9015 20.17 16.9067 19.1604 15.9025C19.5269 15.5378 19.8925 15.1745 20.2562 14.8131C21.6404 16.1831 23.0167 17.5325 24.3368 18.8272C22.9219 20.1886 21.4969 21.5883 20.1101 22.9923Z",fill:"white"}),(0,a.jsx)("path",{d:"M15.8827 24.1754H14.4272L16.5372 13.7883H18.0544L15.8827 24.1754Z",fill:"white"}),(0,a.jsx)("path",{d:"M12.2146 23.0075C10.8351 21.6055 9.41533 20.2051 8.00342 18.8399C9.32659 17.5371 10.7038 16.1826 12.0868 14.8106C12.4508 15.1731 12.8166 15.5372 13.1831 15.9025C12.1737 16.9083 11.1695 17.9061 10.19 18.8828C11.2178 19.8927 12.2378 20.9105 13.2498 21.9361C12.9037 22.2922 12.5586 22.6494 12.2146 23.0075Z",stroke:"white",strokeWidth:"0.233333"}),(0,a.jsx)("path",{d:"M20.1101 22.9923C19.7678 22.6361 19.4246 22.2809 19.0803 21.9267C20.0955 20.9008 21.1189 19.883 22.1503 18.8735C21.173 17.9015 20.17 16.9067 19.1604 15.9025C19.5269 15.5378 19.8925 15.1745 20.2562 14.8131C21.6404 16.1831 23.0167 17.5325 24.3368 18.8272C22.9219 20.1886 21.4969 21.5883 20.1101 22.9923Z",stroke:"white",strokeWidth:"0.233333"}),(0,a.jsx)("path",{d:"M15.8827 24.1754H14.4272L16.5372 13.7883H18.0544L15.8827 24.1754Z",stroke:"white",strokeWidth:"0.233333"})]})]})}},37319:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t}=e,{isDark:i}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:i?"#3E74DC":"#4581F4"}),(0,a.jsx)("path",{opacity:"0.8",d:"M20.6665 6.66672C20.6665 8.38494 22.0594 9.77783 23.7776 9.77783H28.4443L20.6665 2.00005V6.66672Z",fill:"#6E9CF4"}),(0,a.jsx)("path",{opacity:"0.9",d:"M9.86377 13.46H12.0044L13.3459 20.3672H13.4316L14.8587 14.359H17.2277L18.5692 20.3672H18.6548L20.0248 13.46H22.137L19.9963 22.7933H17.4418L16.0004 16.8708H15.9147L14.4448 22.7933H11.8903L9.86377 13.46Z",fill:"white",stroke:"#0081D1",strokeWidth:"0.116667"})]})}},62480:(e,t,i)=>{"use strict";i.d(t,{Q:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t}=e,{isDark:i}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:i?"#408B52":"#3AA654"}),(0,a.jsx)("path",{opacity:"0.8",d:"M20.667 6.66647C20.667 8.38469 22.0599 9.77759 23.7781 9.77759H28.4448L20.667 1.99981V6.66647Z",fill:"#84C293"}),(0,a.jsx)("path",{opacity:"0.9",d:"M11.5778 13.6667H13.7075L16.0002 16.9614L18.4252 13.6667H20.4631L17.0191 18.1654L20.6668 23.0001H18.4966L16.0002 19.4347L13.3715 23.0001H11.3335L14.9812 18.1654L11.5778 13.6667Z",fill:"white",stroke:"white",strokeWidth:"0.35"})]})}},16671:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var a=i(2635),r=i(31867);i(99515);let n=e=>{let{size:t,...i}=e,{isDark:n}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:n?"#4876D3":"#4D81E8"}),(0,a.jsx)("path",{d:"M20.6685 6.66647C20.6685 8.38469 22.0613 9.77759 23.7796 9.77759H28.4462L20.6685 1.99981V6.66647Z",fill:"#9CC3F4"}),(0,a.jsx)("path",{opacity:"0.9",d:"M10.1685 18.2363H21.8351",stroke:"white",strokeWidth:"1.75",strokeLinecap:"square",strokeLinejoin:"round"}),(0,a.jsx)("path",{opacity:"0.9",d:"M10.1685 14.3472H12.1129",stroke:"white",strokeWidth:"1.75",strokeLinecap:"square",strokeLinejoin:"round"}),(0,a.jsx)("path",{opacity:"0.9",d:"M15.0293 14.3472H16.9737",stroke:"white",strokeWidth:"1.75",strokeLinecap:"square",strokeLinejoin:"round"}),(0,a.jsx)("path",{opacity:"0.9",d:"M10.1685 21.8333H21.8351",stroke:"white",strokeWidth:"1.75",strokeLinecap:"square",strokeLinejoin:"round"})]})}},51697:(e,t,i)=>{"use strict";i.d(t,{V:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t,disabled:i,...n}=e,{isDark:s}=(0,r.D)(),l={dark:{normal:{bgFill:"#4161C7",cornerFill:"#8199EA"},disabled:{bgFill:"#727272",cornerFill:"#828282"}},light:{normal:{bgFill:"#4A6CDC",cornerFill:"#8199EA"},disabled:{bgFill:"#B2B2B2",cornerFill:"#D3D3D3"}}},o=s?l.dark:l.light,c=i?o.disabled.bgFill:o.normal.bgFill,d=i?o.disabled.cornerFill:o.normal.cornerFill;return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:c}),(0,a.jsx)("path",{opacity:"0.8",d:"M20.6685 6.66647C20.6685 8.38469 22.0613 9.77759 23.7796 9.77759H28.4462L20.6685 1.99981V6.66647Z",fill:d}),(0,a.jsx)("path",{opacity:"0.9",d:"M14.7454 16.441C15.2294 16.441 15.6858 16.5449 16.1172 16.7514C16.4408 16.904 16.7328 17.1118 16.9958 17.3736C17.2576 17.6353 17.4654 17.9286 17.618 18.2509C17.4101 18.4587 17.1602 18.5613 16.8682 18.5613C16.7657 18.5613 16.6631 18.5455 16.5578 18.5152C16.3816 18.2285 16.1396 17.9878 15.8528 17.8102C15.5135 17.6037 15.1439 17.4998 14.7467 17.4998C14.4705 17.4998 14.2022 17.5524 13.943 17.6577C13.6839 17.7629 13.4511 17.9181 13.2472 18.122L11.6557 19.7135C11.4519 19.9173 11.2967 20.1501 11.1914 20.4093C11.0875 20.6644 11.0336 20.9367 11.0336 21.2129C11.0336 21.4891 11.0862 21.7574 11.1914 22.0166C11.2967 22.277 11.4506 22.5085 11.6557 22.7123C11.8609 22.9175 12.0924 23.0714 12.3515 23.1766C12.6067 23.2805 12.8803 23.3345 13.1565 23.3345C13.4327 23.3345 13.701 23.2819 13.9601 23.1766C14.2192 23.0714 14.4521 22.9162 14.6559 22.7123L15.77 21.5983C16.1238 21.6943 16.4894 21.743 16.8682 21.743C16.9288 21.743 17.0142 21.7403 17.1247 21.7351C17.0826 21.7811 17.0406 21.8271 16.9971 21.8719L15.4056 23.4634C15.0992 23.7698 14.7519 24.0013 14.3626 24.1592C13.9799 24.3157 13.5695 24.3959 13.1552 24.3959C12.7409 24.3959 12.3371 24.317 11.9477 24.1578C11.5571 23.9987 11.2099 23.7672 10.9047 23.4634C10.5982 23.1569 10.3668 22.8097 10.2089 22.4217C10.0524 22.0389 9.97217 21.6285 9.97217 21.2142C9.97217 20.7999 10.0524 20.3895 10.2089 20.0068C10.3668 19.6188 10.5982 19.2715 10.9047 18.9651L12.4962 17.3736C12.5265 17.3433 12.5725 17.3012 12.633 17.2447C12.9289 16.9816 13.2591 16.783 13.6234 16.6462C13.9878 16.5107 14.3613 16.4423 14.7454 16.441ZM18.4584 12.7293C18.8728 12.7293 19.2831 12.8095 19.6659 12.966C20.0539 13.1225 20.4011 13.3553 20.7089 13.6618C21.0154 13.9683 21.2482 14.3155 21.4047 14.7035C21.5612 15.0876 21.6414 15.4966 21.6401 15.911C21.6401 16.3253 21.5599 16.7278 21.4021 17.1184C21.2429 17.509 21.0114 17.8563 20.7076 18.1601L19.1161 19.7516C19.0858 19.7832 19.0398 19.8253 18.9793 19.8805C18.6847 20.1436 18.3545 20.3422 17.9889 20.479C17.6298 20.6144 17.2497 20.6842 16.8656 20.6842C16.3829 20.6842 15.9252 20.5802 15.4938 20.3737C15.1702 20.2212 14.8782 20.0134 14.6152 19.7516C14.3534 19.4899 14.1456 19.1966 13.993 18.8743C14.1995 18.6665 14.4494 18.5639 14.7427 18.5639C14.8453 18.5639 14.9492 18.5797 15.0531 18.6099C15.2294 18.8967 15.4701 19.1374 15.7568 19.3149C16.0975 19.5214 16.4658 19.6253 16.863 19.6253C17.1392 19.6253 17.4075 19.5727 17.6666 19.4675C17.9271 19.3623 18.1586 19.2071 18.3624 19.0032L19.9539 17.4117C20.1591 17.2078 20.313 16.975 20.4182 16.7159C20.5221 16.4608 20.5761 16.1885 20.5761 15.9123C20.5761 15.6361 20.5234 15.3677 20.4182 15.1086C20.313 14.8482 20.1578 14.6167 19.9539 14.4128C19.7487 14.2077 19.5172 14.0538 19.2581 13.9485C19.003 13.8446 18.7294 13.7907 18.4545 13.7907C18.1783 13.7907 17.91 13.8433 17.6508 13.9485C17.3904 14.0538 17.1589 14.209 16.9551 14.4128L15.8397 15.5269C15.4859 15.4309 15.1202 15.3822 14.7414 15.3822C14.6809 15.3822 14.5954 15.3848 14.4849 15.3901C14.527 15.3441 14.5691 15.298 14.6138 15.2533L16.2053 13.6618C16.5092 13.358 16.8564 13.1265 17.2471 12.9673C17.6403 12.8082 18.0428 12.7279 18.4584 12.7293Z",fill:"white",stroke:"white",strokeWidth:"0.318182"})]})}},67061:(e,t,i)=>{"use strict";i.d(t,{A:()=>l,z:()=>n});var a=i(2635),r=i(15585);function n(e){let{progress:t=0,size:i=32}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("inline-flex relative"),children:[(0,a.jsx)(s,{progress:t,className:(0,r.cn)("absolute top-[50%] mt-[2px] left-[50%] translate-x-[-50%] translate-y-[-50%]")}),(0,a.jsxs)("svg",{width:i,height:i,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:"#717275"}),(0,a.jsx)("path",{d:"M20.6685 6.66647C20.6685 8.38469 22.0613 9.77759 23.7796 9.77759H28.4462L20.6685 1.99981V6.66647Z",fill:"#9C9D9E"})]})]})}let s=e=>{let{progress:t=0,className:i,progressAnimationClassName:n,progressBgClassName:s}=e,l=2*Math.PI*6;return(0,a.jsxs)("svg",{className:(0,r.cn)("transform -rotate-90",i),viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"8",cy:"7.5",r:"6",className:(0,r.cn)("stroke-current text-[var(--icon-white-tsp)]",s),strokeOpacity:"0.48",strokeWidth:"1.2",fill:"none"}),(0,a.jsx)("circle",{cx:"8",cy:"7.5",r:"6",className:(0,r.cn)("stroke-current text-[var(--icon-white)]",n),strokeWidth:"1.2",fill:"none",strokeDasharray:"".concat(l," ").concat(l),strokeDashoffset:l-t/100*l,strokeLinecap:"round"})]})},l=s},12741:(e,t,i)=>{"use strict";i.d(t,{B:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t}=e,{isDark:i}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:i?"#D85446":"#F35F4F"}),(0,a.jsx)("path",{d:"M20.667 6.66647C20.667 8.38469 22.0599 9.77759 23.7781 9.77759H28.4448L20.667 1.99981V6.66647Z",fill:"#FD8C80"}),(0,a.jsxs)("g",{opacity:"0.9",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1811 24.3398V20.3133H16.4864C18.8419 20.3133 20.3829 18.7712 20.3829 16.4974C20.3829 14.2332 18.8438 12.6731 16.4946 12.6731H12.4496H11.9829V24.3398H12.4496H13.7145H14.1811ZM14.1805 18.4546H15.538C17.3974 18.4546 18.1508 17.9515 18.1508 16.4971C18.1508 15.2509 17.4462 14.5479 16.2114 14.5479H14.1805V18.4546Z",fill:"white"}),(0,a.jsx)("path",{d:"M14.1811 20.3133V20.255H14.1228V20.3133H14.1811ZM14.1811 24.3398V24.3981H14.2395V24.3398H14.1811ZM11.9829 12.6731V12.6148H11.9246V12.6731H11.9829ZM11.9829 24.3398H11.9246V24.3981H11.9829V24.3398ZM14.1805 18.4546H14.1221V18.5129H14.1805V18.4546ZM14.1805 14.5479V14.4896H14.1221V14.5479H14.1805ZM14.1228 20.3133V24.3398H14.2395V20.3133H14.1228ZM16.4864 20.255H14.1811V20.3717H16.4864V20.255ZM20.3246 16.4974C20.3246 17.6207 19.9442 18.5591 19.277 19.2165C18.6098 19.8739 17.6511 20.255 16.4864 20.255V20.3717C17.6771 20.3717 18.6667 19.9816 19.3589 19.2996C20.0511 18.6175 20.4412 17.6478 20.4412 16.4974H20.3246ZM16.4946 12.7314C17.656 12.7314 18.6126 13.1168 19.2786 13.7776C19.9447 14.4383 20.3246 15.3788 20.3246 16.4974H20.4412C20.4412 15.3517 20.0516 14.3801 19.3608 13.6947C18.67 13.0094 17.6824 12.6148 16.4946 12.6148V12.7314ZM12.4496 12.7314H16.4946V12.6148H12.4496V12.7314ZM11.9829 12.7314H12.4496V12.6148H11.9829V12.7314ZM12.0412 24.3398V12.6731H11.9246V24.3398H12.0412ZM12.4496 24.2814H11.9829V24.3981H12.4496V24.2814ZM13.7145 24.2814H12.4496V24.3981H13.7145V24.2814ZM14.1811 24.2814H13.7145V24.3981H14.1811V24.2814ZM15.538 18.3963H14.1805V18.5129H15.538V18.3963ZM18.0924 16.4971C18.0924 17.2145 17.9071 17.6819 17.5072 17.9741C17.1024 18.2701 16.4656 18.3963 15.538 18.3963V18.5129C16.4698 18.5129 17.1394 18.3876 17.5761 18.0683C18.0178 17.7454 18.2091 17.2341 18.2091 16.4971H18.0924ZM16.2114 14.6063C16.8179 14.6063 17.2861 14.7787 17.6028 15.0964C17.9195 15.4141 18.0924 15.8848 18.0924 16.4971H18.2091C18.2091 15.8632 18.0297 15.3593 17.6854 15.014C17.3411 14.6686 16.8397 14.4896 16.2114 14.4896V14.6063ZM14.1805 14.6063H16.2114V14.4896H14.1805V14.6063ZM14.2388 18.4546V14.5479H14.1221V18.4546H14.2388Z",fill:"#F35F4F"})]})]})}},87991:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});var a=i(2635),r=i(31867);function n(e){let{isDark:t}=(0,r.D)(),{size:i}=e;return(0,a.jsxs)("svg",{width:i,height:i,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:t?"#D84D4F":"#EA5355"}),(0,a.jsx)("path",{d:"M20.667 6.66647C20.667 8.38469 22.0599 9.77759 23.7781 9.77759H28.4448L20.667 1.99981V6.66647Z",fill:"#F78E8F"}),(0,a.jsx)("path",{opacity:"0.9",fillRule:"evenodd",clipRule:"evenodd",d:"M14.2558 11.6406H16.6253C16.6253 14.5907 19.1654 17.754 22.3311 18.8096L21.7897 21.1069C18.0743 20.5761 14.2345 22.1613 10.7667 24.474L9.36865 22.5629C10.6553 21.5334 11.8898 19.787 12.8045 17.7457C13.7167 15.7126 14.2558 13.509 14.2558 11.6406ZM14.2124 19.0594C14.7355 17.8898 15.1998 16.6772 15.5916 15.4489C16.5268 16.8776 17.651 18.1732 18.9337 19.3003C17.0099 19.6451 15.1273 20.2113 13.3015 20.9322C13.6247 20.317 13.9284 19.6921 14.2124 19.0594Z",fill:"white"})]})}},68408:(e,t,i)=>{"use strict";i.d(t,{B:()=>l});var a=i(2635),r=i(31867);function n(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("rect",{x:"2.5",y:"2.5",width:"27",height:"27",rx:"6",fill:"url(#f10b1a4af24d2f484532a7475d186df20)"}),(0,a.jsx)("path",{d:"M12.9529 12.3438V11.2875C12.9529 10.749 13.3894 10.3125 13.9279 10.3125H18.0716C18.6101 10.3125 19.0466 10.749 19.0466 11.2875V12.3438",stroke:"#ADADAD",strokeWidth:"1.21875",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M11.7346 14.7803V13.5615C11.7346 12.8884 12.2803 12.3428 12.9534 12.3428H19.0471C19.7202 12.3428 20.2659 12.8884 20.2659 13.5615V14.7803",stroke:"#767676",strokeWidth:"1.21875",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M20.2656 14.7793H11.7344C11.0613 14.7793 10.5156 15.3249 10.5156 15.998V20.873C10.5156 21.5461 11.0613 22.0918 11.7344 22.0918H20.2656C20.9387 22.0918 21.4844 21.5461 21.4844 20.873V15.998C21.4844 15.3249 20.9387 14.7793 20.2656 14.7793Z",stroke:"#34322D",strokeWidth:"1.21875",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"f10b1a4af24d2f484532a7475d186df20",x1:"25.7031",y1:"2.5",x2:"7.5625",y2:"27.8125",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"white"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#BFBFBF"})]})})]})}function s(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("rect",{x:"2.5",y:"2.5",width:"27",height:"27",rx:"6",fill:"url(#b07bbabf479397dfa1769ada545d2b220)"}),(0,a.jsx)("path",{d:"M12.9529 12.3438V11.2875C12.9529 10.749 13.3894 10.3125 13.9279 10.3125H18.0716C18.6101 10.3125 19.0466 10.749 19.0466 11.2875V12.3438",stroke:"#767676",strokeWidth:"1.21875",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M11.7344 14.7803V13.5615C11.7344 12.8884 12.28 12.3428 12.9531 12.3428H19.0469C19.72 12.3428 20.2656 12.8884 20.2656 13.5615V14.7803",stroke:"#ADADAD",strokeWidth:"1.21875",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M20.2656 14.7803H11.7344C11.0613 14.7803 10.5156 15.3259 10.5156 15.999V20.874C10.5156 21.5471 11.0613 22.0928 11.7344 22.0928H20.2656C20.9387 22.0928 21.4844 21.5471 21.4844 20.874V15.999C21.4844 15.3259 20.9387 14.7803 20.2656 14.7803Z",stroke:"white",strokeWidth:"1.21875",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"b07bbabf479397dfa1769ada545d2b220",x1:"25.7031",y1:"2.5",x2:"7.5625",y2:"27.8125",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#3E3E3E"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#1A1A19"})]})})]})}function l(e){let{color:t="currentColor",size:i=16,...l}=e,{isDark:o}=(0,r.D)();return o?(0,a.jsx)(n,{size:i,color:t,...l}):(0,a.jsx)(s,{size:i,color:t,...l})}n._id="f10b1a4af24d2f484532a7475d186df2",s._id="b07bbabf479397dfa1769ada545d2b22"},20176:(e,t,i)=>{"use strict";i.d(t,{a:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t=32,...i}=e,{isDark:n}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:n?"#E15647":"#EE5342"}),(0,a.jsx)("path",{opacity:.9,fillRule:"evenodd",clipRule:"evenodd",d:"M21.8265 14.0873C21.6866 14.0294 21.5365 13.9995 21.385 13.9995H10.6158C10.3097 13.9995 10.0163 14.1211 9.79987 14.3375C9.58348 14.5539 9.46191 14.8473 9.46191 15.1534V22.8457C9.46191 23.1517 9.58348 23.4452 9.79987 23.6616C10.0163 23.8779 10.3097 23.9995 10.6158 23.9995H21.385C21.5365 23.9995 21.6866 23.9697 21.8265 23.9117C21.9665 23.8537 22.0937 23.7687 22.2009 23.6616C22.308 23.5544 22.393 23.4272 22.451 23.2872C22.509 23.1472 22.5388 22.9972 22.5388 22.8457V15.1534C22.5388 15.0018 22.509 14.8518 22.451 14.7118C22.393 14.5718 22.308 14.4446 22.2009 14.3375C22.0937 14.2303 21.9665 14.1453 21.8265 14.0873ZM14.8522 16.4847C14.986 16.4846 15.1175 16.5195 15.2337 16.5858L18.2987 18.3374C18.4164 18.4046 18.5143 18.5019 18.5824 18.6192C18.6504 18.7364 18.6863 18.8696 18.6863 19.0053C18.6863 19.1409 18.6504 19.2741 18.5824 19.3914C18.5143 19.5086 18.4164 19.6059 18.2987 19.6731L15.2333 21.4243C15.1164 21.491 14.9839 21.5259 14.8493 21.5254C14.7146 21.5249 14.5825 21.489 14.466 21.4214C14.3496 21.3538 14.2529 21.2569 14.1857 21.1402C14.1184 21.0235 14.083 20.8912 14.0829 20.7566V17.2539C14.0829 17.0499 14.164 16.8542 14.3082 16.71C14.4525 16.5657 14.6482 16.4847 14.8522 16.4847Z",fill:"white"}),(0,a.jsx)("path",{d:"M20.667 6.66672C20.667 8.38494 22.0599 9.77783 23.7781 9.77783H28.4448L20.667 2.00005V6.66672Z",fill:n?"#E87E73":"#FD7A6C"})]})}},82468:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});var a=i(2635),r=i(31867);function n(e){let{size:t=32}=e,{isDark:i}=(0,r.D)();return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.55566 26.8889C3.55566 28.6071 4.94856 30 6.66678 30H25.3334C27.0517 30 28.4446 28.6071 28.4446 26.8889V9.77778L20.6668 2H6.66678C4.94856 2 3.55566 3.39289 3.55566 5.11111V26.8889Z",fill:i?"#DE9000":"#F8A100"}),(0,a.jsx)("path",{opacity:"0.8",d:"M20.6665 6.66672C20.6665 8.38494 22.0594 9.77783 23.7776 9.77783H28.4443L20.6665 2.00005V6.66672Z",fill:i?"#F1BC5E":"#FFCE76"}),(0,a.jsx)("path",{d:"M16.0952 14.9524V12.7935H14V10.635H16.0952V8.47619H14V6.31733H16.0952V4.15886H14V2H16.0952V4.15886H18.1905V6.31733H16.0952V8.47619H18.1905V10.635H16.0952V12.7935H18.1905V21.0476H14V14.9524H16.0952ZM17.4286 17.2381H14.7619V20.2857H17.4286V17.2381Z",fill:"white"})]})}},78140:(e,t,i)=>{"use strict";i.d(t,{S:()=>r});var a=i(2635);function r(e){let{size:t=16,...i}=e;return(0,a.jsx)("svg",{width:t,height:t,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8081 3.57564C14.0424 3.80995 14.0424 4.18985 13.8081 4.42417L6.47478 11.7575C6.24047 11.9918 5.86057 11.9918 5.62626 11.7575L2.29292 8.42417C2.05861 8.18985 2.05861 7.80995 2.29292 7.57564C2.52724 7.34132 2.90714 7.34132 3.14145 7.57564L6.05052 10.4847L12.9596 3.57564C13.1939 3.34132 13.5738 3.34132 13.8081 3.57564Z",fill:i.color||"#25BA3B"})})}},55866:(e,t,i)=>{"use strict";i.d(t,{K:()=>n});var a=i(2635),r=i(99515);function n(e){let{size:t=16,color:i="currentColor",className:n}=e,s=(0,r.useId)();return(0,a.jsxs)("svg",{className:n,height:t,width:t,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{clipPath:"url(#".concat(s,"_clip0_1152_60258)"),children:[(0,a.jsx)("path",{d:"M10.0013 18.3332C14.6037 18.3332 18.3346 14.6022 18.3346 9.99984C18.3346 5.39746 14.6037 1.6665 10.0013 1.6665C5.39893 1.6665 1.66797 5.39746 1.66797 9.99984C1.66797 14.6022 5.39893 18.3332 10.0013 18.3332Z",stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.66667"}),(0,a.jsx)("path",{d:"M10 6.6665V9.99984",stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.66667"}),(0,a.jsx)("path",{d:"M10 13.3335H10.0083",stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.66667"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"".concat(s,"_clip0_1152_60258"),children:(0,a.jsx)("rect",{height:"20",width:"20",fill:"white"})})})]})}},56163:(e,t,i)=>{"use strict";i.d(t,{$:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-tertiary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("g",{clipPath:"url(#35f4cef44cbf3246b803c5b8237652ea0)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99994 0.733322C3.98667 0.733322 0.733276 3.98672 0.733276 7.99999C0.733276 12.0133 3.98667 15.2667 7.99994 15.2667C12.0132 15.2667 15.2666 12.0133 15.2666 7.99999C15.2666 3.98672 12.0132 0.733322 7.99994 0.733322ZM6.42421 5.57573C6.18989 5.34141 5.80999 5.34141 5.57568 5.57573C5.34136 5.81004 5.34136 6.18994 5.57568 6.42425L7.15141 7.99999L5.57568 9.57572C5.34136 9.81004 5.34136 10.1899 5.57568 10.4243C5.80999 10.6586 6.18989 10.6586 6.42421 10.4243L7.99994 8.84852L9.57568 10.4243C9.80999 10.6586 10.1899 10.6586 10.4242 10.4243C10.6585 10.1899 10.6585 9.81004 10.4242 9.57572L8.84847 7.99999L10.4242 6.42425C10.6585 6.18994 10.6585 5.81004 10.4242 5.57573C10.1899 5.34141 9.80999 5.34141 9.57568 5.57573L7.99994 7.15146L6.42421 5.57573Z",fill:"currentColor"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"35f4cef44cbf3246b803c5b8237652ea0",children:(0,a.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})}r._id="35f4cef44cbf3246b803c5b8237652ea"},50973:(e,t,i)=>{"use strict";i.d(t,{P:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M0 12C0 5.37258 5.37258 0 12 0H52C58.6274 0 64 5.37258 64 12V52C64 58.6274 58.6274 64 52 64H12C5.37258 64 0 58.6274 0 52V12Z",fill:"#1A1A19"}),(0,a.jsxs)("g",{clipPath:"url(#4cad070dcef6f451302f6d4293cb31e20)",children:[(0,a.jsx)("path",{d:"M32.1387 31.9163C32.1387 27.7816 35.4905 24.4297 39.6253 24.4297C43.76 24.4297 47.1119 27.7816 47.1119 31.9163C47.1119 36.0511 43.76 39.403 39.6253 39.403C35.4905 39.403 32.1387 36.0511 32.1387 31.9163Z",fill:"#1ABCFE"}),(0,a.jsx)("path",{d:"M17.166 46.887C17.166 42.7523 20.5179 39.4004 24.6526 39.4004H32.1393V46.887C32.1393 51.0218 28.7874 54.3737 24.6526 54.3737C20.5179 54.3737 17.166 51.0218 17.166 46.887Z",fill:"#0ACF83"}),(0,a.jsx)("path",{d:"M32.1406 9.45508V24.4283H39.6273C43.762 24.4283 47.1139 21.0765 47.1139 16.9417C47.1139 12.807 43.762 9.45508 39.6273 9.45508H32.1406Z",fill:"#FF7262"}),(0,a.jsx)("path",{d:"M17.166 16.9417C17.166 21.0765 20.5179 24.4283 24.6526 24.4283H32.1393V9.45508H24.6526C20.5179 9.45508 17.166 12.807 17.166 16.9417Z",fill:"#F24E1E"}),(0,a.jsx)("path",{d:"M17.166 31.9163C17.166 36.0511 20.5179 39.403 24.6526 39.403H32.1393V24.4297H24.6526C20.5179 24.4297 17.166 27.7816 17.166 31.9163Z",fill:"#A259FF"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"4cad070dcef6f451302f6d4293cb31e20",children:(0,a.jsx)("rect",{width:"45.3818",height:"45.3818",fill:"white",transform:"translate(9.30859 9.30859)"})})})]})}r._id="4cad070dcef6f451302f6d4293cb31e2"},40795:(e,t,i)=>{"use strict";i.d(t,{R:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.85512 12.7131H1.5C1.5 13.0134 1.57789 13.3137 1.73368 13.5849L2.78522 15.3963L3.53495 16.6846C3.69074 16.9559 3.91466 17.169 4.17756 17.324L6.85512 12.7131Z",fill:"#0066DA"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8224 17.324C16.0854 17.169 16.3093 16.9559 16.4651 16.6847L16.7766 16.1519L18.2664 13.5849C18.4193 13.3196 18.4998 13.019 18.5 12.7131H13.1546L15.8224 17.324Z",fill:"#EA4335"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6777 2.6778L10.0001 7.28865L7.32255 2.6778C7.58552 2.53252 7.88727 2.44531 8.19884 2.44531H11.8014C12.1129 2.44531 12.4148 2.52281 12.6777 2.6778Z",fill:"#00832D"}),(0,a.jsx)("path",{d:"M18.5 12.7131C18.5 12.4128 18.4125 12.1129 18.2567 11.8416L15.7934 7.57948L13.3202 3.31733C13.1645 3.04606 12.9406 2.83279 12.6777 2.6778L10.0001 7.28865L13.1546 12.7131H18.5Z",fill:"#FFBA00"}),(0,a.jsx)("path",{d:"M6.85512 12.7131L4.17756 17.324C4.44039 17.479 4.74213 17.5564 5.05371 17.5564H14.9461C15.2577 17.5564 15.5596 17.4693 15.8224 17.324L13.1546 12.7131H6.85512Z",fill:"#2684FC"}),(0,a.jsx)("path",{d:"M1.73368 11.8416C1.58077 12.107 1.50021 12.4072 1.5 12.7131H6.85512L10.0001 7.28865L7.32255 2.6778C7.05958 2.83279 6.83566 3.04606 6.67987 3.31733L1.73368 11.8416Z",fill:"#00AC47"})]})}r._id="e99b1cba780161599126208e2ab78f0f"},22292:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",width:i,height:i,color:t,...r,children:(0,a.jsx)("path",{d:"M42 30.0072L35.828 23.8352C35.0779 23.0853 34.0607 22.6641 33 22.6641C31.9393 22.6641 30.9221 23.0853 30.172 23.8352L12 42.0072M10 6H38C40.2091 6 42 7.79086 42 10V38C42 40.2091 40.2091 42 38 42H10C7.79086 42 6 40.2091 6 38V10C6 7.79086 7.79086 6 10 6ZM21.9995 17.9922C21.9995 20.2013 20.2087 21.9922 17.9995 21.9922C15.7904 21.9922 13.9995 20.2013 13.9995 17.9922C13.9995 15.783 15.7904 13.9922 17.9995 13.9922C20.2087 13.9922 21.9995 15.783 21.9995 17.9922Z",stroke:"currentColor",strokeOpacity:"0.14",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})})}r._id="a550b6b0dee79e202d03b43c204b02fd"},63226:(e,t,i)=>{"use strict";i.d(t,{m:()=>r});var a=i(2635);function r(e){let{size:t=16,color:i="currentColor"}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 20 20",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_28_5587)",children:[(0,a.jsx)("path",{d:"M9.99996 18.3332C14.6023 18.3332 18.3333 14.6022 18.3333 9.99984C18.3333 5.39746 14.6023 1.6665 9.99996 1.6665C5.39759 1.6665 1.66663 5.39746 1.66663 9.99984C1.66663 14.6022 5.39759 18.3332 9.99996 18.3332Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10 13.3333V10",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10 6.6665H10.0083",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_28_5587",children:(0,a.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}},46859:(e,t,i)=>{"use strict";i.d(t,{f:()=>r});var a=i(2635);let r=e=>{let{size:t=24,color:i="currentColor"}=e;return(0,a.jsxs)("svg",{height:t,width:t,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M17.6334 22.5843C19.2956 21.5298 20.4448 15.8741 20.192 14.1899C20.192 14.1899 19.9285 13.2858 19.2857 13.2857C18.6428 13.2857 18.3754 13.963 18.3754 13.963C18.3754 13.963 18.2062 14.5883 17.9406 15.3756C17.5298 16.5934 17.3571 18.0962 16.2857 18.4767C15.2143 18.8571 14.1429 18.4971 14.1429 18.4971C14.8714 21.2602 15.9713 23.6389 17.6334 22.5843Z",fill:i}),(0,a.jsx)("path",{d:"M9.39785 12.235C8.78721 12.3035 8.46558 12.5343 8.35707 12.6428C7.9285 13.0714 7.71422 13.5 7.71422 13.7143C7.71422 13.9286 7.21009 12.7111 7.09932 12.597C6.76953 12.2574 6.7775 11.7148 7.11711 11.385C7.59386 10.922 8.37354 10.6249 9.20685 10.5314C10.0711 10.4345 11.096 10.5425 12.1331 11.0019C13.3435 11.5381 13.9917 12.6685 14.2366 13.7016C14.3609 14.226 14.3926 14.7649 14.3289 15.256C14.2671 15.7328 14.1044 16.2427 13.7658 16.6307C13.0605 17.4391 12.0203 17.348 11.4575 17.2286C11.1404 17.1614 10.8607 17.0626 10.664 16.9832C10.5642 16.943 10.4823 16.9063 10.4235 16.8788C10.394 16.865 10.3701 16.8534 10.3524 16.8446C10.3436 16.8402 10.3363 16.8366 10.3306 16.8337L10.3234 16.83L10.3207 16.8286L10.319 16.8277C10.319 16.8277 10.3186 16.8275 10.7144 16.0672L10.3186 16.8275C9.89868 16.6089 9.73553 16.0912 9.95414 15.6714C10.1723 15.2523 10.6883 15.089 11.1078 15.3057M11.1078 15.3057L11.1088 15.3062ZM11.1078 15.3057L11.1139 15.3087C11.1209 15.3122 11.1332 15.3182 11.1504 15.3263C11.185 15.3425 11.2382 15.3664 11.3052 15.3934C11.4421 15.4486 11.6229 15.5113 11.8133 15.5517C12.2654 15.6476 12.4279 15.5566 12.474 15.5037C12.5112 15.4611 12.5921 15.3191 12.6289 15.0356C12.6638 14.7665 12.649 14.4366 12.5685 14.0969C12.4037 13.4017 12.0093 12.822 11.4388 12.5693C10.6951 12.2399 9.9775 12.1701 9.39785 12.235",fill:i,fillRule:"evenodd"}),(0,a.jsx)("path",{d:"M3.73099 3.37839C3.52251 3.80339 3.69804 4.31694 4.12304 4.52542C4.73349 4.82486 5.26324 5.12013 5.78774 5.71148C6.10186 6.06563 6.6436 6.09809 6.99776 5.78397C7.35191 5.46985 7.38436 4.92811 7.07024 4.57395C6.32282 3.73128 5.55348 3.31767 4.87802 2.98633C4.45301 2.77785 3.93947 2.95338 3.73099 3.37839Z",fill:i,fillRule:"evenodd"}),(0,a.jsx)("path",{d:"M8.3635 0.882627C7.90425 0.99744 7.62503 1.46281 7.73984 1.92207C7.82005 2.24292 7.89486 2.51727 7.96334 2.76842C8.09441 3.24911 8.20231 3.6448 8.28056 4.11886C8.35767 4.58592 8.7988 4.90205 9.26587 4.82494C9.73294 4.74784 10.0491 4.3067 9.97196 3.83964C9.87946 3.27934 9.73543 2.74921 9.59087 2.21711C9.52686 1.98149 9.46274 1.74548 9.40294 1.50629C9.28813 1.04704 8.82275 0.767814 8.3635 0.882627Z",fill:i,fillRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.0002 4.28568C12.2145 3.42854 12.4288 2.78568 12.8188 2.14282",stroke:i,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"1.71429"}),(0,a.jsx)("path",{d:"M15.1487 8.35727C16.8491 8.69706 16.8494 8.6958 16.8494 8.6958L16.8496 8.69453L16.8501 8.69193L16.8511 8.68653L16.8531 8.67496C16.8545 8.66689 16.856 8.65812 16.8575 8.64867C16.8606 8.6298 16.8638 8.60805 16.867 8.58372C16.8734 8.53539 16.8798 8.475 16.884 8.40509C16.8922 8.27039 16.8939 8.07464 16.8594 7.84762C16.7941 7.41756 16.5437 6.60238 15.661 6.12983L15.4864 6.03634L15.2956 5.98352L14.8568 7.61871C15.2481 7.82818 15.1487 8.35727 15.1487 8.35727ZM14.8768 9.43607L15.1487 8.35727L16.8491 8.69706L16.8398 8.74684L16.5653 9.83594C16.5124 10.1036 16.5055 10.2566 16.5084 10.3375C16.5107 10.4033 16.5193 10.4249 16.5235 10.4355L16.524 10.4367C16.5347 10.4641 16.5625 10.5234 16.664 10.6773C16.7053 10.74 16.7483 10.8029 16.8031 10.883C16.8176 10.9042 16.8329 10.9266 16.8493 10.9505C16.9229 11.0584 17.009 11.1856 17.1003 11.3278C17.6706 12.2166 17.7266 13.0696 17.7236 13.6163C17.7236 13.6243 17.7235 13.6323 17.7234 13.6402C17.7916 13.6636 17.864 13.6872 17.9409 13.7117C17.9663 13.7198 18 13.7304 18.0353 13.7415C18.0849 13.7572 18.1378 13.7739 18.1756 13.786C18.2499 13.8098 18.3448 13.8409 18.4366 13.8751C18.5005 13.8989 18.5618 13.9226 18.6195 13.9465C18.6748 13.9695 18.7424 13.9989 18.8136 14.0348C18.8687 14.0626 18.9585 14.1103 19.0601 14.1808L19.9532 14.5651L19.9403 15.7093C19.9327 16.382 19.662 17.0912 19.4701 17.5302C19.2584 18.0143 18.9788 18.5305 18.7214 18.8736C18.3619 19.3529 17.9545 19.8588 17.4645 20.1824C17.1756 20.3732 16.8268 20.5248 16.4152 20.5745C16.0485 20.6188 15.7311 20.5697 15.498 20.513L15.4292 20.4989C15.3601 20.4847 15.2612 20.4643 15.1407 20.4392C14.9 20.3891 14.572 20.3201 14.2241 20.2445C13.5827 20.1052 12.7133 19.9104 12.3032 19.7743L12.2735 19.7644L12.2443 19.7536C12.0624 19.6861 11.7549 19.6103 11.2455 19.4941C11.2147 19.4871 11.1833 19.48 11.1514 19.4727C10.7119 19.3727 10.1711 19.2496 9.659 19.0945C9.1286 18.9339 8.47257 18.695 7.91553 18.3057C7.33086 17.8972 6.66614 17.1767 6.62912 16.0959C6.62358 15.9342 6.6273 15.7778 6.6373 15.6294C6.37402 15.3441 6.15304 14.971 6.04136 14.4932C5.93256 14.0278 5.99274 13.6152 6.06907 13.3256C6.14561 13.0352 6.26188 12.7814 6.35905 12.5917C6.39184 12.5277 6.42586 12.4645 6.4598 12.4035C6.1384 12.3021 5.77538 12.1768 5.42207 12.0262C4.96063 11.8295 4.3059 11.505 3.8171 10.9811C3.55384 10.699 3.27819 10.2946 3.16674 9.76591C3.0501 9.21264 3.14701 8.68179 3.37414 8.22725C3.92701 7.12076 4.98308 6.72982 5.92235 6.696C6.77048 6.66546 7.67298 6.90278 8.48162 7.1864C9.21839 7.4448 10.2729 7.92543 11.1687 8.34407C11.4638 7.86023 11.8527 7.3135 12.221 6.87194L12.2941 6.78423L12.3788 6.70718C13.0123 6.13055 13.7239 5.93668 14.2662 5.8951C14.5321 5.87472 14.761 5.88992 14.9322 5.91216C15.0187 5.92339 15.0933 5.93678 15.1539 5.94944C15.1843 5.95579 15.2114 5.96202 15.235 5.96779C15.2469 5.97067 15.2578 5.97345 15.2679 5.97609L15.2824 5.97992L15.2892 5.98176L15.2924 5.98265L15.294 5.98309C15.294 5.98309 15.2956 5.98352 14.8568 7.61871C14.8568 7.61871 14.1726 7.42928 13.5844 7.94851C13.5785 7.95374 13.5725 7.95904 13.5666 7.96442C13.5484 7.9863 13.5301 8.00845 13.5118 8.03085C13.4855 8.06308 13.4591 8.09583 13.4328 8.12899C13.425 8.13873 13.4173 8.1485 13.4096 8.15831C12.8225 8.90308 12.8574 9.21422 11.7858 10.5001C11.7858 10.5001 11.2277 10.2416 10.8938 10.0847C10.6647 9.97699 10.4226 9.86316 10.1758 9.74844C9.37984 9.37832 8.53597 8.99879 7.9287 8.7858C6.43357 8.26142 5.33126 8.19486 4.92892 9.00008C4.39818 10.0623 6.5534 10.6777 7.63639 10.987C7.86446 11.0521 8.04497 11.1037 8.14284 11.1429C8.69829 11.3659 8.73705 11.8133 8.57164 12.2142C8.47511 12.4482 8.42008 12.5801 8.14306 12.8571C7.71449 13.2856 7.64421 13.7931 7.72606 14.1432C7.76703 14.3185 7.84809 14.446 7.94445 14.5386C8.20295 14.7873 8.57155 14.7858 8.57155 14.7858C8.57155 14.7858 8.33388 15.3932 8.35711 16.0716C8.36223 16.2209 8.40239 16.3568 8.4716 16.4811C8.88249 17.2188 10.3173 17.5456 11.5228 17.8202C12.0292 17.9356 12.495 18.0417 12.8276 18.1651C13.4238 18.363 15.857 18.8572 15.857 18.8572C16.306 18.9751 16.5844 18.8325 17.3228 17.848C17.6295 17.4392 18.2043 16.2826 18.2114 15.6575C18.1181 15.6174 18.1116 15.6034 18.1051 15.5893C18.0961 15.57 18.087 15.5506 17.8512 15.4627C17.7724 15.4334 17.6668 15.4001 17.546 15.362C17.0432 15.2034 16.2764 14.9616 16.0715 14.5715C15.972 14.3822 15.9798 14.1281 15.989 13.831C16.0032 13.369 16.0207 12.803 15.643 12.2144C15.5503 12.0699 15.4613 11.9398 15.3781 11.8182C14.9045 11.1258 14.6172 10.7056 14.8768 9.43607ZM6.9568 11.5272C6.9579 11.5241 6.95748 11.5248 6.95611 11.5291L6.9568 11.5272ZM17.7149 14.1614C17.7149 14.1614 17.7148 14.1547 17.7135 14.1431C17.714 14.1559 17.7149 14.1614 17.7149 14.1614Z",fill:i,fillRule:"evenodd"})]})}},7074:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M11.61 10.356C11.61 10.356 15.4679 8.1942 15.5344 8.22746C15.1657 6.78695 14.2412 5.55122 12.9634 4.79077C11.6856 4.03032 10.1585 3.80711 8.71654 4.16999C7.35995 4.51249 6.18349 5.35622 5.424 6.5313C5.45726 6.5313 11.61 10.356 11.61 10.356Z",fill:"#0364B8"}),(0,a.jsx)("path",{d:"M7.85159 7.19588C7.14084 6.76076 6.32365 6.53056 5.49028 6.53072L5.424 6.5313C4.23347 6.54969 3.09867 7.0393 2.2693 7.89361C1.43993 8.74793 0.983565 9.89651 1.00045 11.0871C1.01492 11.9893 1.29232 12.8677 1.79864 13.6147L7.98462 12.9828L11.6097 9.49068L7.85159 7.19588Z",fill:"#0F78D4"}),(0,a.jsx)("path",{d:"M15.5679 8.22663H15.335C14.8424 8.22298 14.3548 8.32505 13.905 8.52595L11.6434 9.45717L14.1045 12.1843L18.5611 13.5812C18.7899 13.1579 18.9327 12.6935 18.9813 12.2148C19.0299 11.7361 18.9833 11.2525 18.8442 10.7919C18.7051 10.3313 18.4762 9.90277 18.1708 9.53099C17.8653 9.15922 17.4893 8.85155 17.0645 8.62572C16.5963 8.39666 16.0879 8.2611 15.5679 8.22663Z",fill:"#1490DF"}),(0,a.jsx)("path",{d:"M15.3354 11.6864L14.4042 11.121L12.2757 9.85721L11.6105 9.45812L9.91435 10.1898L6.62181 11.5866L5.1252 12.1853L1.7994 13.5821C2.21528 14.1758 2.76767 14.6609 3.4101 14.9966C4.05253 15.3322 4.7662 15.5087 5.49104 15.5111H15.3021C15.9632 15.5074 16.6112 15.3265 17.1786 14.9872C17.746 14.6479 18.212 14.1627 18.5282 13.5821L15.3354 11.6864Z",fill:"#28A8EA"})]})}r._id="f55629642e2b77e654ecafd1d83c5c14"},96962:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});var a=i(2635);function r(e){let{size:t,bgColor:i="var(--icon-blue)",checkIconColor:r="var(--text-white)",...n}=e;return(0,a.jsxs)("svg",{height:t,width:t,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,a.jsx)("circle",{cx:"10",cy:"10",fill:i,r:"9"}),(0,a.jsx)("path",{d:"M13.4667 8L8.33333 13.1333L6 10.8",stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}},16001:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});var a=i(2635);function r(e){let{color:t="rgba(0,0,0,0.16)",size:i,...r}=e;return(0,a.jsx)("svg",{height:i,width:i,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,a.jsx)("circle",{cx:"10",cy:"10",r:"8.5",stroke:t})})}},7948:(e,t,i)=>{"use strict";i.d(t,{q:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("g",{clipPath:"url(#d9b693ab48fcfdc598507b1cabc7db230)",children:(0,a.jsx)("path",{d:"M15.7601 0.81282C15.9322 0.752773 16.1159 0.735421 16.2955 0.762282L16.3739 0.776931L16.4508 0.796706C16.6034 0.842291 16.7443 0.920141 16.8646 1.02449L16.9232 1.07869L16.9774 1.13655C17.0817 1.25674 17.1589 1.39794 17.2045 1.55037L17.225 1.62801L17.2396 1.70637C17.2663 1.88554 17.2481 2.0686 17.1884 2.24031L17.1891 2.24104L12.3141 16.491V16.4918C12.2396 16.7088 12.1006 16.898 11.9157 17.0338C11.7306 17.1696 11.5079 17.2454 11.2784 17.2513C11.0491 17.2571 10.8234 17.1927 10.6317 17.0667C10.4638 16.9563 10.3289 16.8029 10.2406 16.6236L10.2054 16.5452L7.82068 10.5972L7.78919 10.5284C7.75405 10.4615 7.7088 10.4003 7.65515 10.3468C7.5835 10.2752 7.49792 10.2189 7.40393 10.1812V10.1805L1.45594 7.79573C1.24302 7.71029 1.06132 7.56182 0.935184 7.37019C0.809042 7.17841 0.744736 6.9522 0.750614 6.72273L0.755741 6.63704C0.776095 6.43832 0.849358 6.24814 0.968143 6.08626L1.02088 6.01887C1.15104 5.86718 1.32009 5.75299 1.51014 5.68782V5.68709L15.7601 0.812087V0.81282ZM9.15442 9.90584C9.15876 9.91489 9.16339 9.92382 9.16761 9.93294L9.21228 10.0369L9.21302 10.0384L11.2213 15.0489L14.9699 4.09114L9.15442 9.90584ZM2.95154 6.77913L7.96057 8.78816H7.96131C8.00594 8.80603 8.04986 8.82612 8.09314 8.84675L13.91 3.02986L2.95154 6.77913Z",fill:"currentColor"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"d9b693ab48fcfdc598507b1cabc7db230",children:(0,a.jsx)("rect",{width:"18",height:"18",fill:"currentColor"})})})]})}r._id="d9b693ab48fcfdc598507b1cabc7db23"},19463:(e,t,i)=>{"use strict";i.d(t,{L:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M14.0914 0.721827C14.1534 0.535432 14.4171 0.535433 14.4791 0.721828L14.8291 1.77428C15.0324 2.38523 15.5117 2.8646 16.1227 3.06782L17.1751 3.41791C17.3615 3.47991 17.3615 3.74357 17.1751 3.80557L16.1227 4.15565C15.5117 4.35888 15.0324 4.83825 14.8291 5.4492L14.4791 6.50165C14.4171 6.68804 14.1534 6.68804 14.0914 6.50165L13.7413 5.4492C13.5381 4.83825 13.0587 4.35888 12.4478 4.15565L11.3953 3.80557C11.2089 3.74357 11.2089 3.47991 11.3953 3.41791L12.4478 3.06782C13.0587 2.8646 13.5381 2.38523 13.7413 1.77428L14.0914 0.721827Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M7.775 2.61733C7.93004 2.15141 8.58899 2.15137 8.74399 2.61733L9.68369 5.44228C10.1511 6.84743 11.2537 7.94995 12.6588 8.41738L15.4837 9.35781C15.9497 9.51282 15.9497 10.1718 15.4837 10.3268L15.1212 10.4469L12.6588 11.2665L12.3988 11.3617C11.1182 11.8732 10.1219 12.9243 9.68369 14.2416L8.86411 16.704L8.74399 17.0666L8.70883 17.1486C8.5215 17.5054 7.99668 17.5055 7.80942 17.1486L7.775 17.0666L6.83457 14.2416C6.39635 12.9243 5.40012 11.8731 4.11948 11.3617L3.85947 11.2665L1.03452 10.3268C0.568551 10.1718 0.568594 9.51286 1.03452 9.35781L1.39633 9.23696L3.85947 8.41738C5.17688 7.97916 6.22869 6.98304 6.74008 5.70229L6.83457 5.44228L7.775 2.61733ZM8.25839 5.91616C7.68028 7.65406 6.36564 9.04128 4.67612 9.71596L4.33335 9.84121L4.32968 9.84194L4.33335 9.84341L4.67612 9.96865C6.36559 10.6434 7.68031 12.0306 8.25839 13.7685L8.25913 13.7714L8.26059 13.7685L8.38584 13.4257C9.06049 11.736 10.4476 10.4215 12.1856 9.84341L12.1886 9.84194L12.1856 9.84121C10.4478 9.26312 9.06055 7.9484 8.38584 6.25893L8.26059 5.91616L8.25913 5.9125L8.25839 5.91616Z",fill:"currentColor"})]})}r._id="c89cbf09a50c6eed6b050c6d5285b7c2"},85262:(e,t,i)=>{"use strict";i.d(t,{g:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M5.25379 31.9027C5.39948 31.4647 6.01902 31.4647 6.16471 31.9027L6.6354 33.3177C7.11294 34.7533 8.23938 35.8798 9.67499 36.3573L11.09 36.828C11.528 36.9737 11.528 37.5932 11.09 37.7389L9.67499 38.2096C8.23938 38.6872 7.11294 39.8136 6.6354 41.2492L6.16471 42.6642C6.01902 43.1022 5.39948 43.1022 5.25379 42.6642L4.7831 41.2492C4.30556 39.8136 3.17912 38.6872 1.74351 38.2096L0.328495 37.7389C-0.109499 37.5932 -0.109498 36.9737 0.328496 36.828L1.74351 36.3573C3.17912 35.8798 4.30556 34.7533 4.7831 33.3177L5.25379 31.9027Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M38.0092 5.24424C38.1549 4.80625 38.7745 4.80625 38.9202 5.24424L39.3772 6.61811C39.8547 8.05372 40.9811 9.18016 42.4167 9.65769L43.7906 10.1147C44.2286 10.2604 44.2286 10.8799 43.7906 11.0256L42.4167 11.4826C40.9811 11.9602 39.8547 13.0866 39.3772 14.5222L38.9202 15.8961C38.7745 16.3341 38.1549 16.3341 38.0092 15.8961L37.5522 14.5222C37.0747 13.0866 35.9482 11.9602 34.5126 11.4826L33.1388 11.0256C32.7008 10.8799 32.7008 10.2604 33.1388 10.1147L34.5126 9.65769C35.9482 9.18016 37.0747 8.05372 37.5522 6.61811L38.0092 5.24424Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.455 14.8468C18.3567 18.1487 15.7659 20.7395 12.464 21.8379L5.82515 24.0462C4.73016 24.4104 4.73016 25.9593 5.82514 26.3235L12.464 28.5318C15.7659 29.6302 18.3567 32.221 19.455 35.5229L21.6634 42.1617C22.0276 43.2567 23.5765 43.2567 23.9407 42.1617L26.149 35.5229C27.2474 32.221 29.8382 29.6302 33.1401 28.5318L39.7789 26.3235C40.8739 25.9593 40.8739 24.4104 39.7789 24.0462L33.1401 21.8379C29.8382 20.7395 27.2474 18.1487 26.149 14.8468L23.9407 8.20796C23.5765 7.11297 22.0276 7.11297 21.6634 8.20796L19.455 14.8468ZM22.802 16.6234C21.3012 20.5674 18.1846 23.684 14.2405 25.1849C18.1846 26.6857 21.3012 29.8022 22.802 33.7463C24.3029 29.8023 27.4194 26.6857 31.3635 25.1848C27.4194 23.684 24.3029 20.5675 22.802 16.6234Z",fill:"currentColor"})]})}r._id="0714e0ed981c3ac2f2e53afa3c1b7ed1"},95040:(e,t,i)=>{"use strict";i.d(t,{O:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M3.09961 4H4.5",stroke:"url(#8362e9eb7a2f53954866ea50a265b5f10)",strokeWidth:"0.76",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M3.09961 5.5H4.5",stroke:"url(#8362e9eb7a2f53954866ea50a265b5f11)",strokeWidth:"0.76",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6.52051 3.9248H7.56738C7.88495 3.9248 8.14258 4.18244 8.14258 4.5V8.0752H5.94531V4.5C5.94531 4.18244 6.20294 3.9248 6.52051 3.9248Z",stroke:"url(#8362e9eb7a2f53954866ea50a265b5f12)",strokeWidth:"0.85"}),(0,a.jsx)("path",{d:"M2.36719 1.9248H5.36719C5.68475 1.9248 5.94238 2.18244 5.94238 2.5V8.0752H1.79199V2.5C1.79199 2.18244 2.04962 1.9248 2.36719 1.9248Z",stroke:"currentColor",strokeWidth:"0.85"}),(0,a.jsx)("path",{d:"M1.2002 8.09961H8.86719",stroke:"currentColor",strokeWidth:"0.85",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"8362e9eb7a2f53954866ea50a265b5f10",x1:"4",y1:"2.75",x2:"2.09501",y2:"3.74385",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#999999"})]}),(0,a.jsxs)("linearGradient",{id:"8362e9eb7a2f53954866ea50a265b5f11",x1:"4",y1:"4.25",x2:"2.09501",y2:"5.24385",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#999999"})]}),(0,a.jsxs)("linearGradient",{id:"8362e9eb7a2f53954866ea50a265b5f12",x1:"8",y1:"4.5",x2:"5.5",y2:"3",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#999999"})]})]})]})}r._id="8362e9eb7a2f53954866ea50a265b5f1"},99820:(e,t,i)=>{"use strict";i.d(t,{i:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-disable)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("circle",{cx:"40",cy:"40",r:"29",stroke:"currentColor",strokeWidth:"5.5"}),(0,a.jsx)("path",{d:"M40 43L40 26",stroke:"currentColor",strokeWidth:"5.5",strokeLinecap:"round"}),(0,a.jsx)("circle",{cx:"40",cy:"52.9678",r:"2.96777",fill:"currentColor"})]})}r._id="3fcf70132f0501aedeff371dcf7c9c43"},93347:(e,t,i)=>{"use strict";i.d(t,{F:()=>d});var a=i(19562),r=i(13452),n=i(15038),s=i(76947),l=i(62121),o=i(90264),c=i(7479);let d=(0,c.v4)(r.a.rpcServerUrl,{handlePermissionDenied:e=>{if(e instanceof c.T$){let t;let i=(0,n.O)(e);switch(null==i?void 0:i.debug.code){case a.mF.USER_REMOVED_FROM_TEAM:case a.mF.TEAM_DISSOLVE:t=null==i?void 0:i.debug.code}t&&o.T.emit("permissionDenied",{code:t,message:null==i?void 0:i.message})}},handleUnauth:()=>{},beforeRequest:async e=>{l.G.isRunInServerSide||await (0,s.q)(e)}})},21284:(e,t,i)=>{"use strict";i.d(t,{GV:()=>a.GV,M_:()=>a.M_,jL:()=>a.jL});var a=i(73677)},17808:(e,t,i)=>{"use strict";i.d(t,{S:()=>Y});var a=i(19562),r=i(15038),n=i(80926),s=i(86239),l=i(51416),o=i(75958),c=i(9205),d=i(93347),u=i(89839),p=i(2635),m=i(76743),x=i(33890),f=i(15585),h=i(84974),v=i(14960),g=i(53708),y=i(81140),w=i(21284),b=i(23757),C=i(66555),j=i(34143),S=i(77859),I=i(57271),N=i(68209),k=i(50232),T=i(37134),_=i(48046),M=i(99515);function L(e){let t=(0,w.GV)(b.R.selectors.userInfo),i=(0,w.GV)(C.M.selectors.planList),a=(0,w.GV)(b.R.selectors.planKey),n=(0,j.wZ)(a),s=i.find(t=>t.plan===(0,j.wZ)(e.targetPlan)),[l,o]=(0,g.W)(()=>{let t=i.find(e=>e.plan===n),a=i.find(t=>t.plan===(0,j.wZ)(e.targetPlan));if(!t||!a)return[[],[]];let r=[],s=[];return t.credits-a.credits>0&&(r.push(S.ZV.credits),s.push(S.ZV.credits)),t.maxConcurrentTask>a.maxConcurrentTask&&(r.push(S.ZV.concurrent),s.push(S.ZV.concurrent)),t.maxScheduledTask>a.maxScheduledTask&&(r.push(S.ZV.scheduledTask),s.push(S.ZV.scheduledTask)),[r,s]}),[d,u]=(0,M.useState)(!1),f=async()=>{try{u(!0),await e.onConfirm(),e.onDisposed()}catch(e){(0,c.oR)({variant:"error",title:r.P.formatErrorToString(e)})}finally{u(!1)}},h=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()};return(0,p.jsx)(x.l,{width:450,title:(0,p.jsx)(N.p,{S:e.title||I.I.t("Downgrade confirmation"),data:{planName:(null==s?void 0:s.planName)||"-"}}),onDisposed:h,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!d,children:(0,p.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,p.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:n===(null==s?void 0:s.plan)?I.I.t("You can now use the remaining credits and features for this billing cycle. Starting from the next cycle, you will be automatically charged according to the new plan."):I.I.t("You can now use the remaining credits and features for this billing cycle. Starting with your next billing cycle, you'll no longer have access to premium features and your credits will decrease.")}),(0,p.jsx)(P,{label:I.I.t("Current plan"),theme:"gray",planKey:a,benefits:l}),(0,p.jsx)(P,{label:I.I.t("New plan"),planKey:e.targetPlan,benefits:o}),(0,p.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,p.jsx)(k.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,p.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[10px]",children:I.I.t("Next plan renew")}),(0,p.jsx)("span",{className:"text-[var(--text-primary)]",children:v.F.format(new Date(1e3*Number(null==t?void 0:t.currentPeriodEnd)),"PP")})]}),(0,p.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,p.jsx)(m.A,{color:"gray",size:"medium",disabled:d,onClick:h,className:"min-w-[72px]",children:I.I.t("Cancel")}),(0,p.jsx)(m.A,{color:"black",variant:"default",size:"medium",loading:d,onClick:f,children:I.I.t("Confirm")})]})]})})}function P(e){let{label:t,className:i,planKey:a,theme:r,benefits:n}=e,{getPlanInfo:s}=Y(),l=s(a),o="gray"===r;return(0,p.jsx)("div",{className:(0,f.cn)("bg-[var(--background-card)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",{"bg-[var(--background-card-gray)]":o},i),children:(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[12px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:t}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==l?void 0:l.title)||"-"}),(0,p.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==l?void 0:l.membershipInterval)==="month"&&I.I.t("{price} / month",{price:(0,j.$g)(null==l?void 0:l.displayPrice)}),(null==l?void 0:l.membershipInterval)==="year"&&I.I.t("{price} / year",{price:(0,j.$g)(null==l?void 0:l.displayPrice)})]})]}),!!n.length&&(0,p.jsx)("ul",{className:(0,f.cn)("flex flex-col items-stretch gap-[4px]","text-[14px] leading-[22px] font-normal text-[var(--text-secondary)]",o?"text-[var(--text-tertiary)]":""),children:n.map(e=>(0,p.jsxs)("li",{className:"relative pl-[24px]",children:[(0,p.jsx)("div",{className:"absolute top-[3px] left-0",children:o?(0,p.jsx)(T.A,{size:16,color:"var(--icon-disable)"}):(0,p.jsx)(_.A,{size:16,color:"var(--icon-secondary)"})}),(0,p.jsx)(N.p,{S:e,data:{credits:(null==l?void 0:l.credits)?h.f.formatCredits(null==l?void 0:l.credits):"-",concurrentTasks:(null==l?void 0:l.maxConcurrentTask)||"-",maxScheduledTask:(null==l?void 0:l.maxScheduledTask)||"-"},components:{b:e=>(0,p.jsx)("span",{className:(0,f.cn)("font-bold text-[var(--text-primary)]",o?"text-[var(--text-tertiary)]":""),children:e}),link:e=>(0,p.jsx)("a",{className:"underline hover:opacity-80 text-[var(--text-tertiary)] text-sm leading-[22px]",href:y.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})]},e))})]})})}var E=i(14065),A=i(99820);function R(e){let{onDisposed:t}=e,i=(0,w.GV)(C.M.selectors.stripeBillingLoading),{goStripeBilling:a}=Y();return(0,p.jsx)(x.l,{onDisposed:t,className:"w-[440px]",children:(0,p.jsxs)("div",{className:"pt-[20px] pb-[40px] flex flex-col items-center justify-center",children:[(0,p.jsx)(A.i,{size:80,color:"var(--icon-disable)"}),(0,p.jsx)("div",{className:"mt-[24px] text-xl font-[600] leading-[26px] text-[var(--text-primary)]",children:I.I.t("You have a bill in progress")}),(0,p.jsx)("div",{className:"mt-2 text-sm leading-[22px] text-center text-[var(--text-tertiary)]",children:I.I.t("Review it before starting a new one?")}),(0,p.jsx)(m.A,{className:"mt-[48px] w-[300px]",color:"black",loading:i,size:"large",onClick:async()=>{await a()},children:I.I.t("View my bill")})]})})}function F(e){let{preCheckPlatform:t}=Y(),i=(0,w.GV)(b.R.selectors.userInfo),s=(0,w.GV)(b.R.selectors.planKey),{getPlanInfo:u,getSubscriptionChangeStatus:f}=Y(),y=u(s),C=u(e.targetPlan),[S,N]=(0,M.useState)(!1),[T,_]=(0,M.useState)(!1),{open:L}=(0,l.s)(R),P=f(s,e.targetPlan),E=(0,g.W)(()=>{let e=new Date;if("now"===P){let t=null==C?void 0:C.membershipInterval;"year"===t?e.setFullYear(e.getFullYear()+1):"month"===t&&e.setMonth(e.getMonth()+1)}return"next"===P&&(e=new Date(1e3*Number(null==i?void 0:i.currentPeriodEnd))),v.F.format(e,"PP")}),A=(0,o.w)(async()=>{if(!T&&((0,n.C)({eventName:"subscription_management"}),t()))try{_(!0);let e=await d.F.SubscriptionService.billingPage({});window.open(e.url,"_blank","noreferrer noopener")}catch(e){(0,c.oR)({variant:"error",title:r.P.formatErrorToString(e)})}finally{_(!1)}}),F=async()=>{(0,n.C)({eventName:"upgrade_confirmation_dialog_click"});try{N(!0),await e.onConfirm(),e.onDisposed()}catch(n){var t,i;let e=(0,r.O)(n);(null==e?void 0:null===(t=e.debug)||void 0===t?void 0:t.code)===a.Jh.ExistUnpaidInvoice?L():(null==e?void 0:null===(i=e.debug)||void 0===i?void 0:i.code)===a.Jh.PaymentFailedNeedToBill?(0,c.oR)({variant:"error",title:(0,p.jsxs)("span",{children:[I.I.t("Payment failed. Please update to a valid payment method."),(0,p.jsx)(m.A,{className:"ms-2 leading-5 text-base font-normal",variant:"link",onClick:()=>{A()},children:I.I.t("Manage payment")})]})}):(0,c.oR)({variant:"error",title:r.P.formatErrorToString(n)})}finally{N(!1)}},U=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()};return(0,p.jsx)(x.l,{width:480,title:I.I.t("End trial and upgrade"),onDisposed:U,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!S,children:(0,p.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,p.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:I.I.t("You will pay the price difference between plans and immediately receive {credits} monthly credits, along with {extraAddOnCredits} extra add-on credits. Starting from the next cycle, you will be automatically charged according to the new plan.",{credits:h.f.formatCredits((null==C?void 0:C.credits)||0),extraAddOnCredits:h.f.formatCredits((null==C?void 0:C.credits)||0)})}),(0,p.jsxs)("div",{className:"bg-[var(--background-menu-white)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",children:[(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:I.I.t("Current plan")}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:I.I.t("{plan} Free Trial",{plan:(null==y?void 0:y.planName)||""})}),(0,p.jsx)("span",{className:"text-[14px] font-medium",children:I.I.t("7-Day Free Trial")})]})]}),(0,p.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-light)] my-4"}),(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:I.I.t("New plan")}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==C?void 0:C.membershipInterval)==="month"?I.I.t("{plan} Monthly",{plan:(null==C?void 0:C.planName)||""}):I.I.t("{plan} Annually",{plan:(null==C?void 0:C.planName)||""})}),(0,p.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==C?void 0:C.membershipInterval)==="month"&&I.I.t("{price} / month",{price:(0,j.$g)(null==C?void 0:C.displayPrice)}),(null==C?void 0:C.membershipInterval)==="year"&&I.I.t("{price} / year",{price:(0,j.$g)(null==C?void 0:C.displayPrice)})]})]})]})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-[16px] pt-1",children:[(0,p.jsxs)("div",{className:"px-4 flex flex-col gap-[12px] text-[14px] leading-[20px] font-normal text-[var(--text-primary)]",children:[(0,p.jsx)("span",{className:"font-medium",children:I.I.t("Payment required")}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-[12px]",children:[(0,p.jsx)("span",{className:"text-[var(--text-tertiary)]",children:I.I.t("Difference")}),(0,p.jsx)("span",{children:(0,j.$g)(e.previewData.subTotal)})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-[12px]",children:[(0,p.jsx)("span",{className:"text-[var(--text-tertiary)]",children:I.I.t("Tax")}),(0,p.jsx)("span",{children:(0,j.$g)(e.previewData.tax)})]})]}),(0,p.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-dark)]"}),(0,p.jsxs)("div",{className:"px-4 pt-1 pb-2 flex items-center justify-between gap-[12px] text-[16px] leading-[22px] text-[var(--text-primary)] font-semibold",children:[(0,p.jsx)("span",{children:I.I.t("Total")}),(0,p.jsx)("span",{children:(0,j.$g)(e.previewData.total)})]})]}),(0,p.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,p.jsx)(k.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,p.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[10px]",children:I.I.t("Next plan renew")}),(0,p.jsx)("span",{className:"text-[var(--text-primary)]",children:E})]}),(0,p.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,p.jsx)(m.A,{color:"gray",size:"medium",disabled:S,onClick:U,className:"min-w-[72px]",children:I.I.t("Cancel")}),(0,p.jsx)(m.A,{color:"black",variant:"default",size:"medium",loading:S,onClick:F,children:I.I.t("Confirm upgrade")})]})]})})}var U=i(78308),D=i(63226),V=i(98432);function O(e){let{preCheckPlatform:t}=Y(),i=(0,w.GV)(b.R.selectors.userInfo),s=(0,w.GV)(b.R.selectors.planKey),{getPlanInfo:u,getSubscriptionChangeStatus:f}=Y(),y=u(s),C=u(e.targetPlan),S=(0,j.aL)(s||V.zl.UNKNOWN),T=(0,j.aL)(e.targetPlan),_=e.previewData.total&&0>Number(e.previewData.total),L="yearly"===S&&"monthly"===T&&_,[P,E]=(0,M.useState)(!1),[A,F]=(0,M.useState)(!1),{open:O}=(0,l.s)(R),z=f(s,e.targetPlan),H=(0,g.W)(()=>{if(!y||!C)return"";let e=C.credits||0,t=y.credits||0,i=h.f.formatCredits(e-t),a=h.f.formatCredits(e-t);if(L)return _?I.I.t("You'll receive a refund for the difference between your current plan's remaining value and the new plan cost. You'll immediately receive {credits} credits, along with {extraAddOnCredits} extra add-on credits. You'll be billed at the new rate starting next cycle.",{credits:i,extraAddOnCredits:a}):I.I.t("You'll pay the difference between your current plan's remaining value and the new plan cost. You'll immediately receive {credits} credits, along with {extraAddOnCredits} extra add-on credits. You'll be billed at the new rate starting next cycle.",{credits:i,extraAddOnCredits:a});let r=I.I.t("You will pay the price difference between plans and immediately receive {credits} monthly credits, along with {extraAddOnCredits} extra add-on credits. Starting from the next cycle, you will be automatically charged according to the new plan.",{credits:i,extraAddOnCredits:a}),n=I.I.t("You will pay the price difference between plans. Starting from the next cycle, you will be automatically charged according to the new plan."),s=I.I.t("You can now use the remaining credits and features for this billing cycle. Starting with your next billing cycle, you'll no longer have access to premium features and your credits will decrease."),l=I.I.t("Starting from the next cycle, you will be automatically charged according to the new plan."),o=(0,j.GU)(null==y?void 0:y.plan,null==C?void 0:C.plan);if("now"===z){if("same"===o)return n;if("upgrade"===o)return r}else if("next"===z){if("same"===o)return l;if("downgrade"===o)return s}return""}),B=(0,g.W)(()=>{let e=new Date;if("now"===z){let t=null==C?void 0:C.membershipInterval;"year"===t?e.setFullYear(e.getFullYear()+1):"month"===t&&e.setMonth(e.getMonth()+1)}return"next"===z&&(e=new Date(1e3*Number(null==i?void 0:i.currentPeriodEnd))),v.F.format(e,"PP")}),W=(0,o.w)(async()=>{if(!A&&((0,n.C)({eventName:"subscription_management"}),t()))try{F(!0);let e=await d.F.SubscriptionService.billingPage({});window.open(e.url,"_blank","noreferrer noopener")}catch(e){(0,c.oR)({variant:"error",title:r.P.formatErrorToString(e)})}finally{F(!1)}}),G=async()=>{(0,n.C)({eventName:"upgrade_confirmation_dialog_click"});try{E(!0),await e.onConfirm(),e.onDisposed()}catch(n){var t,i;let e=(0,r.O)(n);(null==e?void 0:null===(t=e.debug)||void 0===t?void 0:t.code)===a.Jh.ExistUnpaidInvoice?O():(null==e?void 0:null===(i=e.debug)||void 0===i?void 0:i.code)===a.Jh.PaymentFailedNeedToBill?(0,c.oR)({variant:"error",title:(0,p.jsxs)("span",{children:[I.I.t("Payment failed. Please update to a valid payment method."),(0,p.jsx)(m.A,{className:"ms-2 leading-5 text-base font-normal",variant:"link",onClick:()=>{W()},children:I.I.t("Manage payment")})]})}):(0,c.oR)({variant:"error",title:r.P.formatErrorToString(n)})}finally{E(!1)}},Z=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()},K=(0,o.w)(()=>{y&&C&&"notSupport"!==z&&(0,n.C)({eventName:"upgrade_confirmation_dialog_show"})});return((0,M.useEffect)(()=>{K()},[K]),y&&C&&"notSupport"!==z)?(0,p.jsx)(x.l,{width:480,title:L?(0,p.jsx)(N.p,{S:e.title||I.I.t("Upgrade"),data:{planName:(null==C?void 0:C.planName)||"-"}}):(0,p.jsx)(N.p,{S:e.title||I.I.t("Upgrade confirmation"),data:{planName:(null==C?void 0:C.planName)||"-"}}),onDisposed:Z,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!P,children:(0,p.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,p.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:H}),L?(0,p.jsxs)("div",{className:"bg-[var(--background-menu-white)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",children:[(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,p.jsxs)("span",{className:"flex items-center",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:I.I.t("Remaining value of current plan")}),(0,p.jsx)(U.m,{title:I.I.t("Remaining value: Calculated based on the unused time in your current billing period."),children:(0,p.jsx)("span",{className:"clickable hover:opacity-85 ml-[4px]",children:(0,p.jsx)(D.m,{color:"var(--icon-tertiary)",size:14,className:"ml-[4px]"})})})]}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:I.I.t("{planName} Annually",{planName:null==y?void 0:y.planName})}),(0,p.jsx)("span",{className:"text-[14px] font-medium",children:(0,j.$g)(Math.abs(e.previewData.prorationAmount))})]})]}),(0,p.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-light)] my-4"}),(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:I.I.t("New plan")}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:I.I.t("{planName} Monthly",{planName:null==C?void 0:C.planName})}),(0,p.jsx)("span",{className:"text-[14px] font-medium",children:(null==C?void 0:C.displayPrice)?I.I.t("{price} / month",{price:null==C?void 0:C.displayPrice}):"-"})]}),(0,p.jsxs)("div",{className:"flex justify-between items-center",children:[(0,p.jsx)("span",{className:"text-[var(--text-primary)] text-sm leading-[22px]",children:I.I.t("Tax")}),(0,p.jsx)("span",{className:"text-[14px] font-medium",children:e.previewData.tax?I.I.t("{price} / month",{price:(0,j.$g)(e.previewData.tax)}):"-"})]})]})]}):(0,p.jsxs)("div",{className:"bg-[var(--background-menu-white)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",children:[(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:I.I.t("Current plan")}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==y?void 0:y.title)||"-"}),(0,p.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==y?void 0:y.membershipInterval)==="month"&&I.I.t("{price} / month",{price:(0,j.$g)(null==y?void 0:y.displayPrice)}),(null==y?void 0:y.membershipInterval)==="year"&&I.I.t("{price} / year",{price:(0,j.$g)(null==y?void 0:y.displayPrice)})]})]})]}),(0,p.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-light)] my-4"}),(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:I.I.t("New plan")}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==C?void 0:C.title)||"-"}),(0,p.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==C?void 0:C.membershipInterval)==="month"&&I.I.t("{price} / month",{price:(0,j.$g)(null==C?void 0:C.displayPrice)}),(null==C?void 0:C.membershipInterval)==="year"&&I.I.t("{price} / year",{price:(0,j.$g)(null==C?void 0:C.displayPrice)})]})]})]})]}),"now"===z&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"flex flex-col gap-[16px] pt-1",children:[L?(0,p.jsx)(p.Fragment,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"px-4 flex flex-col gap-[12px] text-[14px] leading-[20px] font-normal text-[var(--text-primary)]",children:[(0,p.jsx)("span",{className:"font-medium",children:I.I.t("Payment required")}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-[12px]",children:[(0,p.jsx)("span",{className:"text-[var(--text-tertiary)]",children:I.I.t("Difference")}),(0,p.jsx)("span",{children:(0,j.$g)(e.previewData.subTotal)})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-[12px]",children:[(0,p.jsx)("span",{className:"text-[var(--text-tertiary)]",children:I.I.t("Tax")}),(0,p.jsx)("span",{children:(0,j.$g)(e.previewData.tax)})]})]}),(0,p.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-dark)]"})]}),(0,p.jsxs)("div",{className:"px-4 pt-1 pb-2 flex items-center justify-between gap-[12px] text-[16px] leading-[22px] text-[var(--text-primary)] font-semibold",children:[(0,p.jsx)("span",{children:L?_?I.I.t("Refund"):I.I.t("Payment required"):I.I.t("Total")}),(0,p.jsx)("span",{children:L?(0,j.$g)(Math.abs(Number(e.previewData.total))):(0,j.$g)(e.previewData.total)})]})]})}),(0,p.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,p.jsx)(k.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,p.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[10px]",children:I.I.t("Next plan renew")}),(0,p.jsx)("span",{className:"text-[var(--text-primary)]",children:B})]}),(0,p.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,p.jsx)(m.A,{color:"gray",size:"medium",disabled:P,onClick:Z,className:"min-w-[72px]",children:I.I.t("Cancel")}),(0,p.jsx)(m.A,{color:"black",variant:"default",size:"medium",loading:P,onClick:G,children:I.I.t("Confirm upgrade")})]})]})}):null}function z(e){let t=(0,w.GV)(b.R.selectors.userInfo),{getPlanInfo:i}=Y(),a=i(e.targetPlanKey),[n,s]=(0,M.useState)(!1),l=async()=>{try{s(!0),await e.onConfirm(),e.onDisposed()}catch(e){(0,c.oR)({variant:"error",title:r.P.formatErrorToString(e)})}finally{s(!1)}},o=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()};return(0,p.jsx)(x.l,{width:450,title:I.I.t("Reactivate your subscription"),onDisposed:o,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!n,children:(0,p.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,p.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:I.I.t("You can continue to use your credits and gain access to all {planName} plan features. Starting with your next billing cycle, your account will automatically renew.",{planName:(null==a?void 0:a.planName)||"-"})}),(0,p.jsx)(H,{label:I.I.t("Current plan"),price:null==a?void 0:a.displayPrice,membershipInterval:null==a?void 0:a.membershipInterval,title:null==a?void 0:a.planName}),(0,p.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,p.jsx)(k.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,p.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[8px]",children:I.I.t("Next plan renew")}),(0,p.jsx)("span",{className:"text-[var(--text-primary)]",children:v.F.format(new Date(1e3*Number(null==t?void 0:t.currentPeriodEnd)),"PP")})]}),(0,p.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,p.jsx)(m.A,{color:"gray",size:"medium",disabled:n,onClick:o,className:"min-w-[72px]",children:I.I.t("Cancel")}),(0,p.jsx)(m.A,{color:"black",variant:"default",size:"medium",loading:n,onClick:l,className:"min-w-[72px]",children:I.I.t("Confirm")})]})]})})}function H(e){let{label:t,className:i,price:a,title:r,membershipInterval:n}=e;return(0,p.jsx)("div",{className:(0,f.cn)("bg-[var(--background-card)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",i),children:(0,p.jsxs)("div",{className:"flex flex-col items-stretch gap-[12px]",children:[(0,p.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:t}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,p.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:r||"-"}),(0,p.jsxs)("span",{className:"text-[14px] font-medium",children:["month"===n&&I.I.t("{price} / month",{price:(0,j.$g)(a)}),"year"===n&&I.I.t("{price} / year",{price:(0,j.$g)(a)})]})]})]})})}var B=i(89310),W=i(68065),G=i(3251),Z=i(90264),K=i(86154);function Y(){let e=(0,w.jL)(),t=(0,w.GV)(C.M.selectors.planList),i=(0,w.GV)(C.M.selectors.planListProUnlimited),p=(0,w.GV)(C.M.selectors.planListStaticPoorArea),m=(0,w.GV)(C.M.selectors.subscriptions),{updateCredits:x}=(0,G.O)(),{fetchUserInfo:f}=(0,W.W9)(),{open:h}=(0,l.s)(O),{open:v}=(0,l.s)(L),{open:g}=(0,l.s)(z),{open:y}=(0,l.s)(u.X),{open:S}=(0,l.s)(F),{open:N}=(0,l.s)(E.l),k=(0,o.w)(async e=>{let{planKey:t}=e,i=sessionStorage.getItem(a.Dy.upgradeSessionId)||void 0;i&&sessionStorage.removeItem(a.Dy.upgradeSessionId);let r=(0,j.Iq)(C.M.selectors.subscriptionSource(w.M_.getState()),{teamUid:e.teamUid}),n=(0,j.fz)(C.M.selectors.subscriptionSource(w.M_.getState()),{planKey:t,teamUid:e.teamUid,quantity:e.quantity});if(!t)throw Error(I.I.t("Params error: planKey is empty."));let l={...s.J.getMotivation(!0),type:"init",item:s.J.formatPlan(t)};s.J.trackPayment(l);let o="";if((0,j.wZ)(t)===V.OL.TEAM){let a=await d.F.SubscriptionService.teamSubscriptionCheckout({planKey:t,teamUid:e.teamUid,quantity:e.quantity,cancelUrl:n,successUrl:r,sessionId:i,motivation:JSON.stringify(l)});if(!a.checkoutUrl)throw Error(I.I.t("Team checkout link does not exist"));o=a.checkoutUrl}else{let e=await d.F.SubscriptionService.checkout({planKey:t,cancelUrl:n,successUrl:r,sessionId:i,motivation:JSON.stringify(l)});if(!e.checkoutUrl)throw Error(I.I.t("Checkout link does not exist"));o=e.checkoutUrl}window.location.href=o}),T=(0,o.w)(async e=>{let{planKey:t,teamUid:i,quantity:a}=e;if(!t)throw Error(I.I.t("Params error: planKey is empty."));let r="",n=new URL(window.location.origin+window.location.pathname);n.hash="",n.searchParams.set("paymentType","credits");let l=(0,j.fz)(C.M.selectors.subscriptionSource(w.M_.getState()),{planKey:t,teamUid:i}),o=(0,j.Iq)(C.M.selectors.subscriptionSource(w.M_.getState())),c={...s.J.getMotivation(!0),type:"buy_credits",item:s.J.formatPlan(t)};if(s.J.trackPayment(c),!(r=t===B.ww.TEAM_ADDON?(await d.F.SubscriptionService.teamSubscriptionCheckout({planKey:t,teamUid:i,cancelUrl:l,successUrl:o,quantity:a,motivation:JSON.stringify(c)})).checkoutUrl:(await d.F.SubscriptionService.checkout({planKey:t,cancelUrl:l,successUrl:o,motivation:JSON.stringify(c)})).checkoutUrl))throw Error(I.I.t("Checkout link does not exist"));window.location.href=r}),_=(0,o.w)(async e=>{await d.F.SubscriptionService.update(e)}),M=(0,o.w)(async e=>{if(b.R.selectors.isTrial(w.M_.getState())){await R(e);return}let t=await d.F.SubscriptionService.preview({planKey:e.planKey});h({title:e.title,targetPlan:e.planKey,previewData:t,onConfirm:async()=>{var t;let i={...s.J.getMotivation(!0),type:"upgrade",item:s.J.formatPlan(e.planKey)};s.J.trackPayment(i),await _({planKey:e.planKey}),et(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),P=(0,o.w)(async e=>{if(b.R.selectors.isTrial(w.M_.getState())){await R(e);return}v({title:e.title,targetPlan:e.planKey,onConfirm:async()=>{var t;await _({planKey:e.planKey}),await et(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),A=(0,o.w)(async e=>{b.R.selectors.isTrial(w.M_.getState())&&await R(e)}),R=(0,o.w)(async e=>{let t=await d.F.SubscriptionService.preview({planKey:e.planKey});S({targetPlan:e.planKey,previewData:t,onConfirm:async()=>{var t;await _({planKey:e.planKey,endTrial:!0}),await et(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),U=(0,o.w)(e=>{g({targetPlanKey:e.planKey,onConfirm:async()=>{var t;await _({planKey:e.planKey}),await et(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),D=(0,o.w)(async(t,i)=>{e(C.M.actions.showLoading(i.planKey));try{switch(t){case V.v6.init:await k(i);return;case V.v6.upgrade:case V.v6.reactiveUpgrade:await M({...i,title:t===V.v6.reactiveUpgrade?I.I.t("Reactivate {planName}"):void 0});break;case V.v6.downgrade:case V.v6.reactiveDowngrade:await P({...i,title:t===V.v6.reactiveDowngrade?I.I.t("Reactivate {planName}"):void 0});break;case V.v6.reactive:case V.v6.restore:await U(i);break;case V.v6.pastDueSubscription:N();break;case V.v6.same:await A(i);break;default:throw Error("Error: not allowed subscribeType: ".concat(t))}e(C.M.actions.hideLoading())}catch(t){throw e(C.M.actions.hideLoading()),t}}),H=(0,o.w)(()=>{var e;let t=null===(e=w.M_.getState().auth.userInfo)||void 0===e?void 0:e.paymentPlatform;return t===K.a.stripe||(y({title:I.I.t("Unable to manage subscription"),text:I.I.t("This subscription was made through {platform}. Please manage it on the corresponding platform.",{platform:(0,j.BN)(t)}),btnText:I.I.t("Got it")}),!1)}),Y=(0,o.w)(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=i.find(t=>t.plan===(0,j.wZ)(e));if(e===V.zl.UNKNOWN)return{...a,displayPrice:0,originPrice:0,monthlyPrice:0,discountPrice:0,membershipInterval:"month"};let r=m.find(t=>t.plan===e);if(!a||!r)return null;let n=r.discountPrice&&r.discountPrice<r.price?r.discountPrice:r.price,s=n,l="";(e===V.zl.CASUAL_MONTHLY||e===V.zl.PRO_MONTHLY||e===V.zl.TEAM_MONTHLY||e===V.zl.LITE_MONTHLY)&&(l="month"),(e===V.zl.CASUAL_YEARLY||e===V.zl.PRO_YEARLY||e===V.zl.TEAM_YEARLY||e===V.zl.LITE_YEARLY)&&(l="year",s=Math.ceil(n/12));let o=r.price;return{...a,subscription:r,displayPrice:n,originPrice:o,monthlyPrice:s,discountPrice:r.discountPrice,membershipInterval:l}}),$=(0,o.w)(e=>C.M.selectors.trials(w.M_.getState()).find(t=>t.plan===e)||null),q=(0,o.w)(e=>Y(e,p)),J=(0,o.w)(e=>Y(e,i)),X=(0,o.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V.OL.LITE,t=Y((0,j.nW)(e,!1)),i=Y((0,j.nW)(e,!0));if(!t||!i)return 0;let a=t.displayPrice||0,r=i.displayPrice||0;if(r&&a)return Math.ceil((12*a-r)/(12*a)*100)}),Q=(0,o.w)((e,t)=>{let i=(0,j.wZ)(e),a=(0,j.wZ)(t);if(!e||!t||!i||!a)return"notSupport";let r=(0,j.aL)(e),n=(0,j.aL)(t),s=(0,j.GU)(i,a),l=b.R.selectors.isTrial(w.M_.getState());if(l)return"endTrial";if("yearly"===r&&"monthly"===n){if("upgrade"===s)return"now";if("same"===s||"downgrade"===s)return"next"}if("monthly"===r&&"yearly"===n){if("upgrade"===s||"same"===s)return"now";if("downgrade"===s)return"next"}if(r===n){if("upgrade"===s)return"now";if("downgrade"===s)return"next";if("same"===s&&l)return"now"}return"notSupport"}),ee=(0,o.w)(async()=>{(0,n.C)({eventName:"subscription_management"});try{e(C.M.actions.setStripeBillingLoading(!0));let t=await d.F.SubscriptionService.billingPage({});window.open(t.url,"_blank","noreferrer noopener")}catch(e){(0,c.oR)({variant:"error",title:r.P.formatErrorToString(e)})}e(C.M.actions.setStripeBillingLoading(!1))}),et=(0,o.w)(async()=>{await Promise.all([f(),x()]),(0,c.oR)({variant:"success",title:I.I.t("Subscription plan changed successfully.")}),Z.T.emit("subscriptionChange")});return{subscribe:k,buyAddonCredits:T,updateSubscription:_,submitSubscribe:D,handleReactive:U,preCheckPlatform:H,getPlanInfo:Y,getTrialInfo:$,getPlanInfoStaticPoorArea:q,getPlanInfoProUnlimited:J,getPlanDiscount:X,getSubscriptionChangeStatus:Q,goStripeBilling:ee,onSubscribeSuccess:et,handleEndTrial:R}}},84939:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});var a=i(84974);class r{attachmentIsReady(e){let t=this.readySourceMap.get(e);return!t||t.ready}markReady(e){let t=this.readySourceMap.get(e);t&&t.markReady()}waitReady(e){return Promise.all(e.map(e=>{var t;return null===(t=this.readySourceMap.get(e))||void 0===t?void 0:t.waitReady()}))}clearReadySource(e){e.forEach(e=>{var t;null===(t=this.readySourceMap.get(e))||void 0===t||t.clear(),this.readySourceMap.delete(e),this.userPastedContentMap.delete(e)})}setUserPastedContent(e,t){this.userPastedContentMap.set(e,t)}updateUserPastedContent(e,t){let i=this.userPastedContentMap.get(e);if(i){if(Object.assign(i,t),this.userPastedContentMap.set(e,{...i,...t}),i.content!==i.lastContent){let t=this.readySourceMap.get(e)||a.f.createReadySource();t.clearWithoutPromise(),this.readySourceMap.set(e,t)}else i.url&&this.markReady(e)}}getUserPastedContent(e){return this.userPastedContentMap.get(e)}constructor(){this.userPastedContentMap=new Map,this.readySourceMap=new Map}}let n=new r},33744:(e,t,i)=>{"use strict";i.d(t,{$:()=>s});var a=i(13452),r=i(57271);class n{getDisplayFilename(e){if(!e)return"";let t=e.split(".");if(t.length>0){let e=t[t.length-1];return("md"===e||"mdx"===e)&&t.pop(),t.join(".")}return e}mergeFilenameWithExt(e,t){if("unknown"===t)return e;let i=e.split(".");return i.length>1&&i[i.length-1]===t||(t.startsWith(".")?i.push(t.slice(1)):i.push(t)),i.join(".")}getFileName(e){return e.split(/\/|\\/).pop()||e}getFileExt(e){return e.split(".").pop()||""}getSpaceId(e){try{return new URL(e).host.split(".")[0]||""}catch(e){return console.error("get space id  error",e),""}}getDeployId(e){try{return new URL(e).host.split(".")[0]||""}catch(e){return console.error("get deploy id error",e),""}}getLinkType(e){try{if(!e)return"other";let t=new URL(e);if(t.hostname===a.a.pageDomain)return"page";if(a.a.deployDomain&&t.hostname.endsWith(a.a.deployDomain))return"deploy";if(a.a.spaceDomain&&t.origin.endsWith(a.a.spaceDomain))return"space";if(a.a.sandboxDomain&&t.origin.endsWith(a.a.sandboxDomain)||t.origin.endsWith("manusvm.computer"))return"sandbox";return"other"}catch(e){return console.error("get link type error",e),"other"}}extractDomainPrefix(e){if(!e||"string"!=typeof e)return"";let t=e.trim();return(t=t.replace(/^(https?:\/\/)?(www\.)?/i,"")).includes(".")?t.split(".")[0]||"":t}validateSubdomain(e){return e.length<3?{valid:!1,message:r.I.t("The subdomain must be at least 3 characters long.")}:e.length>63?{valid:!1,message:r.I.t("The subdomain must not exceed 63 characters.")}:e.includes("--")?{valid:!1,message:r.I.t("The subdomain cannot contain consecutive hyphens.")}:/^[a-z0-9][a-z0-9-]*[a-z0-9]$/.test(e)?{valid:!0}:{valid:!1,message:r.I.t("The subdomain can only contain lowercase letters, numbers, and hyphens, and must start and end with a letter or number.")}}replaceFirstSubdomain(e,t){try{let i=new URL(e),a=i.hostname.split(".");if(a.length>=2){a[0]=t;let e=a.join(".");return i.hostname=e,i.toString()}return e}catch(t){return console.error("Invalid URL:",t),e}}getDownloadFilename(e,t){let i=this.getFileExt(e),a=this.getFileExt(t);return i===a?e:"".concat(e,".").concat(a)}downloadFileWithALink(e,t){let i=document.createElement("a");i.href=e,i.target="_blank",i.download=t,i.click(),window.URL.revokeObjectURL(e)}async getDownloadBlobUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i="";try{let a=await fetch(e,{method:"HEAD"}),r=a.headers.get("content-disposition"),n=a.headers.get("content-type"),s=r&&r.includes("attachment")||"application/octet-stream"===n,l=a.headers.get("content-length");if((l?parseInt(l,10):0)<1048576*t&&!s){let t=await fetch(e),a=await t.blob();i=e=URL.createObjectURL(a)}}catch(e){console.error(e)}return i}}let s=new n},54762:(e,t,i)=>{"use strict";i.d(t,{yl:()=>B,rN:()=>W});var a=i(13721),r=i(44865),n=i(84974),s=i(15038),l=i(80926),o=i(51416),c=i(75958),d=i(9205),u=i(21788),p=i(23883),m=i(93347),x=i(84345),f=i(89902),h=i(57271),v=i(51807),g=i(73677),y=i(90264),w=i(21374),b=i(51727),C=i(29313),j=i(69079),S=i(96263),I=i(33744);class N{updateDuration(e){if(this.clearTimer(),!e||e<=0)return;let t=Math.max((Number(e)-60)*1e3,1e3);this.expirationTime=Date.now()+t,this.setupTimer()}registerRefreshCallbackOnce(e){this.cb||(this.cb=e)}setupTimer(){if(!this.cb||!this.expirationTime)return;this.clearTimer();let e=this.expirationTime-Date.now();if(e<=0){this.cb();return}this.timer=setTimeout(()=>{var e;null===(e=this.cb)||void 0===e||e.call(this),this.clearTimer()},e)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}destroy(){this.clearTimer(),this.cb=null,this.expirationTime=null}constructor(){this.cb=null,this.timer=null,this.expirationTime=null}}var k=i(2635),T=i(76743),_=i(33890),M=i(41661),L=i(12138),P=i(15585),E=i(13452),A=i(85078),R=i(10417),F=i(89310),U=i(99515),D=i(88672),V=i(23757),O=i(34143);function z(e){let{domain:t,spaceId:i,sessionId:a,onDisposed:r}=e,n=I.$.extractDomainPrefix(t),[u,p]=(0,U.useState)(n),[m,x]=(0,U.useState)(!0),[f,v]=(0,U.useState)(""),{isLoading:g,run:y}=(0,A.W)(),{editSpaceSubdomain:w}=W(),b=(0,D.d4)(V.R.selectors.membershipVersion),{open:C}=(0,o.s)(R.v),j=(0,c.w)((e,t)=>{(0,l.C)({eventName:"domain_change_click",extData:{siteId:e,sessionId:a,action:t}})}),S=(0,O.oD)(b),N=(0,c.w)(()=>{if(m){if(t===u){(0,d.oR)({variant:"warning",title:h.I.t("The domain is the same as the original domain")});return}j(u,"save_click"),y(async()=>{try{await w(i,u),(0,d.oR)({variant:"success",title:h.I.t("Subdomain updated successfully")}),r()}catch(e){x(!1),v(s.P.formatErrorToString(e,{rawMessage:!0}))}})}}),z=(0,c.w)(()=>{C({title:h.I.t("Change your plan"),featureList:["spaceDomain"],source:"change_subdomain",motivation:{page:"session",event:"feature_lock",reason:"change_subdomain"}})}),H=(0,c.w)(async e=>{if(!S)return;let{valid:t,message:i}=I.$.validateSubdomain(e);x(t),i&&v(i)}),B=(0,c.w)(e=>{p(e),H(e)});return(0,k.jsx)(_.l,{title:(0,k.jsxs)(k.Fragment,{children:[h.I.t("Change subdomain"),(0,k.jsx)(L.m,{planKey:F.ww.PRO_MONTHLY,className:"ml-1.5"})]}),headerClassName:(0,P.cn)("pt-[10px] px-[20px] pt-[20px]"),onDisposed:()=>{j(n,"close_click"),r()},width:480,children:(0,k.jsxs)("div",{className:(0,P.cn)("flex flex-col gap-2 w-full px-5"),children:[(0,k.jsxs)("div",{className:"flex flex-col gap-[6px]",children:[(0,k.jsxs)("div",{className:(0,P.cn)("flex-1 flex h-6 items-center justify-between rounded-[10px] bg-[var(--fill-tsp-white-main)] border border-[var(--border-dark)] px-3 py-2",!m&&"border-[var(--Button-secondary-error-border)]"),children:[(0,k.jsx)(M.p,{className:(0,P.cn)("bg-transparent transition-colors duration-300 grow focus:border-[1px solid var(--border-primary)] border-0 focus-visible:ring-0 px-0 py-0 h-6"," placeholder-[var(--text-disable)] text-[14px] placeholder:text-[14px] max-md:text-[16px]",!S&&"text-[var(--text-disable)]"),placeholder:h.I.t("Enter your new subdomain"),autoFocus:!0,disabled:!S,autoComplete:"off",value:u,onChange:e=>B(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())}}),(0,k.jsxs)("span",{className:(0,P.cn)("text-sm text-[var(--text-primary)]",!S&&"text-[var(--text-disable)] cursor-default"),children:[".",E.a.spaceDomain]})]}),m?(0,k.jsx)("div",{className:(0,P.cn)("text-[var(--text-tertiary)] text-xs flex items-center h-8 max-md:h-12"),children:S?h.I.t("After clicking 'Save changes', your new domain will take effect once it's configured. Please wait for the notification."):h.I.t("Custom subdomain is a premium feature. Upgrade to premium to experience personalized domain.")}):(0,k.jsx)("div",{className:"text-[var(--function-error)] text-xs h-8 max-md:h-12",children:f})]}),(0,k.jsxs)("div",{className:(0,P.cn)("flex items-center justify-end gap-2 py-5"),children:[(0,k.jsx)(T.A,{variant:"outline",size:"medium",onClick:()=>{j(n,"cancel_click"),r()},children:h.I.t("Cancel")}),S?(0,k.jsx)(T.A,{disabled:!m,size:"medium",color:"black",loading:g,onClick:N,children:h.I.t("Save changes")}):(0,k.jsx)(T.A,{size:"medium",color:"black",onClick:z,children:h.I.t("Upgrade to {plan}",{plan:"Pro"})})]})]})})}let H=new N,B=n.f.createReadySource();function W(){let e=(0,g.jL)(),{messageSentToSocket:t}=(0,r.h)(),{openSidebar:i,closeSidebar:N}=(0,v.o)(),{setPreviewFile:k}=(0,a.t)(),{open:T}=(0,o.s)(z),_=(0,c.w)(function(t){if(g.M_.getState().fileManagement.isDownloadMode){let i=S.K.selectors.selectedFiles(g.M_.getState()),a=-1===i.findIndex(e=>t.id===e)?[...i,t.id]:i.filter(e=>t.id!==e);e(S.K.actions.setSelectedFiles(a));return}let a=w.C.getSessionFileExtra(t);if((null==a?void 0:a.type)==="figma")window.open(a.figmaUrl,"_blank"),l.y.chatOperation.sessionFileClick({action:"preview",type:"figma",from:"file_management"});else{let e=w.C.convertSessionFileToPreviewFile(t);i({type:"filePreviewer",previewFile:e}),l.y.chatOperation.sessionFileClick({action:"preview",type:e.filetype,from:"file_management"})}"image"!==t.category&&"link"!==t.category&&(null==a?void 0:a.type)!=="figma"&&y.T.emit("closeFileManagementDialog",{})}),M=(0,c.w)(async function(t){var i;let{filename:a,fileUrl:r}=t;if(l.y.chatOperation.sessionFileClick({action:"download",type:null!==(i=a.split(".").pop())&&void 0!==i?i:"",from:"file_management"}),n.f.isBlobUrl(r))I.$.downloadFileWithALink(r,a);else{let t;if(!(t=await I.$.getDownloadBlobUrl(r,10)))try{t=(await e(p.Ef.endpoints.getDownloadUrl.initiate({signedCdnUrl:r},{forceRefetch:!0})).unwrap()).downloadUrl}catch(e){console.error(e)}I.$.downloadFileWithALink(t||r,a)}}),L=(0,c.w)(async t=>{let{url:i,originalFilename:a}=t,r=i;try{r=(await e(p.Ef.endpoints.getDownloadUrl.initiate({signedCdnUrl:i},{forceRefetch:!0})).unwrap()).downloadUrl}catch(e){console.error(e)}I.$.downloadFileWithALink(r,a)}),P=(0,c.w)(function(e){e.chatLocationEventId?y.T.emit("scrollToEvent",{eventId:e.chatLocationEventId}):console.warn("eventId is not defined"),y.T.emit("closeFileManagementDialog");let t=w.C.convertSessionFileToPreviewFile(e);l.y.chatOperation.sessionFileClick({action:"locate",type:t.filetype,from:"file_management"})}),E=(0,c.w)(e=>{}),A=(0,c.w)(async()=>{let t=g.M_.getState().sessions.currentSessionId;if(!t)return null;try{let i=await m.F.SpaceService.getSpaceStatus({sessionUid:t});i.success&&e(S.K.actions.setSpaces(i.spaceStatusInfo))}catch(e){console.error(e)}e(S.K.actions.setSpacesLoading(!1))}),R=(0,c.w)(async t=>{if(!t)return null;try{let i=await m.F.SpacePublicService.getSpaceStatus({sessionUid:t});i.success&&(e(S.K.actions.setSpaces(i.spaceStatusInfo)),e(S.K.actions.setTempActiveDeployId(i.activeDeployId||"")),e(S.K.actions.setTempSpaceId(i.spaceId||"")))}catch(e){console.error(e)}e(S.K.actions.setSpacesLoading(!1))}),F=(0,c.w)(async function(t,i,a){var r;let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=a||g.M_.getState().sessions.currentSessionId;if(!o)return console.error("sessionUid is not exist"),null;if((null===(r=S.K.selectors.spaces(g.M_.getState()).find(e=>e.spaceUid===t.id))||void 0===r?void 0:r.status)!==i){n&&e(S.K.actions.updateSpace({spaceUid:t.id,status:i}));try{(await m.F.SpaceService.setSpaceStatus({sessionUid:o,eventUid:t.deployEventId,status:i,spaceId:t.id})).Success&&(e(S.K.actions.updateSpace({spaceUid:t.id,status:i})),l&&(0,d.oR)({title:i===f.NP.VISIBLE?h.I.t("Website set to public"):h.I.t("Website set to unavailable"),variant:"success"}))}catch(a){l&&(0,d.oR)({title:s.P.formatErrorToString(a),variant:"error"}),n&&e(S.K.actions.updateSpace({spaceUid:t.id,status:i===f.NP.VISIBLE?f.NP.INVISIBLE:f.NP.VISIBLE}))}}}),U=(0,c.w)(function(){let t=Object.values(C.u.downloadableFiles(g.M_.getState()).groups).flatMap(e=>e).map(e=>e.id);e(S.K.actions.setSelectedFiles(t))}),D=(0,c.w)(function(t){t?(e(S.K.actions.setDownloadMode(!0)),U()):(e(S.K.actions.setSelectedFiles([])),e(S.K.actions.setDownloadMode(!1)))}),V=(0,c.w)(function(){}),O=(0,c.w)(async function(t,i){try{return await m.F.SpaceService.editSpaceSubDomain({spaceUid:t,subDomain:i}),e(S.K.actions.updateSpace({spaceUid:t,subDomainAudit:i,subDomainAuditStatus:f.Is.COMMIT})),!0}catch(e){throw(0,d.oR)({title:s.P.formatErrorToString(e,{rawMessage:!0}),variant:"warning"}),e}}),W=(0,c.w)((e,t,i)=>{let a=g.M_.getState().sessions.currentSessionId;T({domain:e,spaceId:t,sessionId:null!=i?i:a})}),G=(0,c.w)(async(t,i,a,r)=>{let n=r||g.M_.getState().sessions.currentSessionId;if(!n){console.error("sessionId is not exist");return}await m.F.SessionService.shareSpaceToCommunity({sessionUid:n,spaceUid:t.id,title:i,recommendReason:a,spaceUrl:t.url}),e(S.K.actions.updateSpace({publishedToCommunity:!0,auditStatus:f.EO.PENDING,spaceUid:t.id}))}),Z=(0,c.w)(async(t,i)=>{let a=i||g.M_.getState().sessions.currentSessionId;if(!a){console.error("sessionId is not exist");return}await m.F.SessionService.unshareSpaceFromCommunity({sessionUid:a,spaceUid:t.id}),e(S.K.actions.updateSpace({publishedToCommunity:!1,auditStatus:f.EO.PENDING,spaceUid:t.id}))}),K=(0,c.w)(async t=>{let{sessionId:i,shared:a,sig:r}=t;q(!0),e(S.K.actions.clearSessionFileList()),e(S.K.actions.setNotificationSessionFileList([])),await Y({sessionId:i,shared:a,sig:r,disabledErrorToast:!0}),q(!1)}),Y=(0,c.w)(async t=>{let{sessionId:i,shared:a,sig:r,disabledErrorToast:n=!1}=t;try{var l,o;let t=await e(u.R.endpoints.getSessionFiles.initiate({sessionId:i,type:a?"shared":"private",sig:r})).unwrap(),n=j.uT.selectors.currentSessionid(g.M_.getState()),s=null!==(l=t.files)&&void 0!==l?l:[],c=(null!==(o=t.transferFiles)&&void 0!==o?o:[]).map(e=>({...e,isTransferred:!0}));n===i&&(e(S.K.actions.setNotificationSessionFileList([])),e(S.K.actions.setSessionFileList([...s,...c])))}catch(e){n||(0,d.oR)({variant:"error",title:s.P.formatErrorToString(e)})}}),$=(0,c.w)(async()=>{let{editSpaceCode:t,validDuration:i}=await m.F.SpaceService.getEditSpaceSiteCode({});e(S.K.actions.setSpaceEditCode(t)),H.registerRefreshCallbackOnce($),H.updateDuration(i)}),q=(0,c.w)(t=>{if(e(S.K.actions.setInitSessionFileListLoading(t)),!t){let e=S.K.selectors.sessionFileList(g.M_.getState()),t=b.W.selectors.previewFile(g.M_.getState());if((null==t?void 0:t.filetype)==="space")return;let i=e.find(e=>{let i=w.C.getSessionFileId(e),a=w.C.getSessionFileSandboxPath(e);return i===(null==t?void 0:t.id)||a===(null==t?void 0:t.sandboxPath)});i&&k(w.C.convertSessionFileToPreviewFile(i))}}),J=(0,c.w)(async(i,a)=>{let{id:r}=i;try{let n=await t("switch_deploy_version",{deployId:r,sessionId:a});if(n.error)(0,d.oR)({title:n.error,variant:"error"});else if(n.spaceId){try{await F({id:n.spaceId,deployEventId:i.deployEventId},f.NP.VISIBLE,a,!0,!1)}catch(e){console.error(e)}e(j.uT.actions.updateSession({uid:a,activeDeployId:i.id,spaceId:n.spaceId})),(0,d.oR)({title:h.I.t("Published successfully"),variant:"success"})}else(0,d.oR)({title:h.I.t("Unknown error"),variant:"error"})}catch(e){(0,d.oR)({title:s.P.formatErrorToString(e),variant:"error"})}});return{handleFileClick:_,handleFileActionDownload:M,getSpaceStatus:A,updateSpaceStatus:F,setDownloadMode:D,selectAll:U,handleFileActionJumpToChat:P,handleFileActionShare:E,resetToTemporary:V,changeDomain:W,handleUnpublishSpace:Z,handlePublishSpace:G,editSpaceSubdomain:O,getShareSpaceStatus:R,handleImageActionDownload:L,fetchSessionFiles:Y,initSessionFiles:K,updateSpaceEditCode:$,updateInitSessionFileListLoading:q,openDeployLink:(0,c.w)(function(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=b.W.selectors.previewFile(g.M_.getState());if((null==r?void 0:r.url)===e.url)a&&N();else{let a="".concat(t,".space");i({type:"filePreviewer",previewFile:{filetype:"space",previewUrl:e.url+"#filename=".concat(encodeURIComponent(a)),url:e.url,filename:a,displayFilename:t,downloadFilename:a,sandboxPath:"",id:""}})}}),publishDeployLink:J,editDeployLink:(0,c.w)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.K.selectors.selectSpacePreviewerEditMode(g.M_.getState()),i=!t;e(S.K.actions.setSpacePreviewerEditMode(i)),await B.waitReady(),x.r.sendMessage({to:"content",type:i?"enableEditMode":"disableEditMode",payload:{}})})}}},21374:(e,t,i)=>{"use strict";i.d(t,{C:()=>l});var a=i(84974),r=i(57271),n=i(33744);class s{convertEventAttachmentToPreviewFile(e){let{title:t,url:i,filename:r,type:s}=e,l=t||n.$.getDisplayFilename(r),o="file"===s?n.$.getFileExt(r)||"":s,c=n.$.mergeFilenameWithExt(l,o);return{displayFilename:l,downloadFilename:c,filetype:o,filename:r,url:i,sandboxPath:e.path,previewUrl:i+"#filename=".concat(a.f.safeEncodeURIComponent(c)),id:e.path,lastUpdatedAt:e.timestamp}}convertAttachmentToPreviewFile(e){let t=this.getAttachmentFilename(e),i=e.title||e.filename||e.url||"Untitled",r=n.$.getDownloadFilename(i,t),s=e.url||"",l=s+"#filename=".concat(a.f.safeEncodeURIComponent(r));return{url:s,downloadFilename:r,fileExtra:e.extra,emailExtra:e.emailExtra,filetype:e.filetype,filename:e.filename,displayFilename:i,sandboxPath:e.id,id:e.id,previewUrl:l,fileMetaData:e.fileMetaData}}convertSessionFileToPreviewFile(e){let t=this.getSessionFiletype(e),i=this.getSessionFileOriginalFilename(e),a=this.getSessionFileUrl(e),r=this.getSessionFileSandboxPath(e),s=this.getSessionFileDownloadFilename(e),l=this.getSessionFilePreviewUrl(e),o=this.getSessionFileId(e),c=this.getSessionFileExtra(e),d=this.getSessionFileEmailExtra(e);return{displayFilename:n.$.getDisplayFilename(e.displayFilename),downloadFilename:s,filename:i,filetype:t,url:a,fileExtra:c,emailExtra:d,sandboxPath:r,shareId:e.shareId,previewUrl:l,id:o,lastUpdatedAt:e.lastUpdatedAt,isBlocked:e.isBlocked}}convertSlideCardToPreviewFile(e){var t;let{title:i="",outline:r=[],lastUpdatedAt:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:s="",slidesDetail:l}=e,o=e.url||"",c=e.content||"",d=i||(null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.title)||"Untitled";if(!o){let e=(null==l?void 0:l.directory)||"",t=(null==l?void 0:l.current.id)||"",i=(null==l?void 0:l.current.title)||"";o=URL.createObjectURL(new File([JSON.stringify({type:"slides",url:"",title:i,sourceUrl:"",directory:e,slideIds:[t],files:[{id:t,path:"",content:c,changed:!0}],outline:r,originalFilename:"",currentSlideId:t})],"".concat(d,".slides"),{type:"application/json"}))}let u=o+"#filename=".concat(a.f.safeEncodeURIComponent(((null==l?void 0:l.current.id)||d)+".slides"));return{displayFilename:d,downloadFilename:d+".slides",filename:d+".slides",filetype:"slides",url:o,sandboxPath:(null==l?void 0:l.directory)||s,previewUrl:u,id:(null==l?void 0:l.directory)||s,lastUpdatedAt:n}}getSessionFileOriginalFilename(e){let t=e.raw[0];if("deploy_result_file"==t.type)return e.displayFilename;if("meta_link_in_chat"===t.type)return t.title;if("sbx_slides"===t.type){let e=n.$.getFileExt(t.filename);return e===t.filename?t.filename+".slides":t.filename.replace(e,".slides")}return t.filename}getSessionFileExt(e){let t=e.raw[0];return"deploy_result_file"===t.type||"meta_link_in_chat"===t.type?"unknown":"sbx_slides"===t.type?"slides":n.$.getFileExt(t.filename)}getSessionFileDownloadFilename(e){let{displayFilename:t}=e,i=this.getSessionFileExt(e);return n.$.mergeFilenameWithExt(t,i)}getSessionFileUrl(e){try{let t=e.raw[0];if("tool_call_text_edit_file"===t.type&&!t.url)return URL.createObjectURL(new File([t.fileContent],t.filename,{type:"text/plain"}));if("tool_call_img_view_file"===t.type)return t.imageUrl;if("tool_call_video_generate_file"===t.type)return t.videoUrl;if("tool_call_speech_generate_file"===t.type)return t.audioUrl;return t.url||""}catch(e){return""}}getSessionFiletype(e){let t=e.raw[0];return"meta_link_in_chat"===t.type||"deploy_result_file"===t.type?"link":"sbx_slides"===t.type?"slides":"user_email"===t.type?"email":n.$.getFileExt(t.filename)}getSessionFilePreviewUrl(e){let t=this.getSessionFileUrl(e),i=e.raw[0];if("tool_call_text_edit_file"===i.type&&!i.url)return t+"#filename=".concat(a.f.safeEncodeURIComponent(i.filename));if("sbx_slides"===i.type||"tool_call_text_edit_file"===i.type&&"slides"===i.documentType)return n.$.getFileExt(i.filename)===i.filename?t+"#filename=".concat(a.f.safeEncodeURIComponent(i.filename+".slides")):t+"#filename=".concat(a.f.safeEncodeURIComponent(i.filename.replace(".html",".slides")));let r=this.getSessionFileOriginalFilename(e);return r?t+"#filename=".concat(a.f.safeEncodeURIComponent(r)):t}getSessionFileSandboxPath(e){let t=e.raw[0];return"deploy_result_file"===t.type||"meta_link_in_chat"===t.type?"":t.path}getSessionFileId(e){let t=e.raw[0];return this.isUserUploadFile(t)?t.id:this.getSessionFileSandboxPath(e)}isUserUploadFile(e){return"user_file"===e.type||"user_image"===e.type||"user_voice"===e.type}getSessionFileExtra(e){let t=e.raw[0];if(this.isUserUploadFile(t))return t.extra}getSessionFileEmailExtra(e){let t=e.raw[0];if("user_email"===t.type)return t.emailExtra}getAttachmentFilename(e){if("slides"===e.filetype){let t=n.$.getFileExt(e.filename);return t===e.filename?e.filename+".slides":e.filename.replace(t,".slides")}return e.filename}getFileText(e){if(a.f.isImageFile(e))return r.I.t("Image");if(a.f.isCodeFile(e))return r.I.t("Code");if(a.f.isAudioFile(e))return r.I.t("Audio");if(a.f.isVideoFile(e))return r.I.t("Video");if(a.f.isZipFile(e))return r.I.t("Archive");switch(e){case"link":return r.I.t("Link");case"pdf":return r.I.t("PDF");case"doc":case"docx":case"fodt":case"odt":return r.I.t("Document");case"fodp":case"odp":case"ppt":case"pptx":case"pps":case"ppsx":case"sldx":return r.I.t("Presentation");case"xls":case"xlsx":case"ods":case"fods":case"csv":case"tsv":return r.I.t("Spreadsheet");case"text":case"txt":return r.I.t("Text");case"md":return r.I.t("Markdown");case"slides":return r.I.t("Slides");default:return r.I.t("File")}}}let l=new s},7201:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(19208),r=i(64741),n=i(69079);let s={isOwner:!1,isReadyOnly:!0,isCollaborator:!1,permission:"readyOnly"},l={selectSessionPermission:(0,a.Mz)([e=>e.auth.userInfo,e=>e.sessions.sessions,e=>e.sessions.isSearchMode,(e,t)=>t],(e,t,i,a)=>{if(i)return s;let l=null==e?void 0:e.userId;if(!l||!a)return s;let o=n.LE.getSelectors().selectById(t,a);if(!o)return s;let c=o.collaborators.find(e=>e.userId===l);return c?{isOwner:c.isOwner,isReadyOnly:c.permission===r.O.CollaboratorPermission.READ_ONLY,isCollaborator:c.permission===r.O.CollaboratorPermission.READ_WRITE&&!c.isOwner,permission:c.isOwner?"owner":c.permission===r.O.CollaboratorPermission.READ_WRITE?"canCollaborate":"readyOnly"}:s}),selectCurrentSessionPermission:(0,a.Mz)([e=>e.auth.userInfo,e=>e.sessions.sessions,e=>e.sessions.isShareMode,e=>e.sessions.currentSessionId],(e,t,i,a)=>{if(i)return s;let l=null==e?void 0:e.userId;if(!l||!a)return s;let o=n.LE.getSelectors().selectById(t,a);if(!o)return s;let c=o.collaborators.find(e=>e.userId===l);return c?{isOwner:c.isOwner,isReadyOnly:c.permission===r.O.CollaboratorPermission.READ_ONLY,isCollaborator:c.permission===r.O.CollaboratorPermission.READ_WRITE&&!c.isOwner,permission:c.isOwner?"owner":c.permission===r.O.CollaboratorPermission.READ_WRITE?"canCollaborate":"readyOnly"}:s}),isChatSidebarFullscreen:(0,a.Mz)([e=>e.ui.isMobile,e=>e.agentWorkspace.isSidebarFullscreen],(e,t)=>e||t)}},29313:(e,t,i)=>{"use strict";i.d(t,{u:()=>x});var a=i(14960),r=i(64752),n=i(75234),s=i(19208),l=i(23757),o=i(86154),c=i(98432),d=i(15307),u=i(21374),p=i(51727);class m{constructor(){this.experimentSlidesTemplate=(0,s.Mz)(e=>e.chat.slideTemplateList,d.s.selectors.getSlidesExperiment,(e,t)=>(null==e?void 0:e.length)?(null==t?void 0:t.value)==="new_template"?e.map(e=>e.uid.startsWith("onyx_")?{...e,uid:"onyx_b7de4231-e4f7-4cd8-9efd-d2a99db8b303"}:e.uid.startsWith("basalt_")?{...e,uid:"basalt_39dbdd57-8c75-4d57-b5a9-14eef002c179"}:e.uid.startsWith("ginkgo_")?{...e,uid:"ginkgo_eaab688c-a079-47d1-894e-2a1b8472cbaf"}:e):e:[]),this.currentSlideTemplate=(0,s.Mz)(this.experimentSlidesTemplate,e=>e.chat.chatExtData,(e,t)=>{let i=(null==t?void 0:t.from)==="slide-template"?t.slideTemplateId:null;if(i){let t=null==e?void 0:e.find(e=>e.uid===i);return null!=t?t:null}return null}),this.sessionGroupedFiles=(0,s.Mz)(e=>e.fileManagement.sessionFileList,e=>e.fileManagement.fileTab,(e,t)=>{let i={today:[],yesterday:[],earlier:[]};e.flatMap(e=>{if("image"===e.category){var i;let t=e.raw[0];if((null==t?void 0:t.type)==="user_file"&&(null==t?void 0:null===(i=t.extra)||void 0===i?void 0:i.type)==="quoted_image")return[]}if("code"===t){if("code"===e.category)return[e]}else if("image"===t){if("image"===e.category)return[e]}else if("document"===t){if("document"===e.category)return[e]}else if("link"===t){if("link"===e.category)return[e]}else if("all"===t)return[e];return[]}).forEach(e=>{let t=new Date(e.lastUpdatedAt);a.F.isToday(t)?i.today.push(e):a.F.isYesterday(t)?i.yesterday.push(e):i.earlier.push(e)}),Object.values(i).forEach(e=>{e.sort((e,t)=>t.lastUpdatedAt-e.lastUpdatedAt)});let r=i.today.length+i.yesterday.length+i.earlier.length;return{groups:i,length:r}}),this.filePreviewSessionFile=(0,s.Mz)(e=>e.filePreviewer.previewFile,e=>e.fileManagement.sessionFileList,(e,t)=>t.find(t=>u.C.getSessionFileId(t)===(null==e?void 0:e.id))),this.shouldShowFileHistory=(0,s.Mz)(p.W.selectors.mode,p.W.selectors.isEditableFile,e=>e.agentWorkspace.fileHistoryVisible,e=>e.agentWorkspace.isSidebarFullscreen,(e,t,i,a)=>"code"!==e&&t&&i&&a),this.isTeamExpired=(0,s.Mz)(e=>e.team.currentTeam,e=>e.auth.userInfo,(e,t)=>{if(e){if(e.type===n.YV.EDU)return e.status===r.WJ.EDU_EXPIRED;if(e.type===n.YV.NORMAL&&(null==t?void 0:t.membershipVersion)===o.b.Free)return!0}return!1}),this.downloadableFiles=(0,s.Mz)(this.sessionGroupedFiles,e=>{let t={today:[...e.groups.today],yesterday:[...e.groups.yesterday],earlier:[...e.groups.earlier]};t.today=t.today.filter(e=>{if("link"===e.category)return!1;let t=u.C.getSessionFileExtra(e);return(null==t?void 0:t.type)!=="figma"}),t.yesterday=t.yesterday.filter(e=>{if("link"===e.category)return!1;let t=u.C.getSessionFileExtra(e);return(null==t?void 0:t.type)!=="figma"}),t.earlier=t.earlier.filter(e=>{if("link"===e.category)return!1;let t=u.C.getSessionFileExtra(e);return(null==t?void 0:t.type)!=="figma"});let i=t.today.length+t.yesterday.length+t.earlier.length;return{groups:t,length:i}}),this.currentTrialPlan=(0,s.Mz)(l.R.selectors.trialAvailable,d.s.selectors.getSevenDayFreeTrialVariant,(e,t)=>{if(e){if((null==t?void 0:t.value)==="plus-free-trial")return c.OL.CASUAL;if((null==t?void 0:t.value)==="basic-free-trial")return c.OL.LITE}return null})}}let x=new m},64741:(e,t,i)=>{"use strict";var a;i.d(t,{O:()=>a}),function(e){var t;(t=e.CollaboratorPermission||(e.CollaboratorPermission={}))[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.READ_ONLY=1]="READ_ONLY",t[t.READ_WRITE=2]="READ_WRITE"}(a||(a={}))},67024:(e,t,i)=>{"use strict";i.d(t,{M:()=>a.M,r:()=>a.r});var a=i(18182)},51523:(e,t,i)=>{"use strict";i.d(t,{o:()=>L});var a=i(2635),r=i(51807),n=i(15585),s=i(84974),l=i(80926),o=i(53708),c=i(47829),d=i(75958),u=i(67061),p=i(50973),m=i(73677),x=i(84939),f=i(32549),h=i(33744),v=i(21374),g=i(51727),y=i(69079),w=i(57271),b=i(65623),C=i(12490),j=i(8398),S=i(17513),I=i(48202),N=i(766),k=i(7487),T=i(78308),_=i(69470);function M(e){let{fileItem:t,onRemove:i,onRetry:r,togglePreview:s}=e,l=(0,o.W)(()=>"pending"===t.status||"uploading"===t.status),c=(0,o.W)(()=>"error"===t.status),d=(0,o.W)(()=>t.url&&!l),u=(0,o.W)(()=>{if(l&&!t.url)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:t.previewUrl,alt:t.fileObject.name,className:(0,n.cn)("object-cover w-full h-full border border-[var(--border-light)] rounded-[12px]")}),(0,a.jsx)("div",{className:"absolute left-0 top-0 w-full h-full flex justify-center items-center rounded-md bg-[var(--fill-black)]",children:(0,a.jsx)(k.R,{size:24,color:"var(--text-white)"})})]});if(c){let e=t.error||w.I.t("Upload failed");return(0,a.jsx)("div",{className:(0,n.cn)("flex justify-center items-center w-full h-full p-[4px]"),children:t.disableRetry?(0,a.jsx)(T.m,{title:null==t?void 0:t.error,children:(0,a.jsx)("div",{className:"w-full h-full cursor-pointer flex justify-center items-center clickable hover:opacity-85",onClick:r,children:(0,a.jsx)(_.A,{color:"var(--function-error)",size:20})})}):(0,a.jsx)("span",{className:"truncate text-xs text-[var(--function-error)]",title:e,children:e})})}return(0,a.jsx)(N._,{src:t.previewUrl||t.url||"",alt:t.fileObject.name,className:(0,n.cn)("object-cover w-full h-full border border-[var(--border-light)] rounded-[12px]")})});return(0,a.jsxs)("div",{className:(0,n.cn)("rounded-[12px] h-[54px] w-[54px] border-0.5 border-[var(--border-main)] group/attach relative flex justify-center items-center flex-shrink-0",d&&"cursor-pointer",c&&"border-[1px] border-solid border-[var(--function-error-tsp)] bg-[var(--function-error-tsp)]"),onClick:e=>{s(e)},children:[u,(0,a.jsx)("button",{onClick:e=>{i(),e.stopPropagation()},className:(0,n.cn)("hidden touch-device:flex group-hover/attach:flex rounded-full p-[2px] bg-[var(--icon-tertiary)]","transition-all duration-200 hover:opacity-85","absolute right-1 top-1"),children:(0,a.jsx)(j.A,{size:10,className:"text-white"})})]})}function L(e){var t;let{fileItem:i,disabledPreview:N}=e,{openSidebar:k,closeSidebar:T}=(0,r.o)(),_=(0,m.GV)(g.W.selectors.previewFile),L=(0,m.jL)(),E=(0,m.GV)(y.uT.selectors.currentSessionid),{saveDraft:A}=(0,I.z)(),{retryFile:R}=(0,c.l)(),F=(0,o.W)(()=>"pending"===i.status||"uploading"===i.status),U=(0,o.W)(()=>"error"===i.status),D=(0,o.W)(()=>{var e;return!!N||!!F||(null===(e=i.extra)||void 0===e?void 0:e.type)==="figma"||!!i.url}),V=(0,o.W)(()=>{var e;return(null===(e=i.extra)||void 0===e?void 0:e.type)==="figma"?"figma":s.f.getFileExtName(i.fileObject.name).toLowerCase()||""}),O=(0,o.W)(()=>{var e;return(null===(e=i.extra)||void 0===e?void 0:e.type)==="figma"?"www.figma.com":i.fileObject.size?"".concat(v.C.getFileText(V)," \xb7 ").concat(s.f.getDisplayFileSize(i.fileObject.size)):v.C.getFileText(V)}),z=(0,o.W)(()=>{var e,t;return null!=_&&null!==(e=_.fileMetaData)&&void 0!==e&&!!e.fileId&&_.fileMetaData.fileId===(null===(t=i.fileMetaData)||void 0===t?void 0:t.fileId)||i.url===(null==_?void 0:_.url)}),H=(0,d.w)(e=>{var t,a;if(D){if(e.preventDefault(),(null===(t=i.extra)||void 0===t?void 0:t.type)==="figma"){window.open(i.extra.figmaUrl,"_blank");return}if(z){T();return}if(i.url){let e=v.C.convertAttachmentToPreviewFile({filename:i.fileObject.name,filetype:V,url:i.url,previewUrl:i.previewUrl,filesize:i.fileObject.size,extra:i.extra,id:"",fileMetaData:i.fileMetaData});k({type:"filePreviewer",previewFile:e}),l.y.chatOperation.sessionFileClick({action:"preview",from:"session",type:e.filetype}),(null===(a=i.fileMetaData)||void 0===a?void 0:a.tag)!=="pasted_content"||(L(g.W.actions.setMode("code")),x.$.getUserPastedContent(i.fileMetaData.fileId)||x.$.setUserPastedContent(i.fileMetaData.fileId,{url:i.url,content:"",lastContent:"",lastId:i.id}))}}}),B=(0,d.w)(()=>{L(f.V.actions.fileRemoved(i.id)),A(E)}),W=(0,d.w)(()=>{R(i.id)}),G=(0,o.W)(()=>{var e;let t=h.$.getDisplayFilename(i.fileObject.name);return(null===(e=i.extra)||void 0===e?void 0:e.type)==="figma"?F?w.I.t("Figma"):i.extra.frameName||i.extra.fileName||t:t});return s.f.isImageFile(V)?(0,a.jsx)(M,{fileItem:i,onRemove:B,onRetry:W,togglePreview:H}):(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center gap-1.5 p-2 pr-2.5 w-full min-w-[240px] max-w-[280px] rounded-[12px] border border-[var(--border-main)] bg-[var(--background-menu-white)] group/attach","relative overflow-hidden",D&&"clickable hover:bg-[var(--background-tsp-menu-white)]"),onClick:e=>{H(e)},children:[(0,a.jsx)("div",{className:"flex justify-center items-center w-8 h-8 rounded-md",children:(null===(t=i.extra)||void 0===t?void 0:t.type)==="figma"&&F?(0,a.jsxs)("div",{className:"relative flex items-center justify-center overflow-hidden rounded-[4px]",children:[(0,a.jsx)("div",{className:"rounded-[4px] bg-[var(--background-mask)] absolute inset-0"}),(0,a.jsx)(u.A,{progress:i.progress,className:(0,n.cn)("absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%]")}),(0,a.jsx)(p.P,{size:32})]}):F?(0,a.jsx)(u.z,{progress:i.progress}):(0,a.jsx)(S.o,{type:V,extra:i.extra})}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:(0,n.cn)("flex flex-1 items-center min-w-0"),children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-primary)] text-ellipsis overflow-hidden whitespace-nowrap flex-1 min-w-0",children:G}),(0,a.jsx)("button",{onClick:e=>{null==B||B(),e.stopPropagation()},className:(0,n.cn)("invisible rounded-full flex  touch-device:visible group-hover/attach:visible p-[2px] bg-[var(--icon-tertiary)]","transition-all duration-200 hover:opacity-85"),children:(0,a.jsx)(j.A,{size:10,className:"text-white"})})]}),(0,a.jsx)("div",{className:"text-xs text-[var(--text-tertiary)] relative h-4 truncate",children:(()=>{if(F){var e;if((null===(e=i.extra)||void 0===e?void 0:e.type)==="figma"){let e="";return e=i.progress<15?w.I.t("Uploading your design"):i.progress<30?w.I.t("Scanning layers"):i.progress<60?w.I.t("Parsing your content"):w.I.t("Finalizing your file"),(0,a.jsxs)(b.P.div,{initial:{y:12,opacity:0},animate:{y:0,opacity:1},exit:{y:-12,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"absolute inset-0 inline-flex items-center truncate",children:[e,(0,a.jsx)(P,{})]},e)}return(0,a.jsxs)(b.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.25,ease:"easeInOut"},className:"absolute inset-0 inline-flex items-center",children:[w.I.t("Uploading"),(0,a.jsx)(P,{})]})}return U?(0,a.jsxs)("div",{className:(0,n.cn)("flex gap-1 items-center text-xs text-[var(--function-error)]"),children:[(null==i?void 0:i.error)||w.I.t("Upload failed"),!i.disableRetry&&(0,a.jsx)(C.A,{color:"var(--function-error)",size:14,className:(0,n.cn)("clickable hover:opacity-85"),onClick:W})]}):O})()})]})]})}i(99515);let P=()=>(0,a.jsx)("span",{className:"inline-flex ms-1",children:[0,.4,.8].map((e,t)=>(0,a.jsx)(b.P.span,{className:"text-[var(--icon-secondary)]",animate:{opacity:[.2,1,.2]},transition:{duration:1.2,repeat:1/0,delay:e},children:"."},t))})},61475:(e,t,i)=>{"use strict";i.d(t,{h:()=>c});var a=i(2635),r=i(74159),n=i(15585),s=i(21284),l=i(32549),o=i(51523);function c(e){let{contentClass:t}=e,i=(0,s.GV)(l.V.selectors.files);return 0===i.length||i.some(e=>"voice"===e.type)?null:(0,a.jsx)(r.Z,{className:(0,n.cn)("rounded-md overflow-hidden flex-shrink-0 pb-3 -mb-3"),contentClass:(0,n.cn)("pl-[10px] pr-2 flex",t),operationClassName:"h-[calc(100%_-_24px)]",children:(0,a.jsx)("div",{className:(0,n.cn)("flex gap-3"),onClick:e=>{e.stopPropagation()},children:i.map(e=>(0,a.jsx)(o.o,{fileItem:e},e.id))})})}},6501:(e,t,i)=>{"use strict";i.d(t,{C:()=>M});var a=i(2635),r=i(38933),n=i(1972),s=i(93578),l=i(75958),o=i(90264),c=i(57271),d=i(30514),u=i(12150),p=i(99515),m=i(67139),x=i(15585),f=i(80926),h=i(53708);function v(e){let{color:t="var(--icon-secondary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M2.66659 2.66927V6.0026H5.99992V2.66927H2.66659ZM7.33325 6.0026C7.33325 6.73898 6.7363 7.33594 5.99992 7.33594H2.66659C1.93021 7.33594 1.33325 6.73898 1.33325 6.0026V2.66927C1.33325 1.93289 1.93021 1.33594 2.66659 1.33594H5.99992C6.7363 1.33594 7.33325 1.93289 7.33325 2.66927V6.0026Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M9.99992 2.66927V6.0026H13.3333V2.66927H9.99992ZM14.6666 6.0026C14.6666 6.73898 14.0696 7.33594 13.3333 7.33594H9.99992C9.26354 7.33594 8.66659 6.73898 8.66659 6.0026V2.66927C8.66659 1.93289 9.26354 1.33594 9.99992 1.33594H13.3333C14.0696 1.33594 14.6666 1.93289 14.6666 2.66927V6.0026Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M2.66659 10.0026V13.3359H5.99992V10.0026H2.66659ZM7.33325 13.3359C7.33325 14.0723 6.7363 14.6693 5.99992 14.6693H2.66659C1.93021 14.6693 1.33325 14.0723 1.33325 13.3359V10.0026C1.33325 9.26622 1.93021 8.66927 2.66659 8.66927H5.99992C6.7363 8.66927 7.33325 9.26622 7.33325 10.0026V13.3359Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66659 11.6693C8.66659 11.3011 8.96506 11.0026 9.33325 11.0026H13.9999C14.3681 11.0026 14.6666 11.3011 14.6666 11.6693C14.6666 12.0375 14.3681 12.3359 13.9999 12.3359H9.33325C8.96506 12.3359 8.66659 12.0375 8.66659 11.6693Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M11.6666 8.67188C12.0348 8.67188 12.3333 8.97035 12.3333 9.33854V14.0052C12.3333 14.3734 12.0348 14.6719 11.6666 14.6719C11.2984 14.6719 10.9999 14.3734 10.9999 14.0052V9.33854C10.9999 8.97035 11.2984 8.67188 11.6666 8.67188Z",fill:"currentColor"})]})}v._id="240b2f511dd919401e4d730a7dae6bc4";var g=i(50973),y=i(40795),w=i(7074),b=i(21284),C=i(54971),j=i(45624),S=i(36353),I=i(4752),N=i(1566);function k(e){let{onVisibleChange:t}=e,i=(0,b.GV)(C.U.selectors.fileConnectorList),{handleChooseGoogleDriveFile:o}=(0,S.d)(),{handleChooseOneDriveFile:d}=(0,I.K)(),{openImportFigmaFileDialog:u}=(0,j.e)(),{connectedDrives:p,disConnectors:m}=(0,h.W)(()=>({connectedDrives:i.flatMap(e=>e.connected?e:[]),disConnectors:i.flatMap(e=>e.connected?[]:e)})),k=(0,l.w)(e=>{let i=new URL(window.location.href);i.searchParams.set("auto_open","true"),"google_drive"===e&&o(i.toString()),("one_drive_business"===e||"one_drive_personal"===e)&&d(e,i.toString()),"figma"===e&&u(i.toString()),t(!1),(0,f.C)({eventName:"chat_input_connector_click",extData:{type:e}})});return p.length?(0,a.jsxs)("div",{className:(0,x.cn)("flex",m.length?"flex-col group-data-[placement=bottom-start]:flex-col-reverse":"flex-col-reverse group-data-[placement=bottom-start]:flex-col"),children:[!!m.length&&(0,a.jsx)(s.A,{trigger:["hover"],placement:"right-start",content:(0,a.jsx)(r.r,{children:m.map(e=>(0,a.jsx)(T,{type:e.type,isConnected:e.connected,onClick:()=>k(e.type)},e.type))}),children:(0,a.jsx)("div",{className:"group",onClick:e=>{e.stopPropagation()},children:(0,a.jsxs)(n._,{icon:v,iconSize:16,iconColor:"var(--icon-secondary)",className:"group-data-[popover-trigger]:bg-[var(--fill-tsp-white-main)]",children:[(0,a.jsx)("span",{className:"flex-1 min-w-0 truncate",children:c.I.t("More")}),(0,a.jsx)(N.A,{className:"ml-2",size:16,color:"var(--icon-tertiary)"})]})})}),(0,a.jsx)("div",{className:"flex flex-col-reverse group-data-[placement=bottom-start]:flex-col",children:p.map(e=>(0,a.jsx)(T,{type:e.type,isConnected:e.connected,onClick:()=>k(e.type)},e.type))})]}):(0,a.jsxs)("div",{className:"flex flex-col-reverse group-data-[placement=bottom-start]:flex-col",children:[(0,a.jsx)(n._,{icon:y.R,iconSize:16,onClick:()=>{k("google_drive")},children:c.I.t("Choose Google Drive files")}),(0,a.jsx)(s.A,{trigger:["hover"],placement:"right-start",content:(0,a.jsxs)(r.r,{children:[(0,a.jsx)(n._,{onClick:()=>k("one_drive_personal"),children:c.I.t("Personal")}),(0,a.jsx)(n._,{onClick:()=>k("one_drive_business"),children:c.I.t("Work / School")})]}),children:(0,a.jsx)("div",{className:"group",children:(0,a.jsxs)(n._,{icon:w.U,iconSize:16,className:"group-data-[popover-trigger]:bg-[var(--fill-tsp-white-main)]",children:[(0,a.jsx)("span",{className:"flex-1 min-w-0 truncate",children:c.I.t("Choose OneDrive files")}),(0,a.jsx)(N.A,{className:"ml-2",size:16,color:"var(--icon-tertiary)"})]})})}),(0,a.jsx)(n._,{icon:g.P,iconSize:16,onClick:()=>{k("figma")},children:c.I.t("Add from Figma")})]})}let T=e=>{let{type:t,isConnected:i,onClick:r}=e;return"google_drive"===t?(0,a.jsx)(n._,{icon:y.R,iconSize:16,onClick:r,children:i?c.I.t("Add from Google Drive"):c.I.t("Google Drive")}):"one_drive_business"===t?(0,a.jsx)(n._,{icon:w.U,iconSize:16,onClick:r,children:i?c.I.t("Add from OneDrive (work/school)"):c.I.t("OneDrive (work/school)")}):"one_drive_personal"===t?(0,a.jsx)(n._,{icon:w.U,iconSize:16,onClick:r,children:i?c.I.t("Add from OneDrive (personal)"):c.I.t("OneDrive (personal)")}):"figma"===t?(0,a.jsx)(n._,{icon:g.P,iconSize:16,onClick:r,children:i?c.I.t("Add from Figma"):c.I.t("Figma")}):null};var _=i(33874);function M(e){let{disabled:t,autoFocus:i=!0}=e,{handleUploadFiles:x}=(0,m.y)(),[f,h]=(0,p.useState)(!1),v=(0,l.w)(()=>{let e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=e=>{let t=e.target.files;t&&t.length>0&&(x(Array.from(t)),i&&o.T.emit("focusPrimaryInput"))},e.click()});return(0,a.jsx)(s.A,{trigger:"click",placement:"bottom-start",visible:f,onVisibleChange:h,className:"group",content:(0,a.jsxs)(r.r,{width:"max-content",childrenClassName:"flex flex-col group-data-[placement=bottom-start]:flex-col-reverse",children:[(0,a.jsx)(k,{onVisibleChange:h}),(0,a.jsx)("div",{className:"h-[1px] bg-[var(--border-main)] my-[2px] mx-[12px]"}),(0,a.jsx)(n._,{icon:d.A,iconSize:16,onClick:v,children:c.I.t("Add from local files")})]}),tooltipProps:{title:c.I.t("Upload files and more")},children:(0,a.jsx)(_.T,{isIconButton:!0,disabled:t,className:"data-[popover-trigger]:bg-[var(--fill-tsp-gray-main)] shrink-0",onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(u.A,{size:18,color:"var(--icon-primary)"})})})}},33874:(e,t,i)=>{"use strict";i.d(t,{T:()=>s});var a=i(2635),r=i(78308),n=i(15585);function s(e){let{className:t,tooltipTitle:i,isIconButton:s,children:l,disabled:o,...c}=e,d=(0,a.jsx)("button",{className:(0,n.cn)("h-8 rounded-full border border-[var(--border-main)]","inline-flex items-center justify-center gap-1 clickable cursor-pointer","text-xs text-[var(--text-secondary)]","hover:bg-[var(--fill-tsp-gray-main)]",s?"w-8 h-8 p-0":"px-2.5 py-1.5",o&&"hover:bg-inherit cursor-not-allowed",t),disabled:o,...c,children:l});return i?(0,a.jsx)(r.m,{title:i,children:d}):d}},67139:(e,t,i)=>{"use strict";i.d(t,{y:()=>g});var a=i(84974),r=i(54263),n=i(80926),s=i(47829),l=i(75958),o=i(9205),c=i(93347),d=i(21284),u=i(84939),p=i(32549),m=i(69079),x=i(45624),f=i(76656),h=i(57271),v=i(48202);function g(){let{saveDraft:e}=(0,v.z)(),{uploadFile:t}=(0,s.l)(),{getFigmaParams:i}=(0,x.e)(),g=(0,d.jL)();return{handleUploadFiles:(0,l.w)(async(i,r)=>{var l;let c=m.uT.selectors.currentSessionid(d.M_.getState()),p=c?d.M_.getState().sessions.sessions.entities[c]:null;(0,n.C)({eventName:"file_upload",extData:{sessionId:c,model:null==p?void 0:p.agentTaskMode,fileNum:null==i?void 0:i.length,fileType:null==i?void 0:i.map(e=>a.f.getUserBehaviorFileExtName(e.name)).join(","),fileSize:null==i?void 0:i.map(e=>e.size).join(","),source:(null==r?void 0:null===(l=r.extra)||void 0===l?void 0:l.type)==="google_drive"?"google_drive":"local",mimeType:null==r?void 0:r.mimeType}});let x=i.map(async e=>{e.type.startsWith("image/")&&(e=await a.f.compressImageSize(e,2048,"image/webp",.75));try{var i,n;let a=await t(e,{...r,type:(0,s.A)(e)?"image":"file"});(null==a?void 0:a.fileUrl)&&(null==r?void 0:null===(i=r.fileMetaData)||void 0===i?void 0:i.tag)==="pasted_content"&&u.$.updateUserPastedContent(null==r?void 0:null===(n=r.fileMetaData)||void 0===n?void 0:n.fileId,{url:a.fileUrl,lastId:a.id})}catch(e){(0,o.oR)({variant:"warning",title:h.I.t("Upload failed: ")+(e instanceof Error?e.message:h.I.t("Unknown error"))})}});await Promise.all(x),(null==r?void 0:r.disableSaveDraft)||e(c)}),handleUploadFigmaFile:(0,l.w)(async t=>{let n=(await c.F.SessionService.createFigmaParseTask({figmaFrameUrl:t})).taskUid,s="temp-".concat((0,r.v)()),l=i(t);if(!(null==l?void 0:l.fileKey))throw Error(h.I.t("Figma file not found"));let o="".concat((null==l?void 0:l.fileName)||"Untitled");g(p.V.actions.fileAdded({id:s,fileObject:new File([],o),progress:0,status:"pending",disableRetry:!0,extra:{type:"figma",fileId:s,frameId:"",figmaUrl:t,frameName:"",fileName:""},type:"figma"}));let u=async()=>{if(!p.V.selectors.files(d.M_.getState()).find(e=>e.id===s))return;let i=await c.F.SessionService.loopFigmaParseTask({taskUid:n});if(i.status===f.CM.FAILED){g(p.V.actions.fileUpdated({id:s,status:"error",error:i.statusError}));return}if(i.status===f.CM.FINISHED){var r;g(p.V.actions.fileUpdated({id:s,progress:100,status:"success",url:i.figmaInfoUrl,extra:{type:"figma",fileId:l.fileKey,frameId:i.frameId||"",figmaUrl:t,frameName:(null===(r=i.frameName)||void 0===r?void 0:r.trim())||"",fileName:i.fileName||""}})),e(m.uT.selectors.currentSessionid(d.M_.getState()));return}g(p.V.actions.fileUpdated({id:s,status:"pending"})),await a.f.asyncDelay(Math.max(1e3*i.nextIntervalSeconds,1e3)),u()};a.f.fakeProgress(20,e=>{g(p.V.actions.fileUpdated({id:s,progress:e}))}),u()})}}},48202:(e,t,i)=>{"use strict";i.d(t,{V:()=>d,z:()=>p});var a=i(19562),r=i(93402),n=i(98637),s=i(75958),l=i(21284),o=i(32549),c=i(90264);let d="DRAFT_TASK_SESSION_ID";class u{static generateDraft(e,t){return{...t,sessionId:null!=e?e:d,createdAt:Date.now()}}static storeDraft(e){let t=JSON.stringify(this.formatDraftListOnStore(e));localStorage.setItem(a.d5.inputBoxDraftList,t)}static readDraftBySessionIdList(){let e=localStorage.getItem(a.d5.inputBoxDraftList);return e?JSON.parse(e):[]}static readDraftBySessionId(e){let t=null!=e?e:d;return this.readDraftBySessionIdList().find(e=>e.sessionId===t)||null}static formatDraftListOnStore(e){return e.map(e=>{var t,i;return{...e,content:{...e.content,files:null===(i=e.content)||void 0===i?void 0:null===(t=i.files)||void 0===t?void 0:t.map(e=>{var t,i,a;return{...e,fileObject:{name:null===(t=e.fileObject)||void 0===t?void 0:t.name,size:null===(i=e.fileObject)||void 0===i?void 0:i.size,type:null===(a=e.fileObject)||void 0===a?void 0:a.type},previewUrl:void 0}})}}})}}function p(){let e=(0,l.jL)(),t=(0,s.w)(e=>{let t=null!=e?e:d,i=u.readDraftBySessionIdList().filter(e=>e.sessionId!==t);u.storeDraft(i)}),i=(0,n.x)((0,s.w)(e=>{let i=u.readDraftBySessionId(null!=e?e:d),a=l.M_.getState().chat.inputValue;"markdown"===o.V.selectors.inputMode(l.M_.getState())&&(a=r.f.parseHtml(a));let n=l.M_.getState().chat.files,s=i&&!a.length&&!n.length;if((i||s)&&t(i.sessionId),s)return null;let c=u.readDraftBySessionIdList(),p=null,m={content:{text:a,files:n}};p=i?{...i,...m,createdAt:Date.now()}:u.generateDraft(e,m),c.push(p);let x=c.length;return x>=5&&c.splice(0,x-5),u.storeDraft(c),p}),300),a=(0,s.w)((e,i)=>{let a=u.readDraftBySessionId(e),r=i.text,n=i.inputMode,s=!(null==r?void 0:r.length);if(a&&t(a.sessionId),s)return null;let l=u.readDraftBySessionIdList(),o=null,c={content:{text:r,inputMode:n,files:i.files}};o=a?{...a,...c,createdAt:Date.now()}:u.generateDraft(e,c),l.push(o);let d=l.length;return d>=5&&l.splice(0,d-5),u.storeDraft(l),o});return{loadDraft:(0,s.w)(t=>{var i,a,n;let s=u.readDraftBySessionId(t);if(!s)return;let d=null!==(i=s.content.files)&&void 0!==i?i:[],p=null!==(a=s.content.text)&&void 0!==a?a:"";if("markdown"===(null!==(n=s.content.inputMode)&&void 0!==n?n:"text")){let t=r.f.preprocessBracketContent(p);e(o.V.actions.setInputMode("markdown")),e(o.V.actions.setInputValue(t)),c.T.emit("markdownInputAutoFocus",{});return}e(o.V.actions.setInputValue(p)),l.M_.getState().chat.files.length||d.forEach(t=>e(o.V.actions.fileAdded(t)))}),saveDraft:i,saveDraftManually:a,removeDraft:t,clearDraft:(0,s.w)(()=>{u.storeDraft([])})}}},17513:(e,t,i)=>{"use strict";i.d(t,{o:()=>C});var a=i(2635),r=i(15585),n=i(84974),s=i(38786),l=i(37319);function o(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M3.55562 26.8889C3.55562 28.6071 4.94851 30 6.66673 30H25.3334C27.0516 30 28.4445 28.6071 28.4445 26.8889V9.77778L20.6667 2H6.66673C4.94851 2 3.55562 3.39289 3.55562 5.11111V26.8889Z",fill:"#818FAB"}),(0,a.jsx)("path",{opacity:"0.9",d:"M21.7272 16.5563L16.9967 19.4435L16.993 19.4459C16.7325 19.6026 16.4363 19.6945 16.131 19.7151L15.9999 19.7198C15.6487 19.7198 15.3045 19.6249 15.0068 19.4459L15.0031 19.4435L10.2726 16.5563V22.1667C10.2726 22.5042 10.5575 22.7778 10.909 22.7778H21.0908C21.4423 22.7778 21.7272 22.5042 21.7272 22.1667V16.5563ZM21.7272 14.8333C21.7272 14.4958 21.4423 14.2222 21.0908 14.2222H10.909C10.5575 14.2222 10.2726 14.4958 10.2726 14.8333V15.1085L15.6817 18.4099H15.6823C15.7775 18.4672 15.8876 18.4976 15.9999 18.4976L16.0838 18.4916C16.1389 18.4841 16.1926 18.4693 16.2435 18.4475L16.3175 18.4099L21.7272 15.1085V14.8333ZM22.9999 22.1667C22.9999 23.1792 22.1452 24 21.0908 24H10.909C9.85462 24 8.99989 23.1792 8.99989 22.1667V14.8333C8.99989 13.8208 9.85462 13 10.909 13H21.0908C22.1452 13 22.9999 13.8208 22.9999 14.8333V22.1667Z",fill:"white",stroke:"white",strokeWidth:"0.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M20.6678 6.66623C20.6678 8.38445 22.0607 9.77734 23.779 9.77734H28.4456L20.6678 1.99957V6.66623Z",fill:"#A6B9DE"})]})}o._id="87a80188b35fd2ced9a0451cd157442f";var c=i(62480),d=i(16671),u=i(51697),p=i(87991),m=i(12741),x=i(68408);function f(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M3.55554 26.8889C3.55554 28.6071 4.94843 30 6.66665 30H25.3333C27.0515 30 28.4444 28.6071 28.4444 26.8889V9.77778L20.6667 2H6.66666C4.94844 2 3.55554 3.39289 3.55554 5.11111V26.8889Z",fill:"#BBBBBB"}),(0,a.jsx)("path",{opacity:"0.9",d:"M10.8749 15.375C10.8749 14.5 11.0499 13.8 11.2249 13.3625C11.3999 12.925 11.7499 12.4875 12.1874 12.1375C12.6249 11.7 13.0624 11.4375 13.6749 11.2625C14.1999 11.0875 14.7249 11 15.3374 11C16.5624 11 17.5249 11.35 18.3999 12.05C19.1874 12.75 19.6249 13.625 19.6249 14.7625C19.6249 15.2875 19.4499 15.725 19.2749 16.1625C19.0999 16.6 18.6624 17.125 17.9624 17.7375C17.2624 18.35 16.9999 18.7875 16.7374 19.05C16.4749 19.3125 16.3874 19.6625 16.2124 20.0125C16.0374 20.3625 16.1249 20.625 16.1249 21.5H14.3749C14.3749 20.625 14.4624 20.1875 14.5499 19.75C14.6374 19.3125 14.8124 18.9625 15.0749 18.6125C15.3374 18.2625 15.5999 17.825 16.2124 17.2125C16.8249 16.6 17.2624 16.1625 17.4374 15.9C17.6124 15.6375 17.7874 15.2 17.7874 14.5875C17.7874 13.975 17.5249 13.5375 17.0874 13.1C16.6499 12.6625 16.0374 12.4 15.2499 12.4C13.4999 12.4 12.6249 13.625 12.6249 15.375H10.8749ZM16.1249 25H14.3749V23.25H16.1249V25Z",fill:"white"}),(0,a.jsx)("path",{d:"M20.6678 6.67014C20.6678 8.38836 22.0607 9.78125 23.779 9.78125H28.4456L20.6678 2.00347V6.67014Z",fill:"#E6E6E6"})]})}f._id="3c25691dc3c41ef391a56c1cd5174e08";var h=i(20176),v=i(82468),g=i(50973),y=i(40795);function w(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 22",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M0.166992 19.1667C0.166992 20.4553 1.21166 21.5 2.50033 21.5H16.5003C17.789 21.5 18.8337 20.4553 18.8337 19.1667V6.33333L13.0003 0.5H2.50032C1.21166 0.5 0.166992 1.54467 0.166992 2.83333V19.1667Z",fill:"#E84D4E"}),(0,a.jsx)("path",{d:"M13 3.99967C13 5.28834 14.0447 6.33301 15.3333 6.33301H18.8333L13 0.499675V3.99967Z",fill:"#F67A7B"}),(0,a.jsx)("path",{opacity:"0.9",d:"M6.87494 9.36648C6.87494 9.36648 6.8551 13.511 6.8551 15.5569C6.6463 15.4362 6.40941 15.3726 6.16823 15.3724C5.92705 15.3722 5.69008 15.4355 5.48111 15.5559C5.27214 15.6764 5.09854 15.8496 4.97775 16.0584C4.85696 16.2671 4.79323 16.504 4.79297 16.7452C4.79371 17.1092 4.93883 17.458 5.19648 17.7152C5.45413 17.9723 5.80327 18.1167 6.16727 18.1167C6.36138 18.117 6.55333 18.0761 6.73047 17.9967C6.90761 17.9174 7.06591 17.8014 7.19493 17.6563C7.32394 17.5113 7.42074 17.3406 7.47894 17.1554C7.53713 16.9702 7.5554 16.7748 7.53253 16.5821C7.53896 16.5604 7.54223 16.538 7.54225 16.5154V11.4405L12.3537 10.5916V14.1847C12.1449 14.0639 11.9081 14.0002 11.6669 14C11.4257 13.9998 11.1888 14.0631 10.9798 14.1836C10.7709 14.304 10.5973 14.4773 10.4766 14.6861C10.3559 14.8949 10.2923 15.1318 10.2922 15.373C10.2922 15.5603 10.3305 15.7457 10.4048 15.9177C10.479 16.0897 10.5877 16.2447 10.724 16.3732C10.8604 16.5017 11.0216 16.601 11.1977 16.6649C11.3739 16.7288 11.5612 16.756 11.7482 16.7449C11.9352 16.7337 12.118 16.6845 12.2853 16.6001C12.4526 16.5157 12.6009 16.3981 12.721 16.2543C12.8412 16.1105 12.9307 15.9437 12.984 15.7641C13.0373 15.5845 13.0533 15.3959 13.0311 15.2099C13.0375 15.1882 13.0407 15.1658 13.0408 15.1432V8.11249L6.87494 9.36648Z",fill:"white",stroke:"white",strokeWidth:"0.2625"})]})}w._id="9a6123064516e499e19b9ebd293c2994";var b=i(7074);function C(e){let{type:t,extra:i,extraClassName:C,extraIconSize:j=8}=e,S=e.size||32,I=(null==i?void 0:i.type)==="google_drive"||(null==i?void 0:i.type)==="one_drive_business"||(null==i?void 0:i.type)==="one_drive_personal";return(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(()=>{switch(t){case"link":return(0,a.jsx)(u.V,{size:S});case"pdf":return(0,a.jsx)(p.n,{size:S});case"doc":case"docx":case"fodt":case"odt":return(0,a.jsx)(l.J,{size:S});case"fodp":case"odp":case"ppt":case"pptx":case"pps":case"ppsx":case"sldx":return(0,a.jsx)(m.B,{size:S});case"slides":return(0,a.jsx)(x.B,{size:S});case"xls":case"xlsx":case"csv":case"tsv":case"excel":return(0,a.jsx)(c.Q,{size:S});case"env":case"text":case"txt":case"md":return(0,a.jsx)(d.A,{size:S});case"email":return(0,a.jsx)(o,{size:S});case"figma":return(0,a.jsx)(g.P,{size:S});default:if(n.f.isAudioFile(t))return(0,a.jsx)(w,{size:S});if(n.f.isZipFile(t))return(0,a.jsx)(v.c,{size:S});if(n.f.isCodeFile(t))return(0,a.jsx)(s.u,{size:S});if(n.f.isVideoFile(t))return(0,a.jsx)(h.a,{size:S});return(0,a.jsx)(f,{size:S})}})(),I&&(0,a.jsx)("div",{className:(0,r.cn)("absolute -bottom-[1.5px] right-0 rounded-[4px] border-[0.8px] border-[var(--border-main)] bg-[var(--fill-gray)] w-[15px] h-[13px] flex items-center justify-center",C),children:(null==i?void 0:i.type)==="google_drive"?(0,a.jsx)(y.R,{size:j}):(null==i?void 0:i.type)==="one_drive_business"||(null==i?void 0:i.type)==="one_drive_personal"?(0,a.jsx)(b.U,{size:j}):null})]})}},89839:(e,t,i)=>{"use strict";i.d(t,{X:()=>s});var a=i(2635),r=i(76743),n=i(33890);function s(e){return(0,a.jsx)(n.l,{title:e.title,onDisposed:e.onDisposed,width:400,headerClassName:"px-[20px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px]",children:[(0,a.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-tertiary)]",children:e.text}),(0,a.jsx)("div",{className:"mt-[28px] flex items-center justify-end gap-[12px]",children:(0,a.jsx)(r.A,{variant:"default",color:"black",onClick:e.onDisposed,children:e.btnText})})]})})}},73338:(e,t,i)=>{"use strict";i.d(t,{b:()=>C});var a=i(2635),r=i(76743),n=i(33890),s=i(19562),l=i(68065),o=i(84974),c=i(53708),d=i(51416),u=i(75958);function p(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",width:i,height:i,color:t,...r,children:(0,a.jsx)("path",{d:"M42.2197 28.0645C42.2197 26.543 42.2054 25.5473 42.1025 24.8027C42.006 24.1045 41.8583 23.849 41.7354 23.7051C41.5872 23.5316 41.2605 23.2705 40.3799 22.9336C39.9846 22.7824 39.5196 22.6332 38.9678 22.4727V41.1973H42.2197V28.0645ZM24.001 6.80469C24.0434 6.80469 23.9994 6.78132 23.7236 6.91992C23.4048 7.08023 22.9967 7.33699 22.2803 7.79688L22.2822 7.79883L16.8838 11.2676C15.6878 12.0365 14.9083 12.5408 14.3389 12.9883C13.8025 13.4098 13.5738 13.69 13.4326 13.9492L13.4307 13.9531C13.2889 14.2126 13.1766 14.5562 13.1123 15.2344C13.0439 15.9556 13.042 16.8848 13.042 18.3066V41.1973H21.9971V32.8301C21.9971 31.7234 22.8943 30.8263 24.001 30.8262C25.1077 30.8262 26.0049 31.7233 26.0049 32.8301V41.1973H34.96V18.3066C34.96 16.8848 34.958 15.9556 34.8896 15.2344C34.8253 14.5561 34.7131 14.2126 34.5713 13.9531L34.5693 13.9492C34.4281 13.6901 34.1993 13.4097 33.6631 12.9883C33.3784 12.7646 33.0416 12.5261 32.626 12.248L31.1182 11.2676L25.7217 7.79883V7.79688C25.0053 7.33788 24.5975 7.08023 24.2783 6.91992C24.0024 6.78141 23.9589 6.80463 24.001 6.80469ZM24.0244 17.8633L24.2295 17.873C25.24 17.9757 26.0283 18.8296 26.0283 19.8672C26.0281 20.9046 25.2399 21.7587 24.2295 21.8613L24.0244 21.8711H24.001C22.8944 21.871 21.9973 20.9737 21.9971 19.8672C21.9971 18.7605 22.8943 17.8634 24.001 17.8633H24.0244ZM5.78223 41.1973H9.03418V22.4727C8.48245 22.6332 8.01733 22.7824 7.62207 22.9336C6.74298 23.27 6.41705 23.5317 6.26855 23.7051C6.14558 23.849 5.99596 24.1045 5.89941 24.8027C5.79651 25.5473 5.78223 26.5431 5.78223 28.0645V41.1973ZM46.2275 43.2012C46.2273 44.3078 45.3303 45.2051 44.2236 45.2051C44.1355 45.2051 44.049 45.1966 43.9639 45.1855C43.8794 45.1964 43.7935 45.2051 43.7061 45.2051H4.2959C4.20842 45.205 4.1226 45.1965 4.03809 45.1855C3.95295 45.1966 3.86646 45.2051 3.77832 45.2051C2.67167 45.2051 1.77462 44.3078 1.77441 43.2012V28.0645C1.77441 26.6168 1.7806 25.3255 1.92871 24.2539C2.08329 23.1359 2.41631 22.0444 3.21973 21.1035C3.99843 20.1919 5.04428 19.6279 6.19043 19.1895C6.98667 18.8848 7.93522 18.6064 9.03418 18.3145V18.3066C9.03418 16.9599 9.03174 15.8109 9.12207 14.8574C9.21648 13.8616 9.42182 12.9312 9.91504 12.0293C10.4063 11.1286 11.0768 10.4552 11.8623 9.83789C12.6154 9.24602 13.582 8.62548 14.7158 7.89648H14.7178L20.1143 4.42773L20.1162 4.42578L21.0557 3.83203C21.3583 3.64649 21.6491 3.47644 21.9248 3.33789C22.5194 3.03913 23.1967 2.79691 24.001 2.79688C24.8054 2.79688 25.4827 3.03938 26.0771 3.33789C26.3529 3.47639 26.6452 3.64451 26.9482 3.83008L27.8877 4.42578L27.8896 4.42773L33.2861 7.89648L34.8564 8.91797C35.334 9.23793 35.7631 9.542 36.1396 9.83789C36.9252 10.4552 37.5956 11.1287 38.0869 12.0293L38.2588 12.3691C38.6298 13.1649 38.7973 13.9861 38.8799 14.8574C38.9702 15.8109 38.9678 16.9599 38.9678 18.3066V18.3145C40.0667 18.6064 41.0153 18.8849 41.8115 19.1895C42.9577 19.6279 44.0035 20.1919 44.7822 21.1035C45.5857 22.0444 45.9187 23.1359 46.0732 24.2539C46.2214 25.3255 46.2275 26.6168 46.2275 28.0645V43.2012Z",fill:"currentColor"})})}p._id="898fcc239509d3788b13065bd7befb36";var m=i(21284),x=i(23757),f=i(66555),h=i(98432),v=i(18431),g=i(10417),y=i(57271),w=i(68209),b=i(99515);function C(e){let{onDisposed:t}=e,[i,C]=(0,b.useState)(!1),{open:j}=(0,d.s)(g.v),{switchAccount:S}=(0,l.W9)(),I=(0,m.GV)(f.M.selectors.planList),N=(0,c.W)(()=>I.flatMap(e=>e.plan===h.OL.FREE||e.plan===h.OL.TEAM?[]:[e])),k=(0,u.w)(async()=>{let e=v.u.selectors.listTeamResponse(m.M_.getState()),i=null==e?void 0:e.userId;if(!i)return;C(!0),await S(i),C(!1);let a=x.R.selectors.userInfo(m.M_.getState());(null==a?void 0:a.userId)===i&&(j(),t())});return(0,a.jsxs)(n.l,{onDisposed:t,width:500,headerClassName:"p-0",className:"bg-[var(--background-gray-main)] flex flex-col px-[24px] pt-[32px] pb-[16px] rounded-[20px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center w-full",children:[(0,a.jsx)(p,{size:48,color:"var(--icon-primary)"}),(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-center text-[28px] leading-[34px] font-serif",children:y.I.t("Enjoy more benefits")}),(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-center text-sm leading-[22px]",children:y.I.t("School pass starts summer break on August 1st, your conversations are securely saved in your campus account. Switch to your personal account to access {product} and enjoy limited benefits.",{product:s.KR})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-[8px] mt-[24px] p-[16px] rounded-[12px] border border-[var(--border-light)] bg-[var(--fill-tsp-white-light)]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-[16px] leading-[22px] text-[var(--text-primary)] font-semibold tracking-[-0.304px]",children:y.I.t("Double credits on all plans")}),(0,a.jsx)("div",{className:"bg-[var(--fill-tsp-gray-main)] border border-[var(--icon-disable)] rounded-[99px] px-2 py-1 h-[18px] flex items-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-[11px] leading-[16px] text-[var(--text-primary)] font-semibold uppercase",children:y.I.t("Limited offer")})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-[4px]",children:N.map(e=>(0,a.jsx)("div",{className:"text-[14px] leading-[22px] text-[var(--text-primary)] tracking-[-0.154px]",children:(0,a.jsx)(w.p,{S:y.I.t("{planName} plan: +{credits} additional credits monthly"),data:{planName:e.planName,credits:o.f.formatCredits(e.credits)},components:{}})},e.plan))}),(0,a.jsx)("div",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)] tracking-[-0.154px] mt-[8px]",children:(0,a.jsx)(w.p,{S:y.I.t("Subscribe now and receive <b>2X</b> <span>credits every month!</span>"),components:{b:e=>(0,a.jsx)("b",{className:"font-[700] text-[var(--text-primary)]",children:e}),span:e=>(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:e})}})})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-[16px] mt-[32px] w-full",children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"medium",className:"flex-1",onClick:()=>{t()},children:y.I.t("Got it")}),(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",loading:i,className:"flex-1 clickable",onClick:k,children:y.I.t("Switch now")})]})]})}},32289:(e,t,i)=>{"use strict";i.d(t,{$:()=>L});var a=i(2635),r=i(76743),n=i(33890),s=i(41661),l=i(19737),o=i(78308),c=i(93607),d=i(19562),u=i(92803),p=i(15585),m=i(84974),x=i(54263),f=i(53708),h=i(47829),v=i(75958),g=i(9205),y=i(73677),w=i(23757),b=i(10065),C=i(69878),j=i(57271),S=i(68209),I=i(73518),N=i(74559),k=i(12150),T=i(12992),_=i(99515);let M=new Set(["PATH","HOME","USER","SHELL","PWD","LANG","LC_ALL","TZ","TEMP","TMP","NODE_ENV","NODE_PATH","npm_config_cache","npm_config_prefix","JAVA_HOME","PYTHON_PATH","GOPATH","GOROOT","DOCKER_HOST","KUBECONFIG","AWS_REGION","AWS_PROFILE"]);function L(e){let{onDisposed:t,onDisposedAll:i,uid:L}=e,{createConnector:P,updateConnector:E,deleteConnector:A,handleTryItOut:R}=(0,u.o)(),[F,U]=(0,_.useState)(L),D=(0,y.GV)(e=>F?b.h.selectors.connectorByUid(e,F):void 0),{uploadFileDirect:V}=(0,h.l)(),[O,z]=(0,_.useState)(()=>{var e,t,i;return{name:(null==D?void 0:D.name)||"",iconUrl:(null==D?void 0:D.iconUrl)||"",note:(null==D?void 0:null===(e=D.byokConfig)||void 0===e?void 0:e.note)||"",secrets:(null==D?void 0:null===(i=D.byokConfig)||void 0===i?void 0:null===(t=i.env)||void 0===t?void 0:t.map(e=>({key:e.key||"",value:e.value||""})))||[{key:"",value:""}]}}),H=!!D,B=(0,y.GV)(w.R.selectors.userInfo),[W,G]=(0,_.useState)(!1),[Z,K]=(0,_.useState)(!1),[Y,$]=(0,_.useState)({}),[q,J]=(0,_.useState)(null),[X,Q]=(0,_.useState)(!1),ee=(0,v.w)(()=>{let e={key:"",value:""};z(t=>{let i=[...t.secrets,e];return J(i.length-1),{...t,secrets:i}})}),et=(0,v.w)(e=>{O.secrets.length>1&&z(t=>({...t,secrets:t.secrets.filter((t,i)=>i!==e)}))}),ei=(0,v.w)((e,t,i)=>{if(z(a=>({...a,secrets:a.secrets.map((a,r)=>r===e?{...a,[t]:i}:a)})),"key"===t){let t=i?/^[A-Za-z0-9_]+$/.test(i)?/^\d/.test(i)?{type:"startsWithDigit",message:j.I.t("Secret name cannot start with a number")}:M.has(i)?{type:"systemConflict",message:j.I.t("This name conflicts with a system environment variable")}:null:{type:"format",message:j.I.t("Secret name can only contain A-Z, a-z, 0-9, and underscore (_)")}:null;$(i=>{let a={...i};return t?a[e]=t:delete a[e],a})}}),ea=(0,f.W)(()=>{var e,t;let i=O.secrets[0],a=Object.keys(Y).length>0;return O.name.trim()&&i&&(null===(e=i.key)||void 0===e?void 0:e.trim())&&(null===(t=i.value)||void 0===t?void 0:t.trim())&&!a}),er=(0,f.W)(()=>{var e,t,i;let a={name:O.name,iconUrl:O.iconUrl,note:O.note,secrets:O.secrets.map(e=>{let{key:t,value:i}=e;return{key:t,value:i}})},r={name:(null==D?void 0:D.name)||"",iconUrl:(null==D?void 0:D.iconUrl)||"",note:(null==D?void 0:null===(e=D.byokConfig)||void 0===e?void 0:e.note)||"",secrets:(null==D?void 0:null===(i=D.byokConfig)||void 0===i?void 0:null===(t=i.env)||void 0===t?void 0:t.map(e=>{let{key:t,value:i}=e;return{key:t||"",value:i||""}}))||[{key:"",value:""}]};return JSON.stringify(a)!==JSON.stringify(r)}),en=(0,v.w)(async()=>{let e;K(!0);let i={$typeName:"connectors.v1.Connector",uid:(null==D?void 0:D.uid)||(0,x.v)(),userId:(null==B?void 0:B.userId)||"",type:C.uM.BYOK,name:O.name,iconUrl:O.iconUrl,brief:"",description:"",order:0,category:"",connectorInfo:[],isInstalled:!0,isEnabled:!0,displayGroup:C.Ap.BYOK,isPublished:!0,isTranslated:!1,byokConfig:{$typeName:"connectors.v1.ByokConfig",env:O.secrets.map(e=>({$typeName:"connectors.v1.VariableItem",key:e.key||"",value:e.value||""})),note:O.note,extraConfig:[]}};if(H)await E(i)&&(e=i),z(e=>({...e,secrets:e.secrets.map(e=>({...e,value:m.f.encrypt(e.value)}))}));else{let a=await P(i);a&&(e=a),t()}e&&U(e.uid),K(!1)}),es=(0,v.w)(()=>{m.f.selectFile(e=>{if(0===e.length)return;let t=e[0];t&&el(t)},{accept:[".png",".jpg",".jpeg",".webp",".svg"]})}),el=(0,v.w)(async e=>{G(!0);try{let t=await V(e);t.fileUrl&&(z(e=>({...e,iconUrl:t.fileUrl})),(0,g.oR)({title:j.I.t("Icon uploaded successfully"),variant:"success"}))}catch(e){console.error("Upload failed:",e),(0,g.oR)({title:j.I.t("Failed to upload icon"),variant:"error"})}finally{G(!1)}}),eo=(0,v.w)(async()=>{try{D&&(Q(!0),await A(D),t())}catch(e){console.error(e)}Q(!1)}),ec=(0,v.w)(()=>{D&&(R(D),null==i||i())}),ed=j.I.t("Add custom API");return H&&(ed=j.I.t("Edit custom API")),(0,a.jsxs)(n.l,{title:ed,description:(0,a.jsx)(S.p,{S:j.I.t("Use custom API connector to integrate any external service that support key or token authorization.")}),width:600,className:"min-h-[500px] flex flex-col bg-[var(--background-gray-main)]",onDisposed:t,children:[(0,a.jsxs)("div",{className:"flex flex-col flex-1 p-5 pb-0 gap-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:j.I.t("Name")}),(0,a.jsx)(s.p,{placeholder:j.I.t("My custom API"),value:O.name,autoFocus:!0,onChange:e=>z(t=>({...t,name:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:[j.I.t("Icon"),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-normal",children:j.I.t(" (optional)")})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(s.p,{className:"flex-1",placeholder:j.I.t("Paste URL"),value:O.iconUrl,onChange:e=>z(t=>({...t,iconUrl:e.target.value}))}),(0,a.jsx)(r.A,{className:"h-[40px]",onClick:es,disabled:W,children:W?j.I.t("Uploading..."):j.I.t("Upload")})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:[j.I.t("Note"),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-normal",children:j.I.t(" (optional)")})]}),(0,a.jsx)(l.T,{className:"h-[100px] resize-none border-none rounded-[10px] text-sm leading-[22px] text-[var(--text-primary)] w-full disabled:cursor-not-allowed placeholder:text-[var(--text-disable)] bg-[var(--fill-tsp-white-main)] pt-2 pr-3 pb-2 pl-4 focus:ring-[1.5px] focus:ring-[var(--border-dark)]",placeholder:j.I.t("Provide API docs or instructions to tell {product} how and when to use this API",{product:d.KR}),value:O.note,onChange:e=>z(t=>({...t,note:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:[j.I.t("Secrets")," ",j.I.t("(Env Vars)"),(0,a.jsx)(o.m,{title:j.I.t("Use unique secret names to avoid conflicts with other APIs. For example, use YOUTUBE_API_KEY for Youtube API and GOOGLE_API_KEY for Google API."),children:(0,a.jsx)(I.A,{color:"var(--icon-tertiary)",className:"relative top-[-1px] ml-[4px] inline-block cursor-help",size:12})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:O.secrets.map((e,t)=>{var i;return(0,a.jsxs)("div",{className:"group relative border border-[var(--border-main)] border-solid rounded-[12px] p-4",children:[O.secrets.length>1&&(0,a.jsx)("div",{className:(0,p.cn)("absolute right-[16px] top-[16px] clickable border border-[var(--border-main)] border-solid rounded-[8px] size-9 flex items-center justify-center bg-[var(--background-gray-main)] group-hover:opacity-100 opacity-0","hover:bg-[#f2f2f2] dark:hover:bg-[#2f2f2f]",1===O.secrets.length&&"opacity-100"),onClick:()=>et(t),children:(0,a.jsx)(N.A,{className:"clickable",size:20,color:"var(--function-error)"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:j.I.t("Secret name")}),(0,a.jsx)(s.p,{placeholder:"SOME_UNIQUE_KEY_NAME",value:e.key,onChange:e=>ei(t,"key",e.target.value),required:0===t,error:!!Y[t],autoFocus:q===t,onFocus:()=>J(null)}),Y[t]&&(0,a.jsx)("div",{className:"text-[var(--function-error)] text-sm",children:null===(i=Y[t])||void 0===i?void 0:i.message})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:j.I.t("Value")}),(0,a.jsx)(l.T,{className:"h-[80px] resize-none border-none rounded-[10px] overflow-hidden text-sm leading-[22px] text-[var(--text-primary)] w-full disabled:cursor-not-allowed placeholder:text-[var(--text-disable)] bg-[var(--fill-tsp-white-main)] pt-2 pr-3 pb-2 pl-4 focus:ring-[1.5px] focus:ring-[var(--border-dark)]",placeholder:"Value of the secret, such as sk-example-1234",value:e.value,onChange:e=>ei(t,"value",e.target.value),autoResize:!1,required:0===t,sensitive:!0})]})]},"key-".concat(t))})}),(0,a.jsx)(r.A,{size:"medium",variant:"outline",className:"shrink-0 self-start",icon:(0,a.jsx)(k.A,{size:16}),onClick:ee,children:j.I.t("Add secret")})]})]}),(0,a.jsx)(c.j,{condition:null==D?void 0:D.uid,children:(0,a.jsxs)("div",{className:"flex justify-between p-5",children:[(0,a.jsx)(r.A,{variant:"outline",color:"danger",className:"flex items-center gap-2",onClick:eo,icon:(0,a.jsx)(N.A,{size:16}),loading:X,children:j.I.t("Delete")}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(r.A,{variant:"outline",onClick:ec,disabled:er,icon:(0,a.jsx)(T.A,{size:16}),children:j.I.t("Try it out")}),(0,a.jsx)(r.A,{color:"black",onClick:en,disabled:!ea||Z||!er,loading:Z,children:j.I.t("Save")})]})]})}),(0,a.jsx)(c.j,{condition:!(null==D?void 0:D.uid),children:(0,a.jsx)("div",{className:"flex justify-end gap-3 p-5",children:(0,a.jsx)(r.A,{color:"black",onClick:en,disabled:!ea||Z,loading:Z,children:j.I.t("Save")})})})]})}},91767:(e,t,i)=>{"use strict";i.d(t,{T:()=>z});var a=i(2635),r=i(76743),n=i(55185),s=i(33890),l=i(38933),o=i(93578),c=i(93607),d=i(92803),u=i(53708),p=i(51416),m=i(75958),x=i(63226),f=i(7948),h=i(81140),v=i(21284),g=i(10065),y=i(69878),w=i(57271),b=i(28360),C=i(74559),j=i(92189),S=i(8398),I=i(12150),N=i(83525),k=i(99515),T=i(46859),_=i(49852),M=i(83373),L=i(15305),P=i(41661),E=i(1566);function A(e){var t,i;let{connector:r,formData:n,onInputChange:s}=e,l=(0,m.w)((e,t)=>{let i="".concat(e.label,"-").concat(t),r=i in n?n[i]:e.defaultValue||"";return(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-start justify-start relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-start justify-start relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"font-medium grow leading-[0] min-h-px min-w-px relative shrink-0 text-[var(--text-primary)] text-[14px] tracking-[-0.154px]",children:[(0,a.jsx)("span",{className:"leading-[20px]",children:e.label}),(0,a.jsx)(c.j,{condition:!1===e.isRequired,children:(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-normal leading-[20px]",children:w.I.t(" (optional)")})})]}),(0,a.jsx)(c.j,{condition:!!(e.getLinkLabel&&e.getLinkUrl),children:(0,a.jsxs)("a",{className:"flex gap-1 items-center justify-start relative shrink-0",href:e.getLinkUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)("div",{className:"font-normal leading-[0] relative shrink-0 text-[var(--text-tertiary)] text-[14px] text-nowrap tracking-[-0.091px]",children:(0,a.jsx)("p",{className:"leading-[20px] whitespace-pre",children:e.getLinkLabel})}),(0,a.jsx)(E.A,{size:16,color:"var(--icon-tertiary)"})]})})]}),(0,a.jsx)(P.p,{placeholder:e.placeholder,value:r,autoFocus:0===t&&!r,onChange:e=>s(i,e.target.value),required:e.isRequired,sensitive:e.isSensitive})]},i)});return(0,a.jsxs)("div",{className:"flex flex-col gap-4 items-start justify-start relative shrink-0 w-full",children:[null===(t=r.byokConfig)||void 0===t?void 0:t.extraConfig.map(l),(0,a.jsx)(c.j,{condition:!(null===(i=r.byokConfig)||void 0===i?void 0:i.extraConfig.length),children:(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-center py-8",children:w.I.t("No additional configuration required")})})]})}function R(e){var t;let{onDisposed:i,connector:l}=e,{configureConnector:o}=(0,d.o)(),[c,u]=(0,k.useState)(()=>(function(e){var t;let i={};return((null===(t=e.byokConfig)||void 0===t?void 0:t.extraConfig)||[]).forEach((e,t)=>{i["".concat(e.label,"-").concat(t)]=e.value||e.defaultValue||""}),i})(l)),[p,x]=(0,k.useState)(!1),f=(0,m.w)((e,t)=>{u(i=>({...i,[e]:t}))}),h=(0,m.w)(async()=>{var e;x(!0);let t={},a=(null===(e=l.byokConfig)||void 0===e?void 0:e.extraConfig)||[];a.forEach((e,i)=>{let a=c["".concat(e.label,"-").concat(i)];void 0!==a&&(t["".concat(e.label,"-").concat(i)]=a)});let r={...l,byokConfig:{$typeName:"connectors.v1.ByokConfig",env:[],extraConfig:a.map((e,t)=>({...e,$typeName:"connectors.v1.UserFormItem",value:c["".concat(e.label,"-").concat(t)]||e.defaultValue||""}))}};await o(r),i(),x(!1)}),v=l.isInstalled,g=v?w.I.t("Save"):w.I.t("Connect"),y=v?w.I.t("Edit {connectorName}",{connectorName:l.name}):w.I.t("Connect {connectorName}",{connectorName:l.name}),b=v?w.I.t("Update the configuration for this connector"):w.I.t("Set up configurations to enable this connector");return(0,a.jsx)(s.l,{onDisposed:i,closeIconVisible:!1,className:"w-full max-w-[400px] bg-[var(--background-gray-main)]",headerClassName:"p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start overflow-clip relative w-full h-full",children:[(0,a.jsx)("div",{className:"flex gap-2.5 items-start justify-end pb-2.5 pl-5 pr-4 pt-5 relative shrink-0 w-full",children:(0,a.jsx)("div",{className:"flex gap-2.5 items-center justify-center relative shrink-0 size-7",children:(0,a.jsx)(r.A,{onClick:i,variant:"text",color:"gray",size:"small",shape:"round",className:"p-0 size-7",children:(0,a.jsx)(S.A,{size:18})})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 items-center justify-center px-5 py-0 relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 items-center justify-start relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-center relative shrink-0",children:[(0,a.jsx)("div",{className:"flex gap-2 h-[41px] items-center justify-center p-2 relative rounded-lg shrink-0 w-10 bg-[var(--background-menu-white)] border border-[var(--border-main)]",children:(0,a.jsx)("div",{className:"relative shrink-0 size-7",children:(0,a.jsx)("div",{className:"absolute inset-[3.75%_16.04%_4.58%_13.13%]",children:(0,a.jsx)(T.f,{})})})}),(0,a.jsx)("div",{className:"overflow-clip relative shrink-0 size-4",children:(0,a.jsx)(_.A,{size:16,color:"var(--icon-tertiary)"})}),(0,a.jsx)("div",{className:"flex gap-2 h-[41px] items-center justify-center p-2 relative rounded-lg shrink-0 w-10 bg-[var(--background-menu-white)] border border-[var(--border-main)]",children:(0,a.jsx)(n.z,{uid:l.uid,size:24})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center text-center w-full",children:[(0,a.jsx)("h2",{className:"text-[var(--text-primary)] text-[20px] leading-[26px] font-semibold",children:y}),l.customDescription?(0,a.jsx)(L.o,{className:"font-normal relative shrink-0 text-[var(--text-tertiary)] text-[14px] w-full",components:{a:e=>{let{children:t,href:i}=e;return(0,a.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--text-tertiary)] text-[14px] leading-[20px] underline",children:t})}},children:l.customDescription}):(0,a.jsx)("p",{className:"text-[var(--text-tertiary)] text-[14px] leading-[20px]",children:b})]})]}),(0,a.jsx)(A,{connector:l,formData:c,onInputChange:f}),(0,a.jsxs)("div",{className:"flex gap-3 items-start p-4 rounded-xl w-full border border-[var(--border-main)]",children:[(0,a.jsx)(M.A,{size:18,className:"text-[var(--icon-primary)]"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-[var(--text-primary)] text-[14px] leading-[20px]",children:w.I.t("Complete control")}),(0,a.jsx)("p",{className:"text-[var(--text-tertiary)] text-[14px] leading-[20px]",children:w.I.t("Works with any API endpoint you have access to. Configure once, use in any task.")})]})]})]}),(0,a.jsx)("div",{className:"flex gap-3 items-center justify-end relative w-full p-6",children:(0,a.jsx)(r.A,{color:"black",onClick:h,disabled:!((null===(t=l.byokConfig)||void 0===t?void 0:t.extraConfig.filter(e=>e.isRequired))||[]).every((e,t)=>{var i;return null===(i=c["".concat(e.label,"-").concat(t)])||void 0===i?void 0:i.trim()})||p,loading:p,className:"w-full",children:g})})]})})}var F=i(32289),U=i(78308),D=i(73518);function V(e){var t;let{connector:i,formData:r,onInputChange:n}=e,s=(0,m.w)((e,t)=>{let i="".concat(e.label,"-").concat(t),s=i in r?r[i]:e.defaultValue||"";return(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-start justify-start relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-start justify-start relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"font-medium grow leading-[0] min-h-px min-w-px relative shrink-0 text-[var(--text-primary)] text-[14px] tracking-[-0.154px]",children:[(0,a.jsx)("span",{className:"leading-[20px]",children:e.label}),(0,a.jsx)(c.j,{condition:!e.isRequired,children:(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-normal",children:w.I.t(" (optional)")})}),(0,a.jsx)(c.j,{condition:e.placeholder,children:(0,a.jsx)(U.m,{title:e.placeholder,children:(0,a.jsx)(D.A,{color:"var(--icon-tertiary)",className:"relative top-[-1px] ml-[4px] inline-block cursor-help",size:14})})})]}),(0,a.jsx)(c.j,{condition:!!(e.getLinkLabel&&e.getLinkUrl),children:(0,a.jsxs)("a",{className:"flex gap-1 items-center justify-start relative shrink-0",href:e.getLinkUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)("div",{className:"font-normal leading-[0] relative shrink-0 text-[var(--text-tertiary)] text-[14px] text-nowrap tracking-[-0.091px]",children:(0,a.jsx)("p",{className:"leading-[20px] whitespace-pre",children:e.getLinkLabel})}),(0,a.jsx)(E.A,{size:16,color:"var(--icon-tertiary)"})]})})]}),(0,a.jsx)(P.p,{placeholder:e.placeholder||"",value:s,autoFocus:0===t&&!s,onChange:e=>n(i,e.target.value),className:"w-full",required:e.isRequired,sensitive:e.isSensitive})]},i)}),l=(null===(t=i.mcpConfig)||void 0===t?void 0:t.extraConfig)||[];return(0,a.jsxs)("div",{className:"flex flex-col gap-4 items-start justify-start relative w-full",children:[l.map(s),0===l.length&&(0,a.jsx)("div",{className:"text-center text-[var(--text-tertiary)] text-[14px] py-4",children:w.I.t("No configuration required")})]})}function O(e){var t;let{onDisposed:i,connector:l}=e,{configureConnector:o}=(0,d.o)(),[c,u]=(0,k.useState)(()=>(function(e){var t;let i={};return((null===(t=e.mcpConfig)||void 0===t?void 0:t.extraConfig)||[]).forEach((e,t)=>{i["".concat(e.label,"-").concat(t)]=e.value||e.defaultValue||""}),i})(l)),[p,x]=(0,k.useState)(!1),f=(0,m.w)((e,t)=>{u(i=>({...i,[e]:t}))}),h=(0,m.w)(async()=>{var e,t,a,r;x(!0);let n={},s=(null===(e=l.mcpConfig)||void 0===e?void 0:e.extraConfig)||[];s.forEach((e,t)=>{let i=c["".concat(e.label,"-").concat(t)];void 0!==i&&(n[e.key||""]=i)});let d={...l,mcpConfig:{...l.mcpConfig,$typeName:"connectors.v1.MCPConfig",transportType:(null===(t=l.mcpConfig)||void 0===t?void 0:t.transportType)||y.o7.MCP_TRANSPORT_TYPE_UNSPECIFIED,instantOauth:(null===(a=l.mcpConfig)||void 0===a?void 0:a.instantOauth)||!1,needUserExtraConfig:(null===(r=l.mcpConfig)||void 0===r?void 0:r.needUserExtraConfig)||!1,extraConfig:s.map((e,t)=>({...e,$typeName:"connectors.v1.UserFormItem",value:c["".concat(e.label,"-").concat(t)]||e.defaultValue||""}))}};await o(d,!0),i(),x(!1)}),v=l.isInstalled?w.I.t("Save"):w.I.t("Connect"),g=l.isInstalled?w.I.t("Edit {connectorName}",{connectorName:l.name}):w.I.t("Connect {connectorName}",{connectorName:l.name}),b=l.isInstalled?w.I.t("Update the configuration for this connector"):w.I.t("Set up configurations to enable this connector"),C=((null===(t=l.mcpConfig)||void 0===t?void 0:t.extraConfig)||[]).every((e,t)=>{if(!e.isRequired)return!0;let i=c["".concat(e.label,"-").concat(t)];return i&&i.trim().length>0});return(0,a.jsx)(s.l,{onDisposed:i,closeIconVisible:!1,closeOnMaskClick:!p,className:"w-full max-w-[400px] bg-[var(--background-gray-main)]",headerClassName:"p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start overflow-clip relative w-full h-full",children:[(0,a.jsx)("div",{className:"flex gap-2.5 items-start justify-end pb-2.5 pl-5 pr-4 pt-5 relative shrink-0 w-full",children:(0,a.jsx)("div",{className:"flex gap-2.5 items-center justify-center relative shrink-0 size-7",children:(0,a.jsx)(r.A,{onClick:i,variant:"text",color:"gray",size:"small",shape:"round",className:"p-0 size-7",children:(0,a.jsx)(S.A,{size:18})})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 items-center justify-center px-5 py-0 relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 items-center justify-start relative shrink-0 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-center relative shrink-0",children:[(0,a.jsx)("div",{className:"flex gap-2 h-[41px] items-center justify-center p-2 relative rounded-lg shrink-0 w-10 bg-[var(--background-menu-white)] border border-[var(--border-main)]",children:(0,a.jsx)("div",{className:"relative shrink-0 size-7",children:(0,a.jsx)("div",{className:"absolute inset-[3.75%_16.04%_4.58%_13.13%]",children:(0,a.jsx)(T.f,{})})})}),(0,a.jsx)("div",{className:"overflow-clip relative shrink-0 size-4",children:(0,a.jsx)(_.A,{size:16,color:"var(--icon-tertiary)"})}),(0,a.jsx)("div",{className:"flex gap-2 h-[41px] items-center justify-center p-2 relative rounded-lg shrink-0 w-10 bg-[var(--background-menu-white)] border border-[var(--border-main)]",children:(0,a.jsx)(n.z,{uid:l.uid,size:24})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center text-center w-full",children:[(0,a.jsx)("h2",{className:"text-[var(--text-primary)] text-[20px] leading-[26px] font-semibold",children:g}),l.customDescription?(0,a.jsx)(L.o,{className:"relative shrink-0 text-[var(--text-tertiary)] text-[14px] w-full leading-[20px]",components:{a:e=>{let{children:t,href:i}=e;return(0,a.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--text-tertiary)] text-[14px] leading-[20px] underline",children:t})}},children:l.customDescription}):(0,a.jsx)("p",{className:"text-[var(--text-tertiary)] text-[14px] leading-[20px]",children:b})]})]}),(0,a.jsx)(V,{connector:l,formData:c,onInputChange:f}),(0,a.jsx)("div",{className:"flex gap-3 items-center justify-end relative w-full pb-6",children:(0,a.jsx)(r.A,{variant:"default",size:"large",color:"black",className:"w-full",onClick:h,disabled:!C||p,loading:p,children:v})})]})]})})}function z(e){var t,i,T,_;let{onDisposed:M,onDisposedAll:L,uid:P}=e,[E,A]=(0,k.useState)(!1),{deleteConnector:U,configureConnector:D,handleTryItOut:V,getConnector:z}=(0,d.o)(),H=(0,v.GV)(e=>g.h.selectors.connectorByUid(e,P)),B=(0,p.s)(R),W=(0,p.s)(F.$),G=(0,p.s)(O),Z=(0,u.W)(()=>{var e,t;return H&&((null===(e=H.builtConfig)||void 0===e?void 0:e.builtIn)||(null===(t=H.mcpConfig)||void 0===t?void 0:t.instantOauth))?"oauth":"form"}),K=(null==H?void 0:H.type)===y.uM.BYOK,Y=(null==H?void 0:H.type)===y.uM.BUILTIN||(null==H?void 0:H.type)===y.uM.MCP,$="form"===Z&&(null==H?void 0:null===(t=H.mcpConfig)||void 0===t?void 0:t.needUserExtraConfig)===!1,q=(0,m.w)(()=>{M()}),J=(0,m.w)(()=>{V(H),null==L||L()}),X=(0,m.w)(async()=>{H&&(K?B.open({connector:H}):Y&&("oauth"===Z?(A(!0),await D(H,!0)):$?(A(!0),await D(H)):G.open({connector:H})))}),Q=(0,m.w)(async()=>{H&&(K?H.userId&&""!==H.userId?W.open({uid:P}):B.open({connector:H}):Y&&("form"===Z?G.open({connector:H}):(A(!0),await D(H,!0))))}),ee=(0,m.w)(async()=>{H&&(U(H),M())});if((0,k.useEffect)(()=>{let e=()=>{!(null==H?void 0:H.isInstalled)&&(null==H?void 0:H.uid)&&z(H.uid),A(!1)};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[z,null==H?void 0:H.uid,null==H?void 0:H.isInstalled]),!H)return null;let et=[];return H.isInstalled&&(K?et.push({icon:b.A,label:w.I.t("Configure"),onClick:Q},{icon:C.A,label:w.I.t("Delete"),onClick:ee,variant:"error"}):Y&&("form"===Z&&et.push({icon:b.A,label:w.I.t("Configure"),onClick:Q}),(H.type===y.uM.BUILTIN||H.type===y.uM.MCP&&(null===(_=H.mcpConfig)||void 0===_?void 0:_.instantOauth))&&et.push({icon:b.A,label:w.I.t("Configure"),onClick:Q}),et.push({icon:H.type===y.uM.BUILTIN?j.A:C.A,label:H.type===y.uM.BUILTIN?w.I.t("Disconnect"):w.I.t("Delete"),onClick:ee,variant:"error"}))),(0,a.jsx)(s.l,{onDisposed:M,closeIconVisible:!1,className:"w-full max-w-[500px] bg-[var(--background-gray-main)] rounded-[20px] border border-[var(--border-main)]",headerClassName:"p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start overflow-clip relative w-full h-full",children:[(0,a.jsx)("div",{className:"bg-[var(--background-gray-main)] flex gap-6 items-center justify-start px-6 py-5 relative shrink-0 w-full",children:(0,a.jsx)("div",{className:"basis-0 flex gap-6 grow items-center justify-end min-h-px min-w-px p-0 relative shrink-0",children:(0,a.jsx)(r.A,{onClick:q,variant:"text",color:"gray",size:"small",shape:"round",className:"p-0",children:(0,a.jsx)(S.A,{size:20})})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-12 items-center justify-center ".concat(K?"pb-6":"pb-3"," pt-0 px-6 relative shrink-0 w-full"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center max-w-[600px] p-0 relative shrink-0 w-full",children:[(0,a.jsx)("div",{className:"bg-[var(--background-menu-white)] flex items-center justify-center p-[8px] relative rounded-xl shrink-0 size-16 border border-[var(--border-main)]",children:(0,a.jsx)(n.z,{uid:H.uid,size:40})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-start justify-center leading-[0] p-0 relative shrink-0 text-center w-full",children:[(0,a.jsx)("div",{className:"font-semibold overflow-ellipsis overflow-hidden relative shrink-0 text-[var(--text-primary)] text-[20px] tracking-[-0.44px] w-full",children:(0,a.jsx)("p",{className:"block leading-[26px]",children:H.name})}),(0,a.jsx)("div",{className:"font-normal relative shrink-0 text-[var(--text-tertiary)] tracking-[-0.154px] w-full",children:(0,a.jsx)("p",{className:"block text-[14px] leading-[20px]",children:H.description})})]}),(0,a.jsx)(c.j,{condition:Y&&(null===(i=H.mcpConfig)||void 0===i?void 0:i.needUserExtraConfig),children:(0,a.jsxs)("div",{className:"flex gap-2.5 items-start p-3 bg-[var(--fill-tsp-white-light)] rounded-xl",children:[(0,a.jsx)("div",{className:"flex items-center justify-center size-4 shrink-0 mt-0.5",children:(0,a.jsx)(x.m,{size:16,color:"var(--text-secondary)"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"text-[13px] leading-[18px] text-[var(--text-secondary)] tracking-[-0.091px]",children:w.I.t("This connector requires additional configuration")})})]})}),(0,a.jsx)(c.j,{condition:!H.isInstalled,children:(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",onClick:X,icon:(0,a.jsx)(I.A,{size:16}),loading:Y?E:void 0,children:w.I.t("Connect")})}),(0,a.jsx)(c.j,{condition:H.isInstalled,children:(0,a.jsxs)("div",{className:"flex gap-2.5",children:[(0,a.jsx)(r.A,{variant:"outline",size:"medium",onClick:J,icon:(0,a.jsx)(f.q,{size:16}),children:w.I.t("Try it out")}),(0,a.jsx)(o.A,{content:(0,a.jsx)(l.r,{items:et,width:"192px"}),placement:"bottom-start",children:(0,a.jsx)(r.A,{variant:"outline",className:"flex items-center gap-2",children:w.I.t("Manage")})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 items-start justify-start p-[12px] relative rounded-xl shrink-0 w-full bg-[var(--background-gray-main)] border border-[var(--border-main)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start p-0 relative shrink-0 w-full text-[14px] tracking-[-0.091px]",children:[(0,a.jsx)("div",{className:"basis-0 grow min-h-px min-w-px relative shrink-0 text-[var(--text-tertiary)]",children:(0,a.jsx)("p",{className:"leading-[20px]",children:w.I.t("Connector Type")})}),(0,a.jsx)("div",{className:"relative shrink-0 text-[var(--text-primary)] text-nowrap text-right",children:(0,a.jsx)("p",{className:"leading-[20px] whitespace-pre",children:H.type===y.uM.MCP?H.userId?w.I.t("Custom MCP"):w.I.t("MCP"):H.type===y.uM.BYOK?H.userId?w.I.t("Custom API"):w.I.t("API"):H.type===y.uM.BUILTIN?w.I.t("App"):w.I.t("Unknown")})})]}),(0,a.jsx)(c.j,{condition:!!H.connectorInfo,children:null===(T=H.connectorInfo)||void 0===T?void 0:T.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-0 relative shrink-0 w-full text-[14px] tracking-[-0.091px]",children:[(0,a.jsx)("div",{className:"basis-0 grow min-h-px min-w-px relative shrink-0 text-[var(--text-tertiary)]",children:(0,a.jsx)("p",{className:"leading-[20px] capitalize",children:e.label})}),(0,a.jsx)(c.j,{condition:!!e.link,children:(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"flex gap-1 items-center",children:(0,a.jsx)(N.A,{size:14,color:"var(--icon-blue)",className:"shrink-0 cursor-pointer"})})}),(0,a.jsx)(c.j,{condition:!e.link,children:(0,a.jsx)("span",{children:e.value})})]},e.label))})]})]}),(0,a.jsx)("div",{className:"text-center w-full pb-6",children:(0,a.jsx)("a",{className:"text-[13px] text-[var(--text-tertiary)] underline",href:h.bw.feedback.withParams({issueType:"CONNECTOR",secondaryType:"PROVIDE_FEEDBACK",connectorId:H.uid}),target:"_blank",rel:"noopener noreferrer",children:w.I.t("Provide feedback")})})]})})}},6719:(e,t,i)=>{"use strict";i.d(t,{d:()=>P});var a=i(2635),r=i(76743),n=i(33890),s=i(38933),l=i(41661),o=i(93578),c=i(19737),d=i(93607),u=i(19562),p=i(92803),m=i(15585),x=i(84974),f=i(54263),h=i(53708),v=i(47829),g=i(75958),y=i(9205),w=i(73677),b=i(23757),C=i(10065),j=i(69878),S=i(57271),I=i(3181),N=i(83532),k=i(74559),T=i(12150),_=i(12992),M=i(99515);let L=[{label:"STDIO",value:j.o7.MCP_TRANSPORT_TYPE_STDIO},{label:"SSE",value:j.o7.MCP_TRANSPORT_TYPE_SSE},{label:"HTTP",value:j.o7.MCP_TRANSPORT_TYPE_HTTP}];function P(e){var t;let{onDisposed:i,onDisposedAll:P,uid:E}=e,{uploadFileDirect:A}=(0,v.l)(),{createConnector:R,updateConnector:F,handleTryItOut:U,deleteConnector:D}=(0,p.o)(),[V,O]=(0,M.useState)(E),z=(0,w.GV)(e=>V?C.h.selectors.connectorByUid(e,V):void 0),H=!!z,[B,W]=(0,M.useState)(()=>{if(E&&(null==z?void 0:z.mcpConfig)){var e,t,i,a,r,n,s;let l=z.mcpConfig.transportType||j.o7.MCP_TRANSPORT_TYPE_HTTP,o=l===j.o7.MCP_TRANSPORT_TYPE_HTTP?(null===(e=z.mcpConfig.httpConfig)||void 0===e?void 0:e.customHeaders.map(e=>({key:e.key,value:e.value})))||[]:l===j.o7.MCP_TRANSPORT_TYPE_SSE&&(null===(t=z.mcpConfig.sseConfig)||void 0===t?void 0:t.customHeaders.map(e=>({key:e.key,value:e.value})))||[];return{name:z.name||"",transportType:l,iconUrl:z.iconUrl||"",description:z.description||"",serverUrl:(null===(i=z.mcpConfig.httpConfig)||void 0===i?void 0:i.serverUrl)||(null===(a=z.mcpConfig.sseConfig)||void 0===a?void 0:a.serverUrl)||"",command:(null===(r=z.mcpConfig.stdioConfig)||void 0===r?void 0:r.command)||"",note:z.mcpConfig.note||"",customHeaders:o,arguments:(null===(n=z.mcpConfig.stdioConfig)||void 0===n?void 0:n.args)||[],envVariables:(null===(s=z.mcpConfig.stdioConfig)||void 0===s?void 0:s.env.map(e=>({key:e.key,value:e.value})))||[]}}return{name:"",transportType:j.o7.MCP_TRANSPORT_TYPE_HTTP,iconUrl:"",description:"",serverUrl:"",command:"",customHeaders:[],arguments:[],envVariables:[]}}),[G,Z]=(0,M.useState)(!1),[K,Y]=(0,M.useState)(!1),[$,q]=(0,M.useState)(!1),[J,X]=(0,M.useState)(null),[Q,ee]=(0,M.useState)(null),[et,ei]=(0,M.useState)(null),[ea,er]=(0,M.useState)(!1),en=(0,w.GV)(b.R.selectors.userInfo),es=(0,h.W)(()=>!!(B.name.trim()&&(B.transportType!==j.o7.MCP_TRANSPORT_TYPE_STDIO||B.command.trim())&&(B.transportType!==j.o7.MCP_TRANSPORT_TYPE_HTTP&&B.transportType!==j.o7.MCP_TRANSPORT_TYPE_SSE||B.serverUrl.trim()))),el=(0,h.W)(()=>{var e,t,i,a,r,n,s,l,o,c,d,u,p,m,x,f;let h={name:B.name,transportType:B.transportType,iconUrl:B.iconUrl,description:B.description,serverUrl:B.transportType===j.o7.MCP_TRANSPORT_TYPE_HTTP||B.transportType===j.o7.MCP_TRANSPORT_TYPE_SSE?B.serverUrl:"",command:B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO?B.command:"",customHeaders:B.transportType===j.o7.MCP_TRANSPORT_TYPE_HTTP||B.transportType===j.o7.MCP_TRANSPORT_TYPE_SSE?B.customHeaders:[],arguments:B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO?B.arguments:[],envVariables:B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO?B.envVariables:[],note:B.note},v=(null==z?void 0:null===(e=z.mcpConfig)||void 0===e?void 0:e.transportType)||j.o7.MCP_TRANSPORT_TYPE_HTTP,g=v===j.o7.MCP_TRANSPORT_TYPE_HTTP?(null==z?void 0:null===(i=z.mcpConfig)||void 0===i?void 0:null===(t=i.httpConfig)||void 0===t?void 0:t.customHeaders.map(e=>({key:e.key,value:e.value})))||[]:v===j.o7.MCP_TRANSPORT_TYPE_SSE&&(null==z?void 0:null===(r=z.mcpConfig)||void 0===r?void 0:null===(a=r.sseConfig)||void 0===a?void 0:a.customHeaders.map(e=>({key:e.key,value:e.value})))||[],y={name:(null==z?void 0:z.name)||"",transportType:v,iconUrl:(null==z?void 0:z.iconUrl)||"",description:(null==z?void 0:z.description)||"",serverUrl:(null==z?void 0:null===(s=z.mcpConfig)||void 0===s?void 0:null===(n=s.httpConfig)||void 0===n?void 0:n.serverUrl)||(null==z?void 0:null===(o=z.mcpConfig)||void 0===o?void 0:null===(l=o.sseConfig)||void 0===l?void 0:l.serverUrl)||"",command:(null==z?void 0:null===(d=z.mcpConfig)||void 0===d?void 0:null===(c=d.stdioConfig)||void 0===c?void 0:c.command)||"",customHeaders:g,arguments:(null==z?void 0:null===(p=z.mcpConfig)||void 0===p?void 0:null===(u=p.stdioConfig)||void 0===u?void 0:u.args)||[],envVariables:(null==z?void 0:null===(x=z.mcpConfig)||void 0===x?void 0:null===(m=x.stdioConfig)||void 0===m?void 0:m.env.map(e=>({key:e.key,value:e.value})))||[],note:(null==z?void 0:null===(f=z.mcpConfig)||void 0===f?void 0:f.note)||""};return JSON.stringify(h)!==JSON.stringify(y)}),eo=(0,g.w)(()=>{let e={key:"",value:""};W(t=>{let i=[...t.customHeaders||[],e];return X(i.length-1),{...t,customHeaders:i}})}),ec=(0,g.w)(e=>{W(t=>({...t,customHeaders:(t.customHeaders||[]).filter((t,i)=>i!==e)}))}),ed=(0,g.w)((e,t,i)=>{W(a=>({...a,customHeaders:(a.customHeaders||[]).map((a,r)=>r===e?{...a,[t]:i}:a)}))}),eu=(0,g.w)(()=>{W(e=>{let t=[...e.arguments||[],""];return ee(t.length-1),{...e,arguments:t}})}),ep=(0,g.w)(e=>{W(t=>({...t,arguments:(t.arguments||[]).filter((t,i)=>i!==e)}))}),em=(0,g.w)((e,t)=>{W(i=>({...i,arguments:(i.arguments||[]).map((i,a)=>a===e?t:i)}))}),ex=(0,g.w)(()=>{let e={key:"",value:""};W(t=>{let i=[...t.envVariables||[],e];return ei(i.length-1),{...t,envVariables:i}})}),ef=(0,g.w)(e=>{W(t=>({...t,envVariables:(t.envVariables||[]).filter((t,i)=>i!==e)}))}),eh=(0,g.w)((e,t,i)=>{W(a=>({...a,envVariables:(a.envVariables||[]).map((a,r)=>r===e?{...a,[t]:i}:a)}))}),ev=(0,g.w)(()=>{x.f.selectFile(e=>{if(0===e.length)return;let t=e[0];t&&eg(t)},{accept:[".png",".jpg",".jpeg",".webp",".svg"]})}),eg=(0,g.w)(async e=>{Y(!0);try{let t=await A(e);t.fileUrl&&(W(e=>({...e,iconUrl:t.fileUrl})),(0,y.oR)({title:S.I.t("Icon uploaded successfully"),variant:"success"}))}catch(e){console.error("Upload failed:",e),(0,y.oR)({title:S.I.t("Failed to upload icon"),variant:"error"})}finally{Y(!1)}}),ey=(0,g.w)(()=>{U(z),null==P||P()}),ew=(0,g.w)(async()=>{let e;q(!0);let t={$typeName:"connectors.v1.Connector",userId:(null==en?void 0:en.userId)||"",uid:(null==z?void 0:z.uid)||(0,f.v)(),type:j.uM.MCP,name:B.name,iconUrl:B.iconUrl,description:B.description,brief:"",order:0,category:"",connectorInfo:[],isInstalled:!0,isEnabled:!0,displayGroup:j.Ap.MCP,isPublished:!0,isTranslated:!1,mcpConfig:{$typeName:"connectors.v1.MCPConfig",transportType:B.transportType,instantOauth:!1,needUserExtraConfig:!1,extraConfig:[],note:B.note,...B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO&&{stdioConfig:{$typeName:"connectors.v1.StdioConfig",command:B.command,args:B.arguments||[],env:(B.envVariables||[]).map(e=>({$typeName:"connectors.v1.VariableItem",key:e.key,value:e.value}))}},...B.transportType===j.o7.MCP_TRANSPORT_TYPE_HTTP&&{httpConfig:{$typeName:"connectors.v1.HttpConfig",serverUrl:B.serverUrl,customHeaders:(B.customHeaders||[]).map(e=>({$typeName:"connectors.v1.VariableItem",key:e.key,value:e.value}))}},...B.transportType===j.o7.MCP_TRANSPORT_TYPE_SSE&&{sseConfig:{$typeName:"connectors.v1.SSEConfig",serverUrl:B.serverUrl,customHeaders:(B.customHeaders||[]).map(e=>({$typeName:"connectors.v1.VariableItem",key:e.key,value:e.value}))}}}};if(H)await F(t)&&(e=t.uid);else{let a=await R(t);a&&(e=a.uid),i()}e&&O(e),q(!1)}),eb=(0,g.w)(async()=>{if(z){er(!0);try{await D(z),i()}catch(e){console.error(e)}er(!1)}});return(0,a.jsxs)(n.l,{title:S.I.t("MCP configuration"),width:600,className:"min-h-[714px] flex flex-col bg-[var(--background-gray-main)]",onDisposed:i,children:[(0,a.jsxs)("div",{className:"flex flex-col flex-1 p-5 pb-0 gap-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-1",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:S.I.t("Server Name")}),(0,a.jsx)(l.p,{placeholder:"e.g., My Custom Server",value:B.name,autoFocus:!0,onChange:e=>W(t=>({...t,name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-1",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:S.I.t("Transport Type")}),(0,a.jsx)(o.A,{visible:G,onVisibleChange:Z,content:(0,a.jsx)(s.r,{width:"var(--anchor-width)",items:L.map(e=>({label:e.label,checked:B.transportType===e.value,onClick:()=>{W(t=>({...t,transportType:e.value})),Z(!1)}}))}),children:(0,a.jsxs)("div",{className:(0,m.cn)("flex px-4 py-2 items-center gap-2 rounded-[10px] bg-[var(--fill-tsp-white-main)] w-full h-[40px] border-none cursor-pointer","text-[14px] leading-[22px] text-[var(--text-primary)]"),children:[(0,a.jsx)("span",{className:"flex-1 text-left",children:null===(t=L.find(e=>e.value===B.transportType))||void 0===t?void 0:t.label}),G?(0,a.jsx)(I.A,{size:16,color:"var(--text-tertiary)"}):(0,a.jsx)(N.A,{size:16,color:"var(--text-tertiary)"})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:[(0,a.jsx)("span",{children:S.I.t("Icon")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:S.I.t(" (optional)")})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.p,{className:"flex-1",placeholder:S.I.t("Paste in URL"),value:B.iconUrl,onChange:e=>W(t=>({...t,iconUrl:e.target.value}))}),(0,a.jsx)(r.A,{className:"h-[40px]",onClick:ev,disabled:K,children:K?S.I.t("Uploading..."):S.I.t("Upload")})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)]",children:[S.I.t("Note"),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-normal",children:S.I.t(" (optional)")})]}),(0,a.jsx)(c.T,{className:"h-[100px] resize-none border-none rounded-[10px] text-sm leading-[22px] text-[var(--text-primary)] w-full disabled:cursor-not-allowed placeholder:text-[var(--text-disable)] bg-[var(--fill-tsp-white-main)] pt-2 pr-3 pb-2 pl-4 focus:ring-[1.5px] focus:ring-[var(--border-dark)]",placeholder:S.I.t("Provide MCP docs or instructions to tell {product} how and when to use this MCP",{product:u.KR}),value:B.note,onChange:e=>W(t=>({...t,note:e.target.value}))})]}),(B.transportType===j.o7.MCP_TRANSPORT_TYPE_HTTP||B.transportType===j.o7.MCP_TRANSPORT_TYPE_SSE)&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:S.I.t("Server URL")}),(0,a.jsx)(l.p,{placeholder:B.transportType===j.o7.MCP_TRANSPORT_TYPE_HTTP?"https://mcp.yourserver.com/mcp":"https://mcp.yourserver.com/sse",value:B.serverUrl,onChange:e=>W(t=>({...t,serverUrl:e.target.value}))})]}),B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:S.I.t("Command")}),(0,a.jsx)(l.p,{placeholder:"e.g., python, node, ./script.sh",value:B.command,onChange:e=>W(t=>({...t,command:e.target.value}))})]}),(B.transportType===j.o7.MCP_TRANSPORT_TYPE_HTTP||B.transportType===j.o7.MCP_TRANSPORT_TYPE_SSE)&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:[(0,a.jsx)("span",{children:S.I.t("Custom headers")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:S.I.t(" (optional)")})]}),(0,a.jsx)(d.j,{condition:B.customHeaders&&B.customHeaders.length>0,children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(B.customHeaders||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(l.p,{className:"flex-1",placeholder:S.I.t("Header name"),value:e.key,onChange:e=>ed(t,"key",e.target.value),autoFocus:J===t,onFocus:()=>X(null)}),(0,a.jsx)(l.p,{className:"flex-1",placeholder:S.I.t("Header value"),value:e.value,onChange:e=>ed(t,"value",e.target.value)}),(0,a.jsx)(k.A,{className:"clickable",onClick:()=>ec(t),size:20,color:"var(--function-error)"})]},"header-".concat(t)))})}),(0,a.jsx)(r.A,{variant:"outline",size:"medium",className:"shrink-0 self-start",icon:(0,a.jsx)(T.A,{size:16}),onClick:eo,children:S.I.t("Add custom header")})]}),B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:S.I.t("Arguments")}),(0,a.jsx)(d.j,{condition:B.arguments&&B.arguments.length>0,children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(B.arguments||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(l.p,{className:"flex-1",placeholder:S.I.t("Enter argument value"),value:e,onChange:e=>em(t,e.target.value),autoFocus:Q===t,onFocus:()=>ee(null)}),(0,a.jsx)(k.A,{className:"clickable",onClick:()=>ep(t),size:20,color:"var(--function-error)"})]},"arg-".concat(t)))})}),(0,a.jsx)(r.A,{color:"gray",size:"small",className:"h-[36px] shrink-0 self-start bg-transparent border border-[var(--border-btn-main)]",icon:(0,a.jsx)(T.A,{size:16}),onClick:eu,children:S.I.t("Add arguments")})]}),B.transportType===j.o7.MCP_TRANSPORT_TYPE_STDIO&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-[14px] font-medium leading-[20px] text-[var(--text-primary)] tracking-[-0.154px]",children:[(0,a.jsx)("span",{children:S.I.t("Environment variables")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:S.I.t(" (optional)")})]}),(0,a.jsx)(d.j,{condition:B.envVariables&&B.envVariables.length>0,children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(B.envVariables||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(l.p,{className:"flex-1",placeholder:S.I.t("Variable name"),value:e.key,onChange:e=>eh(t,"key",e.target.value),autoFocus:et===t,onFocus:()=>ei(null)}),(0,a.jsx)(l.p,{className:"flex-1",placeholder:S.I.t("Variable value"),value:e.value,onChange:e=>eh(t,"value",e.target.value)}),(0,a.jsx)(k.A,{className:"clickable",onClick:()=>ef(t),size:20,color:"var(--function-error)"})]},"env-".concat(t)))})}),(0,a.jsx)(r.A,{color:"gray",size:"small",className:"h-[36px] shrink-0 self-start bg-transparent border border-[var(--border-btn-main)]",icon:(0,a.jsx)(T.A,{size:16}),onClick:ex,children:S.I.t("Add environment variable")})]})]}),(0,a.jsx)(d.j,{condition:null==z?void 0:z.uid,children:(0,a.jsxs)("div",{className:"flex justify-between p-5",children:[(0,a.jsx)(r.A,{variant:"outline",color:"danger",className:"flex items-center gap-2",onClick:eb,icon:(0,a.jsx)(k.A,{size:16}),loading:ea,children:S.I.t("Delete")}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(r.A,{variant:"outline",onClick:ey,disabled:el,icon:(0,a.jsx)(_.A,{size:16}),children:S.I.t("Try it out")}),(0,a.jsx)(r.A,{color:"black",onClick:ew,disabled:!es||!el,loading:$,children:S.I.t("Save")})]})]})}),(0,a.jsx)(d.j,{condition:!(null==z?void 0:z.uid),children:(0,a.jsx)("div",{className:"flex justify-end gap-3 p-5",children:(0,a.jsx)(r.A,{color:"black",onClick:ew,disabled:!es||$,loading:$,children:S.I.t("Save")})})})]})}},45624:(e,t,i)=>{"use strict";i.d(t,{e:()=>I});var a=i(43936),r=i(51416),n=i(75958),s=i(2635),l=i(76743),o=i(33890),c=i(41661),d=i(19562),u=i(15585),p=i(15038),m=i(80926),x=i(50973),f=i(63226);let h={src:"https://files.manuscdn.com/webapp/_next/static/media/InsertFigmaBg.cad924f5.webp"};var v=i(90264),g=i(67139),y=i(57271),w=i(68209),b=i(52874),C=i(73518),j=i(99515);function S(e){let{onDisposed:t}=e,[i,a]=(0,j.useState)(""),[r,S]=(0,j.useState)(!1),[N,k]=(0,j.useState)(""),{isFigmaUrl:T}=I(),{handleUploadFigmaFile:_}=(0,g.y)(),M=(0,n.w)(e=>{a(e),k("")}),L=(0,n.w)(()=>{if(!i.trim()){k("");return}return T(i)?"":y.I.t("Sorry, the Figma URL is invalid.")}),P=(0,n.w)(()=>{let e=L();e&&k(e)}),E=(0,n.w)(async()=>{let e=L();if(e){k(e);return}S(!0);try{await _(i),t(),v.T.emit("focusPrimaryInput"),v.T.emit("scrollAttachmentsToRight")}catch(e){p.P.getCustomErrorCode(e)===d.mF.FIGMA_URL_INVALID?k(y.I.t("Sorry, the Figma URL is invalid.")):k(p.P.formatErrorToString(e))}finally{S(!1)}});return(0,j.useEffect)(()=>{(0,m.C)({eventName:"import_figma_file_dialog_show"})},[]),(0,s.jsxs)(o.l,{width:440,style:{backgroundImage:"url(".concat(h.src,")"),backgroundSize:"100% auto",backgroundPosition:"left top"},className:"px-[24px] pt-[57px] pb-[24px] bg-no-repeat",headerClassName:"p-0",onDisposed:t,children:[(0,s.jsxs)("div",{className:"w-full flex justify-center items-center flex-col gap-[40px]",children:[(0,s.jsx)(x.P,{size:64}),(0,s.jsxs)("div",{className:"flex justify-center items-center w-full gap-[4px] flex-col px-[24px]",children:[(0,s.jsx)("div",{className:"text-[var(--text-primary)] text-lg font-[600] leading-[24px]",children:y.I.t("Choose a Figma frame")}),(0,s.jsx)("div",{className:"text-[var(--text-tertiary)] text-center text-sm leading-[22px]",children:y.I.t("Turn your design into a live web app. Generate, preview and edit code instantly.")})]})]}),(0,s.jsxs)("div",{className:"px-[24px] flex flex-col gap-[4px] mt-[12px]",children:[(0,s.jsxs)("div",{className:(0,u.cn)("text-[var(--function-error)] text-xs flex items-center justify-start gap-[4px] h-[16px]",N?"visible":"invisible"),children:[(0,s.jsx)(f.m,{size:14,color:"var(--function-error)"}),(0,s.jsx)("span",{className:"truncate",title:N,children:N})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-[12px] mt-[4px]",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(c.p,{placeholder:y.I.t("Paste your Figma URL here"),value:i,onChange:e=>M(e.target.value),autoFocus:!0,onBlur:P,error:!!N,className:"w-full rounded-[10px] bg-[var(--fill-tsp-white-main)]",onKeyDown:e=>{(0,b.Ay)("enter",e)&&(E(),e.preventDefault(),e.stopPropagation())}})}),(0,s.jsx)(l.A,{variant:"default",color:"black",size:"large",className:"w-full",onClick:E,loading:r,disabled:!i.trim(),children:y.I.t("Import and generate")})]})]}),(0,s.jsxs)("div",{className:(0,u.cn)("mt-[32px] rounded-[10px] border-[1.5px] border-[var(--border-main)]","px-[12px] py-[10px] flex flex-col gap-[4px]"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 w-full",children:[(0,s.jsx)(C.A,{className:"size-4 text-[var(--icon-primary)]"}),(0,s.jsx)("span",{className:"text-[var(--text-primary)] text-sm font-medium",children:y.I.t("How to get a Figma frame URL ?")})]}),(0,s.jsx)("div",{className:"text-[var(--text-tertiary)] text-[13px] leading-[18px] w-full",children:(0,s.jsx)(w.p,{S:y.I.t('Right click on a frame > "Copy/Paste as" > "Copy link to selection"'),components:{span:e=>(0,s.jsx)("span",{className:"font-medium",children:e})}})})]})]})}let I=()=>{let{open:e}=(0,r.s)(S),{checkFileConnectStatus:t}=(0,a.h)(),i=(0,n.w)(async i=>{await t("figma",i)&&e()}),s=(0,n.w)(e=>{try{let t=new URL(e),i=t.searchParams.get("node-id")||"",a=t.pathname.split("/"),r=a.findIndex(e=>"design"===e);if(-1===r||r+2>=a.length)throw Error("Invalid Figma URL");let n=a[r+1]||"",s=a[r+2]||"",l=s?decodeURIComponent(s):"";return{nodeId:i,fileKey:n,fileName:l}}catch(e){return console.error(e),null}});return{openImportFigmaFileDialog:i,isFigmaUrl:(0,n.w)(e=>/^https:\/\/www\.figma\.com\/design\/[\w-]+\/.*\?node-id=[\w:-]+/.test(e)),getFigmaParams:s}}},36353:(e,t,i)=>{"use strict";i.d(t,{A:()=>y,d:()=>h});var a=i(43936),r=i(84974),n=i(15038),s=i(17282),l=i(54263),o=i(75958),c=i(9205),d=i(21284),u=i(32549),p=i(54971),m=i(96263),x=i(67139),f=i(57271);let h=()=>{let e=(0,d.jL)(),{checkFileConnectStatus:t}=(0,a.h)(),{handleUploadFiles:i}=(0,x.y)(),s=(0,o.w)(()=>{var e;let t=p.U.selectors.googleDriveConnector(d.M_.getState());return(null==t?void 0:null===(e=t.connectInfo)||void 0===e?void 0:e.token)||null}),h=(0,o.w)(()=>{e(m.K.actions.closeGoogleDrivePicker())}),w=(0,o.w)(async(i,a)=>(await t("google_drive",a),e(m.K.actions.openGoogleDrivePicker(i)),new Promise(e=>{y.on("picked",t=>{let{docs:i}=t;h(),e(i)}),y.on("canceled",()=>{h(),e([])})}))),b=(0,o.w)(async t=>{(await w({multiselect:!0,type:"file"},t)).forEach(async t=>{let a={id:(0,l.v)(),fileObject:new File([],t.name,{type:t.mimeType}),progress:0,status:"pending",previewUrl:t.embedUrl,extra:{type:"google_drive",embedUrl:t.embedUrl},type:"file"};try{e(u.V.actions.fileAdded(a));let r=await C(t);r?(e(u.V.actions.fileRemoved(a.id)),i([r],{extra:{type:"google_drive",embedUrl:t.embedUrl},mimeType:t.mimeType})):e(u.V.actions.fileFailed({id:a.id,error:f.I.t("Failed to download file"),disableRetry:!0}))}catch(t){e(u.V.actions.fileFailed({id:a.id,error:n.P.formatErrorToString(t),disableRetry:!0}))}})}),C=async e=>{try{let i=async t=>{if(200!==t.status)throw f.I.t("Failed to download file");let i=await t.blob();return new File([i],g(e),{type:i.type})};await t("google_drive");let a=s();if(S(e)){let t=v(e);if(!t)throw f.I.t("Unsupported file type");let r="https://www.googleapis.com/drive/v3/files/".concat(e.id,"/export?mimeType=").concat(t),n=await fetch(r,{headers:{Authorization:"Bearer ".concat(a)}});if(!n.ok)throw f.I.t("Google auth error");return i(n)}{let t="https://www.googleapis.com/drive/v3/files/".concat(e.id,"?alt=media"),r=await fetch(t,{headers:{Authorization:"Bearer ".concat(a)}});if(!r.ok)throw f.I.t("Google auth error");return i(r)}}catch(e){(0,c.oR)({title:n.P.formatErrorToString(e),variant:"error"})}},j=(0,o.w)(async e=>{let{file:i,folderId:a,convertToDoc:n}=e;await t("google_drive");let l=s(),o=r.f.getFileExtName(i.name),c={name:i.name,mimeType:i.type,parents:a?[a]:void 0};("txt"===o||"md"===o||n)&&(c={...c,mimeType:"application/vnd.google-apps.document",name:i.name.split(".")[0]||i.name}),("csv"===o||"xlsx"===o||"xls"===o)&&(c={...c,mimeType:"application/vnd.google-apps.spreadsheet",name:i.name.split(".")[0]||i.name});let d=new FormData;d.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),d.append("file",new File([i],c.name,{type:i.type}));let u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:new Headers({Authorization:"Bearer "+l}),body:d});if(!u.ok)throw f.I.t("Google auth error");return u.json()}),S=e=>e.mimeType.startsWith("application/vnd.google-apps.");return{openGoogleDrivePicker:w,getGoogleDriveToken:s,saveToGoogleDrive:j,checkIsGoogleDriveFolder:e=>"application/vnd.google-apps.folder"===e.mimeType,checkIsGoogleDriveFile:S,handleChooseGoogleDriveFile:b}},v=e=>"application/vnd.google-apps.spreadsheet"===e.mimeType?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"application/vnd.google-apps.document"===e.mimeType?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":"application/vnd.google-apps.presentation"===e.mimeType?"application/vnd.openxmlformats-officedocument.presentationml.presentation":null,g=e=>"application/vnd.google-apps.spreadsheet"===e.mimeType?"".concat(e.name,".xlsx"):"application/vnd.google-apps.document"===e.mimeType||"application/vnd.google-apps.presentation"===e.mimeType?"".concat(e.name,".pdf"):e.name,y=new s.b},4752:(e,t,i)=>{"use strict";i.d(t,{K:()=>j});var a=i(43936),r=i(84974),n=i(15038),s=i(54263),l=i(51416),o=i(75958),c=i(9205),d=i(93347),u=i(73677),p=i(32549),m=i(54971),x=i(67139),f=i(57271),h=i(2635),v=i(33890),g=i(7487),y=i(31867),w=i(21284),b=i(99515);let C=e=>{let{onDisposed:t,connectType:i,type:a,multiselect:r,getAccessToken:l}=e,d=(0,b.useRef)(null),{createMessageHandler:u}=j(),{isDark:p}=(0,y.D)(),x=(0,w.GV)(m.U.selectors.oneDriveBusinessConnector),C=(0,o.w)(async()=>{var o,h;if(!(null===(o=d.current)||void 0===o?void 0:o.contentWindow))return;let v=await (null==l?void 0:l());if(!v)return;let g=d.current.contentWindow,y=(0,s.v)(),{messageHandler:b,portClose:C}=u({win:g,channelId:y,accessToken:v,onPick:i=>{e.onPick(i),t()},onClose:()=>{t()}});try{let e=new URLSearchParams,t=m.U.selectors.businessConnectorWebUrl(w.M_.getState()),n=t&&"one_drive_business"===i?new URL(t).origin:"",s={sdk:"8.0",messaging:{channelId:y,origin:window.location.origin},authentication:{},entry:{sharePoint:{byPath:{list:"one_drive_business"===i&&(null==x?void 0:null===(h=x.connectInfo)||void 0===h?void 0:h.webUrl)?x.connectInfo.webUrl:"https://onedrive.live.com"}}},selection:{mode:r?"multiple":"single"},theme:p?"dark":"default",typesAndSources:{mode:"file"===a?"files":"folders"}};e.set("filePicker",JSON.stringify(s)),e.set("locale",f.I.translationManager.locale);let l="".concat(n?"".concat(n,"/_layouts/15/FilePicker.aspx"):"https://onedrive.live.com/picker","?").concat(e.toString()),o=g.document.createElement("form");o.setAttribute("action",l),o.setAttribute("method","POST");let c=g.document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","access_token"),c.setAttribute("value",v),o.appendChild(c),g.document.body.appendChild(o),o.submit(),window.addEventListener("message",b)}catch(e){(0,c.oR)({variant:"error",title:f.I.t(n.P.formatErrorToString(e))}),t()}return()=>{window.removeEventListener("message",b),C()}});return(0,b.useEffect)(()=>{C()},[C]),(0,h.jsx)(v.l,{onDisposed:t,className:"max-w-[90%] w-[1052px] p-0 bg-transparent shadow-none border-none rounded-none",headerClassName:"hidden",closeIconVisible:!1,children:(0,h.jsxs)("div",{className:"w-full h-[700px] max-h-[80%] relative",children:[(0,h.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-[var(--background-menu-white)] user-select-none flex items-center justify-center",children:(0,h.jsx)(g.R,{})}),(0,h.jsx)("iframe",{ref:d,className:"w-full h-full relative z-10"})]})})},j=()=>{let{checkFileConnectStatus:e}=(0,a.h)(),t=(0,u.jL)(),{handleUploadFiles:i}=(0,x.y)(),{open:h}=(0,l.s)(C,{closeOnEsc:!1,singleton:!0}),v=(0,o.w)(async(t,i)=>{var a;let{connectType:r}=t;if(!await e(r,i))return[];let n=m.U.selectors.oneDrivePersonalConnector(u.M_.getState()),s=(null==n?void 0:null===(a=n.connectInfo)||void 0===a?void 0:a.token)||"";return"one_drive_personal"!==r||s?new Promise(e=>{h({...t,getAccessToken:"one_drive_business"===r?b:()=>s,onPick:t=>{e(t)}})}):((0,c.oR)({variant:"error",title:f.I.t("OneDrive auth error")}),[])}),g=async t=>{var i;let{connectType:a,item:r}=t;await e(a);let n="one_drive_personal"===a?m.U.selectors.oneDrivePersonalConnector(u.M_.getState()):m.U.selectors.oneDriveBusinessConnector(u.M_.getState()),s=null==n?void 0:null===(i=n.connectInfo)||void 0===i?void 0:i.token,l="one_drive_business"===a?"https://graph.microsoft.com/v1.0/drives":"https://api.onedrive.com/v1.0/drives",o=await fetch("".concat(l,"/").concat(r.parentReference.driveId,"/items/").concat(r.id),{headers:{Authorization:"Bearer ".concat(s)}});if(!o.ok)throw f.I.t("OneDrive download file error");let c=await o.json(),d="one_drive_business"===a?c["@microsoft.graph.downloadUrl"]:c["@content.downloadUrl"];if(!d)throw f.I.t("OneDrive download url not found");let p=await fetch(d);if(!p.ok)throw f.I.t("OneDrive download file error");return new File([await p.blob()],r.name)},y=(0,o.w)(async t=>{var i;let{file:a,folderId:n="root",connectType:s}=t;await e(s);let l="one_drive_personal"===s?m.U.selectors.oneDrivePersonalConnector(u.M_.getState()):m.U.selectors.oneDriveBusinessConnector(u.M_.getState()),o=null==l?void 0:null===(i=l.connectInfo)||void 0===i?void 0:i.token,c="one_drive_business"===s?"https://graph.microsoft.com/v1.0/me/drive/items/".concat(n,":/").concat(r.f.safeEncodeURIComponent(a.name),":/content"):"https://api.onedrive.com/v1.0/drive/items/".concat(n,":/").concat(r.f.safeEncodeURIComponent(a.name),":/content"),d=await fetch(c,{method:"PUT",headers:{Authorization:"Bearer ".concat(o),"Content-Type":a.type},body:a});if(!d.ok)throw f.I.t("OneDrive auth error");return(await d.json()).webUrl||"https://onedrive.live.com/?id=root"}),w=(0,o.w)(async(e,a)=>{(await v({connectType:e,type:"file",multiselect:!0},a)).forEach(async a=>{let r={id:(0,s.v)(),fileObject:new File([],a.name),progress:0,status:"pending",previewUrl:a.webUrl,extra:{type:e,embedUrl:a.webUrl},type:"file"};try{t(p.V.actions.fileAdded(r));let n=await g({connectType:e,item:a});n?(t(p.V.actions.fileRemoved(r.id)),i([n],{extra:{type:e,embedUrl:a.webUrl}})):t(p.V.actions.fileFailed({id:r.id,error:f.I.t("Failed to download file"),disableRetry:!0}))}catch(e){t(p.V.actions.fileFailed({id:r.id,error:n.P.formatErrorToString(e),disableRetry:!0}))}})}),b=(0,o.w)(async()=>{let e=m.U.selectors.businessConnectorWebUrl(u.M_.getState());if(e)try{let t=new URL(e).origin;return(await d.F.AppOAuthService.getOneDriveBusinessScopedToken({scope:"".concat(t,"/.default")})).token}catch(e){return(0,c.oR)({variant:"error",title:f.I.t(n.P.formatErrorToString(e))}),""}});return{saveToOneDrive:y,openOneDrivePicker:v,createMessageHandler:e=>{let{win:t,channelId:i,accessToken:a,onPick:r,onClose:n}=e,s=null;return{messageHandler:async e=>{if(e.source!==t)return;let l=e.data;if("initialize"===l.type&&l.channelId===i){if(!(s=e.ports[0]||null))return;null==s||s.addEventListener("message",async e=>{if(s){if("notification"===e.data.type);else if("command"===e.data.type){let i=e.data.data;if("authenticate"===i.command){try{s.postMessage({type:"result",id:e.data.id,data:{result:"token",token:a}})}catch(e){console.error("Authentication error:",e)}return}if("open"===i.command){s.postMessage({type:"result",id:e.data.id});return}if("close"===i.command){n(),t.close();return}"pick"===i.command&&(s.postMessage({type:"result",id:e.data.id}),r(i.items))}else console.warn("Unsupported message type: ".concat(e.data.type))}}),s.start(),s.postMessage({type:"activate"})}},portClose:()=>{null==s||s.close()}}},downloadOneDriveFile:g,handleChooseOneDriveFile:w}}},55544:(e,t,i)=>{"use strict";i.d(t,{Y:()=>n});var a=i(84974),r=i(39301);class n{async loadFile(){var e;this.response=await fetch(this.url),(null===(e=this.options)||void 0===e?void 0:e.previewType)||(this.previewType=null,this.detectPreviewType(),"code"===this.previewType&&this.detectCodeLanguage())}getFileName(){let e=new URL(this.url||""),t="";return t||function(){let i=e.hash.split("#").pop()||"";i&&i.startsWith("filename=")&&(t=decodeURIComponent(i.split("=")[1]||""))}(),t||(t=this.checkFilenameInContentDisposition(e.searchParams.get("response-content-disposition")||"")||""),t||(t=decodeURIComponent(e.pathname.split("/").pop()||"untitled")),t.split(/\/|\\/).pop()||t}getFileExt(){let e=this.getFileName();return a.f.getFileExtName(e)||""}createCommonPreviewData(){var e,t,i;let a=null===(e=this.response)||void 0===e?void 0:e.headers.get("content-length"),r=a?parseInt(a,10):void 0,n=null!==(i=null===(t=this.response)||void 0===t?void 0:t.headers.get("last-modified"))&&void 0!==i?i:0;return{originalFilename:this.getFileName(),originalFileUrl:this.url||void 0,size:r,lastModified:new Date(n)}}detectPreviewType(){this.detectPreviewTypeByFilename(),this.previewType||this.detectPreviewTypeByExtension(),this.previewType||this.detectPreviewTypeByContentType()}detectPreviewTypeByFilename(){let e=this.getFileName();e&&(this.previewType=r.e.detectFileTypeByFilename(e))}detectPreviewTypeByContentType(){if(!this.response)return;let e=this.response.headers.get("content-type");e&&(this.previewType=r.e.detectFileTypeByContentType(e))}detectPreviewTypeByExtension(){if(!this.url)return;let e=this.getFileExt();e&&(this.previewType=r.e.detectFileTypeByExtension(e))}detectCodeLanguage(){this.detectCodeLanguageByExtension(),this.codeLanguage||this.detectCodeLanguageByContentType()}detectCodeLanguageByContentType(){if(!this.response)return;let e=this.response.headers.get("content-type");e&&(e.includes("application/json")?this.codeLanguage="json":e.includes("text/javascript")||e.includes("application/javascript")?this.codeLanguage="javascript":e.includes("text/typescript")?this.codeLanguage="typescript":e.includes("text/css")&&(this.codeLanguage="css"))}detectCodeLanguageByExtension(){if(!this.url)return;let e=this.getFileExt();e&&(this.codeLanguage=({ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",java:"java",go:"go",rb:"ruby",php:"php",css:"css",json:"json",rs:"rust",cs:"csharp",xml:"xml",yaml:"yaml",yml:"yaml",sql:"sql",sh:"bash",bash:"bash",cpp:"cpp",c:"c",kt:"kotlin",swift:"swift",dart:"dart",scala:"scala",dockerfile:"dockerfile",graphql:"graphql",vue:"vue",scss:"scss",less:"less",txt:"plaintext"})[e]||"plaintext")}checkFilenameInContentDisposition(e){if(e)for(let t of e.split(";")){let e=t.trim();if(e.startsWith("filename*=UTF-8"))return decodeURIComponent(e.split("''")[1]||"");if(e.startsWith("filename="))return decodeURIComponent(e.slice(9).replace(/"/g,""))}}constructor(e,t){this.url=e,this.options=t,this.previewType=null,this.codeLanguage=null,this.response=null,(null==t?void 0:t.previewType)?this.previewType=t.previewType:this.detectPreviewType()}}},92617:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});var a=i(84974);class r{async parse(e){if(!a.f.isMobile()){let t=e.url;if(t.startsWith("blob:")){let e=await fetch(t),i=await e.json();return{...i,slideIds:i.slideIds||[],lastModified:new Date,type:"slides"}}}if(await e.loadFile(),!e.response)throw Error("No response available in loader");if(!e.response.ok)throw Error("Failed to fetch file");try{let t=await e.response;if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let i=await t.json(),a=e.getFileName().replace(/\.slides$/,"");return{...i,slideIds:i.slide_ids,lastModified:new Date(t.headers.get("Last-Modified")||""),type:"slides",currentSlideId:a}}catch(e){throw console.error("Error parsing binary file:",e),Error("Failed to parse binary file")}}}},43856:(e,t,i)=>{"use strict";i.d(t,{l:()=>c});var a=i(80926),r=i(84974),n=i(55544);class s{async parse(e){if(!r.f.isMobile()){let t=e.url;try{if(t.startsWith("blob:"))return{type:"pdf",url:t,originalFilename:e.getFileName(),originalFileUrl:t};let i=await fetch(t,{method:"HEAD"}),a=i.headers.get("content-type"),r=i.headers.get("content-disposition");if(a&&a.includes("application/pdf")&&(null==r?void 0:r.startsWith("inline;")))return{type:"pdf",url:t,originalFilename:e.getFileName(),originalFileUrl:t}}catch(e){console.error("Error checking PDF file type:",e)}}if(await e.loadFile(),!e.response)throw Error("No response available in loader");if(!e.response.ok)throw Error("Failed to fetch file");try{let t=await e.response.arrayBuffer(),i=e.createCommonPreviewData(),a=new File([t],i.originalFilename,{type:"application/pdf"});if("pdf"!==e.previewType)throw Error("Unsupported preview type: ".concat(e.previewType));return{...i,type:"pdf",pdfFile:a}}catch(e){throw console.error("Error parsing binary file:",e),Error("Failed to parse binary file")}}}var l=i(92617),o=i(55662);class c{async doParse(e,t){let i=await this._doParse(e,t);return(0,a.C)({eventName:"file_preview_parse",extData:{type:i.type}}),i}async _doParse(e,t){let a=new n.Y(e);t(a.getFileName());let c={...a.createCommonPreviewData(),type:"unsupported"},d={...a.createCommonPreviewData(),type:"networkError"};if(!a.previewType)return c;try{switch(a.previewType){case"slides":try{let e=new l.V;return await e.parse(a)}catch(e){return console.error("Error parsing slides:",e),d}case"pdf":{let e=new s;return await e.parse(a)}case"table":{let{TablePreviewerParser:e}=await i.e(90437).then(i.bind(i,90437)),t=new e;return await t.parse(a)}case"code":case"html":case"markdown":{let e=new o.C;return await e.parse(a)}case"image":return{...a.createCommonPreviewData(),type:"image",url:a.url||""};case"svg":return{...a.createCommonPreviewData(),type:"svg",url:a.url||""};case"video":{let{playable:t}=await r.f.checkVideoPlayability(e);if(t)return{...a.createCommonPreviewData(),type:"video",url:a.url||""};break}case"audio":{let{playable:t}=await r.f.checkAudioPlayability(e);if(t)return{...a.createCommonPreviewData(),type:"audio",url:a.url||""};break}case"space":return{...a.createCommonPreviewData(),type:"space",url:a.url};case"unsupported":break;default:{let e=a.previewType;console.error("Unhandled preview type: ".concat(e))}}return c}catch(e){return console.error("Error parsing file:",e),c}}}},55662:(e,t,i)=>{"use strict";i.d(t,{C:()=>a});class a{async parse(e){if(await e.loadFile(),!e.response)throw Error("No response available in loader");try{let t=await e.response.text(),i=e.createCommonPreviewData();switch(i.source=t,e.previewType){case"code":return{...i,type:"code",lang:e.codeLanguage||"plaintext",content:t};case"html":return{...i,type:"html",content:t};case"markdown":return{...i,type:"markdown",content:t};default:return{...i,type:"code",lang:"plaintext",content:t}}}catch(e){throw console.error("Error parsing text file:",e),Error("Failed to parse text file")}}}},52623:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i(2635),r=i(15585);let n=(0,i(69039).default)(()=>Promise.all([i.e(6624),i.e(62692),i.e(6406)]).then(i.bind(i,6406)),{loadableGenerated:{webpack:()=>[6406]},ssr:!1}),s=function(e){let{data:t,onClick:i}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex-1 min-h-0 flex items-center justify-center p-5 md:p-10"),onClick:i,children:(0,a.jsx)("div",{className:(0,r.cn)("rounded-xl bg-[var(--background-menu-white)] w-full"),style:{"--plyr-audio-controls-background":"transparent","--plyr-audio-control-color":"var(--icon-primary)","--plyr-audio-control-color-hover":"var(--icon-primary)","--plyr-audio-control-background-hover":"var(--fill-tsp-gray-main)","--plyr-range-fill-background":"var(--text-primary)"},children:(0,a.jsx)(n,{source:{sources:[{src:t.url}],type:"audio"},preload:"metadata",options:{settings:[]}})})})}},70654:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var a=i(2635),r=i(78308),n=i(15585),s=i(75958),l=i(54762),o=i(57271),c=i(56632),d=i(66343),u=i(50806),p=i(99515),m=i(52623),x=i(63176);let f=["image","svg"],h=function(e){let{className:t,data:i,videoAutoPlay:h,mediaClassName:v}=e,g=(0,p.useRef)(null),[y,w]=(0,p.useState)(1),[b,C]=(0,p.useState)(!1),[j,S]=(0,p.useState)({x:0,y:0}),I=(0,p.useRef)({x:0,y:0}),{handleImageActionDownload:N}=(0,l.rN)(),k=(0,p.useCallback)(()=>{w(e=>Math.min(e+.25,3))},[]),T=(0,p.useCallback)(()=>{w(e=>Math.max(e-.25,.25))},[]);(0,p.useEffect)(()=>{let e=g.current;if(!e)return;let t=e=>{e.preventDefault();let t=1===e.deltaMode?.05:.002,i=-e.deltaY*t;w(e=>Math.max(.25,Math.min(3,e+i)))};return e.addEventListener("wheel",t,{passive:!1}),()=>e.removeEventListener("wheel",t)},[]);let _=e=>{f.includes(i.type)&&(e.target.releasePointerCapture(e.pointerId),C(!1))},M=e=>{e.preventDefault()},L=(0,s.w)(()=>{N({type:"image",url:i.url,originalFilename:i.originalFilename})}),P={transform:"translate(".concat(j.x,"px, ").concat(j.y,"px) scale(").concat(y,")"),cursor:b?"grabbing":"grab"},E=(0,n.cn)("max-h-full max-w-full touch-none",v);return(0,a.jsxs)("div",{className:(0,n.cn)("relative h-full w-full select-none",t),children:[(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:(0,n.cn)("z-20 absolute top-8 left-1/2 -translate-x-1/2 right-auto bottom-auto flex items-center rounded-lg bg-[#0000001f] px-2 py-1 backdrop-blur-2xl"),children:[f.includes(i.type)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(r.m,{title:o.I.t("Zoom out"),children:(0,a.jsx)("button",{onClick:T,className:"cursor-pointer rounded p-1 hover:bg-[var(--fill-tsp-gray-main)]",children:(0,a.jsx)(c.A,{size:20,className:"text-white"})})}),(0,a.jsxs)("span",{className:"min-w-[40px] text-center text-sm text-white",children:[Math.round(100*y),"%"]}),(0,a.jsx)(r.m,{title:o.I.t("Zoom in"),children:(0,a.jsx)("button",{onClick:k,className:"cursor-pointer rounded p-1 hover:bg-[var(--fill-tsp-gray-main)]",children:(0,a.jsx)(d.A,{size:20,className:"text-white"})})})]}),(0,a.jsx)("span",{className:"w-[1px] h-[16px] bg-[#ffffff33] mx-3"})]}),(0,a.jsx)(r.m,{title:o.I.t("Download"),children:(0,a.jsxs)("button",{onClick:L,className:"flex justify-center items-center gap-1.5 cursor-pointer rounded p-1 pl-2 hover:bg-[var(--fill-tsp-gray-main)]",children:[(0,a.jsx)(u.A,{size:20,className:"text-white"}),(0,a.jsx)("span",{className:"text-sm text-white",children:o.I.t("Download")})]})})]}),(0,a.jsx)("div",{ref:g,className:"flex h-full w-full items-center justify-center overflow-hidden p-4",onPointerDown:e=>{0===e.button&&f.includes(i.type)&&(e.target.setPointerCapture(e.pointerId),C(!0),I.current={x:e.clientX-j.x,y:e.clientY-j.y})},onPointerMove:e=>{b&&f.includes(i.type)&&S({x:e.clientX-I.current.x,y:e.clientY-I.current.y})},onPointerUp:_,onPointerCancel:_,children:(0,a.jsx)(()=>{let{type:e}=i;return"video"===e?(0,a.jsx)(x.default,{className:"w-full h-full",data:{url:i.url,originalFilename:i.originalFilename,type:i.type},options:{controls:["play-large","play","progress","current-time","mute","volume","captions","settings","airplay","fullscreen"],autoplay:h},onClick:e=>{e.stopPropagation()}}):"audio"===e?(0,a.jsx)(m.default,{data:i,onClick:e=>{e.stopPropagation()}}):"image"===e||"svg"===e?(0,a.jsx)("img",{src:i.url,alt:i.originalFilename,className:E,style:P,draggable:!1,onDragStart:M,onClick:e=>{e.stopPropagation()}}):null},{})})]})}},84345:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});class a{sendMessage(e){if(e.to!==this.currentEndpoint){if("content"===e.to){var t;if(!(null===(t=this.iframeElement)||void 0===t?void 0:t.contentWindow))return;this.iframeElement.contentWindow.postMessage(this.packMessage(e),"*")}"container"===e.to&&window.parent.postMessage(this.packMessage(e),"*")}}listenMessage(e){return this.messageQueue.push({type:e.type,callback:e.callback}),()=>{this.messageQueue=this.messageQueue.filter(t=>t.callback!==e.callback)}}updateIframeElement(e){this.iframeElement=e}init(e){this.inited||(this.inited=!0,this.currentEndpoint=e.currentEndpoint,window.addEventListener("message",e=>{let t=e.data;"SpacePreviewerChannel"===t.type&&this.messageQueue.forEach(e=>{e.type===t.payload.type&&t.payload.to===this.currentEndpoint&&e.callback(t.payload.payload)})}))}packMessage(e){return{type:"SpacePreviewerChannel",payload:{...e,from:this.currentEndpoint}}}constructor(){this.iframeElement=null,this.currentEndpoint=null,this.messageQueue=[],this.inited=!1}}let r=new a},63176:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i(2635),r=i(15585);let n=(0,i(69039).default)(()=>Promise.all([i.e(6624),i.e(62692),i.e(6406)]).then(i.bind(i,6406)),{loadableGenerated:{webpack:()=>[6406]},ssr:!1}),s=function(e){let{data:t,className:i,options:s,onClick:l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex-1 min-h-0 flex items-center justify-center p-5 md:p-10",i),onClick:l,children:(0,a.jsxs)("div",{className:(0,r.cn)("w-full overflow-hidden flex-1 min-h-[60%] flex","max-h-full relative"),style:{"--plyr-video-control-color":"var(--icon-white)","--plyr-range-fill-background":"var(--icon-white)","--plyr-video-control-background-hover":"var(--fill-tsp-gray-main)","--plyr-video-background":"transparent",clipPath:"inset(0 0 0 0 round 12px)"},children:[(0,a.jsx)("div",{className:(0,r.cn)("w-full h-full absolute inset-0 bg-black -z-10"),style:{borderRadius:"12.5px"}}),(0,a.jsx)("style",{children:".plyr__control--overlaid {\n            background:var(--icon-white);\n            color:#34322D;\n            opacity:1;\n          }\n\n          .plyr__control--overlaid:hover {\n            background:var(--icon-white)!important;\n            color:#34322D!important;\n            opacity:0.85;\n          }\n\n          .plyr--video {\n            width:100%;\n          }\n\n          .plyr--audio {\n            width:100%;\n          }\n          "}),(0,a.jsx)(n,{source:{sources:[{src:t.url}],type:t.type},options:{settings:[],...s}})]})})}},6537:(e,t,i)=>{"use strict";i.d(t,{h:()=>g});var a=i(2635),r=i(76743),n=i(88387),s=i(19562),l=i(68065),o=i(15585),c=i(75958),d=i(81140),u=i(21284),p=i(23757),m=i(68720),x=i(57271),f=i(68209),h=i(8398),v=i(99515);function g(e){var t;let{setCookieOptIn:i}=(0,l.W9)(),[g,y]=(0,v.useState)(null===(t=e.customized)||void 0===t||t),w=(0,u.GV)(p.R.selectors.cookieOptIn)===m.R2.ACCEPTED,b=(0,c.w)(()=>{y(!0)}),C=(0,c.w)(e=>{i(e?m.R2.ACCEPTED:m.R2.DECLINED)}),j=(0,c.w)(()=>{e.onDisposed(),i(m.R2.ACCEPTED)}),S=(0,c.w)(()=>{e.onDisposed(),i(m.R2.DECLINED)}),I=(0,c.w)(()=>{e.onDisposed(),i(w?m.R2.ACCEPTED:m.R2.DECLINED)});return(0,a.jsxs)("div",{className:(0,o.cn)("fixed bottom-5 end-6 max-w-[400px] rounded-[20px] bg-[var(--background-menu-white)] p-5 shadow-[0px_4px_11px_0px_var(--shadow-S)] border border-[var(--border-main)] flex flex-col gap-3"),children:[!e.hideCloseButton&&(0,a.jsx)("button",{className:"absolute top-3 right-3 w-6 h-6 flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--text-primary)] clickable",onClick:e.onDisposed,children:(0,a.jsx)(h.A,{size:14})}),(0,a.jsx)("div",{className:"text-[18px] font-semibold text-[var(--text-primary)] leading-6",children:x.I.t("We use cookies to enhance your user experience.")}),(0,a.jsx)(f.p,{className:"text-sm text-[var(--text-tertiary)] leading-[22px]",S:g?x.I.t("We use cookies to provide {product} core functionality, save your preferences, and improve your browsing experience. You can customize your consent for different types of cookies. Functional cookies cannot be disabled as they are essential for {product}'s functionality. Other cookies will only be used with your consent. For a complete overview of all cookies used, please see our <link>Cookie Policy</link>."):x.I.t("For a complete overview of all cookies used, please see our <link>Cookie Policy</link>."),data:{product:s.KR},components:{link:e=>(0,a.jsx)("a",{className:"underline text-[var(--text-tertiary)] hover:text-[var(--text-primary)] clickable",href:d.bw.cookie.root,target:"_blank",rel:"noreferrer",children:e})}}),g?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"bg-[var(--fill-tsp-white-light)] rounded-xl p-2.5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-primary)] leading-[22px]",children:x.I.t("Functional Cookies")}),(0,a.jsx)("div",{className:"text-xs text-[var(--text-tertiary)] leading-4",children:x.I.t("For security and basic functionality")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-[var(--text-primary)]",children:x.I.t("Required")}),(0,a.jsx)(n.d,{size:"medium",checked:!0,disabled:!0,className:"opacity-40"})]})]})}),(0,a.jsx)("div",{className:"bg-[var(--fill-tsp-white-light)] rounded-xl p-2.5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-primary)] leading-[22px]",children:x.I.t("Analytics Cookies")}),(0,a.jsx)("div",{className:"text-xs text-[var(--text-tertiary)] leading-4",children:x.I.t("For improving site performance")})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(n.d,{size:"medium",checked:w,onCheckedChange:C})})]})}),(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",className:"w-full clickable",onClick:I,children:x.I.t("Save Preference")})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"medium",className:"w-full clickable",onClick:b,children:x.I.t("Customize")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"medium",className:"flex-1 clickable",onClick:S,children:x.I.t("Only essentials")}),(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",className:"flex-1 clickable",onClick:j,children:x.I.t("Accept all")})]})]})]})}},41651:(e,t,i)=>{"use strict";i.d(t,{D:()=>u,ThemeProvider:()=>p});var a=i(2635),r=i(19562),n=i(95647),s=i(75958),l=i(34143),o=i(59413),c=i(74958),d=i(99515);let u=(0,d.createContext)({theme:void 0,isDark:!1,setTheme:()=>{}});function p(e){let t=(0,c.usePathname)(),i=(0,l.Ex)(t),p=(0,s.w)(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),m=(0,s.w)(()=>i?"system"===n.S.themeConfig?p():"dark"===n.S.themeConfig?"dark":"light":"light"),[x,f]=(0,d.useState)(e.theme),h=(0,s.w)(e=>{e!==x&&(f(e),"dark"===e?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")))}),v=(0,s.w)(e=>{"system"===n.S.themeConfig?o.A.set(r.eu.theme,p(),{expires:365}):o.A.set(r.eu.theme,e,{expires:365}),h(e)});return(0,d.useEffect)(()=>{i?"system"===n.S.themeConfig?v(p()):v(m()):h("light");let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{i?"system"===n.S.themeConfig&&v(e.matches?"dark":"light"):v(m())};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[i,e.theme]),(0,a.jsx)(u.Provider,{value:{theme:x,isDark:"dark"===x,setTheme:v},children:e.children})}},25080:(e,t,i)=>{"use strict";i.d(t,{ZQ:()=>S,cG:()=>C,eI:()=>j,hv:()=>w});var a=i(2635),r=i(683),n=i(41661),s=i(68065),l=i(61613),o=i(15585),c=i(31867),d=i(46859),u=i(53082),p=i(81140),m=i(21284),x=i(23757),f=i(57271),h=i(29244),v=i(69039),g=i(99515);let y=(0,v.default)(()=>i.e(37729).then(i.bind(i,37729)),{loadableGenerated:{webpack:()=>[37729]},loading:()=>null});function w(e){let{contentClassName:t,title:i,animation:r,children:n,description:s,hideLogo:l,termsAndPrivacy:m=!0,allowLogout:x}=e,{isDark:v}=(0,c.D)();return(0,a.jsxs)("div",{className:(0,h.A)("w-full min-h-[100vh] relative","bg-[var(--background-gray-main)] dark:bg-[#050505]"),children:[r&&(0,a.jsx)(y,{dark:v}),(0,a.jsx)("div",{className:"sticky top-0 left-0 w-full z-[10] px-[48px] max-sm:px-[12px] max-sm:bg-[var(--background-gray-login)]",children:(0,a.jsxs)("div",{className:(0,h.A)("w-full  h-[60px] mx-auto flex items-center justify-between","text-[var(--text-primary)]"),children:[(0,a.jsx)("a",{href:(0,p.Vs)(p.bw.homepage.root),children:(0,a.jsx)(u.U,{})}),x&&(0,a.jsx)(b,{})]})}),(0,a.jsxs)("div",{className:(0,o.cn)("relative z-[1] flex flex-col justify-center items-center min-h-[100vh] pt-[20px] pb-[60px] -mt-[60px]","max-sm:pt-[80px] max-sm:pb-[80px] max-sm:mt-0 max-sm:min-h-[calc(100vh-60px)] max-sm:justify-start",t),children:[(0,a.jsx)("div",{className:(0,o.cn)("w-full max-w-[720px] pt-[24px] mb-[40px]","max-sm:pt-[0px]"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-[20px] relative",style:{zIndex:"1"},children:[!l&&(0,a.jsx)("div",{className:(0,o.cn)("w-[80px] h-[80px] text-[var(--icon-primary)]","max-sm:w-[64px] max-sm:h-[64px]"),children:(0,a.jsx)(d.f,{size:"100%"})}),(0,a.jsx)("h1",{className:(0,o.cn)("text-[20px] font-bold text-center text-[var(--text-primary)]","max-sm:text-[18px]"),children:i}),s&&(0,a.jsx)("h2",{className:(0,o.cn)("max-w-[384px] text-center text-[var(--text-tertiary)] text-sm mt-[-12px]"),children:s})]})}),(0,a.jsx)("div",{className:(0,o.cn)("w-full max-w-[384px] py-[24px] pt-0 px-[12px] relative"),style:{zIndex:"1"},children:(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col justify-center gap-[40px] text-[var(--text-primary)]","max-sm:gap-[12px]"),children:n})})]}),m&&(0,a.jsxs)("div",{className:"absolute z-[9] w-full bottom-0 p-6 flex justify-center items-center gap-6",children:[(0,a.jsx)("a",{href:p.bw.terms.root,target:"_blank",className:"text-[12px] leading-[18px] text-[var(--text-tertiary)] underline underline-offset-1 cursor-pointer hover:text-[var(--text-primary)] active:opacity-80",rel:"noreferrer",children:f.I.t("Terms of Service")}),(0,a.jsx)("a",{href:p.bw.privacy.root,target:"_blank",className:"text-[12px] leading-[18px] text-[var(--text-tertiary)] underline underline-offset-1 cursor-pointer hover:text-[var(--text-primary)] active:opacity-80",rel:"noreferrer",children:f.I.t("Privacy Policy")})]})]})}function b(){let{isLogin:e}=(0,m.GV)(x.R.selectors.authStatus),{handleLogout:t}=(0,s.W9)(),[i,r]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{l.d.isInApp()||r(!0)},[]),e&&i)return(0,a.jsx)("button",{onClick:async()=>{t()},className:(0,o.cn)("clickable h-9 px-3 rounded-lg","border border-[rgba(255, 255, 255, 0.20)] dark:border-[var(--border-white)]","dark:shadow-[0px_1px_2px_-0.5px_var(--shadow-XS),inset_0px_-0.5px_0px_0px_var(--shadow-XS)]","flex items-center gap-1","text-sm text-[var(--text-primary)]","hover:bg-[var(--fill-tsp-white-light)]"),children:f.I.t("Sign out")})}function C(){return(0,a.jsx)("div",{className:(0,o.cn)("flex items-center gap-[12px] text-[12px] text-[var(--text-tertiary)]",'before:content-[""] before:flex-1 before:h-[1px] before:bg-[var(--border-main)]','after:content-[""] after:flex-1 after:h-[1px] after:bg-[var(--border-main)]'),children:f.I.t("Or")})}function j(e){let{label:t,labelSuffix:i,children:r,id:n,required:s,error:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[t&&(0,a.jsxs)("div",{className:"w-full flex items-center justify-between gap-[12px] mb-[8px]",children:[(0,a.jsx)("label",{htmlFor:n,className:(0,o.cn)("text-[13px] text-[var(--text-primary)] font-medium",s?'after:content-["*"] after:text-[var(--function-error)] after:ml-[4px]':""),children:(0,a.jsx)("span",{children:t})}),i]}),r,(0,a.jsx)("div",{className:(0,o.cn)("text-[13px] text-[var(--function-error)] leading-[18px] overflow-hidden","transition-all duration-300 ease-out",l?"opacity-100 max-h-[60px] mt-[2px]":"opacity-0 max-h-0 mt-0"),children:l})]})}function S(e){let{label:t,labelSuffix:i,id:s,required:l,error:c,type:d,inputCls:u,onEnter:p,...m}=e;return"password"===d?(0,a.jsx)(j,{id:s,label:t,labelSuffix:i,required:l,error:c,children:(0,a.jsx)(r.y,{className:u,placeholder:f.I.t("Password"),type:"password",error:c,onEnter:p,...m})}):(0,a.jsx)(j,{id:s,label:t,labelSuffix:i,required:l,error:c,children:(0,a.jsx)(n.p,{id:s,paddingSize:"thin",bgColor:"white",error:!!c,className:(0,o.cn)("w-full",u),type:d,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||null==p||p()},...m})})}},1084:(e,t,i)=>{"use strict";i.d(t,{r:()=>I});var a=i(2635),r=i(76743),n=i(33890),s=i(78308),l=i(19562),o=i(15585),c=i(15038),d=i(80926),u=i(53708),p=i(9205),m=i(99515);let x=e=>{let{size:t,color:i}=e,r=null!=i?i:"#010101";return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M25.1959 21.4143C25.293 21.1223 25.706 21.1223 25.8032 21.4143L26.117 22.3577C26.4353 23.3147 27.1863 24.0657 28.1434 24.384L29.0867 24.6978C29.3787 24.795 29.3787 25.208 29.0867 25.3051L28.1434 25.6189C27.1863 25.9373 26.4353 26.6882 26.117 27.6453L25.8032 28.5887C25.706 28.8806 25.293 28.8806 25.1959 28.5887L24.8821 27.6453C24.5637 26.6882 23.8128 25.9373 22.8557 25.6189L21.9124 25.3051C21.6204 25.208 21.6204 24.795 21.9124 24.6978L22.8557 24.384C23.8128 24.0657 24.5637 23.3147 24.8821 22.3577L25.1959 21.4143Z",fill:r}),(0,a.jsx)("path",{d:"M25.1959 1.41431C25.293 1.12231 25.706 1.12231 25.8032 1.41431L26.6162 3.85844C26.9345 4.81551 27.6855 5.56647 28.6426 5.88483L31.0867 6.69784C31.3787 6.79497 31.3787 7.20799 31.0867 7.30512L28.6426 8.11813C27.6855 8.43649 26.9345 9.18745 26.6162 10.1445L25.8032 12.5886C25.706 12.8806 25.293 12.8806 25.1959 12.5887L24.3829 10.1445C24.0645 9.18745 23.3136 8.43649 22.3565 8.11813L19.9124 7.30512C19.6204 7.20799 19.6204 6.79497 19.9124 6.69784L22.3565 5.88483C23.3136 5.56647 24.0645 4.81551 24.3829 3.85844L25.1959 1.41431Z",fill:r}),(0,a.jsx)("path",{d:"M4.69588 2.41431C4.79301 2.12231 5.20604 2.12231 5.30317 2.41431L5.49216 2.98246C5.81052 3.93953 6.56147 4.69049 7.51855 5.00885L8.0867 5.19784C8.37869 5.29497 8.37869 5.70799 8.0867 5.80512L7.51855 5.99411C6.56147 6.31247 5.81052 7.06343 5.49216 8.0205L5.30317 8.58865C5.20604 8.88065 4.79301 8.88065 4.69588 8.58865L4.5069 8.0205C4.18854 7.06343 3.43758 6.31247 2.48051 5.99411L1.91236 5.80512C1.62036 5.70799 1.62036 5.29497 1.91236 5.19784L2.48051 5.00885C3.43758 4.69049 4.18854 3.93953 4.5069 2.98246L4.69588 2.41431Z",fill:r}),(0,a.jsx)("path",{d:"M5.19589 22.4143C5.29301 22.1223 5.70604 22.1223 5.80317 22.4143L5.86735 22.6073C6.18571 23.5643 6.93667 24.3153 7.89374 24.6337L8.0867 24.6978C8.37869 24.795 8.37869 25.208 8.0867 25.3051L7.89374 25.3693C6.93667 25.6877 6.18571 26.4386 5.86735 27.3957L5.80317 27.5887C5.70604 27.8806 5.29301 27.8806 5.19589 27.5887L5.1317 27.3957C4.81334 26.4386 4.06238 25.6877 3.10531 25.3693L2.91236 25.3051C2.62036 25.208 2.62036 24.795 2.91236 24.6978L3.10531 24.6337C4.06238 24.3153 4.81334 23.5643 5.1317 22.6073L5.19589 22.4143Z",fill:r}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9681 9.90308C12.2359 12.1043 10.5087 13.8316 8.30738 14.5638L3.88148 16.036C3.15149 16.2788 3.15149 17.3114 3.88148 17.5542L8.30738 19.0264C10.5086 19.7587 12.2359 21.4859 12.9681 23.6871L14.4403 28.113C14.6831 28.843 15.7157 28.843 15.9585 28.113L17.4307 23.6871C18.163 21.4859 19.8902 19.7587 22.0914 19.0264L26.5173 17.5542C27.2473 17.3114 27.2473 16.2788 26.5173 16.036L22.0914 14.5638C19.8902 13.8316 18.163 12.1044 17.4307 9.90309L15.9585 5.47718C15.7157 4.74719 14.6831 4.74719 14.4403 5.47718L12.9681 9.90308ZM15.1994 11.0874C14.1988 13.7168 12.1211 15.7945 9.49174 16.7951C12.1211 17.7957 14.1988 19.8734 15.1994 22.5028C16.2 19.8734 18.2777 17.7957 20.9071 16.7951C18.2777 15.7945 16.2 13.7168 15.1994 11.0874Z",fill:r})]})};var f=i(19463);let h=e=>{let{size:t,color:i}=e,r=null!=i?i:"currentColor";return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.50253 21.2659C3.59965 20.9739 4.01268 20.9739 4.10981 21.2659L4.4236 22.2092C4.74196 23.1663 5.49292 23.9172 6.44999 24.2356L7.39334 24.5494C7.68534 24.6465 7.68533 25.0596 7.39334 25.1567L6.44999 25.4705C5.49292 25.7888 4.74196 26.5398 4.4236 27.4969L4.10981 28.4402C4.01268 28.7322 3.59965 28.7322 3.50253 28.4402L3.18873 27.4969C2.87037 26.5398 2.11942 25.7888 1.16234 25.4705L0.218997 25.1567C-0.0729992 25.0596 -0.0729989 24.6465 0.218997 24.5494L1.16234 24.2356C2.11942 23.9172 2.87037 23.1663 3.18873 22.2092L3.50253 21.2659Z",fill:r}),(0,a.jsx)("path",{d:"M25.3395 3.49095C25.4366 3.19896 25.8496 3.19896 25.9468 3.49095L26.2514 4.40686C26.5698 5.36394 27.3208 6.1149 28.2778 6.43325L29.1937 6.73792C29.4857 6.83505 29.4857 7.24808 29.1937 7.3452L28.2778 7.64987C27.3208 7.96823 26.5698 8.71919 26.2514 9.67626L25.9468 10.5922C25.8496 10.8842 25.4366 10.8842 25.3395 10.5922L25.0348 9.67626C24.7165 8.71919 23.9655 7.96823 23.0084 7.64987L22.0925 7.3452C21.8005 7.24808 21.8005 6.83505 22.0925 6.73792L23.0084 6.43325C23.9655 6.1149 24.7165 5.36394 25.0348 4.40686L25.3395 3.49095Z",fill:r}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.97 9.90308C12.2378 12.1043 10.5106 13.8316 8.30934 14.5638L3.88343 16.036C3.15344 16.2788 3.15344 17.3114 3.88343 17.5542L8.30933 19.0264C10.5106 19.7587 12.2378 21.4859 12.97 23.6871L14.4423 28.113C14.6851 28.843 15.7176 28.843 15.9605 28.113L17.4327 23.6871C18.1649 21.4859 19.8921 19.7587 22.0934 19.0264L26.5193 17.5542C27.2493 17.3114 27.2493 16.2788 26.5193 16.036L22.0934 14.5638C19.8921 13.8316 18.1649 12.1044 17.4327 9.90309L15.9605 5.47718C15.7176 4.74719 14.6851 4.74719 14.4423 5.47718L12.97 9.90308ZM15.2014 11.0874C14.2008 13.7168 12.1231 15.7945 9.49369 16.7951C12.1231 17.7957 14.2008 19.8734 15.2014 22.5028C16.2019 19.8734 18.2796 17.7957 20.909 16.7951C18.2796 15.7945 16.2019 13.7168 15.2014 11.0874Z",fill:r})]})};var v=i(21284),g=i(23757),y=i(66555),w=i(98432),b=i(34143),C=i(17808),j=i(57271),S=i(68209);function I(e){return(0,m.useEffect)(()=>{(0,d.C)({eventName:"buy_credits_dialog_show"})},[]),(0,a.jsx)(n.l,{width:"fit-content",title:(0,a.jsx)("span",{className:(0,o.cn)("font-georgia text-[32px] leading-[34px] pr-[40px] font-normal","max-sm:text-[24px] max-sm:leading-[30px]"),children:j.I.t("Buy add-on credits")}),onDisposed:e.onDisposed,headerClassName:"pt-[32px] px-[32px] pb-[0px] max-sm:px-[16px]",className:"bg-[var(--background-gray-main)] shadow-[0px_8px_32px_0px_var(--shadow-XS)]",children:(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-col items-stretch gap-[24px] p-[32px]","max-sm:px-[16px]"),children:[(0,a.jsx)(N,{}),(0,a.jsx)(T,{})]})})}function N(){let e=(0,v.GV)(y.M.selectors.addOnList),t=e=>e===w.zl.CREDITS_19900?(0,a.jsx)(x,{className:"text-[var(--icon-primary)]",size:32,color:"currentColor"}):e===w.zl.CREDITS_10000?(0,a.jsx)(h,{className:"text-[var(--icon-primary)]",size:32,color:"currentColor"}):(0,a.jsx)(f.L,{className:"text-[var(--icon-primary)]",size:32,color:"currentColor"});return(0,a.jsx)("div",{className:(0,o.cn)("flex gap-[16px] items-stretch max-sm:gap-[8px]","p-[24px] m-[-24px]","max-sm:max-w-[calc(100%+32px)] max-sm:px-[16px] max-sm:py-[24px] max-sm:mt-[-24px] max-sm:mx-[-16px] max-sm:mb-[-12px] overflow-y-visible overflow-x-auto scrollbar-none"),children:e.map(e=>e.plan?(0,a.jsxs)("div",{className:(0,o.cn)("min-w-[180px] flex-auto pt-[32px] px-[16px] pb-[20px] flex flex-col gap-[32px] justify-between","rounded-[16px] border border-[var(--border-main)] shadow-[0px_6px_32px_0px_var(--shadow-S)]","max-sm:min-w-[160px]"),children:[(0,a.jsxs)("div",{className:"w-full flex flex-col items-center gap-[8px]",children:[t(e.plan),(0,a.jsx)("div",{className:(0,o.cn)("text-[var(--text-primary)] text-[20px] leading-[26px] font-semibold text-center","max-sm:text-[18px] max-sm:leading-[24px]"),children:j.I.t("{total} credits",{total:e.credits.toLocaleString()})}),(0,a.jsx)("div",{className:(0,o.cn)("text-[16px] leading-[24px] text-[var(--text-tertiary)] font-normal","max-sm:text-[16px]"),children:(0,b.$g)(e.price)})]}),(0,a.jsx)(k,{item:e})]},e.plan):null)})}function k(e){let{item:t}=e,[i,n]=(0,m.useState)(!1),{buyAddonCredits:l}=(0,C.S)(),o=(0,v.GV)(g.R.selectors.disablePayment),x=(0,v.GV)(g.R.selectors.paymentPlatform),f=(0,u.W)(()=>o||"live_event"===x),h=async e=>{let t=e.plan;(0,d.C)({eventName:"buy_credits_dialog_click",extData:{planKey:t}});try{n(!0),await l({planKey:t,quantity:e.credits})}catch(e){(0,p.oR)({variant:"error",title:c.P.formatErrorToString(e)})}finally{n(!1)}};return(0,a.jsx)(s.m,{title:f?j.I.t("The payment service is currently unavailable"):"",dismissProps:{referencePress:!0},children:(0,a.jsx)(r.A,{size:"large",color:"black",shape:"round",onClick:()=>{h(t)},loading:i,disabled:f,className:"max-sm:h-[32px]",children:(0,a.jsx)("span",{children:j.I.t("Buy now")})})})}function T(){let e=[j.I.t("Only {product} Pro and Team versions can buy add-on credits.",{product:l.KR}),j.I.t("Add-on credits can only be used during the membership period and do not expire."),j.I.t("Please visit our <help>Help Center</help> to quickly find answers.")];return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[13px] leading-[18px] font-semibold text-[var(--text-secondary)] mb-[8px]",children:j.I.t("Rules")}),(0,a.jsx)("ul",{className:"text-[var(--text-tertiary)] text-[12px] leading-[16px] list-decimal pl-[16px] flex flex-col items-stretch gap-[2px]",children:e.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(S.p,{S:e,components:{help:e=>(0,a.jsx)("a",{className:"underline font-medium text-[var(--text-tertiary)] cursor-pointer hover:opacity-80 active:opacity-70 transition-opacity",href:l.mE,target:"_blank",rel:"noopener noreferrer",children:e})}})},t))})]})}},81801:(e,t,i)=>{"use strict";i.d(t,{d:()=>K});var a=i(2635),r=i(51416),n=i(21284),s=i(23757),l=i(86154),o=i(76743),c=i(33890),d=i(19562),u=i(15585),p=i(80926),m=i(85078),x=i(75958),f=i(89310),h=i(57271),v=i(99515);function g(e){let t=(0,n.GV)(s.R.selectors.isTeamAccount);return((0,v.useEffect)(()=>{(0,p.C)({eventName:"questionnaire_invitation_page_show"})},[]),t)?(0,a.jsxs)(c.l,{width:450,onDisposed:e.onDisposed,className:"bg-[var(--background-gray-main)]",children:[(0,a.jsx)("div",{className:"self-stretch px-5 py-[8px] flex flex-col items-center gap-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-[var(--text-primary)] text-center text-2xl font-[600] leading-[30px] whitespace-pre-wrap",children:h.I.t("We're sorry to see you go")}),(0,a.jsx)("p",{className:"w-96 text-center",children:(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-sm leading-snug",children:h.I.t("Your {product} subscription has been successfully cancelled. You'll continue to have access until the end of your current billing period.",{product:d.KR})})})]})}),(0,a.jsx)("div",{className:"mt-[20px] self-stretch px-8 flex justify-end items-center gap-3 pb-8",children:(0,a.jsx)(o.A,{variant:"default",size:"large",color:"black",className:"w-full",onClick:()=>{e.onDisposed()},children:h.I.t("Got it")})})]}):(0,a.jsx)(c.l,{width:400,onDisposed:e.onDisposed,className:"bg-[var(--background-gray-main)]",title:h.I.t("Subscription cancelled"),children:(0,a.jsxs)("div",{className:"px-[20px]",children:[(0,a.jsx)("p",{className:"text-[var(--text-tertiary)] text-sm leading-[22px]",children:h.I.t("Please share your feedback! We use this information to improve your experience, even as you switch to our free plan.")}),(0,a.jsxs)("div",{className:"py-[20px] flex gap-[8px]",children:[(0,a.jsx)(o.A,{size:"large",color:"gray",onClick:e.onDisposed,className:"w-[175px]",children:h.I.t("No, thanks")}),(0,a.jsx)("a",{href:"https://form.typeform.com/to/".concat(d.tN.CANCEL_SUBSCRIPTION),target:"_blank",className:"flex-1 flex min-w-0",onClick:()=>{e.onDisposed(),(0,p.C)({eventName:"questionnaire_invitation_click"})},rel:"noreferrer noopener",children:(0,a.jsx)(o.A,{size:"large",color:"black",className:"w-full min-w-0",children:h.I.t("Take the survey")})})]})]})})}var y=i(67260),w=i(96962),b=i(16001);let C=[{get text(){return h.I.t("Too expensive")},value:f.Po.CancelReason_TooExpensive},{get text(){return h.I.t("Missing features")},value:f.Po.CancelReason_MissingFeatures},{get text(){return h.I.t("Switched to a better alternative")},value:f.Po.CancelReason_SwitchedToABetterAlternative},{get text(){return h.I.t("Not using {product} enough",{product:d.KR})},value:f.Po.CancelReason_NotUsingManusEnough},{get text(){return h.I.t("Too many technical issues")},value:f.Po.CancelReason_TooManyTechnicalIssues},{get text(){return h.I.t("Unsatisfied with task results")},value:f.Po.CancelReason_UnsatisfiedWithTaskResults},{get text(){return h.I.t("Too difficult to use")},value:f.Po.CancelReason_TooDifficultToUse},{get text(){return h.I.t("Too slow")},value:f.Po.CancelReason_TooSlow},{get text(){return h.I.t("Other")},value:f.Po.CancelReason_OtherReason}];function j(e){let{reason:t,comment:i,onChange:r}=e,n=(0,v.useMemo)(()=>[...C.slice(0,-1).sort(()=>Math.random()-.5),...C.slice(-1)],[]);return(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[n.map((e,n)=>{let{text:s,value:l}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{r(l,i)},children:[t===l?(0,a.jsx)(w.w,{size:20}):(0,a.jsx)(b.r,{color:"var(--icon-tertiary)",size:20}),(0,a.jsx)("div",{className:"text-[var(--text-primary)]  text-sm leading-[22px] ",children:s})]},n)}),t===f.Po.CancelReason_OtherReason&&(0,a.jsx)(y._,{className:"min-h-[90px]",placeholder:h.I.t("Enter other reasons"),value:i,autoFocus:!0,onChange:e=>{r(t,e.target.value)}})]})}function S(e){let t=(0,r.s)(g),[i,n]=(0,v.useState)(),[s,l]=(0,v.useState)(),y=(0,x.w)(()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()}),w=(0,x.w)(async()=>{await e.onConfirm({cancelReason:i,comment:i===f.Po.CancelReason_OtherReason?s:void 0}),e.onDisposed(),t.open()}),{isLoading:b,run:C}=(0,m.W)();return(0,v.useEffect)(()=>{(0,p.C)({eventName:"cancel_subscription_page_show"})},[]),(0,a.jsx)(c.l,{width:450,title:h.I.t("Sorry to see you go"),onDisposed:y,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch",children:[(0,a.jsx)("p",{className:(0,u.cn)("text-[var(--text-primary)] text-sm font-medium mb-[10px]"),children:h.I.t("What was the main reason you decided to cancel your {product} subscription?",{product:d.KR})}),(0,a.jsx)(j,{comment:s,reason:i,onChange:(e,t)=>{n(e),l(t)}}),(0,a.jsxs)("div",{className:(0,u.cn)("flex justify-end gap-2 mt-8"),children:[(0,a.jsx)(o.A,{size:"medium",color:"gray",onClick:()=>{y(),(0,p.C)({eventName:"keep_subscription_click"})},className:"clickable",children:h.I.t("Keep subscription")}),(0,a.jsx)(o.A,{size:"medium",color:"danger",loading:b,onClick:()=>{C(w)},disabled:i===f.Po.CancelReason_OtherReason&&!(null==s?void 0:s.trim())||!i,children:h.I.t("Cancel subscription")})]})]})})}var I=i(68065),N=i(3251),k=i(15038),T=i(9205),_=i(66555),M=i(98432),L=i(34143),P=i(17808),E=i(90264),A=i(84974),R=i(81140),F=i(77859),U=i(68209),D=i(8398);function V(e){let t=(0,n.GV)(s.R.selectors.planKey),i=(0,n.GV)(_.M.selectors.planList),r=(0,L.wZ)(t),l=i.find(e=>e.plan===r),o=F.r4,c=r?o[r]:[];return 0===c.length?null:(0,a.jsx)("ul",{className:(0,u.cn)("flex flex-col items-stretch gap-[12px]","text-[14px] leading-[22px] font-normal text-[var(--text-primary)]","p-3 rounded-[12px] bg-[var(--fill-tsp-white-light)]"),children:c.map((e,t)=>(0,a.jsxs)("li",{className:"relative pl-[24px] text-sm",children:[(0,a.jsx)("div",{className:"absolute top-[3px] left-0",children:(0,a.jsx)(D.A,{size:16,color:"var(--function-error)"})}),(0,a.jsx)(U.p,{S:e,data:{credits:(null==l?void 0:l.credits)?A.f.formatCredits(l.credits):"-",concurrentTasks:(null==l?void 0:l.maxConcurrentTask)||"-",maxScheduledTask:(null==l?void 0:l.maxScheduledTask)||"-"},components:{b:e=>(0,a.jsx)("span",{className:(0,u.cn)("font-medium text-[var(--text-primary)]"),children:e}),link:e=>(0,a.jsx)("a",{className:"underline hover:opacity-80 text-[var(--text-tertiary)] text-[13px] leading-[22px]",href:R.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})]},"".concat(e,"_").concat(t)))})}var O=i(14960),z=i(55866),H=i(50232),B=i(51304);function W(e){let{newPlanKey:t}=e,i=(0,n.GV)(s.R.selectors.planKey),r=(0,n.GV)(s.R.selectors.userInfo),{getPlanInfo:l}=(0,P.S)(),o=l(i),c=l(t);if(!o||!c)return null;let d=(0,L.$g)(o.monthlyPrice-c.monthlyPrice),p="yearly"===(0,L.aL)(i);return(0,a.jsxs)("div",{className:(0,u.cn)("rounded-xl border border-[var(--border-dark)] bg-[var(--background-menu-white)]"),children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-sm",children:h.I.t("Current plan")}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-base font-bold font-serif",children:o.planName}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-[var(--text-secondary)] text-base font-semibold",children:["$",(0,a.jsx)("div",{className:"relative -bottom-[7px] inline-flex text-[var(--text-primary)]",children:(0,a.jsx)(B.A,{value:o.monthlyPrice})})]}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-xs",children:h.I.t(" / month")})]})]})]}),(0,a.jsx)("hr",{className:"border-t border-[var(--border-light)] mx-4"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-sm",children:h.I.t("New plan")}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-base font-bold font-serif",children:c.planName}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-[var(--text-secondary)] text-base font-semibold",children:["$",(0,a.jsx)("div",{className:"relative -bottom-[7px] inline-flex text-[var(--text-primary)]",children:(0,a.jsx)(B.A,{value:c.monthlyPrice})})]}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-xs",children:h.I.t(" / month")})]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-1",children:(0,a.jsx)("div",{className:(0,u.cn)("rounded-[99px] outline outline-[var(--icon-primary)] bg-[var(--fill-tsp-white-light)] px-2 py-0.5","text-[var(--text-primary)] text-[13px] font-medium leading-[18px]"),children:p?h.I.t("Save {savings} / month",{savings:d}):h.I.t("Save {savings}",{savings:d})})})]}),(0,a.jsxs)("div",{className:"bg-[var(--fill-tsp-white-light)] pl-4 pr-3 py-2.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.K,{size:16,color:"var(--icon-disable)"}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-[13px]",children:h.I.t("Changes apply after current subscription ends")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(H.A,{size:16,color:"var(--icon-disable)"}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-[13px]",children:(0,a.jsx)(U.p,{S:h.I.t("Next charge will be on <b>{date}</b>"),data:{date:O.F.format(new Date(1e3*Number(null==r?void 0:r.currentPeriodEnd)),"PP")},components:{b:e=>(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:e})}})})]})]})]})}function G(e){let{submitSubscribe:t}=(0,P.S)(),{updateCredits:i}=(0,N.O)(),{fetchUserInfo:r}=(0,I.W9)(),l=(0,n.GV)(s.R.selectors.membershipInterval),d=(0,n.GV)(s.R.selectors.nextMembershipInterval),m=M.OL.CASUAL,f=(d?"yearly"===d:"yearly"===l)?M.zl.CASUAL_YEARLY:M.zl.CASUAL_MONTHLY,g=(0,n.GV)(_.M.selectors.planList).find(e=>e.plan===m),y=(0,x.w)(()=>{e.onDisposed()}),w=(0,x.w)(async()=>{try{(0,p.C)({eventName:"switch_starter_click"}),await t(M.v6.downgrade,{planKey:f,onSuccess:async()=>{(0,L.K6)(M.v6.downgrade)&&(await Promise.all([r(),i()]),(0,T.oR)({variant:"success",title:h.I.t("Subscription plan changed successfully.")}),E.T.emit("subscriptionChange",{type:M.v6.downgrade,plan:f})),e.onDisposed()}})}catch(e){(0,T.oR)({variant:"error",title:k.P.formatErrorToString(e)})}});return(0,v.useEffect)(()=>{(0,p.C)({eventName:"switch_starter_show"})},[]),(0,a.jsx)(c.l,{width:450,title:h.I.t("Confirm cancellation"),onDisposed:y,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch ",children:[(0,a.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)] mb-2",children:h.I.t("Current benefits remain until cycle ends, then you'll lose these benefits:")}),(0,a.jsx)(V,{}),(0,a.jsx)("p",{className:(0,u.cn)("text-[var(--text-secondary)] text-sm leading-[22px] mt-4 mb-2"),children:h.I.t("Before you go, consider the alternative:")}),(0,a.jsx)(W,{newPlanKey:f}),(0,a.jsxs)("div",{className:(0,u.cn)("flex justify-end items-center gap-2 mt-8 flex-wrap"),children:[(0,a.jsx)(o.A,{size:"medium",color:"gray",onClick:()=>{e.onDisposed(),e.onCancelSubscription()},children:h.I.t("Cancel subscription")}),g&&(0,a.jsx)(o.A,{size:"medium",color:"black",onClick:w,children:h.I.t("Switch to Plus")})]})]})})}function Z(e){let[t,i]=(0,v.useState)(),[n,s]=(0,v.useState)(),l=(0,r.s)(g),p=(0,x.w)(()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()}),y=(0,x.w)(async()=>{await e.onConfirm({cancelReason:t,comment:t===f.Po.CancelReason_OtherReason?n:void 0}),e.onDisposed(),l.open()}),{isLoading:w,run:b}=(0,m.W)();return(0,a.jsx)(c.l,{width:450,title:h.I.t("Confirm cancellation"),onDisposed:p,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch ",children:[(0,a.jsx)("p",{className:(0,u.cn)("text-[var(--text-secondary)] text-sm leading-[22px] mb-2"),children:h.I.t("Cancellation stops future billing. You keep current benefits until this cycle ends. Afterwards, you will lose the following benefits:")}),(0,a.jsx)(V,{}),(0,a.jsx)("p",{className:(0,u.cn)("text-[var(--text-primary)] text-sm font-medium mt-4 mb-[10px]"),children:h.I.t("What was the main reason you decided to cancel your {product} subscription?",{product:d.KR})}),(0,a.jsx)(j,{reason:t,comment:n,onChange:(e,t)=>{i(e),s(t)}}),(0,a.jsxs)("div",{className:(0,u.cn)("flex justify-end gap-2 mt-8"),children:[(0,a.jsx)(o.A,{size:"medium",color:"gray",onClick:()=>{p()},className:"clickable",children:h.I.t("Keep subscription")}),(0,a.jsx)(o.A,{size:"medium",color:"danger",loading:w,onClick:()=>{b(y)},disabled:t===f.Po.CancelReason_OtherReason&&!(null==n?void 0:n.trim())||!t,children:h.I.t("Cancel subscription")})]})]})})}function K(e){let t=(0,r.s)(S),i=s.R.selectors.membershipVersion(n.M_.getState()),o=s.R.selectors.nextMembershipVersion(n.M_.getState()),c=[l.b.Lite,l.b.Casual,l.b.Team];return c.includes(i)||c.includes(o)?(0,a.jsx)(Z,{...e}):i===l.b.Pro?(0,a.jsx)(G,{...e,onCancelSubscription:()=>{t.open(e)}}):null}},235:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var a=i(2635),r=i(76743),n=i(33890),s=i(80926),l=i(51416);function o(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M6 34L10 38L18 30",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6 14L10 18L18 10",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26 12H42",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26 24H42",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26 36H42",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}o._id="26261dfc8d4e730968edbd801fc5f56b";var c=i(73677),d=i(23757),u=i(34143),p=i(57271),m=i(10417);function x(e){let{onDisposed:t}=e,i=(0,c.GV)(d.R.selectors.userInfo),x=!(0,c.GV)(d.R.selectors.isTeamAccount)&&!(0,u.oD)(null==i?void 0:i.membershipVersion),{open:f}=(0,l.s)(m.v);return(0,a.jsx)(n.l,{width:460,onDisposed:t,className:"max-w-[90%]",headerClassName:"none p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-center pt-[44px] pb-[32px] px-8",children:[(0,a.jsx)(o,{size:48,className:"text-[var(--text-primary)]"}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{className:"text-[var(--text-primary)] text-center text-2xl font-[600] leading-[30px]",children:p.I.t("Concurrent task limit reached")}),(0,a.jsx)("div",{className:"mt-2 text-[var(--text-tertiary)] text-center text-sm leading-[22px] whitespace-pre-line",children:x?p.I.t("You've reached your concurrent task limit.\nUpgrade your plan to unlock more."):p.I.t("You've reached your concurrent task limit.")})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-between gap-3 w-full",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"flex-1 h-10 ",variant:"outline",size:"medium",onClick:t,children:p.I.t("Cancel")}),(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:()=>{t(),(0,s.C)({eventName:"limit_dialog_upgrade_click",extData:{source:"concurrency_limit"}}),f({motivation:{page:"session",event:"concurrency_limit",reason:"upgrade"}})},children:p.I.t("Upgrade now")})]}):(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:t,children:p.I.t("Got it")})})]})})}},81656:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var a=i(2635),r=i(76743),n=i(33890),s=i(15585),l=i(80926),o=i(51416),c=i(73677),d=i(23757),u=i(34143),p=i(57271),m=i(10417);function x(e){let{onDisposed:t,icon:i,description:x,upgradeTitle:f,title:h,cancelText:v,cancelOnClick:g,motivation:y}=e,w=(0,c.GV)(d.R.selectors.userInfo),b=!(0,c.GV)(d.R.selectors.isTeamAccount)&&!(0,u.oD)(null==w?void 0:w.membershipVersion),{open:C}=(0,o.s)(m.v);return(0,a.jsx)(n.l,{width:460,onDisposed:t,className:"max-w-[90%]",headerClassName:"none p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-center pt-[44px] pb-[32px] px-8",children:[(0,a.jsx)(i,{className:(0,s.cn)("size-[48px] text-[var(--icon-primary)]")}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{className:"text-[var(--text-primary)] text-center text-2xl font-[600] leading-[30px]",children:h}),(0,a.jsx)("div",{className:"mt-2 text-[var(--text-tertiary)] text-center text-sm leading-[22px] whitespace-pre-line",children:x})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-between gap-3 w-full",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"flex-1 h-10 ",variant:"outline",size:"medium",onClick:()=>{g?g():t()},children:v||p.I.t("Cancel")}),(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:()=>{t(),C({title:f,motivation:y}),(null==y?void 0:y.event)&&(null==y?void 0:y.page)&&(0,l.C)({eventName:"limit_dialog_upgrade_click",extData:{source:(null==y?void 0:y.event)||""}})},children:p.I.t("Upgrade now")})]}):(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:t,children:p.I.t("Got it")})})]})})}},14065:(e,t,i)=>{"use strict";i.d(t,{l:()=>u});var a=i(2635),r=i(76743),n=i(33890),s=i(99820),l=i(21284),o=i(66555),c=i(17808),d=i(57271);function u(e){let{onDisposed:t}=e,i=(0,l.GV)(o.M.selectors.stripeBillingLoading),{goStripeBilling:u}=(0,c.S)();return(0,a.jsx)(n.l,{onDisposed:t,className:"w-[440px]",children:(0,a.jsxs)("div",{className:"pt-[20px] pb-[40px] flex flex-col items-center justify-center",children:[(0,a.jsx)(s.i,{size:80,color:"var(--icon-disable)"}),(0,a.jsx)("div",{className:"mt-[24px] text-xl  font-[600] leading-[26px] text-[var(--text-primary)] ",children:d.I.t("Something went wrong")}),(0,a.jsxs)("div",{className:"mt-2 text-sm leading-[22px] text-center text-[var(--text-tertiary)]",children:[(0,a.jsx)("div",{children:d.I.t("You have an unpaid renewal impacting billing.")}),d.I.t("Please manage your billing first.")]}),(0,a.jsx)(r.A,{className:"mt-[48px] w-[300px]",color:"black",loading:i,size:"large",onClick:async()=>{await u(),t()},children:d.I.t("Edit billing")})]})})}},10057:(e,t,i)=>{"use strict";i.d(t,{t:()=>j});var a=i(2635),r=i(93578),n=i(78308),s=i(15585),l=i(53708),o=i(81140),c=i(21284),d=i(23757),u=i(98432),p=i(34143),m=i(17808),x=i(15307),f=i(29313),h=i(57271),v=i(68209),g=i(48046),y=i(73518),w=i(99515),b=i(51304),C=i(70564);let j=e=>{var t;let{plan:i,isAnnually:j=!1,isCurrentHighlight:S=!1,disablePopular:I}=e,{getPlanInfo:N,getPlanInfoStaticPoorArea:k,getPlanInfoProUnlimited:T}=(0,m.S)(),_=(0,c.GV)(d.R.selectors.isPoorAreaFreeUser),M=(0,c.GV)(d.R.selectors.userInfo),L=(0,c.GV)(x.s.selectors.getProRemoveCreditsVariant),P=(null==L?void 0:L.value)==="treatment01"||(null==L?void 0:L.value)==="treatment02",E=(0,l.W)(()=>P?T:_?k:N),A=(0,p.nW)(i.plan,j),R=(0,c.GV)(d.R.selectors.planKey),F=E(A),U=(0,c.GV)(d.R.selectors.isTrial),D=(0,c.GV)(d.R.selectors.trialAvailable),V=(0,c.GV)(f.u.currentTrialPlan),O=V&&V===i.plan,z=(0,l.W)(()=>U?R===A:D?!!O:S),H=(0,l.W)(()=>!I&&(U?R===A:D?!!O:z)),B=(0,l.W)(()=>H?O?h.I.t("$0 for 7 days"):V===A?h.I.t("Current trial"):i.isPopularText||h.I.t("POPULAR"):"");if(F)return(0,a.jsx)("div",{className:(0,s.cn)("flex-col items-center justify-center w-full flex-1",H&&"-mt-[20px] max-[1200px]:mt-0"),children:(0,a.jsxs)("div",{className:(0,s.cn)("relative h-full px-[16px] pb-[24px] bg-[var(--background-menu-white)] rounded-[16px] border  flex flex-col items-center gap-5 overflow-hidden pt-[16px]",H&&"pt-[36px]",z?"border-[2px] border-[var(--Button-primary-brand)] ":"border border-[var(--border-main)]"),children:[H&&(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 flex h-6 py-1.5 px-5 justify-center items-center gap-2.5 flex-shrink-0 bg-[var(--fill-blue)]",children:(0,a.jsx)("span",{className:"text-[var(--text-blue)] text-xs font-[500] ",children:B})}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center content-center text-[var(--text-primary)] text-[18px] font-[700] leading-[22px]",children:[(0,a.jsx)("span",{className:"font-georgia",children:F.planName}),(0,a.jsx)("span",{className:"  rounded-tl-[10px] rounded-tr-[10px] rounded-br-[10px] border border-[var(--border-dark)] text-[12px] leading-[16px] text-[var(--text-tertiary)] px-[6px] ms-[6px] font-medium",children:h.I.t("Beta")})]}),O?(0,a.jsxs)("div",{className:"flex flex-col gap-[2px] w-full",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-[32px] font-[600] leading-[40px]",children:h.I.t("7-Day Free")}),(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-sm",children:(0,a.jsx)(v.p,{S:h.I.t("then <b>${price}</b>/month"),components:{b:e=>(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:e})},data:{price:F.monthlyPrice}})})]}):(0,a.jsxs)("div",{className:(0,s.cn)("flex items-baseline gap-1 ",V&&"pb-[24px]"),children:[(0,a.jsxs)("div",{className:"flex items-center text-[var(--text-primary)] text-center text-[32px] font-[600] leading-[40px]",children:["$",(0,a.jsx)(b.A,{value:F.monthlyPrice})]}),(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-center text-base font-[400]",children:i.plan===u.OL.TEAM?h.I.t(" / person / month"):h.I.t(" / month")})]})]}),i.subTitle&&(0,a.jsx)("div",{className:(0,s.cn)("w-full text-left text-[var(--text-secondary)] text-sm leading-[22px]",S?"text-[var(--text-blue)]":""),children:i.subTitle}),(0,a.jsx)(C.n,{isAnnually:j,planType:i.plan,isPopular:z}),(0,a.jsx)("div",{className:"w-full flex flex-col gap-[6px] mt-2",children:null===(t=F.benefits)||void 0===t?void 0:t.map((e,t)=>e.match&&!e.match(M)?null:(0,a.jsxs)("div",{className:"w-full flex items-start self-start gap-2",children:[(0,a.jsx)("div",{className:"flex items-center self-start mt-[3px]",children:e.icon?w.createElement(e.icon,{size:16,color:"var(--icon-primary)"}):(0,a.jsx)(g.A,{size:16,color:"var(--icon-primary)"})}),(0,a.jsx)("div",{className:"flex-1 items-center gap-1",children:(0,a.jsxs)("div",{className:"text-[var(--text-secondary)] text-sm",children:["string"==typeof e.label?(0,a.jsx)(r.A,{trigger:["hover","touch"],placement:"top",showArrow:!0,arrowProps:{className:"border-[var(--border-dark)]"},className:"w-[294px] max-w-[90%]  p-[16px] rounded-[12px] border-[0.5px] border-[var(--border-dark)] bg-[var(--background-menu-white)] shadow-[0px_4px_11px_0px_var(--shadow-M)]",disabled:!e.popover,content:e.popover,children:(0,a.jsx)("span",{className:(0,s.cn)({"me-[6px]":!!e.badge,"underline decoration-dotted cursor-help hover:opacity-80":!!e.popover}),children:(0,a.jsx)(v.p,{S:e.label,components:{b:e=>(0,a.jsx)("span",{className:"font-[500] text-[var(--text-primary)]",children:e}),link:e=>(0,a.jsx)("a",{className:"inline-block underline hover:opacity-80 text-[var(--text-tertiary)] text-sm leading-[22px]",href:o.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})})}):e.label,!!e.badge&&(0,a.jsx)(v.p,{S:e.badge,components:{limited:e=>(0,a.jsx)("span",{className:"inline-block relative rounded-full border border-[var(--icon-disable)] bg-[var(--fill-tsp-white-light)] text-[11px] leading-[16px] text-[var(--text-primary)] px-[8px] font-medium",children:e})}}),e.tooltip&&(0,a.jsx)(n.m,{title:e.tooltip,className:"whitespace-pre-wrap",children:(0,a.jsx)(y.A,{size:16,color:"var(--icon-tertiary)",className:"relative top-[-1px] ml-[4px] inline-block cursor-help"})})]})})]},t))})]})})}},75419:(e,t,i)=>{"use strict";i.d(t,{m:()=>B});var a=i(2635),r=i(76743),n=i(7487),s=i(24683),l=i(19562),o=i(68065),c=i(3251),d=i(15585),u=i(15038),p=i(80926),m=i(86239),x=i(53708),f=i(51416),h=i(27168),v=i(75958),g=i(9205),y=i(93347),w=i(21284),b=i(23757),C=i(86154),j=i(66555),S=i(98432),I=i(34143),N=i(17808),k=i(15307),T=i(18431),_=i(89839),M=i(57271),L=i(68209),P=i(1566),E=i(99515),A=i(81801),R=i(19463),F=i(1084),U=i(87786);function D(e){let t=(0,w.GV)(T.u.selectors.isTeamOwner),i=(0,w.GV)(b.R.selectors.membershipVersion),{open:n}=(0,f.s)(F.r),{open:s}=(0,f.s)(U.g);return i===C.b.Lite?null:(0,a.jsx)("div",{className:(0,d.cn)("flex max-w-full justify-between items-center flex-1","min-[1200px]:max-w-[630px]"),children:(0,a.jsxs)("div",{className:(0,d.cn)("flex w-full py-[10px] items-center pe-[13px] ps-5 gap-[10px]","rounded-[16px] max-md:rounded-[16px] border border-[var(--border-main)] bg-[var(--background-menu-white)]"),children:[(0,a.jsx)("div",{className:"flex p-2 items-center  rounded-[8px] border border-[var(--border-main)]",children:(0,a.jsx)(R.L,{size:20,color:"var(--icon-primary)"})}),(0,a.jsxs)("div",{className:"flex-1  flex-col gap-[6px]",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] font-[Georgia] text-sm font-[700] ",children:M.I.t("Buy add-on credits")}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)]  text-[13px] leading-[18px]",children:M.I.t("One-time payment to purchase credits")})]}),(0,a.jsx)(r.A,{color:"black",size:"small",shape:"round",className:(0,d.cn)("text-[13px]"),onClick:async()=>{t?s():n()},children:(0,a.jsx)("span",{children:M.I.t("Buy credits")})})]})})}var V=i(10057),O=i(95040),z=i(70564);function H(e){let{isAnnually:t}=e,i=S.OL.TEAM,{getPlanInfo:r}=(0,N.S)(),n=r((0,I.nW)(S.OL.TEAM,t));if(n)return(0,a.jsx)("div",{className:(0,d.cn)("flex max-w-full justify-between items-center flex-1","min-[1200px]:max-w-[630px]"),children:(0,a.jsxs)("div",{className:(0,d.cn)("flex w-full py-[10px] items-center pe-[13px] ps-5 gap-[10px]","rounded-[16px] max-md:rounded-[16px] border border-[var(--border-main)] bg-[var(--background-menu-white)]"),children:[(0,a.jsx)("div",{className:"flex p-2 items-center  rounded-[8px] border border-[var(--border-main)]",children:(0,a.jsx)(O.O,{size:20,color:"var(--icon-primary)"})}),(0,a.jsxs)("div",{className:"flex-1  flex-col gap-[6px]",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] font-[Georgia] text-sm font-[700] ",children:null==n?void 0:n.planName}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)]  text-[13px] leading-[18px]",children:M.I.t("Scale your team's productivity with {product}",{product:l.KR})})]}),(0,a.jsx)(z.n,{className:"w-auto",isAnnually:t,planType:i})]})})}let B=e=>{let{planListHelperTips:t=!1}=e,i=(0,w.GV)(j.M.selectors.planList),r=(0,w.GV)(j.M.selectors.subscriptions),u=(0,w.GV)(b.R.selectors.isVip),I=(0,w.GV)(b.R.selectors.userInfo),_=(0,w.GV)(j.M.selectors.subscriptionSource),P=(0,w.GV)(k.s.selectors.getProRemoveCreditsVariant),R=(0,w.GV)(j.M.selectors.planListProUnlimited),F=(null==P?void 0:P.value)==="treatment01"||(null==P?void 0:P.value)==="treatment02",U=(null==I?void 0:I.membershipVersion)===C.b.Pro,O=F&&U,z=(0,w.GV)(b.R.selectors.isPoorAreaFreeUser),B=(0,w.GV)(j.M.selectors.planListStaticPoorArea),G=(0,x.W)(()=>z?B:F?R:i),Z=(0,w.GV)(b.R.selectors.isTeamAccount),K=(0,w.GV)(T.u.selectors.isTeamOwner),{fetchUserInfo:Y}=(0,o.W9)(),{updateCredits:$}=(0,c.O)(),{open:q}=(0,f.s)(A.d),{getPlanDiscount:J}=(0,N.S)(),X=J(),Q=(0,h.a)(768),ee=[{label:M.I.t("Monthly"),value:!1},{label:(0,a.jsxs)(a.Fragment,{children:[M.I.t("Annually"),(0,a.jsx)("div",{className:"text-[var(--text-blue)] text-[13px]  font-[500] ",children:(0,a.jsx)(L.p,{S:M.I.t("Save <percent></percent>"),components:{percent:()=>(0,a.jsxs)("span",{dir:"ltr",children:[X,"%"]})}})})]}),value:!0}],[et,ei]=(0,E.useState)(!0),ea=G.flatMap(e=>F&&e.plan===S.OL.PRO?[{...e,isPopular:!0,isPopularText:F?M.I.t("No credit limits"):e.plan===S.OL.PRO?M.I.t("BEST VALUE"):void 0}]:Q&&e.plan===S.OL.FREE?[]:[e]),er=(0,v.w)(()=>{(0,p.C)({eventName:"cancel_subscription_click"}),q({onConfirm:async e=>{let{cancelReason:t,comment:i}=e;await y.F.SubscriptionService.cancel({cancelReason:t,comment:i}),await Promise.all([Y(),$()]),(0,g.oR)({variant:"success",title:M.I.t("Subscription cancelled.")})}})}),en=(0,x.W)(()=>!Z&&!!u&&(null==I||!I.isMembershipTrial)),es=(0,v.w)(e=>{ei(e),m.J.trackSwitchInterval(e)});return(0,a.jsxs)("div",{className:(0,d.cn)("flex flex-col w-full relative items-center"),children:[0!==ea.length&&(0,a.jsx)(s.t,{classNames:{root:"self-center mb-[44px] max-[1200px]:mb-[24px]",item:"flex gap-[5px] text-[13px]"},value:et,onChange:es,options:ee}),0===r.length?(0,a.jsx)(n.R,{size:24,className:" w-full min-h-[620px]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,d.cn)("grid grid-cols-1 md:grid-cols-2 flex-1 max-w-full w-full",Q?"gap-y-2":"gap-2","min-[1200px]:grid-cols-4","pricing"===_&&" px-0"),children:ea.filter(e=>e.plan!==S.OL.TEAM).map(e=>{let t=F&&e.plan===S.OL.PRO&&!u;return(0,a.jsx)(V.t,{plan:e,isAnnually:et,isCurrentHighlight:t},e.plan)})}),(0,a.jsxs)("div",{className:(0,d.cn)("flex flex-row gap-2 items-center justify-center  w-full",Q?"flex-col mt-2":"flex-row mt-6"),children:[ea.filter(e=>e.plan===S.OL.TEAM).map(e=>(0,a.jsx)(H,{isAnnually:et},e.plan)),(K||u&&!Z)&&!O&&(0,a.jsx)(D,{})]})]}),t&&(0,a.jsxs)("div",{className:(0,d.cn)("w-full mt-6 max-md:flex-col text-center flex-shrink-0 flex items-center gap-[12px]","justify-between"),children:[(0,a.jsx)("div",{className:(0,d.cn)("inline-block text-[13px] leading-[18px] text-[var(--text-tertiary)]",!en&&"mx-auto"),children:(0,a.jsx)(L.p,{S:M.I.t("Having a problem? <help>Go to Help center</help>."),components:{help:e=>(0,a.jsx)("a",{href:l.TE.BILLING_ISSUE,className:"text-[13px] leading-[18px] text-[var(--text-tertiary)] underline me-1",target:"_blank",rel:"noreferrer",children:e})}})}),(0,a.jsx)("div",{className:"inline-flex items-center gap-[8px] ",children:en&&(0,a.jsx)(W,{onUnsubscribe:er})})]})]})},W=e=>{let{onUnsubscribe:t}=e,i=(0,w.GV)(b.R.selectors.cancelAtPeriodEnd),n=(0,w.GV)(b.R.selectors.paymentPlatform),{open:s}=(0,f.s)(_.X),[l,o]=(0,E.useState)(!1),c=(0,v.w)(()=>n===C.a.stripe||(s({title:M.I.t("Unable to manage subscription"),text:M.I.t("This subscription was made through {platform}. Please manage it on the corresponding platform.",{platform:(0,I.BN)(n)}),btnText:M.I.t("Got it")}),!1)),d=(0,v.w)(async()=>{if((0,p.C)({eventName:"subscription_management"}),c())try{o(!0);let e=await y.F.SubscriptionService.billingPage({});window.open(e.url,"_blank","noreferrer noopener")}catch(e){(0,g.oR)({variant:"error",title:u.P.formatErrorToString(e)})}finally{o(!1)}});return n&&n!==C.a.stripe?null:(0,a.jsxs)(a.Fragment,{children:[!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"small",className:"outline-0 bg-transparent text-[13px] text-[var(--text-tertiary)] hover:opacity-100",onClick:t,children:M.I.t("Cancel subscription")}),(0,a.jsx)("span",{className:"w-[1px] h-[16px] bg-[var(--border-dark)]"})]}),(0,a.jsx)(r.A,{variant:"outline",size:"small",className:"outline-0 bg-transparent text-[13px] text-[var(--text-tertiary)] hover:opacity-100",icon:(0,a.jsx)(P.A,{size:16,color:"var(--icon-tertiary)"}),iconPosition:"right",loading:l,onClick:d,children:M.I.t("Edit billing")})]})}},51304:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var a=i(2635),r=i(46832),n=i(65623),s=i(56595),l=i(99515);function o(e){let{mv:t,number:i,height:s}=e,l=(0,r.G)(t,e=>{let t=(10+i-e%10)%10,a=t*s;return t>5&&(a-=10*s),a});return(0,a.jsx)(n.P.span,{style:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",y:l},children:i})}function c(e){let{place:t,value:i,height:r}=e,n=Math.floor(i/t),c=(0,s.z)(n,{stiffness:500,damping:50,mass:.6});return(0,l.useEffect)(()=>{c.set(n)},[c,n]),(0,a.jsx)("div",{style:{height:r,position:"relative",width:"1ch",fontVariantNumeric:"tabular-nums"},children:Array.from({length:10},(e,t)=>(0,a.jsx)(o,{mv:c,number:t,height:r},t))})}function d(e){let{value:t=99,fontSize:i=32,padding:r=1,gap:n=0,borderRadius:s=4,horizontalPadding:l=0}=e,o=i+r,d=t<10?[1]:t<100?[10,1]:t<1e3?[100,10,1]:[1e3,100,10,1];return(0,a.jsxs)("div",{dir:"ltr",style:{position:"relative",display:"inline-block"},children:[(0,a.jsx)("div",{style:{fontSize:i,display:"flex",gap:n,overflow:"hidden",borderRadius:s,paddingLeft:l,paddingRight:l,lineHeight:1},children:d.map(e=>(0,a.jsx)(c,{place:e,value:t,height:o},e))}),(0,a.jsx)("div",{style:{pointerEvents:"none",position:"absolute",top:0,bottom:0,left:0,right:0}})]})}},70564:(e,t,i)=>{"use strict";i.d(t,{n:()=>Y});var a=i(2635),r=i(76743),n=i(78308),s=i(41574),l=i(68065),o=i(30078),c=i(15585),d=i(15038),u=i(80926),p=i(86239),m=i(51416),x=i(75958),f=i(9205),h=i(81140),v=i(21284),g=i(66555),y=i(98432),w=i(34143),b=i(14496),C=i(68720),j=i(57271),S=i(23757),I=i(86154),N=i(29313),k=i(18431),T=i(68826),_=i(17808),M=i(43517),L=i(7487),P=i(14949);let E=null,A=!1;function R(){return(0,a.jsxs)("div",{className:"fixed inset-0 bg-opacity-50 flex items-center justify-center z-[99999] bg-[var(--background-mask)]",children:[(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full bg-[var(--background-tsp-menu-white,rgba(255,255,255,0.08))] backdrop-blur-[20px]"}),(0,a.jsx)("div",{className:"flex w-[400px] h-[180px] pt-8 pb-5 justify-center items-center gap-2 rounded-[20px] border border-[var(--border-main)] bg-[var(--background-menu-white)] shadow-[0px_8px_32px_0px_var(--shadow-XS)] relative z-10",children:(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[(0,a.jsx)(L.R,{color:"var(--text-primary)"}),(0,a.jsx)("p",{className:'text-[var(--text-primary)] text-center font-["SF_Pro"] text-base font-[600] leading-[22px] ml-2',children:j.I.t("Switching, please wait…")})]})})]})}let F={show:()=>{A||(A=!0,(function(){if(!E){let e=document.createElement("div");document.body.appendChild(e),E=P.createRoot(e)}return E})().render((0,a.jsx)(R,{})))},hide:()=>{A&&(A=!1,E&&(E.unmount(),E=null))}};var U=i(68209),D=i(33890),V=i(19562);function O(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsxs)("g",{clipPath:"url(#d2e3b60e7660f770ceb35023cb78c8de0)",children:[(0,a.jsx)("path",{d:"M18.1688 8.33357C18.5494 10.2013 18.2782 12.1431 17.4003 13.8351C16.5225 15.527 15.0912 16.8669 13.3451 17.6313C11.5989 18.3957 9.64349 18.5384 7.80489 18.0355C5.96628 17.5327 4.35563 16.4147 3.24153 14.8681C2.12744 13.3214 1.57724 11.4396 1.68269 9.53639C1.78814 7.63318 2.54287 5.82364 3.82101 4.40954C5.09916 2.99545 6.82345 2.06226 8.70636 1.76561C10.5893 1.46897 12.517 1.82679 14.168 2.7794",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M7.5 9.16634L10 11.6663L18.3333 3.33301",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"d2e3b60e7660f770ceb35023cb78c8de0",children:(0,a.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}O._id="d2e3b60e7660f770ceb35023cb78c8de";var z=i(19463),H=i(85262);let B={src:"https://files.manuscdn.com/webapp/_next/static/media/freeTrialBg.13f56482.webp"};var W=i(73518),G=i(17457),Z=i(99515);function K(e){let{onDisposed:t,onConfirm:i,planKey:s}=e,[l,o]=(0,Z.useState)(!1),{getPlanInfo:c,getTrialInfo:u}=(0,_.S)(),p=c(s),m=u(s),h=(0,x.w)(async()=>{o(!0);try{await i()}catch(e){(0,f.oR)({variant:"error",title:d.P.formatErrorToString(e)}),o(!1)}});return p&&m?(0,a.jsxs)(D.l,{onDisposed:t,width:500,closeIconVisible:!0,className:"rounded-[20px] bg-[var(--background-menu-white)]",children:[(0,a.jsx)("div",{className:"absolute -z-10 inset-0 pointer-events-none",style:{backgroundSize:"auto 100%",backgroundRepeat:"repeat",backgroundPosition:"left",backgroundImage:"url(".concat(B.src,")")}}),(0,a.jsxs)("div",{className:"flex flex-col items-center px-6 pb-6 pt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 mb-6",children:[(0,a.jsx)(H.g,{size:48,color:"var(--icon-primary)"}),(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-[28px] leading-[34px] font-normal text-center font-serif",children:j.I.t("How the free trial works")})]}),(0,a.jsxs)("div",{className:"rounded-[16px] border-[0.5px] border-[var(--border-dark)] bg-[var(--background-menu-white)] flex flex-col gap-4 p-4",children:[(0,a.jsxs)("div",{className:"flex gap-2.5 items-start",children:[(0,a.jsx)(O,{size:20,color:"var(--icon-secondary)",className:"mt-[2px]"}),(0,a.jsxs)("div",{className:"flex flex-col gap[2px] flex-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-[16px] leading-[22px] font-medium",children:j.I.t("Today")}),(0,a.jsxs)("div",{className:"text-[var(--text-secondary)] text-[14px] leading-[22px] flex items-center gap-[8px]",children:[(0,a.jsx)(U.p,{S:j.I.t("Try {product} {plan} FREE for {day} days!"),data:{product:V.KR,plan:p.planName||"",day:m.days}}),(0,a.jsx)(n.m,{title:j.I.t("During the free trial period, you will receive extra {credits} monthly credits.",{credits:m.credits}),children:(0,a.jsx)(W.A,{size:14,color:"var(--icon-secondary)",className:"cursor-help"})})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2.5 items-start",children:[(0,a.jsx)(G.A,{size:20,color:"var(--icon-secondary)",className:"mt-[2px]"}),(0,a.jsxs)("div",{className:"flex flex-col gap-[2px] flex-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-[16px] leading-[22px] font-medium",children:j.I.t("Day 4")}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)] text-[14px] leading-[22px]",children:j.I.t("Receive an email reminder that your trial is ending soon.")})]})]}),(0,a.jsxs)("div",{className:"flex gap-2.5 items-start",children:[(0,a.jsx)(z.L,{size:20,color:"var(--icon-secondary)",className:"mt-[2px]"}),(0,a.jsxs)("div",{className:"flex flex-col gap-[2px] flex-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-[16px] leading-[22px] font-medium",children:j.I.t("Day 7")}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)] text-[14px] leading-[22px]",children:j.I.t("You'll be charged when your {plan} plan starts, unless you choose to cancel.",{plan:p.planName||""})})]})]})]}),(0,a.jsx)("div",{className:"w-full flex items-center justify-center mt-[24px]",children:(0,a.jsx)(r.A,{color:"black",shape:"round",size:"large",className:"w-full",loading:l,onClick:()=>{h()},children:j.I.t("Get started for free")})})]})]}):null}function Y(e){let{className:t,planType:i,isAnnually:L,isPopular:P=!1}=e,{disabled:E,btnText:A,btnLoading:R,subscribeType:D,disabledTooltip:V}=function(e,t){var i;let a=(0,w.nW)(e,t),r=(0,v.GV)(S.R.selectors.membershipVersion),n=(0,v.GV)(S.R.selectors.nextMembershipVersion),s=(0,v.GV)(S.R.selectors.isVip),l=(0,v.GV)(S.R.selectors.nextMembershipInterval),{isLogin:o}=(0,v.GV)(S.R.selectors.authStatus),c=(0,v.GV)(S.R.selectors.paymentPlatform),d=(0,v.GV)(S.R.selectors.disablePayment),u=(0,v.GV)(S.R.selectors.cancelAtPeriodEnd),p=(0,v.GV)(S.R.selectors.userInfo),m=(0,v.GV)(k.u.selectors.role),x=(0,v.GV)(S.R.selectors.planKey),f=(0,w.i7)(x),h=(0,w.i7)(a),_=(0,v.GV)(S.R.selectors.isTeamAccount),M=(0,v.GV)(g.M.selectors.loadingKey),L=!!(M&&M!==a),P=M===a,E=r===I.b.Free,A=null===(i=T.h3.find(e=>e.plan===(0,w.wZ)(a)))||void 0===i?void 0:i.planName,R=(0,v.GV)(N.u.currentTrialPlan),F="",U=(0,w.wZ)(x)===e,D=(0,v.GV)(S.R.selectors.isTrial);if(!o)return{subscribeType:y.v6.upgrade,disabled:!1,btnText:e===y.OL.FREE?j.I.t("Try now"):e===y.OL.TEAM?j.I.t("Learn more"):j.I.t("Get started")};if(d)return F=j.I.t("The payment service is currently unavailable"),{subscribeType:y.v6.notSupport,disabled:!0,btnText:j.I.t("Unavailable"),disabledTooltip:F};if((null==p?void 0:p.subscriptionStatus)===C.it.PastDueSubscriptionStatus)return{subscribeType:y.v6.pastDueSubscription,btnText:j.I.t("Upgrade to {planName}",{planName:A})};if(_)return e===y.OL.TEAM&&m===b.mb.OWNER?{subscribeType:y.v6.addSeats,disabled:!1,btnText:j.I.t("Add seats")}:{subscribeType:y.v6.switchToPersonal,disabled:!1,btnText:j.I.t("Switch to personal")};if(e===y.OL.TEAM)return{subscribeType:y.v6.init,disabled:!1,btnText:j.I.t("Get Team")};if(!(!c||c===I.a.stripe)&&!E)return{subscribeType:y.v6.notSupport,disabled:!0,btnText:j.I.t("Unavailable"),disabledTooltip:"live_event"===c?j.I.t("Event Status"):j.I.t("Unsupported payment platform: {platform}",{platform:c})};if(null==p?void 0:p.isMembershipTrial)return{subscribeType:y.v6.notSupport,disabled:!0,btnText:j.I.t("Unavailable")};if(e===y.OL.FREE)return s?{subscribeType:y.v6.notSupport,disabled:!0,btnText:j.I.t("Unavailable")}:{subscribeType:y.v6.notSupport,disabled:!0,btnText:j.I.t("Current plan")};if(u&&r!==I.b.Free)return h<f?{subscribeType:y.v6.reactiveDowngrade,btnText:j.I.t("Reactivate {planName}",{planName:A}),disabled:L,btnLoading:P}:h>f?{subscribeType:y.v6.reactiveUpgrade,btnText:j.I.t("Reactivate {planName}",{planName:A}),disabled:L,btnLoading:P}:{subscribeType:y.v6.reactive,btnText:j.I.t("Reactivate {planName}",{planName:A}),disabled:L,btnLoading:P};if(n&&!E){let e=(0,w.Tw)(n);if(a===x)return{isCurrentPlan:!0,subscribeType:y.v6.restore,btnText:j.I.t("Reactivate {planName}",{planName:A})};if(a===(0,w.nW)(e,"yearly"===l))return{subscribeType:y.v6.notSupport,disabled:!0,btnText:j.I.t("Next cycle plan")}}if(h===f)return D?{isCurrentPlan:!0,subscribeType:y.v6.same,disabled:!1,btnLoading:P,btnText:j.I.t("Purchase {plan}",{plan:A})}:{isCurrentPlan:!0,subscribeType:y.v6.same,disabled:!0,btnText:j.I.t("Current plan")};if(h<f){if((0,w.D)(x,a))return{subscribeType:y.v6.upgrade,disabled:L,btnLoading:P,btnText:j.I.t("Upgrade to {planName}",{planName:A})};{let e=j.I.t("Downgrade to {planName}",{planName:A});return U&&(e=t?j.I.t("Downgrade to annual"):j.I.t("Downgrade to monthly")),{subscribeType:y.v6.downgrade,disabled:L,btnLoading:P,btnText:e}}}let V=j.I.t("Upgrade to {planName}",{planName:A});return U&&(V=t?j.I.t("Upgrade to annual"):j.I.t("Upgrade to monthly")),e===R&&(V=j.I.t("Get started for free")),{subscribeType:r===I.b.Free?y.v6.init:y.v6.upgrade,disabled:L,btnLoading:P,btnText:V}}(i,L),O=R||E,z=(0,v.GV)(g.M.selectors.subscriptionSource),{submitSubscribe:H}=(0,_.S)(),{checkAuthStatus:B}=(0,s.J)(),{switchAccount:W}=(0,l.W9)(),G=(0,v.GV)(k.u.selectors.listTeamResponse),{open:Z}=(0,m.s)(M.u),{open:Y}=(0,m.s)(K),{initExchangeInfo:$,loadExchangeInfo:q}=(0,o.$)(),J=(0,v.GV)(N.u.currentTrialPlan),X=(0,x.w)(async()=>{let e=null==G?void 0:G.userId;if(e){try{F.show(),await W(e),$(),q()}catch(e){(0,f.oR)({title:d.P.formatErrorToString(e),variant:"error"})}setTimeout(()=>{F.hide()},800)}}),Q=(0,x.w)(async()=>{if(O||!B("webapp",{redirectUrl:h.bw.app.root()+"?paymentType=upgrade"}))return;if(D===y.v6.switchToPersonal){X();return}if(D===y.v6.addSeats){Z({type:"edit",source:z});return}if(i===y.OL.TEAM){Z({isAnnually:L,source:z});return}let e=(0,w.nW)(i,L);if(e){(0,u.C)({eventName:"upgrade_dialog_click",extData:{planKey:e,source:z}});try{if("pricing"===z?p.J.setMotivation({page:"pricing",event:"upgrade",reason:"upgrade"}):"session"===z?p.J.setMotivation({page:"session",event:"schedule_task_create",reason:"task_limit"}):"settings"===z&&p.J.setMotivation({page:"settings",event:"schedule_task_manage",reason:"task_limit"}),J===i){let t=p.J.getMotivation(!0);p.J.setMotivation({...t,reason:"free_trial"}),Y({planKey:e,onConfirm:async()=>{await H(D,{planKey:e})}});return}await H(D,{planKey:e})}catch(e){(0,f.oR)({variant:"error",title:d.P.formatErrorToString(e)})}}});return(0,a.jsx)(n.m,{title:V?(0,a.jsx)(U.p,{S:V,components:{contact:e=>(0,a.jsx)("a",{className:"underline hover:opacity-80 active:opacity-70",href:h.bw.feedback.issueType("FEATURE_VIP_OR_PAYMENT"),target:"_blank",rel:"noopener noreferrer",children:e})}}):null,children:(0,a.jsx)("span",{className:(0,c.cn)("flex w-full flex-col",t),children:(0,a.jsx)(r.A,{color:P?"brand":"black",size:i===y.OL.TEAM?"small":"large",shape:"round",disabled:R||O,loading:R,className:(0,c.cn)({"text-[13px]":i===y.OL.TEAM}),onClick:async()=>{await Q()},children:(0,a.jsx)("span",{children:A})})})})}},10417:(e,t,i)=>{"use strict";i.d(t,{v:()=>v});var a=i(2635),r=i(33890),n=i(17260);i(19562);var s=i(68065),l=i(15585),o=i(80926),c=i(86239),d=i(21284),u=i(66555),p=i(90264),m=i(57271),x=i(8398),f=i(99515),h=i(75419);let v=e=>{let{onDisposed:t,title:i,source:v,featureList:g,motivation:y}=e,w=(0,d.jL)(),{fetchUserInfo:b}=(0,s.W9)();return(0,f.useEffect)(()=>{(0,o.C)({eventName:"upgrade_dialog_show",extData:{source:v}}),w(u.M.actions.setSubscriptionSource(v)),b()},[v]),(0,f.useEffect)(()=>(p.T.on("subscriptionChange",()=>{t()}),()=>{p.T.off("subscriptionChange")}),[t]),(0,f.useEffect)(()=>{y&&c.J.setMotivation(y)},[y]),(0,a.jsx)(r.l,{onDisposed:t,closeIconVisible:!1,overlayClassName:"",className:(0,l.cn)("flex pt-0 flex-col max-w-full w-full h-full  bg-[var(--background-gray-main)] shadow-[0px_8px_32px_0px_var(--shadow-XS)] overflow-hidden","rounded-none max-h-[100%] h-[100%] "),headerClassName:"py-0 ps-4 md:pl-8 pe-[15%] w-full",title:null,children:(0,a.jsxs)("div",{className:"flex px-1  pb-6 flex-col flex-1  w-full h-[calc(100vh)] overflow-y-auto",children:[(0,a.jsx)(n.K,{className:(0,l.cn)("absolute z-50 top-[20px] ltr:right-[12px] rtl:left-[12px]","rounded-[100px] bg-[var(--background-menu-white)] shadow-[0px_0px_1.25px_0px_var(--shadow-M),_0px_5px_16px_0px_var(--shadow-M)]"),title:m.I.t("Close"),icon:x.A,onClick:()=>{t()}}),(0,a.jsx)("div",{className:"flex-1 w-full flex flex-col items-center justify-center px-4",children:(0,a.jsxs)("div",{className:(0,l.cn)("max-w-full w-[1400px] m-auto overflow-hidden","w-[1400px]"),children:[(0,a.jsx)("div",{className:"pt-6 mb-[24px] text-[var(--text-primary)] text-center md:text-[32px] font-georgia text-2xl font-[400] leading-[34px] shrink-0",children:i||m.I.t("Upgrade your plan for more credits")}),(0,a.jsx)(h.m,{featureList:g,planListHelperTips:!0})]})})]})})}},85852:(e,t,i)=>{"use strict";i.d(t,{f:()=>S});var a=i(2635),r=i(76743),n=i(33890),s=i(38933),l=i(93578),o=i(19737),c=i(19562),d=i(15585),u=i(39610),p=i(85078),m=i(51416),x=i(63364),f=i(75958),h=i(93347),v=i(25080),g=i(1518),y=i(57271),w=i(83532),b=i(99515),C=i(46859);function j(e){return(0,a.jsxs)(n.l,{onDisposed:e.onDisposed,width:440,closeIconVisible:!1,headerClassName:"p-0",className:"flex flex-col items-center px-8 py-10",children:[(0,a.jsx)(C.f,{size:80}),(0,a.jsx)("h2",{className:"text-[20px] leading-[26px] text-[var(--text-primary)] font-bold text-center mt-6 mb-2",children:y.I.t("Submitted Successfully")}),(0,a.jsx)("p",{className:"mb-12 text-[14px] leading-[22px] font-normal text-[var(--text-tertiary)]",children:y.I.t("We've received your inquiry and will contact you shortly via email.")}),(0,a.jsx)(r.A,{size:"large",onClick:e.onDisposed,className:"w-[300px]",children:y.I.t("Got it")})]})}function S(e){var t;let{cb:i,onDisposed:C}=e,S=[{label:y.I.t("I'd love to learn more about {productName} team",{productName:c.KR}),value:"I'd love to learn more about Manus Team"},{label:y.I.t("I'm interested in {productName} enterprise (coming soon)",{productName:c.KR}),value:"I'm interested in Manus Enterprise (coming soon)"},{label:y.I.t("I'd like to schedule a demo"),value:"I'd like to schedule a demo"},{label:y.I.t("I need help choosing a plan"),value:"I need help choosing a plan"},{label:y.I.t("Other"),value:"Other"}],I=["<100","100-299","300-1999","2000+"],[N,k]=(0,b.useState)(I[0]),[T,_]=(0,b.useState)(S[0].value),{run:M,isLoading:L}=(0,p.W)(),{open:P}=(0,m.s)(j),E={firstName:[{required:!0,message:y.I.t("Please enter your first name")}],lastName:[{required:!0,message:y.I.t("Please enter your last name")}],email:[{required:!0,message:y.I.t("Please enter your email")},{validator:u.xf,message:y.I.t("Invalid email address.")}],helpContent:[{required:!0,message:y.I.t("Please enter content")}]},{formValues:A,formError:R,handleValidate:F,handleChange:U}=(0,x.m)({initValues:{firstName:"",lastName:"",email:"",helpContent:""},validator:E}),D=(0,f.w)(()=>{F("onValidate",A)||M(async()=>{await h.F.UserPublicService.submitFeedback({type:g.MW.TEAM_ISSUE,title:T,content:A.helpContent,email:A.email,extraData:{firstName:A.firstName||"",lastName:A.lastName||"",companySize:N}}),null==C||C(),i&&i(),P()})});return(0,a.jsxs)(n.l,{title:y.I.t("Get in touch with sales"),onDisposed:C,headerClassName:"px-5",width:450,children:[(0,a.jsxs)("div",{className:"px-5 pb-3 flex flex-col gap-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:y.I.t("We're here to answer your questions and find the right plan for your team.")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex gap-4 [&>*]:flex-1",children:[(0,a.jsx)(v.ZQ,{id:"firstName",error:R.firstName,value:A.firstName,onChange:e=>{U("firstName",e.target.value)},onBlur:()=>F("onBlur",A),label:y.I.t("First name"),inputCls:"bg-[var(--fill-tsp-white-main)]"}),(0,a.jsx)(v.ZQ,{id:"lastName",error:R.lastName,value:A.lastName,onChange:e=>{U("lastName",e.target.value)},onBlur:()=>F("onBlur",A),label:y.I.t("Last name"),inputCls:"bg-[var(--fill-tsp-white-main)]"})]}),(0,a.jsx)(v.ZQ,{id:"email",error:R.email,value:A.email,onChange:e=>{U("email",e.target.value)},onBlur:()=>F("onBlur",A),label:y.I.t("Work email"),inputCls:"bg-[var(--fill-tsp-white-main)]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"w-full flex items-center justify-between gap-[12px] mb-[10px]",children:y.I.t("Company size")}),(0,a.jsx)("div",{className:"flex gap-2 [&>*]:flex-1",children:I.map(e=>(0,a.jsx)(r.A,{variant:"outline",className:(0,d.cn)(N===e&&"bg-[var(--fill-tsp-white-light)]"),onClick:()=>k(e),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"w-full flex items-center justify-between gap-[12px]",children:y.I.t("How can we help?")}),(0,a.jsx)(l.A,{content:(0,a.jsx)(s.r,{items:S.map(e=>({label:e.label,checked:e.value===T,onClick:()=>{_(e.value)}}))}),children:(0,a.jsxs)("div",{className:"flex items-center ps-4 pe-3 py-2 bg-[var(--fill-tsp-white-main)] rounded-[10px]",children:[(0,a.jsx)("span",{className:"flex-1 whitespace-nowrap overflow-hidden text-ellipsis",children:null===(t=S.find(e=>e.value===T))||void 0===t?void 0:t.label}),(0,a.jsx)(w.A,{size:16})]})}),(0,a.jsx)(v.eI,{id:"helpContent",error:R.helpContent,children:(0,a.jsx)("div",{className:(0,d.cn)("w-full rounded-[10px] bg-[var(--fill-tsp-white-main)] max-h-[260px] overflow-y-auto",R.helpContent&&"ring-[1.5px] ring-[var(--Button-secondary-error-border)]"),children:(0,a.jsx)(o.T,{value:A.helpContent,onChange:e=>{U("helpContent",e.target.value)},onBlur:()=>F("onBlur",A),placeholder:y.I.t("What would you like to learn more about?"),autoResize:!0,className:(0,d.cn)("leading-[22px] resize-none border-none overflow-hidden","focus-visible:ring-0 focus-visible:ring-offset-0")})})})]})]}),(0,a.jsxs)("div",{className:"p-5 flex gap-[10px] [&>*]:flex-1",children:[(0,a.jsx)(r.A,{color:"gray",onClick:()=>C(),children:y.I.t("Cancel")}),(0,a.jsx)(r.A,{color:"black",loading:L,onClick:()=>D(),children:y.I.t("Send request")})]})]})}},87786:(e,t,i)=>{"use strict";i.d(t,{g:()=>M});var a=i(2635),r=i(76743),n=i(33890),s=i(41661),l=i(61640),o=i(19562),c=i(2696),d=i(15585),u=i(84974),p=i(15038),m=i(51416),x=i(75958),f=i(9205);function h(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 7",fill:"none",width:2*i,height:i,color:t,...r,children:(0,a.jsx)("path",{d:"M5.50947 5.58726C6.30437 6.47454 7.69383 6.47454 8.48873 5.58726L13.4943 0H0.503906L5.50947 5.58726Z",fill:"currentColor"})})}h._id="49e61f32a29278ab08fd5b9f1cad6ae2";var v=i(19463),g=i(21284),y=i(98432),w=i(34143),b=i(17808),C=i(18431),j=i(85852),S=i(57271),I=i(68209),N=i(20948),k=i(21151),T=i(99515),_=i(22523);function M(e){var t,i,r;let{onDisposed:s}=e,l=(0,g.GV)(C.u.selectors.currentTeamInfo),[c,d]=(0,T.useState)(o.Q9.DEFAULT_CREDITS),[u,p]=(0,T.useState)(null!==(t=null==l?void 0:l.autoDeduction)&&void 0!==t&&t),[m,x]=(0,T.useState)(null!==(i=null==l?void 0:l.singleDeductionAmount)&&void 0!==i?i:o.ep.MIN_SINGLE_AMOUNT),[f,h]=(0,T.useState)(null!==(r=null==l?void 0:l.monthlyDeductionLimit)&&void 0!==r?r:o.ep.DEFAULT_MAX_MONTH_DEDUCTION);return l?(0,a.jsx)(n.l,{className:"border border-[var(--border-main)] bg-[var(--background-gray-main)]",onDisposed:s,width:500,children:(0,a.jsxs)("div",{className:"flex flex-col gap-5 px-8 pb-8",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-center font-[Georgia] text-[32px] leading-[34px]",children:S.I.t("Buy add-on credits")}),(0,a.jsx)(L,{credits:c,onCreditsChange:d,children:(0,a.jsx)(P,{item:{plan:y.zl.TEAM_ADDON,price:c/100,credits:c},autoDeductionConfig:{enableAutoDeduction:u,singleAmount:m,monthLimit:f}})}),(0,a.jsx)(_.n,{enableAutoDeduction:u,onEnableAutoDeductionChange:p,singleAmount:m,monthLimit:f,autoDeductionChange:(e,t)=>{x(e),h(t)}}),(0,a.jsx)(E,{onDisposed:s})]})}):null}function L(e){let{credits:t,onCreditsChange:i,children:r}=e,n=(0,T.useRef)(null),c=t/(o.Q9.MAX_CREDITS-o.Q9.MIN_CREDITS)*100,p=(0,x.w)(e=>{if((0,N.A)(e))return;let t=100*Math.ceil(Number(e)/100),a=t;t<o.Q9.MIN_CREDITS?a=o.Q9.MIN_CREDITS:t>o.Q9.MAX_CREDITS&&(a=o.Q9.MAX_CREDITS),i(a),n.current&&(n.current.value=a.toString(),n.current.size=a.toString().length+1)}),m=(0,x.w)(e=>{if(!n.current)return;let t=e.target.value.replace(/[^0-9]/g,"");n.current.value=t,n.current.size=t.length+1}),f=(0,x.w)(()=>{n.current&&n.current.focus()}),g=t/100;return(0,a.jsxs)("div",{className:"flex flex-col gap-5 w-full rounded-2xl border px-4 pt-5 pb-5 bg-[var(--background-card-gray)]",children:[(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("div",{className:"h-12",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:(0,d.cn)("w-fit flex flex-col items-center absolute -translate-x-1/2"),style:{left:"calc(".concat(c,"% + 1px)")},children:[(0,a.jsx)("div",{className:"bg-[var(--Tooltips-main)] rounded-lg flex justify-center items-center",children:(0,a.jsxs)("div",{className:"group flex-1 text-sm font-semibold flex items-center gap-1 ps-3 pe-2 py-[10px] cursor-text ",onClick:()=>{f()},children:[(0,a.jsx)(s.p,{onInputRef:n,maxLength:7,size:t.toString().length+1,className:(0,d.cn)("text-[var(--text-white)] border-none text-center bg-[transparent]  rounded-none h-[20px] leading-5 w-auto p-0","focus:outline-none focus:ring-0 focus:border-none","group-hover:underline group-hover:underline-offset-2"),defaultValue:t,onChange:m,onBlur:e=>p(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t;p(null===(t=n.current)||void 0===t?void 0:t.value)}}}),(0,a.jsx)(k.A,{size:14,color:"var(--icon-white-tsp)"})]})}),(0,a.jsx)(h,{size:7,color:"var(--Tooltips-main)"})]})})}),(0,a.jsx)(l.u,{className:"h-[20px] w-full relative flex items-center cursor-pointer",value:t,min:o.Q9.MIN_CREDITS,max:o.Q9.MAX_CREDITS,step:o.Q9.CREDITS_STEP,onValueChange:e=>{void 0===e||e<o.Q9.MIN_CREDITS||e>o.Q9.MAX_CREDITS||(i(e),n.current&&(n.current.value=e+""))},classNames:{track:"relative flex-grow h-2 rounded-full bg-[var(--fill-tsp-white-main)]",range:"absolute bg-[var(--icon-primary)] rounded-full h-full",thumb:"border-none drop-shadow-none active:outline-none w-[16px] h-[16px] bg-[var(--text-white)] "}}),(0,a.jsxs)("div",{className:"flex justify-between mt-[6px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.L,{size:16,color:(0,d.cn)("var(--text-tertiary)")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:u.f.formatCredits(o.Q9.MIN_CREDITS)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.L,{size:16,color:(0,d.cn)("var(--text-tertiary)")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:u.f.formatCredits(o.Q9.MAX_CREDITS)})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 border-t border-[var(--border-dark)] px-4 pt-5 ",children:[(0,a.jsxs)("div",{className:"flex justify-between  ",children:[(0,a.jsx)("div",{className:"text-[16px] text-[var(--text-secondary)] leading-[22px] font-semibold",children:S.I.t("Credits")}),(0,a.jsx)("div",{className:"text-[18px] text-[var(--text-primary)] leading-6 font-semibold",children:u.f.formatCredits(t)})]}),(0,a.jsxs)("div",{className:"flex justify-between ",children:[(0,a.jsx)("div",{className:"text-[16px] text-[var(--text-secondary)] leading-[22px] font-semibold",children:S.I.t("Total amount")}),(0,a.jsx)("div",{className:"text-[18px] text-[var(--text-primary)] leading-6 font-semibold",children:(0,w.$g)(g)})]})]}),r]})}function P(e){let{item:t,autoDeductionConfig:i}=e,{enableAutoDeduction:n,singleAmount:s,monthLimit:l}=i,[o,d]=(0,T.useState)(!1),{buyAddonCredits:u}=(0,b.S)(),{updateTeamDeductionSetting:m}=(0,c.n)(),x=async e=>{d(!0);try{await m({autoDeduction:n,singleDeductionAmount:s,monthlyDeductionLimit:l})}catch(e){(0,f.oR)({variant:"error",title:p.P.formatErrorToString(e)})}try{let i=C.u.selectors.currentTeamInfo(g.M_.getState());if(!i)return;await u({planKey:e,quantity:t.price,teamUid:i.teamUid})}catch(e){(0,f.oR)({variant:"error",title:p.P.formatErrorToString(e)})}finally{d(!1)}};return(0,a.jsx)(r.A,{size:"large",color:"black",shape:"round",onClick:()=>{x(t.plan)},loading:o,className:"max-sm:h-[32px]",children:(0,a.jsx)("span",{children:S.I.t("Buy now")})})}function E(e){let{onDisposed:t}=e,{open:i}=(0,m.s)(j.f),r=[(0,a.jsx)("p",{children:S.I.t("Only {product} membership users can buy add-on credits.",{product:o.KR})},"rule-1"),(0,a.jsx)("p",{children:S.I.t("Add-on points can only be used during the membership period and do not expire.")},"rule-2"),(0,a.jsx)("div",{children:(0,a.jsx)(I.p,{S:S.I.t("If you have any questions? <contact>Contact us for help</contact>."),components:{contact:e=>(0,a.jsx)("a",{onClick:()=>{i({cb:t})},className:"text-[var(--text-secondary)] underline underline-offset-2 cursor-pointer",children:e})}})},"rule-3")];return(0,a.jsxs)("div",{className:(0,d.cn)("w-full pt-3.5 border-t border-[var(--border-main)] flex flex-col gap-2 text-xs text-[var(--text-tertiary)]"),children:[(0,a.jsx)("div",{className:"text-[13px] leading-[18px] text-[var(--text-secondary)] font-medium",children:S.I.t("Rules")}),(0,a.jsx)("div",{className:"flex flex-col gap-0.5 w-full",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsxs)("div",{children:[t+1,"."]}),e]},t))})]})}},22523:(e,t,i)=>{"use strict";i.d(t,{n:()=>v});var a=i(2635),r=i(88387),n=i(78308),s=i(19562),l=i(15585),o=i(84974),c=i(75958),d=i(34143),u=i(57271),p=i(73518),m=i(70658);let{MIN_MONTH_LIMIT:x,MIN_SINGLE_AMOUNT:f,DEFAULT_MAX_MONTH_DEDUCTION:h}=s.ep;function v(e){let{enableAutoDeduction:t,onEnableAutoDeductionChange:i,singleAmount:s=f,monthLimit:v=h,autoDeductionChange:g}=e,y=(0,c.w)(e=>"".concat(e?(0,d.$g)(e):"$0"," = ").concat(o.f.formatCredits(100*e)," ").concat(u.I.t("credits")));return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,a.jsxs)("span",{className:"flex gap-1 items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:u.I.t("Enable auto-deduction")}),(0,a.jsx)(n.m,{title:(0,a.jsx)("div",{className:"u-break-words max-w-[300px]",children:u.I.t("To ensure uninterrupted team usage, credits will be automatically purchased when balance is depleted.")}),children:(0,a.jsx)(p.A,{size:16,color:"var(--icon-tertiary)"})})]}),(0,a.jsx)(r.d,{checked:t,onCheckedChange:i,size:"large"})]}),(0,a.jsxs)("div",{className:(0,l.cn)(" transition-all duration-300 ease-in-out ",t?"opacity-100 max-h-[78px] mt-[10px]":"opacity-0 max-h-0 overflow-hidden"),children:[(0,a.jsxs)("div",{className:(0,l.cn)("flex justify-between items-center w-full mb-2"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-1",children:(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-[13px] leading-[18px]",children:u.I.t("Single deduction amount")})}),(0,a.jsx)(m.Y,{toolTip:y,className:"w-[90px] h-8 px-3 py-2 bg-[var(--fill-tsp-white-main)] rounded-lg flex items-center",inputClassName:"text-start rounded-none border-none p-0 h-auto shadow-none bg-transparent text-[var(--theme-text-primary)] text-sm font-normal focus-visible:ring-0 w-full",prefix:(0,a.jsx)("span",{className:"text-[var(--theme-text-quaternary,#8C8C8C)] text-sm font-medium select-none",children:"$"}),defaultValue:s,onChange:e=>{g(e,v>e?v:e)},controls:!1,min:f})]}),(0,a.jsxs)("div",{className:(0,l.cn)("flex justify-between items-center w-full"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-1",children:(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-[13px] leading-[18px]",children:u.I.t("Monthly deduction maximum")})}),(0,a.jsx)(m.Y,{className:"w-[90px] h-8 px-3 py-2 bg-[var(--fill-tsp-white-main)] rounded-lg flex items-center",inputClassName:"text-start rounded-none border-none p-0 h-auto shadow-none bg-transparent text-[var(--theme-text-primary)] text-sm font-normal focus-visible:ring-0 w-full",toolTip:y,min:x>s?x:s,prefix:(0,a.jsx)("span",{className:"text-[var(--theme-text-quaternary,#8C8C8C)] text-sm font-medium select-none",children:"$"}),defaultValue:v,onChange:e=>{g(s,e)},controls:!1},s)]})]})]})}},70658:(e,t,i)=>{"use strict";i.d(t,{Y:()=>m});var a=i(2635),r=i(17260),n=i(41661),s=i(78308),l=i(15585),o=i(75958),c=i(20948),d=i(37134),u=i(12150),p=i(99515);function m(e){let{onChange:t,min:i,minMsg:m,max:x,maxMsg:f,defaultValue:h,controls:v=!0,prefix:g,className:y,inputClassName:w,disabled:b,toolTip:C,autoFocus:j,toolTipPlacement:S="right"}=e,[I,N]=(0,p.useState)(String(h)||""),k=(0,o.w)(e=>(0,c.A)(e)?i||0:Number(e)),T=p.useRef(null),_=(0,o.w)((e,t,i)=>{let a=k(String(e).replace(/[^0-9]/g,""));return void 0!==t&&a<t&&(a=t),void 0!==i&&a>i&&(a=i),a}),M=e=>{N(String(e).replace(/[^0-9]/g,"")),null==t||t(_(e))},L=e=>{let a=_(String(k(e)),i,x);N(String(a)),null==t||t(a)},P=_(k(I),i,x),E=!(0,c.A)(i)&&P<=i,A=!(0,c.A)(x)&&P>=x;return(0,a.jsx)(s.m,{placement:S,title:null==C?void 0:C(Number(I)),children:(0,a.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1",y),children:[v&&(0,a.jsx)(r.K,{title:E?m:"",size:"medium",variant:"outline",icon:d.A,iconClassName:"size-4",disabled:E||b,onClick:()=>M(P-1)}),(0,a.jsxs)("div",{className:"flex items-center gap-1",onClick:()=>{var e;null===(e=T.current)||void 0===e||e.focus()},children:[g,(0,a.jsx)(n.p,{onInputRef:T,className:(0,l.cn)("w-[100px] h-9 py-2 ps-4 pe-3 text-center text-[var(--text-primary)] text-sm font-[500]","bg-[var(--fill-tsp-white-main)]  rounded-lg",w),autoFocus:j,value:I,placeholder:P.toString(),onChange:e=>M(e.target.value),onBlur:e=>L(e.target.value),disabled:b})]}),v&&(0,a.jsx)(r.K,{title:A?f:"",size:"medium",variant:"outline",icon:u.A,iconClassName:"size-4",className:"w-9 p-0",disabled:A||b,onClick:()=>M(P+1)})]})})}},43517:(e,t,i)=>{"use strict";i.d(t,{u:()=>el});var a=i(2635),r=i(19562),n=i(68065),s=i(3251),l=i(2696),o=i(49873),c=i(84974),d=i(15038),u=i(86239),p=i(98637),m=i(51416),x=i(75958),f=i(9205),h=i(93347),v=i(21284),g=i(23757),y=i(66555),w=i(98432),b=i(34143),C=i(17808),j=i(18431),S=i(90264),I=i(14065),N=i(89310),k=i(68720),T=i(57271),_=i(99515),M=i(15585);function L(e){let{color:t="var(--icon-disable)",size:i=16,...r}=e;return(0,a.jsx)("svg",{viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:(0,a.jsx)("circle",{id:"Ellipse 544",cx:"10.5",cy:"10",r:"9.5",stroke:"currentColor"})})}function P(e){let{color:t="var(--icon-blue)",size:i=16,...r}=e;return(0,a.jsx)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:(0,a.jsx)("circle",{id:"Ellipse 544",cx:"10",cy:"10",r:"7",stroke:"currentColor",strokeWidth:"6"})})}L._id="cc7e6998b1855a84700567c970fdee72",P._id="450381f7b8fa3ef4bc90014bee0cfebc";var E=i(68209);function A(e){let{vm:t}=e,{teamState:i,setState:r}=t,{getPlanDiscount:n}=(0,C.S)(),s=n(w.OL.TEAM),{getPlanInfo:l}=(0,C.S)();return(0,a.jsx)("div",{className:"flex items-center w-full mt-4 mb-5 gap-3",children:[!1,!0].map((e,t)=>{let n=i.isYearly===e,o=l((0,b.nW)(w.OL.TEAM,e));return(0,a.jsxs)("div",{className:(0,M.cn)("flex-1 p-4 rounded-xl flex flex-col gap-2 cursor-pointer border clickable relative","border-[var(--border-dark)] bg-[var(--background-tsp-menu-white)]","hover:border-[var(--Button-primary-brand)] hover:bg-[var(--fill-blue)]",n&&" border-[var(--Button-primary-brand)] bg-[var(--fill-blue)]"),onClick:()=>{r({isYearly:e})},children:[n?(0,a.jsx)(P,{size:20,color:"var(--Button-primary-brand)"}):(0,a.jsx)(L,{size:20}),e&&(0,a.jsx)("div",{className:"absolute right-0 top-0 bg-[var(--fill-blue)] py-0.5 px-2 rounded-tr-xl rounded-bl-lg",children:(0,a.jsx)("div",{className:"text-[var(--text-blue)] text-xs font-medium",children:(0,a.jsx)(E.p,{S:T.I.t("Save <percent></percent>"),components:{percent:()=>(0,a.jsxs)("span",{dir:"ltr",children:[s,"%"]})}})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"text-[var(--text-primary)] text-lg font-semibold",children:["US ",(0,b.$g)(null==o?void 0:o.displayPrice)]}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)] text-sm",children:e?T.I.t("per member/year"):T.I.t("per member/month")})]})]},t)})})}var R=i(22523);function F(e){let{vm:t}=e,{teamState:i,setState:r}=t;return(0,a.jsx)(R.n,{enableAutoDeduction:i.autoDeduction,onEnableAutoDeductionChange:e=>r({autoDeduction:e}),singleAmount:i.singleDeductionAmount,monthLimit:i.monthlyDeductionLimit,autoDeductionChange:(e,t)=>{r({singleDeductionAmount:e,monthlyDeductionLimit:t})}})}function U(e){let{className:t,children:i}=e;return(0,a.jsx)("div",{className:(0,M.cn)("w-full flex p-4 flex-col gap-4 rounded-[12px] ","border border-[var(--border-dark)] bg-[var(--background-menu-white)]",t),children:i})}var D=i(76743),V=i(53708);function O(e){let{vm:t,className:i}=e,{teamState:r}=t,n=(0,v.GV)(j.u.selectors.currentTeamInfo),s=(0,v.GV)(g.R.selectors.userInfo),l=(0,v.GV)(g.R.selectors.isVip),o=(0,V.W)(()=>{if("add"===r.type||!l||(null==s?void 0:s.cancelAtPeriodEnd))return!1;for(let e of["seats","isYearly","autoDeduction","monthlyDeductionLimit","singleDeductionAmount"])if(r[e]!==(null==n?void 0:n[e]))return!1;return!0}),c=(0,V.W)(()=>"edit"===r.type?(null==s?void 0:s.cancelAtPeriodEnd)?T.I.t("Reactivate"):T.I.t("Confirm"):T.I.t("Upgrade to Team"));return(0,a.jsx)("div",{className:(0,M.cn)("flex flex-col",i),children:(0,a.jsx)(D.A,{variant:"default",size:"large",color:"black",className:(0,M.cn)("w-full ",o?"":"cursor-pointer"),disabled:o,loading:r.submitLoading,onClick:async()=>{t.handleConfirm()},children:c})})}var z=i(70658);function H(e){let{vm:t}=e,{teamState:i}=t,r=(0,x.w)(e=>e<=i.minSeats?T.I.t("Minimum {count} seats",{count:i.minSeats}):"");return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-[var(--text-secondary)]",children:T.I.t("Team seats")}),(0,a.jsx)(z.Y,{defaultValue:i.seats,toolTip:r,toolTipPlacement:"top",onChange:e=>{t.setState({seats:e}),t.calculatePrice(e)},min:i.minSeats})]})}var B=i(33890),W=i(93578),G=i(78308),Z=i(78140),K=i(81140),Y=i(85852),$=i(73518);function q(e){var t;let{onDisposed:i,children:r}=e,{getPlanInfo:n}=(0,C.S)(),s=(0,b.nW)(w.OL.TEAM,!1),l=(0,v.GV)(g.R.selectors.userInfo),o=n(s),{open:c}=(0,m.s)(Y.f);if(o)return(0,a.jsx)(B.l,{onDisposed:i,closeIconVisible:!0,overlayClassName:"",className:(0,M.cn)("p-[24px]"),headerClassName:"py-0 ps-4 pe-[15%] w-full",title:null,children:(0,a.jsxs)("div",{className:"flex flex-col max-w-full w-[410px]",children:[(0,a.jsx)("div",{className:"flex flex-col w-full gap-2 ",children:(0,a.jsxs)("div",{className:"flex items-center content-center text-[var(--text-primary)] text-[18px] font-[700] leading-[22px]",children:[(0,a.jsx)("span",{className:"font-georgia",children:o.title}),(0,a.jsx)("span",{className:"  rounded-tl-[10px] rounded-tr-[10px] rounded-br-[10px] border border-[var(--border-dark)] text-[12px] leading-[16px] text-[var(--text-tertiary)] px-[6px] ms-[6px] font-medium",children:T.I.t("Beta")})]})}),r,(0,a.jsx)("div",{className:"w-full flex flex-col gap-[6px] mt-[28px]",children:null===(t=o.benefits)||void 0===t?void 0:t.map((e,t)=>e.match&&!e.match(l)?null:(0,a.jsxs)("div",{className:"w-full flex items-start self-start gap-2",children:[(0,a.jsx)("div",{className:"flex items-center self-start mt-[3px]",children:e.icon?_.createElement(e.icon,{size:16,color:"var(--icon-primary)"}):(0,a.jsx)(Z.S,{size:16,color:"var(--icon-primary)"})}),(0,a.jsx)("div",{className:"flex-1 items-center gap-1",children:(0,a.jsxs)("div",{className:"text-[var(--text-secondary)] text-sm gap-",children:["string"==typeof e.label?(0,a.jsx)(W.A,{trigger:["hover","touch"],placement:"top",showArrow:!0,arrowProps:{className:"border-[var(--border-dark)]"},className:"w-[294px] max-w-[90%]  p-[16px] rounded-[12px] border-[0.5px] border-[var(--border-dark)] bg-[var(--background-menu-white)] shadow-[0px_4px_11px_0px_var(--shadow-M)]",disabled:!e.popover,content:e.popover,children:(0,a.jsx)("span",{className:(0,M.cn)("me-[6px]",{"underline decoration-dotted cursor-help hover:opacity-80":!!e.popover}),children:(0,a.jsx)(E.p,{S:e.label,components:{b:e=>(0,a.jsx)("span",{className:"font-[500] text-[var(--text-primary)]",children:e}),link:e=>(0,a.jsx)("a",{className:"inline-block underline hover:opacity-80 text-[var(--text-tertiary)] text-sm leading-[22px]",href:K.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})})}):e.label,!!e.badge&&(0,a.jsx)(E.p,{S:e.badge,components:{limited:e=>(0,a.jsx)("span",{className:"inline-block relative rounded-full border border-[var(--icon-disable)] bg-[var(--fill-tsp-white-light)] text-[11px] leading-[16px] text-[var(--text-primary)] px-[8px]  font-medium",children:e})}}),e.tooltip&&(0,a.jsx)(G.m,{title:e.tooltip,children:(0,a.jsx)($.A,{size:16,color:"var(--icon-tertiary)",className:"relative top-[-1px] ml-[4px] inline-block cursor-help"})})]})})]},t))}),(0,a.jsxs)("div",{className:"flex items-center mt-[26px] gap-1 text-[var(--text-tertiary)]",children:[(0,a.jsxs)("div",{className:"text-[13px]  leading-[18px]",children:[" ",T.I.t("Want to learn more?")]}),(0,a.jsx)(D.A,{variant:"link",className:"text-[var(--text-tertiary)]",onClick:()=>{c({})},children:T.I.t("Contact sales")})]})]})})}var J=i(81801);function X(e){let{className:t,vm:i}=e,{goStripeBilling:r}=(0,C.S)(),{open:n}=(0,m.s)(J.d),s=(0,v.GV)(y.M.selectors.stripeBillingLoading);return(0,v.GV)(g.R.selectors.cancelAtPeriodEnd)?null:(0,a.jsxs)("div",{className:(0,M.cn)("flex items-center justify-center gap-2.5 ",t),children:[(0,a.jsx)("div",{className:"flex-1 flex flex-row-reverse",children:(0,a.jsx)(D.A,{variant:"link",className:"text-[var(--text-tertiary)] no-underline font-normal text-[13px] leading-[18px] px-2 py-[7px]",onClick:()=>{n({onConfirm:async e=>{let{cancelReason:t,comment:a}=e;await h.F.SubscriptionService.cancel({cancelReason:t,comment:a}),await i.subscriptionChangeCallback(),i.onDisposed(),(0,f.oR)({variant:"success",title:T.I.t("Subscription cancelled.")})}})},children:T.I.t("Cancel subscription")})}),(0,a.jsx)("div",{className:"border-r h-[14px]  border-[var(--border-dark)]"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(D.A,{variant:"link",className:"text-[var(--text-tertiary)] no-underline font-normal text-[13px] leading-[18px] pxj-2 py-[7px]",onClick:r,disabled:s,children:T.I.t("Edit payment method")})})]})}function Q(e){let{onDisposed:t,children:i}=e;return(0,a.jsx)(B.l,{onDisposed:t,title:T.I.t("Edit billing"),onBack:()=>{},className:"w-[500px] max-w-[98%] rounded-[20px] border border-[var(--border-main)] bg-[var(--background-gray-main)]",headerClassName:(0,M.cn)("pb-5"),children:(0,a.jsx)("div",{className:(0,M.cn)("px-5 flex flex-col gap-3 text-sm pb-5"),children:i})})}var ee=i(88387);function et(e){let{vm:t}=e,{teamState:i,setState:r}=t,{getPlanDiscount:n}=(0,C.S)(),s=n(w.OL.TEAM),l=(0,v.GV)(j.u.selectors.currentTeamInfo),o=(0,v.GV)(g.R.selectors.membershipVersion),c=(0,v.GV)(g.R.selectors.membershipInterval),d=(0,V.W)(()=>null!=l&&!!l.nextSeats&&null!=l&&!!l.seats&&(null==l?void 0:l.nextSeats)<(null==l?void 0:l.seats)||"edit"===i.type&&"team"===o&&"yearly"===c);return(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-[var(--text-secondary)]  text-sm font-[500]",children:T.I.t("Pay annually")}),s&&(0,a.jsx)("div",{className:"flex rounded-[10px] bg-[var(--fill-blue)] py-0.5 px-2 justify-center items-center  text-[var(--text-blue)] text-xs font-[500] ",children:(0,a.jsx)(E.p,{S:T.I.t("Save <percent></percent>"),components:{percent:()=>(0,a.jsxs)("span",{dir:"ltr",children:[s,"%"]})}})})]}),(0,a.jsx)(ee.d,{size:"large",checked:i.isYearly,disabled:d,onCheckedChange:e=>{r({isYearly:e}),Promise.resolve().then(()=>{t.calculatePrice()})}})]})}var ei=i(7487),ea=i(14960);function er(e){var t;let{vm:i}=e,{teamState:r}=i,{getPlanInfo:n}=(0,C.S)(),s=n((0,b.nW)(w.OL.TEAM,r.isYearly)),l=r.seats*((null==s?void 0:s.credits)||0),o=(0,V.W)(()=>{var e;let t=new Date(1e3*Number(null===(e=r.editPreviewData)||void 0===e?void 0:e.nextPaymentAttempt));return ea.F.format(t,"PP")}),d=(0,V.W)(()=>"edit"===r.type&&r.editPreviewData?(0,b.$g)(r.editPreviewData.total):(0,b.$g)(r.seats*((null==s?void 0:s.displayPrice)||0)));return s?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-8",children:["add"===r.type?(0,a.jsxs)("div",{className:"flex flex-col ",children:[(0,a.jsx)("span",{className:"text-sm  font-[500] text-[var(--text-secondary)]",children:T.I.t("Total credits")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-[400] text-sm leading-[22px]",children:T.I.t("Shared by all team members")})]}):(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]  text-[13px] leading-[18px]",children:T.I.t("Total shared credits")}),(0,a.jsxs)("span",{className:"text-[var(--text-primary)] font-[600]",children:[c.f.formatCredits(l),(0,a.jsxs)("span",{className:"text-[14px] text-[var(--text-tertiary)] leading-[22px]  font-normal",children:["/",T.I.t("month")]})]})]}),"edit"===r.type&&r.editPreviewData&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-8",children:[(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-sm ",children:T.I.t("Difference")}),r.isCalculatingPrice?(0,a.jsx)(ei.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:(0,b.$g)(r.editPreviewData.subTotal)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center h-8",children:[(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-sm ",children:T.I.t("Tax")}),r.isCalculatingPrice?(0,a.jsx)(ei.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:(0,b.$g)(r.editPreviewData.tax)})]})]}),(0,a.jsx)("hr",{className:"mt-4 border-0 border-t border-[var(--border-dark)]"}),(0,a.jsxs)("div",{className:(0,M.cn)("flex justify-between items-center h-6","mt-2"),children:[(0,a.jsx)("span",{className:"text-[var(--text-secondary)] font-medium text-sm ",children:r.editPreviewData||r.isCalculatingPrice?T.I.t("Amount due now"):T.I.t("Total price")}),(0,a.jsxs)("span",{className:"flex items-center",children:[r.isCalculatingPrice?(0,a.jsx)(ei.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,a.jsx)("span",{className:"text-[18px] h-6 leading-6 font-semibold text-[var(--text-primary)]",children:d}),(0,a.jsxs)("span",{className:"text-[14px] leading-[22px] text-[var(--text-tertiary)]",children:["/",(null==s?void 0:s.membershipInterval)==="month"?T.I.t("month"):T.I.t("year")]})]})]}),r.editPreviewData&&(0,a.jsxs)("div",{className:"mt-[4px] flex  justify-between items-center text-[var(--text-tertiary)]  text-[13px] leading-[18px]",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[T.I.t("Next renewal date:"),r.isCalculatingPrice?(0,a.jsx)(ei.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):o]}),(0,a.jsxs)("div",{className:"flex items-center",children:[T.I.t("Renewal amount: {price}",{price:""}),r.isCalculatingPrice?(0,a.jsx)(ei.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,b.$g)(null===(t=r.editPreviewData)||void 0===t?void 0:t.nextTotal)]})]})]}):null}let{MIN_SINGLE_AMOUNT:en,DEFAULT_MAX_MONTH_DEDUCTION:es}=r.ep;function el(e){let{onDisposed:t,type:i="add",source:M,motivation:L}=e,P=(0,v.GV)(j.u.selectors.currentTeamInfo),{updateTeamDeductionSetting:E,fetchTeamInfo:R}=(0,l.n)(),{submitSubscribe:D}=(0,C.S)(),V=(0,v.GV)(g.R.selectors.isVip),{open:z}=(0,m.s)(I.l),B=(0,v.GV)(g.R.selectors.userInfo),{fetchUserInfo:W}=(0,n.W9)(),{updateCredits:G}=(0,s.O)(),Z=(0,v.jL)(),K=(0,_.useRef)(null),[Y,$]=(0,_.useState)(()=>{let t={submitLoading:!1,type:i,avatar:"",teamName:"",isYearly:!!e.isAnnually,singleDeductionAmount:en,monthlyDeductionLimit:es,autoDeduction:!1,minSeats:r.iB,seats:r.ve};if("add"===i){let e=new URL(window.location.href),i=e.searchParams.get("quantity"),a=e.searchParams.get("planKey"),n=a?Number(a)===w.zl.TEAM_YEARLY:t.isYearly;return e.searchParams.delete("quantity"),e.searchParams.delete("planKey"),window.history.replaceState({},"",e.toString()),{...t,seats:Number(i)>=r.iB?Number(i):r.ve,isYearly:n}}return"edit"===i&&null!==P?{...t,avatar:P.avatar,teamName:P.name,isYearly:P.isYearly,singleDeductionAmount:P.singleDeductionAmount,monthlyDeductionLimit:P.monthlyDeductionLimit,autoDeduction:P.autoDeduction,minSeats:P.memberCount>r.iB?P.memberCount:r.iB,seats:P.seats}:t}),J=(0,b.nW)(w.OL.TEAM,Y.isYearly),ee=(0,x.w)(async()=>{let e="",t=Y.avatarFile;if(t){var i;let a=await c.f.compressImageSize(t,128);e=(null===(i=(await c.f.fileToDataUrl(a)).split(";")[1])||void 0===i?void 0:i.replace(/^base64,/,""))||""}let a=await h.F.TeamManagementService.createTeam({avatar:t&&e?{fileName:t.name,mimeType:t.type,data:e}:void 0,name:Y.teamName||T.I.t("New Team"),seats:Y.seats,autoDeduction:Y.autoDeduction,singleDeductionAmount:Y.singleDeductionAmount,monthlyDeductionLimit:Y.monthlyDeductionLimit});if(!(null==a?void 0:a.teamUid))throw Error("Failed to create team");if(!J)return;let r=a.teamUid;await D(w.v6.init,{planKey:J,teamUid:r,quantity:Y.seats})}),ei=(0,x.w)(async()=>{await Promise.all([W(),G(),R()]),S.T.emit("subscriptionChange")}),ea=(0,x.w)(async()=>{let e=null==P?void 0:P.teamUid;if(await E({autoDeduction:Y.autoDeduction,singleDeductionAmount:Y.singleDeductionAmount,monthlyDeductionLimit:Y.monthlyDeductionLimit}),!V){if((null==B?void 0:B.subscriptionStatus)===k.it.PastDueSubscriptionStatus){z();return}if(null===J||!e){(0,f.oR)({variant:"error",title:T.I.t("Failed to change subscription plan.")});return}await D(w.v6.init,{planKey:J,teamUid:e,quantity:Y.seats});return}let{IsUpgrade:i,invoiceId:a}=await h.F.SubscriptionService.teamSubscriptionUpdate({planKey:J,quantity:Y.seats});i&&await new Promise((e,t)=>{let i=20;K.current=setInterval(async()=>{i-=2;let{status:r}=await h.F.SubscriptionService.loopTeamUpgradeStatus({teamUid:null==P?void 0:P.teamUid,invoiceId:a});r===N.zn.LoopStatus_Success&&(e(!0),K.current&&clearInterval(K.current)),(i<0||r===N.zn.LoopStatus_Failed)&&(t(Error("Subscription query timeout")),K.current&&clearInterval(K.current))},2e3)}),ei(),t(),(0,f.oR)({variant:"success",title:T.I.t("Subscription plan changed successfully.")}),ed.setState({submitLoading:!1})}),el=(0,x.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed.teamState.seats;if("add"!==i&&V){if(Y.isYearly===(null==P?void 0:P.isYearly)&&P&&e<=(null==P?void 0:P.seats)){ed.setState({isCalculatingPrice:!1,editPreviewData:void 0});return}ed.setState({isCalculatingPrice:!0}),ec()}}),eo=(0,x.w)((e,t)=>{e===Y.seats?ed.setState({editPreviewData:t,isCalculatingPrice:!1}):ed.setState({editPreviewData:void 0,isCalculatingPrice:!1})}),ec=(0,p.x)((0,x.w)(async()=>{try{let e=(0,b.nW)(w.OL.TEAM,Y.isYearly),t=Y.seats,i=await h.F.SubscriptionService.teamSubscriptionPreview({planKey:e,quantity:t});Y.seats===t&&eo(t,i)}catch(e){(0,f.oR)({variant:"error",title:d.P.formatErrorToString(e)})}ed.setState({isCalculatingPrice:!1})}),300),ed={teamState:Y,setState:e=>{$(t=>({...t,...e}))},handleConfirm:(0,x.w)(async()=>{ed.setState({submitLoading:!0});try{"add"===i?await ee():await ea()}catch(e){ed.setState({submitLoading:!1}),(0,f.oR)({variant:"error",title:d.P.formatErrorToString(e)})}}),calculatePrice:el,onDisposed:t,subscriptionChangeCallback:ei},eu=(0,v.GV)(g.R.selectors.nextMembershipInterval),ep=(0,v.GV)(g.R.selectors.membershipInterval);(0,_.useEffect)(()=>(Z(y.M.actions.setSubscriptionSource(M)),()=>{K.current&&clearInterval(K.current)}),[]),(0,_.useEffect)(()=>{L&&u.J.setMotivation(L)},[L]);let em=(0,x.w)(async()=>{if("add"===i){let e=!0;V&&(e=eu?"yearly"===eu:"yearly"===ep),ed.setState({isYearly:e})}});return((0,_.useEffect)(()=>{o.K.inited&&em()},[em,V,o.K.inited]),"add"===i)?(0,a.jsxs)(q,{onDisposed:t,vm:ed,children:[(0,a.jsx)(A,{vm:ed}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(H,{vm:ed}),(0,a.jsx)(er,{vm:ed})]}),(0,a.jsx)(O,{vm:ed,className:"mt-[20px]"})]}):(0,a.jsxs)(Q,{onDisposed:t,vm:ed,children:[(0,a.jsxs)(U,{children:[(0,a.jsx)(et,{vm:ed}),(0,a.jsx)(H,{vm:ed}),(0,a.jsx)(er,{vm:ed})]}),(0,a.jsx)(U,{children:(0,a.jsx)(F,{vm:ed})}),(0,a.jsx)(O,{vm:ed}),V&&(0,a.jsx)(X,{className:"-mb-2",vm:ed})]})}},67330:(e,t,i)=>{"use strict";i.d(t,{I:()=>w});var a=i(2635),r=i(76743),n=i(90293),s=i(33890),l=i(68065),o=i(15585),c=i(15038),d=i(51416),u=i(75958),p=i(9205),m=i(21284),x=i(23757),f=i(18431),h=i(57271),v=i(12150),g=i(43517),y=i(67819);function w(e){let{onDisposed:t,onDisposedAll:i}=e,{open:w}=(0,d.s)(g.u),b=(0,m.GV)(x.R.selectors.isTeamAccount),C=(0,m.GV)(f.u.selectors.listTeamResponse),j=(0,m.GV)(x.R.selectors.userInfo),{switchAccount:S}=(0,l.W9)(),{open:I}=(0,d.s)(n.p),N=(0,u.w)(async(e,a)=>{if((null==j?void 0:j.userId)!==e){try{i&&i(),await S(e)}catch(e){(0,p.oR)({title:c.P.formatErrorToString(e),variant:"error"})}setTimeout(()=>{null==a||a()},300)}t()}),k=(0,u.w)(()=>{I({variant:"alert",title:h.I.t("Personal account required"),content:h.I.t("Teams can only be created from a personal account. Switch to your personal profile to continue."),confirmText:h.I.t("Switch to personal"),onConfirm:async()=>((null==C?void 0:C.userId)&&N(null==C?void 0:C.userId,()=>{w({type:"add",motivation:{page:"profile",event:"upgrade",reason:"upgrade"}})}),!0),onCancel:()=>{}})});return(0,a.jsx)(s.l,{onDisposed:t,title:h.I.t("Select a workspace"),width:450,className:"flex flex-col max-[80%] sm:max-h-[680px] bg-[var(--background-gray-main)]",children:(0,a.jsxs)("div",{className:"w-full px-5 pt-3 pb-5 flex flex-col gap-5 flex-1 overflow-hidden",children:[(0,a.jsx)(y.k,{className:"flex-1 overflow-y-auto",onClick:async e=>{N(e)}}),(0,a.jsx)(r.A,{size:"large",icon:(0,a.jsx)(v.A,{size:18,color:"var(--icon-primary)"}),className:(0,o.cn)("w-full flex-shrink-0","flex min-w-[100px] min-h-10 max-h-10 py-2 px-4 justify-center items-center gap-1.5","rounded-[10px] bg-[var(--fill-white)] shadow-[0px_0.5px_3px_0px_var(--shadow-S)]","hover:bg-[var(--Button-primary-white)] hover:opacity-70 active:opacity-60 disabled:opacity-50! transition-opacity"),onClick:()=>{b?k():w({type:"add",motivation:{page:"profile",event:"upgrade",reason:"upgrade"}})},children:h.I.t("Create a team")})]})})}},67819:(e,t,i)=>{"use strict";i.d(t,{k:()=>m});var a=i(2635),r=i(87001),n=i(15585);function s(e){let{color:t="var(--icon-primary)",size:i=24,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:i,height:i,color:t,...r,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.145 6.83709C19.5111 7.2032 19.5111 7.7968 19.145 8.16291L10.6071 16.7008C10.241 17.067 9.64737 17.067 9.28125 16.7008L4.77459 12.1942C4.40847 11.8281 4.40847 11.2345 4.77459 10.8684C5.1407 10.5022 5.7343 10.5022 6.10041 10.8684L9.94416 14.7121L17.8192 6.83709C18.1853 6.47097 18.7789 6.47097 19.145 6.83709Z",fill:"currentColor"})})}s._id="50fb207e5e99a90a2dda21e764ef4f25";var l=i(21284),o=i(23757),c=i(18431),d=i(14496),u=i(57271),p=i(1566);function m(e){let{className:t,onClick:i,showArrow:m,itemsClassName:x}=e,f=(0,l.GV)(c.u.selectors.listTeamResponse),h=(0,l.GV)(o.R.selectors.userInfo);if(!f)return null;let v=(null==h?void 0:h.userId)===f.userId;return(0,a.jsxs)("div",{className:(0,n.cn)("flex py-2 px-3 flex-col items-start gap-2 flex-grow","rounded-[16px] border border-[var(--border-dark)] bg-[var(--background-menu-white)]","w-full h-full bg-[var(--background-menu-white)] rounded-2xl border border-[var(--border-dark)] flex flex-col","relative overflow-hidden",t),children:[(0,a.jsxs)("div",{className:(0,n.cn)("flex pt-4 pr-1 pb-4 pl-2 items-center gap-4","rounded-[12px]","hover:bg-[var(--fill-tsp-white-light)] transition-colors duration-200","cursor-pointer","w-full",null==x?void 0:x.container),onClick:()=>{i(f.userId)},children:[(0,a.jsx)(r.eu,{size:(null==x?void 0:x.avatar)||40,avatar:f.userAvatar,name:f.userName,className:"rounded-[99px] border-0.5 border-[var(--border-main)] overflow-hidden"}),(0,a.jsxs)("div",{className:(0,n.cn)("flex flex-col gap-0.5 flex-1 break-all",null==x?void 0:x.rightContainer),children:[(0,a.jsx)("div",{className:(0,n.cn)("text-[var(--text-primary)] text-sm font-semibold",null==x?void 0:x.name),children:f.userName}),(0,a.jsx)("div",{className:(0,n.cn)("text-[var(--text-tertiary)] text-xs",null==x?void 0:x.description),children:u.I.t("Personal")})]}),(0,a.jsxs)(a.Fragment,{children:[" ",v?(0,a.jsx)(s,{color:"var(--icon-tertiary)"}):m?(0,a.jsx)(p.A,{size:24,color:"var(--icon-tertiary)"}):null]})]}),(null==f?void 0:f.teams.length)>0&&(0,a.jsx)("div",{className:(0,n.cn)("w-full flex-shrink-0 h-[1px] bg-[var(--border-main)]",null==x?void 0:x.divider)}),null==f?void 0:f.teams.map(e=>{let{userId:t,avatar:l,name:o,type:c}=e,f=(null==h?void 0:h.userId)===e.userId;return(0,a.jsxs)("div",{className:(0,n.cn)("flex pt-4 pr-1 pb-4 pl-2 items-center gap-4","rounded-[12px]","hover:bg-[var(--fill-tsp-white-light)] transition-colors duration-200","cursor-pointer","w-full",null==x?void 0:x.container),onClick:()=>{i(t)},children:[(0,a.jsx)(r.eu,{avatar:l,name:o,size:(null==x?void 0:x.avatar)||40,className:"rounded-[8px] border-0.5 border-[var(--theme-border-primary)] bg-transparent overflow-hidden"}),(0,a.jsxs)("div",{className:(0,n.cn)("flex flex-col gap-0.5 flex-1 break-all",null==x?void 0:x.rightContainer),children:[(0,a.jsx)("div",{className:(0,n.cn)("text-[var(--text-primary)] text-sm font-semibold",null==x?void 0:x.name),children:o}),(0,a.jsx)("div",{className:(0,n.cn)("text-[var(--text-tertiary)] text-xs",null==x?void 0:x.description),children:c===d.YV.EDU?u.I.t("School"):u.I.t("Team")})]}),(0,a.jsx)(a.Fragment,{children:f?(0,a.jsx)(s,{color:"var(--icon-tertiary)"}):m?(0,a.jsx)(p.A,{size:24,color:"var(--icon-tertiary)"}):null})]},t)})]})}},4890:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var a=i(2635),r=i(76743),n=i(33890),s=i(19562),l=i(53708),o=i(51416);function c(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M41.7781 39.9389C39.111 37.2718 35.4937 35.7734 31.7218 35.7734C27.9499 35.7734 24.3326 37.2718 21.6655 39.9389C18.9984 42.606 17.5 46.2234 17.5 49.9952",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M31.7226 35.7733C36.6317 35.7733 40.6112 31.7938 40.6112 26.8847C40.6112 21.9757 36.6317 17.9961 31.7226 17.9961C26.8136 17.9961 22.834 21.9757 22.834 26.8847C22.834 31.7938 26.8136 35.7733 31.7226 35.7733Z",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M55 28V14C55 10.6863 52.3137 8 49 8H14C10.6863 8 8 10.6863 8 14V55C8 58.3137 10.6863 61 14 61H35.5",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M60.3088 47.9502H45.5891C44.4278 47.9502 43.4863 48.8917 43.4863 50.053V57.4128C43.4863 58.5742 44.4278 59.5156 45.5891 59.5156H60.3088C61.4701 59.5156 62.4116 58.5742 62.4116 57.4128V50.053C62.4116 48.8917 61.4701 47.9502 60.3088 47.9502Z",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M47.6973 47.9499V43.7443C47.6973 42.3501 48.2511 41.0129 49.237 40.027C50.2229 39.0412 51.56 38.4873 52.9543 38.4873C54.3485 38.4873 55.6857 39.0412 56.6715 40.027C57.6574 41.0129 58.2113 42.3501 58.2113 43.7443V47.9499",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}c._id="f96e9c8a0943c1514af08b56951bbfd9";var d=i(21284),u=i(18431),p=i(14496),m=i(57271),x=i(43517),f=i(67330);function h(e){let{onDisposed:t,limitType:i}=e,{open:h}=(0,o.s)(f.I),{open:v}=(0,o.s)(x.u),g=(0,d.GV)(u.u.selectors.role)===p.mb.OWNER,y=(0,l.W)(()=>"schedule"===i?g?m.I.t("Your team’s subscription plan has expired, and you cannot create new tasks. You can switch to another account or renew your subscription to restore data and access."):m.I.t("Your team’s subscription plan has expired, and you cannot create new tasks. Please switch workspace to use {product}.",{product:s.KR}):g?m.I.t("Your team’s subscription plan has expired. You can switch to another account or renew your subscription to restore data and access."):m.I.t("Your team’s subscription plan has expired. Please switch workspace to use {product}.",{product:s.KR}));return(0,a.jsx)(n.l,{width:460,onDisposed:t,closeIconVisible:!0,headerClassName:"py-0 ps-4 md:pl-8 pe-[15%] w-full",title:null,className:"flex pt-8 flex-col items-center gap-2 max-w-[90%] bg-[var(--background-gray-main)] shadow-[0px_8px_32px_0px_var(--shadow-XS)] overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col items-center px-[32px] pb-[32px]",children:[(0,a.jsx)(c,{size:72}),(0,a.jsx)("div",{className:"mt-[28px] text-[var(--text-primary)] text-2xl font-[600] leading-[30px]",children:m.I.t("Team locked")}),(0,a.jsx)("div",{className:"mt-[8px] text-[var(--text-tertiary)] text-center  text-sm leading-[22px]",children:y}),(0,a.jsxs)("div",{className:"mt-[40px] flex gap-3 items-center justify-between w-full",children:[(0,a.jsx)(r.A,{className:"flex-1",color:g?"gray":"black",onClick:()=>{h(),e.onDisposed()},children:m.I.t("Switch team")}),g&&(0,a.jsx)(r.A,{className:"flex-1",color:"black",onClick:()=>{v({type:"edit",motivation:{page:"profile",event:"upgrade",reason:"upgrade"}})},children:m.I.t("Resubscribe")})]})]})})}},93165:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a={src:"https://files.manuscdn.com/webapp/_next/static/media/BasicMembershipIcon.3f518a85.svg",height:18,width:18,blurWidth:0,blurHeight:0}},81762:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a={src:"https://files.manuscdn.com/webapp/_next/static/media/ProMembershipIcon.dafb0037.svg",height:18,width:18,blurWidth:0,blurHeight:0}},61086:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a={src:"https://files.manuscdn.com/webapp/_next/static/media/StarterMembershipIcon.970b13cd.svg",height:18,width:18,blurWidth:0,blurHeight:0}}}]);